{"version":3,"file":"index-BCOuarC2.js","sources":["../../node_modules/@remix-run/router/dist/router.js","../../node_modules/react-router/dist/index.js","../../node_modules/react-router-dom/dist/index.js","../../node_modules/@tanstack/query-core/build/modern/subscribable.js","../../node_modules/@tanstack/query-core/build/modern/utils.js","../../node_modules/@tanstack/query-core/build/modern/focusManager.js","../../node_modules/@tanstack/query-core/build/modern/onlineManager.js","../../node_modules/@tanstack/query-core/build/modern/thenable.js","../../node_modules/@tanstack/query-core/build/modern/retryer.js","../../node_modules/@tanstack/query-core/build/modern/notifyManager.js","../../node_modules/@tanstack/query-core/build/modern/removable.js","../../node_modules/@tanstack/query-core/build/modern/query.js","../../node_modules/@tanstack/query-core/build/modern/queryCache.js","../../node_modules/@tanstack/query-core/build/modern/mutation.js","../../node_modules/@tanstack/query-core/build/modern/mutationCache.js","../../node_modules/@tanstack/query-core/build/modern/infiniteQueryBehavior.js","../../node_modules/@tanstack/query-core/build/modern/queryClient.js","../../node_modules/@tanstack/react-query/build/modern/QueryClientProvider.js","../../node_modules/goober/dist/goober.modern.js","../../node_modules/react-hot-toast/dist/index.mjs","../../node_modules/lucide-react/dist/esm/defaultAttributes.js","../../node_modules/lucide-react/dist/esm/createLucideIcon.js","../../node_modules/lucide-react/dist/esm/icons/alert-triangle.js","../../node_modules/lucide-react/dist/esm/icons/arrow-left.js","../../node_modules/lucide-react/dist/esm/icons/award.js","../../node_modules/lucide-react/dist/esm/icons/bar-chart-3.js","../../node_modules/lucide-react/dist/esm/icons/book-open.js","../../node_modules/lucide-react/dist/esm/icons/brain.js","../../node_modules/lucide-react/dist/esm/icons/check-circle.js","../../node_modules/lucide-react/dist/esm/icons/clock.js","../../node_modules/lucide-react/dist/esm/icons/gamepad-2.js","../../node_modules/lucide-react/dist/esm/icons/help-circle.js","../../node_modules/lucide-react/dist/esm/icons/home.js","../../node_modules/lucide-react/dist/esm/icons/lightbulb.js","../../node_modules/lucide-react/dist/esm/icons/play.js","../../node_modules/lucide-react/dist/esm/icons/refresh-cw.js","../../node_modules/lucide-react/dist/esm/icons/shield.js","../../node_modules/lucide-react/dist/esm/icons/star.js","../../node_modules/lucide-react/dist/esm/icons/target.js","../../node_modules/lucide-react/dist/esm/icons/trophy.js","../../node_modules/lucide-react/dist/esm/icons/x-circle.js","../../node_modules/lucide-react/dist/esm/icons/x.js","../../node_modules/lucide-react/dist/esm/icons/zap.js","../../node_modules/framer-motion/dist/es/context/MotionConfigContext.mjs","../../node_modules/framer-motion/dist/es/context/MotionContext/index.mjs","../../node_modules/framer-motion/dist/es/context/PresenceContext.mjs","../../node_modules/framer-motion/dist/es/utils/is-browser.mjs","../../node_modules/framer-motion/dist/es/utils/use-isomorphic-effect.mjs","../../node_modules/framer-motion/dist/es/context/LazyContext.mjs","../../node_modules/framer-motion/dist/es/render/dom/utils/camel-to-dash.mjs","../../node_modules/framer-motion/dist/es/animation/optimized-appear/data-id.mjs","../../node_modules/framer-motion/dist/es/motion/utils/use-visual-element.mjs","../../node_modules/framer-motion/dist/es/utils/is-ref-object.mjs","../../node_modules/framer-motion/dist/es/motion/utils/use-motion-ref.mjs","../../node_modules/framer-motion/dist/es/render/utils/is-variant-label.mjs","../../node_modules/framer-motion/dist/es/animation/utils/is-animation-controls.mjs","../../node_modules/framer-motion/dist/es/render/utils/variant-props.mjs","../../node_modules/framer-motion/dist/es/render/utils/is-controlling-variants.mjs","../../node_modules/framer-motion/dist/es/context/MotionContext/utils.mjs","../../node_modules/framer-motion/dist/es/context/MotionContext/create.mjs","../../node_modules/framer-motion/dist/es/motion/features/definitions.mjs","../../node_modules/framer-motion/dist/es/motion/features/load-features.mjs","../../node_modules/framer-motion/dist/es/context/LayoutGroupContext.mjs","../../node_modules/framer-motion/dist/es/context/SwitchLayoutGroupContext.mjs","../../node_modules/framer-motion/dist/es/motion/utils/symbol.mjs","../../node_modules/framer-motion/dist/es/motion/index.mjs","../../node_modules/framer-motion/dist/es/render/dom/motion-proxy.mjs","../../node_modules/framer-motion/dist/es/render/svg/lowercase-elements.mjs","../../node_modules/framer-motion/dist/es/render/dom/utils/is-svg-component.mjs","../../node_modules/framer-motion/dist/es/projection/styles/scale-correction.mjs","../../node_modules/framer-motion/dist/es/render/html/utils/transform.mjs","../../node_modules/framer-motion/dist/es/motion/utils/is-forced-motion-value.mjs","../../node_modules/framer-motion/dist/es/value/utils/is-motion-value.mjs","../../node_modules/framer-motion/dist/es/render/html/utils/build-transform.mjs","../../node_modules/framer-motion/dist/es/render/dom/utils/is-css-variable.mjs","../../node_modules/framer-motion/dist/es/render/dom/value-types/get-as-type.mjs","../../node_modules/framer-motion/dist/es/utils/clamp.mjs","../../node_modules/framer-motion/dist/es/value/types/numbers/index.mjs","../../node_modules/framer-motion/dist/es/value/types/utils.mjs","../../node_modules/framer-motion/dist/es/value/types/numbers/units.mjs","../../node_modules/framer-motion/dist/es/render/dom/value-types/type-int.mjs","../../node_modules/framer-motion/dist/es/render/dom/value-types/number.mjs","../../node_modules/framer-motion/dist/es/render/html/utils/build-styles.mjs","../../node_modules/framer-motion/dist/es/render/html/utils/create-render-state.mjs","../../node_modules/framer-motion/dist/es/render/html/use-props.mjs","../../node_modules/framer-motion/dist/es/motion/utils/valid-prop.mjs","../../node_modules/framer-motion/dist/es/render/dom/utils/filter-props.mjs","../../node_modules/framer-motion/dist/es/render/svg/utils/transform-origin.mjs","../../node_modules/framer-motion/dist/es/render/svg/utils/path.mjs","../../node_modules/framer-motion/dist/es/render/svg/utils/build-attrs.mjs","../../node_modules/framer-motion/dist/es/render/svg/utils/create-render-state.mjs","../../node_modules/framer-motion/dist/es/render/svg/utils/is-svg-tag.mjs","../../node_modules/framer-motion/dist/es/render/svg/use-props.mjs","../../node_modules/framer-motion/dist/es/render/dom/use-render.mjs","../../node_modules/framer-motion/dist/es/render/html/utils/render.mjs","../../node_modules/framer-motion/dist/es/render/svg/utils/camel-case-attrs.mjs","../../node_modules/framer-motion/dist/es/render/svg/utils/render.mjs","../../node_modules/framer-motion/dist/es/render/html/utils/scrape-motion-values.mjs","../../node_modules/framer-motion/dist/es/render/svg/utils/scrape-motion-values.mjs","../../node_modules/framer-motion/dist/es/render/utils/resolve-variants.mjs","../../node_modules/framer-motion/dist/es/utils/use-constant.mjs","../../node_modules/framer-motion/dist/es/animation/utils/is-keyframes-target.mjs","../../node_modules/framer-motion/dist/es/utils/resolve-value.mjs","../../node_modules/framer-motion/dist/es/value/utils/resolve-motion-value.mjs","../../node_modules/framer-motion/dist/es/motion/utils/use-visual-state.mjs","../../node_modules/framer-motion/dist/es/utils/noop.mjs","../../node_modules/framer-motion/dist/es/frameloop/render-step.mjs","../../node_modules/framer-motion/dist/es/frameloop/batcher.mjs","../../node_modules/framer-motion/dist/es/frameloop/frame.mjs","../../node_modules/framer-motion/dist/es/render/svg/config-motion.mjs","../../node_modules/framer-motion/dist/es/render/html/config-motion.mjs","../../node_modules/framer-motion/dist/es/render/dom/utils/create-config.mjs","../../node_modules/framer-motion/dist/es/events/add-dom-event.mjs","../../node_modules/framer-motion/dist/es/events/utils/is-primary-pointer.mjs","../../node_modules/framer-motion/dist/es/events/event-info.mjs","../../node_modules/framer-motion/dist/es/events/add-pointer-event.mjs","../../node_modules/framer-motion/dist/es/utils/pipe.mjs","../../node_modules/framer-motion/dist/es/gestures/drag/utils/lock.mjs","../../node_modules/framer-motion/dist/es/motion/features/Feature.mjs","../../node_modules/framer-motion/dist/es/gestures/hover.mjs","../../node_modules/framer-motion/dist/es/gestures/focus.mjs","../../node_modules/framer-motion/dist/es/gestures/utils/is-node-or-child.mjs","../../node_modules/framer-motion/dist/es/gestures/press.mjs","../../node_modules/framer-motion/dist/es/motion/features/viewport/observers.mjs","../../node_modules/framer-motion/dist/es/motion/features/viewport/index.mjs","../../node_modules/framer-motion/dist/es/motion/features/gestures.mjs","../../node_modules/framer-motion/dist/es/utils/shallow-compare.mjs","../../node_modules/framer-motion/dist/es/render/utils/resolve-dynamic-variants.mjs","../../node_modules/framer-motion/dist/es/utils/errors.mjs","../../node_modules/framer-motion/dist/es/utils/time-conversion.mjs","../../node_modules/framer-motion/dist/es/utils/use-instant-transition-state.mjs","../../node_modules/framer-motion/dist/es/easing/utils/is-bezier-definition.mjs","../../node_modules/framer-motion/dist/es/animation/animators/waapi/easing.mjs","../../node_modules/framer-motion/dist/es/animation/animators/waapi/index.mjs","../../node_modules/framer-motion/dist/es/animation/animators/waapi/utils/get-final-keyframe.mjs","../../node_modules/framer-motion/dist/es/easing/cubic-bezier.mjs","../../node_modules/framer-motion/dist/es/easing/ease.mjs","../../node_modules/framer-motion/dist/es/easing/utils/is-easing-array.mjs","../../node_modules/framer-motion/dist/es/easing/modifiers/mirror.mjs","../../node_modules/framer-motion/dist/es/easing/modifiers/reverse.mjs","../../node_modules/framer-motion/dist/es/easing/circ.mjs","../../node_modules/framer-motion/dist/es/easing/back.mjs","../../node_modules/framer-motion/dist/es/easing/anticipate.mjs","../../node_modules/framer-motion/dist/es/easing/utils/map.mjs","../../node_modules/framer-motion/dist/es/value/types/color/utils.mjs","../../node_modules/framer-motion/dist/es/value/types/color/rgba.mjs","../../node_modules/framer-motion/dist/es/value/types/color/hex.mjs","../../node_modules/framer-motion/dist/es/value/types/color/hsla.mjs","../../node_modules/framer-motion/dist/es/value/types/color/index.mjs","../../node_modules/framer-motion/dist/es/utils/mix.mjs","../../node_modules/framer-motion/dist/es/utils/hsla-to-rgba.mjs","../../node_modules/framer-motion/dist/es/utils/mix-color.mjs","../../node_modules/framer-motion/dist/es/value/types/complex/index.mjs","../../node_modules/framer-motion/dist/es/utils/mix-complex.mjs","../../node_modules/framer-motion/dist/es/utils/progress.mjs","../../node_modules/framer-motion/dist/es/utils/interpolate.mjs","../../node_modules/framer-motion/dist/es/utils/offsets/fill.mjs","../../node_modules/framer-motion/dist/es/utils/offsets/default.mjs","../../node_modules/framer-motion/dist/es/utils/offsets/time.mjs","../../node_modules/framer-motion/dist/es/animation/generators/keyframes.mjs","../../node_modules/framer-motion/dist/es/utils/velocity-per-second.mjs","../../node_modules/framer-motion/dist/es/animation/generators/utils/velocity.mjs","../../node_modules/framer-motion/dist/es/animation/generators/spring/find.mjs","../../node_modules/framer-motion/dist/es/animation/generators/spring/index.mjs","../../node_modules/framer-motion/dist/es/animation/generators/inertia.mjs","../../node_modules/framer-motion/dist/es/animation/animators/js/driver-frameloop.mjs","../../node_modules/framer-motion/dist/es/animation/generators/utils/calc-duration.mjs","../../node_modules/framer-motion/dist/es/animation/animators/js/index.mjs","../../node_modules/framer-motion/dist/es/utils/memo.mjs","../../node_modules/framer-motion/dist/es/animation/animators/waapi/create-accelerated-animation.mjs","../../node_modules/framer-motion/dist/es/animation/animators/instant.mjs","../../node_modules/framer-motion/dist/es/animation/utils/default-transitions.mjs","../../node_modules/framer-motion/dist/es/animation/utils/is-animatable.mjs","../../node_modules/framer-motion/dist/es/value/types/complex/filter.mjs","../../node_modules/framer-motion/dist/es/render/dom/value-types/defaults.mjs","../../node_modules/framer-motion/dist/es/render/dom/value-types/animatable-none.mjs","../../node_modules/framer-motion/dist/es/utils/is-zero-value-string.mjs","../../node_modules/framer-motion/dist/es/animation/utils/is-none.mjs","../../node_modules/framer-motion/dist/es/animation/utils/keyframes.mjs","../../node_modules/framer-motion/dist/es/animation/utils/transitions.mjs","../../node_modules/framer-motion/dist/es/utils/GlobalConfig.mjs","../../node_modules/framer-motion/dist/es/animation/interfaces/motion-value.mjs","../../node_modules/framer-motion/dist/es/value/use-will-change/is.mjs","../../node_modules/framer-motion/dist/es/utils/is-numerical-string.mjs","../../node_modules/framer-motion/dist/es/utils/array.mjs","../../node_modules/framer-motion/dist/es/utils/subscription-manager.mjs","../../node_modules/framer-motion/dist/es/value/index.mjs","../../node_modules/framer-motion/dist/es/render/dom/value-types/test.mjs","../../node_modules/framer-motion/dist/es/render/dom/value-types/type-auto.mjs","../../node_modules/framer-motion/dist/es/render/dom/value-types/dimensions.mjs","../../node_modules/framer-motion/dist/es/render/dom/value-types/find.mjs","../../node_modules/framer-motion/dist/es/render/utils/setters.mjs","../../node_modules/framer-motion/dist/es/animation/interfaces/visual-element-target.mjs","../../node_modules/framer-motion/dist/es/animation/interfaces/visual-element-variant.mjs","../../node_modules/framer-motion/dist/es/animation/interfaces/visual-element.mjs","../../node_modules/framer-motion/dist/es/render/utils/animation-state.mjs","../../node_modules/framer-motion/dist/es/motion/features/animation/index.mjs","../../node_modules/framer-motion/dist/es/motion/features/animation/exit.mjs","../../node_modules/framer-motion/dist/es/motion/features/animations.mjs","../../node_modules/framer-motion/dist/es/utils/distance.mjs","../../node_modules/framer-motion/dist/es/gestures/pan/PanSession.mjs","../../node_modules/framer-motion/dist/es/projection/geometry/delta-calc.mjs","../../node_modules/framer-motion/dist/es/gestures/drag/utils/constraints.mjs","../../node_modules/framer-motion/dist/es/projection/geometry/models.mjs","../../node_modules/framer-motion/dist/es/projection/utils/each-axis.mjs","../../node_modules/framer-motion/dist/es/projection/geometry/conversion.mjs","../../node_modules/framer-motion/dist/es/projection/utils/has-transform.mjs","../../node_modules/framer-motion/dist/es/projection/geometry/delta-apply.mjs","../../node_modules/framer-motion/dist/es/projection/utils/measure.mjs","../../node_modules/framer-motion/dist/es/utils/get-context-window.mjs","../../node_modules/framer-motion/dist/es/gestures/drag/VisualElementDragControls.mjs","../../node_modules/framer-motion/dist/es/gestures/drag/index.mjs","../../node_modules/framer-motion/dist/es/gestures/pan/index.mjs","../../node_modules/framer-motion/dist/es/components/AnimatePresence/use-presence.mjs","../../node_modules/framer-motion/dist/es/projection/node/state.mjs","../../node_modules/framer-motion/dist/es/projection/styles/scale-border-radius.mjs","../../node_modules/framer-motion/dist/es/projection/styles/scale-box-shadow.mjs","../../node_modules/framer-motion/dist/es/motion/features/layout/MeasureLayout.mjs","../../node_modules/framer-motion/dist/es/projection/animation/mix-values.mjs","../../node_modules/framer-motion/dist/es/projection/geometry/copy.mjs","../../node_modules/framer-motion/dist/es/projection/geometry/delta-remove.mjs","../../node_modules/framer-motion/dist/es/projection/geometry/utils.mjs","../../node_modules/framer-motion/dist/es/projection/shared/stack.mjs","../../node_modules/framer-motion/dist/es/projection/styles/transform.mjs","../../node_modules/framer-motion/dist/es/render/utils/compare-by-depth.mjs","../../node_modules/framer-motion/dist/es/render/utils/flat-tree.mjs","../../node_modules/framer-motion/dist/es/utils/delay.mjs","../../node_modules/framer-motion/dist/es/debug/record.mjs","../../node_modules/framer-motion/dist/es/render/dom/utils/is-svg-element.mjs","../../node_modules/framer-motion/dist/es/animation/interfaces/single-value.mjs","../../node_modules/framer-motion/dist/es/projection/node/create-projection-node.mjs","../../node_modules/framer-motion/dist/es/projection/node/DocumentProjectionNode.mjs","../../node_modules/framer-motion/dist/es/projection/node/HTMLProjectionNode.mjs","../../node_modules/framer-motion/dist/es/motion/features/drag.mjs","../../node_modules/framer-motion/dist/es/render/dom/utils/css-variables-conversion.mjs","../../node_modules/framer-motion/dist/es/render/dom/utils/unit-conversion.mjs","../../node_modules/framer-motion/dist/es/render/dom/utils/parse-dom-variant.mjs","../../node_modules/framer-motion/dist/es/utils/reduced-motion/state.mjs","../../node_modules/framer-motion/dist/es/utils/reduced-motion/index.mjs","../../node_modules/framer-motion/dist/es/render/utils/motion-values.mjs","../../node_modules/framer-motion/dist/es/render/store.mjs","../../node_modules/framer-motion/dist/es/render/VisualElement.mjs","../../node_modules/framer-motion/dist/es/render/dom/DOMVisualElement.mjs","../../node_modules/framer-motion/dist/es/render/html/HTMLVisualElement.mjs","../../node_modules/framer-motion/dist/es/render/svg/SVGVisualElement.mjs","../../node_modules/framer-motion/dist/es/render/dom/create-visual-element.mjs","../../node_modules/framer-motion/dist/es/motion/features/layout.mjs","../../node_modules/framer-motion/dist/es/render/dom/motion.mjs","../../node_modules/framer-motion/dist/es/utils/use-is-mounted.mjs","../../node_modules/framer-motion/dist/es/utils/use-force-update.mjs","../../node_modules/framer-motion/dist/es/components/AnimatePresence/PopChild.mjs","../../node_modules/framer-motion/dist/es/components/AnimatePresence/PresenceChild.mjs","../../node_modules/framer-motion/dist/es/utils/use-unmount-effect.mjs","../../node_modules/framer-motion/dist/es/components/AnimatePresence/index.mjs","../../src/components/GameTutorial.tsx","../../src/assets/bitsacco-logo.png","../../src/components/BitsaccoLogo.tsx","../../src/pages/HomePage.tsx","../../src/hooks/useResponsiveDesign.ts","../../src/components/jenga/SimplifiedJengaTower.tsx","../../src/components/ContentModal.tsx","../../src/components/GameHelp.tsx","../../src/components/GameStats.tsx","../../src/components/EndgameSummary.tsx","../../src/components/mobile/MobileControls.tsx","../../src/data/enhancedPrivacyQuestions.ts","../../src/services/simplifiedGameService.ts","../../src/pages/GamePage.tsx","../../src/App.tsx","../../src/main.tsx"],"sourcesContent":["/**\n * @remix-run/router v1.23.0\n *\n * Copyright (c) Remix Software Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.md file in the root directory of this source tree.\n *\n * @license MIT\n */\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\n\n////////////////////////////////////////////////////////////////////////////////\n//#region Types and Constants\n////////////////////////////////////////////////////////////////////////////////\n/**\n * Actions represent the type of change to a location value.\n */\nvar Action;\n(function (Action) {\n  /**\n   * A POP indicates a change to an arbitrary index in the history stack, such\n   * as a back or forward navigation. It does not describe the direction of the\n   * navigation, only that the current index changed.\n   *\n   * Note: This is the default action for newly created history objects.\n   */\n  Action[\"Pop\"] = \"POP\";\n  /**\n   * A PUSH indicates a new entry being added to the history stack, such as when\n   * a link is clicked and a new page loads. When this happens, all subsequent\n   * entries in the stack are lost.\n   */\n  Action[\"Push\"] = \"PUSH\";\n  /**\n   * A REPLACE indicates the entry at the current index in the history stack\n   * being replaced by a new one.\n   */\n  Action[\"Replace\"] = \"REPLACE\";\n})(Action || (Action = {}));\nconst PopStateEventType = \"popstate\";\n/**\n * Memory history stores the current location in memory. It is designed for use\n * in stateful non-browser environments like tests and React Native.\n */\nfunction createMemoryHistory(options) {\n  if (options === void 0) {\n    options = {};\n  }\n  let {\n    initialEntries = [\"/\"],\n    initialIndex,\n    v5Compat = false\n  } = options;\n  let entries; // Declare so we can access from createMemoryLocation\n  entries = initialEntries.map((entry, index) => createMemoryLocation(entry, typeof entry === \"string\" ? null : entry.state, index === 0 ? \"default\" : undefined));\n  let index = clampIndex(initialIndex == null ? entries.length - 1 : initialIndex);\n  let action = Action.Pop;\n  let listener = null;\n  function clampIndex(n) {\n    return Math.min(Math.max(n, 0), entries.length - 1);\n  }\n  function getCurrentLocation() {\n    return entries[index];\n  }\n  function createMemoryLocation(to, state, key) {\n    if (state === void 0) {\n      state = null;\n    }\n    let location = createLocation(entries ? getCurrentLocation().pathname : \"/\", to, state, key);\n    warning(location.pathname.charAt(0) === \"/\", \"relative pathnames are not supported in memory history: \" + JSON.stringify(to));\n    return location;\n  }\n  function createHref(to) {\n    return typeof to === \"string\" ? to : createPath(to);\n  }\n  let history = {\n    get index() {\n      return index;\n    },\n    get action() {\n      return action;\n    },\n    get location() {\n      return getCurrentLocation();\n    },\n    createHref,\n    createURL(to) {\n      return new URL(createHref(to), \"http://localhost\");\n    },\n    encodeLocation(to) {\n      let path = typeof to === \"string\" ? parsePath(to) : to;\n      return {\n        pathname: path.pathname || \"\",\n        search: path.search || \"\",\n        hash: path.hash || \"\"\n      };\n    },\n    push(to, state) {\n      action = Action.Push;\n      let nextLocation = createMemoryLocation(to, state);\n      index += 1;\n      entries.splice(index, entries.length, nextLocation);\n      if (v5Compat && listener) {\n        listener({\n          action,\n          location: nextLocation,\n          delta: 1\n        });\n      }\n    },\n    replace(to, state) {\n      action = Action.Replace;\n      let nextLocation = createMemoryLocation(to, state);\n      entries[index] = nextLocation;\n      if (v5Compat && listener) {\n        listener({\n          action,\n          location: nextLocation,\n          delta: 0\n        });\n      }\n    },\n    go(delta) {\n      action = Action.Pop;\n      let nextIndex = clampIndex(index + delta);\n      let nextLocation = entries[nextIndex];\n      index = nextIndex;\n      if (listener) {\n        listener({\n          action,\n          location: nextLocation,\n          delta\n        });\n      }\n    },\n    listen(fn) {\n      listener = fn;\n      return () => {\n        listener = null;\n      };\n    }\n  };\n  return history;\n}\n/**\n * Browser history stores the location in regular URLs. This is the standard for\n * most web apps, but it requires some configuration on the server to ensure you\n * serve the same app at multiple URLs.\n *\n * @see https://github.com/remix-run/history/tree/main/docs/api-reference.md#createbrowserhistory\n */\nfunction createBrowserHistory(options) {\n  if (options === void 0) {\n    options = {};\n  }\n  function createBrowserLocation(window, globalHistory) {\n    let {\n      pathname,\n      search,\n      hash\n    } = window.location;\n    return createLocation(\"\", {\n      pathname,\n      search,\n      hash\n    },\n    // state defaults to `null` because `window.history.state` does\n    globalHistory.state && globalHistory.state.usr || null, globalHistory.state && globalHistory.state.key || \"default\");\n  }\n  function createBrowserHref(window, to) {\n    return typeof to === \"string\" ? to : createPath(to);\n  }\n  return getUrlBasedHistory(createBrowserLocation, createBrowserHref, null, options);\n}\n/**\n * Hash history stores the location in window.location.hash. This makes it ideal\n * for situations where you don't want to send the location to the server for\n * some reason, either because you do cannot configure it or the URL space is\n * reserved for something else.\n *\n * @see https://github.com/remix-run/history/tree/main/docs/api-reference.md#createhashhistory\n */\nfunction createHashHistory(options) {\n  if (options === void 0) {\n    options = {};\n  }\n  function createHashLocation(window, globalHistory) {\n    let {\n      pathname = \"/\",\n      search = \"\",\n      hash = \"\"\n    } = parsePath(window.location.hash.substr(1));\n    // Hash URL should always have a leading / just like window.location.pathname\n    // does, so if an app ends up at a route like /#something then we add a\n    // leading slash so all of our path-matching behaves the same as if it would\n    // in a browser router.  This is particularly important when there exists a\n    // root splat route (<Route path=\"*\">) since that matches internally against\n    // \"/*\" and we'd expect /#something to 404 in a hash router app.\n    if (!pathname.startsWith(\"/\") && !pathname.startsWith(\".\")) {\n      pathname = \"/\" + pathname;\n    }\n    return createLocation(\"\", {\n      pathname,\n      search,\n      hash\n    },\n    // state defaults to `null` because `window.history.state` does\n    globalHistory.state && globalHistory.state.usr || null, globalHistory.state && globalHistory.state.key || \"default\");\n  }\n  function createHashHref(window, to) {\n    let base = window.document.querySelector(\"base\");\n    let href = \"\";\n    if (base && base.getAttribute(\"href\")) {\n      let url = window.location.href;\n      let hashIndex = url.indexOf(\"#\");\n      href = hashIndex === -1 ? url : url.slice(0, hashIndex);\n    }\n    return href + \"#\" + (typeof to === \"string\" ? to : createPath(to));\n  }\n  function validateHashLocation(location, to) {\n    warning(location.pathname.charAt(0) === \"/\", \"relative pathnames are not supported in hash history.push(\" + JSON.stringify(to) + \")\");\n  }\n  return getUrlBasedHistory(createHashLocation, createHashHref, validateHashLocation, options);\n}\nfunction invariant(value, message) {\n  if (value === false || value === null || typeof value === \"undefined\") {\n    throw new Error(message);\n  }\n}\nfunction warning(cond, message) {\n  if (!cond) {\n    // eslint-disable-next-line no-console\n    if (typeof console !== \"undefined\") console.warn(message);\n    try {\n      // Welcome to debugging history!\n      //\n      // This error is thrown as a convenience, so you can more easily\n      // find the source for a warning that appears in the console by\n      // enabling \"pause on exceptions\" in your JavaScript debugger.\n      throw new Error(message);\n      // eslint-disable-next-line no-empty\n    } catch (e) {}\n  }\n}\nfunction createKey() {\n  return Math.random().toString(36).substr(2, 8);\n}\n/**\n * For browser-based histories, we combine the state and key into an object\n */\nfunction getHistoryState(location, index) {\n  return {\n    usr: location.state,\n    key: location.key,\n    idx: index\n  };\n}\n/**\n * Creates a Location object with a unique key from the given Path\n */\nfunction createLocation(current, to, state, key) {\n  if (state === void 0) {\n    state = null;\n  }\n  let location = _extends({\n    pathname: typeof current === \"string\" ? current : current.pathname,\n    search: \"\",\n    hash: \"\"\n  }, typeof to === \"string\" ? parsePath(to) : to, {\n    state,\n    // TODO: This could be cleaned up.  push/replace should probably just take\n    // full Locations now and avoid the need to run through this flow at all\n    // But that's a pretty big refactor to the current test suite so going to\n    // keep as is for the time being and just let any incoming keys take precedence\n    key: to && to.key || key || createKey()\n  });\n  return location;\n}\n/**\n * Creates a string URL path from the given pathname, search, and hash components.\n */\nfunction createPath(_ref) {\n  let {\n    pathname = \"/\",\n    search = \"\",\n    hash = \"\"\n  } = _ref;\n  if (search && search !== \"?\") pathname += search.charAt(0) === \"?\" ? search : \"?\" + search;\n  if (hash && hash !== \"#\") pathname += hash.charAt(0) === \"#\" ? hash : \"#\" + hash;\n  return pathname;\n}\n/**\n * Parses a string URL path into its separate pathname, search, and hash components.\n */\nfunction parsePath(path) {\n  let parsedPath = {};\n  if (path) {\n    let hashIndex = path.indexOf(\"#\");\n    if (hashIndex >= 0) {\n      parsedPath.hash = path.substr(hashIndex);\n      path = path.substr(0, hashIndex);\n    }\n    let searchIndex = path.indexOf(\"?\");\n    if (searchIndex >= 0) {\n      parsedPath.search = path.substr(searchIndex);\n      path = path.substr(0, searchIndex);\n    }\n    if (path) {\n      parsedPath.pathname = path;\n    }\n  }\n  return parsedPath;\n}\nfunction getUrlBasedHistory(getLocation, createHref, validateLocation, options) {\n  if (options === void 0) {\n    options = {};\n  }\n  let {\n    window = document.defaultView,\n    v5Compat = false\n  } = options;\n  let globalHistory = window.history;\n  let action = Action.Pop;\n  let listener = null;\n  let index = getIndex();\n  // Index should only be null when we initialize. If not, it's because the\n  // user called history.pushState or history.replaceState directly, in which\n  // case we should log a warning as it will result in bugs.\n  if (index == null) {\n    index = 0;\n    globalHistory.replaceState(_extends({}, globalHistory.state, {\n      idx: index\n    }), \"\");\n  }\n  function getIndex() {\n    let state = globalHistory.state || {\n      idx: null\n    };\n    return state.idx;\n  }\n  function handlePop() {\n    action = Action.Pop;\n    let nextIndex = getIndex();\n    let delta = nextIndex == null ? null : nextIndex - index;\n    index = nextIndex;\n    if (listener) {\n      listener({\n        action,\n        location: history.location,\n        delta\n      });\n    }\n  }\n  function push(to, state) {\n    action = Action.Push;\n    let location = createLocation(history.location, to, state);\n    if (validateLocation) validateLocation(location, to);\n    index = getIndex() + 1;\n    let historyState = getHistoryState(location, index);\n    let url = history.createHref(location);\n    // try...catch because iOS limits us to 100 pushState calls :/\n    try {\n      globalHistory.pushState(historyState, \"\", url);\n    } catch (error) {\n      // If the exception is because `state` can't be serialized, let that throw\n      // outwards just like a replace call would so the dev knows the cause\n      // https://html.spec.whatwg.org/multipage/nav-history-apis.html#shared-history-push/replace-state-steps\n      // https://html.spec.whatwg.org/multipage/structured-data.html#structuredserializeinternal\n      if (error instanceof DOMException && error.name === \"DataCloneError\") {\n        throw error;\n      }\n      // They are going to lose state here, but there is no real\n      // way to warn them about it since the page will refresh...\n      window.location.assign(url);\n    }\n    if (v5Compat && listener) {\n      listener({\n        action,\n        location: history.location,\n        delta: 1\n      });\n    }\n  }\n  function replace(to, state) {\n    action = Action.Replace;\n    let location = createLocation(history.location, to, state);\n    if (validateLocation) validateLocation(location, to);\n    index = getIndex();\n    let historyState = getHistoryState(location, index);\n    let url = history.createHref(location);\n    globalHistory.replaceState(historyState, \"\", url);\n    if (v5Compat && listener) {\n      listener({\n        action,\n        location: history.location,\n        delta: 0\n      });\n    }\n  }\n  function createURL(to) {\n    // window.location.origin is \"null\" (the literal string value) in Firefox\n    // under certain conditions, notably when serving from a local HTML file\n    // See https://bugzilla.mozilla.org/show_bug.cgi?id=878297\n    let base = window.location.origin !== \"null\" ? window.location.origin : window.location.href;\n    let href = typeof to === \"string\" ? to : createPath(to);\n    // Treating this as a full URL will strip any trailing spaces so we need to\n    // pre-encode them since they might be part of a matching splat param from\n    // an ancestor route\n    href = href.replace(/ $/, \"%20\");\n    invariant(base, \"No window.location.(origin|href) available to create URL for href: \" + href);\n    return new URL(href, base);\n  }\n  let history = {\n    get action() {\n      return action;\n    },\n    get location() {\n      return getLocation(window, globalHistory);\n    },\n    listen(fn) {\n      if (listener) {\n        throw new Error(\"A history only accepts one active listener\");\n      }\n      window.addEventListener(PopStateEventType, handlePop);\n      listener = fn;\n      return () => {\n        window.removeEventListener(PopStateEventType, handlePop);\n        listener = null;\n      };\n    },\n    createHref(to) {\n      return createHref(window, to);\n    },\n    createURL,\n    encodeLocation(to) {\n      // Encode a Location the same way window.location would\n      let url = createURL(to);\n      return {\n        pathname: url.pathname,\n        search: url.search,\n        hash: url.hash\n      };\n    },\n    push,\n    replace,\n    go(n) {\n      return globalHistory.go(n);\n    }\n  };\n  return history;\n}\n//#endregion\n\nvar ResultType;\n(function (ResultType) {\n  ResultType[\"data\"] = \"data\";\n  ResultType[\"deferred\"] = \"deferred\";\n  ResultType[\"redirect\"] = \"redirect\";\n  ResultType[\"error\"] = \"error\";\n})(ResultType || (ResultType = {}));\nconst immutableRouteKeys = new Set([\"lazy\", \"caseSensitive\", \"path\", \"id\", \"index\", \"children\"]);\nfunction isIndexRoute(route) {\n  return route.index === true;\n}\n// Walk the route tree generating unique IDs where necessary, so we are working\n// solely with AgnosticDataRouteObject's within the Router\nfunction convertRoutesToDataRoutes(routes, mapRouteProperties, parentPath, manifest) {\n  if (parentPath === void 0) {\n    parentPath = [];\n  }\n  if (manifest === void 0) {\n    manifest = {};\n  }\n  return routes.map((route, index) => {\n    let treePath = [...parentPath, String(index)];\n    let id = typeof route.id === \"string\" ? route.id : treePath.join(\"-\");\n    invariant(route.index !== true || !route.children, \"Cannot specify children on an index route\");\n    invariant(!manifest[id], \"Found a route id collision on id \\\"\" + id + \"\\\".  Route \" + \"id's must be globally unique within Data Router usages\");\n    if (isIndexRoute(route)) {\n      let indexRoute = _extends({}, route, mapRouteProperties(route), {\n        id\n      });\n      manifest[id] = indexRoute;\n      return indexRoute;\n    } else {\n      let pathOrLayoutRoute = _extends({}, route, mapRouteProperties(route), {\n        id,\n        children: undefined\n      });\n      manifest[id] = pathOrLayoutRoute;\n      if (route.children) {\n        pathOrLayoutRoute.children = convertRoutesToDataRoutes(route.children, mapRouteProperties, treePath, manifest);\n      }\n      return pathOrLayoutRoute;\n    }\n  });\n}\n/**\n * Matches the given routes to a location and returns the match data.\n *\n * @see https://reactrouter.com/v6/utils/match-routes\n */\nfunction matchRoutes(routes, locationArg, basename) {\n  if (basename === void 0) {\n    basename = \"/\";\n  }\n  return matchRoutesImpl(routes, locationArg, basename, false);\n}\nfunction matchRoutesImpl(routes, locationArg, basename, allowPartial) {\n  let location = typeof locationArg === \"string\" ? parsePath(locationArg) : locationArg;\n  let pathname = stripBasename(location.pathname || \"/\", basename);\n  if (pathname == null) {\n    return null;\n  }\n  let branches = flattenRoutes(routes);\n  rankRouteBranches(branches);\n  let matches = null;\n  for (let i = 0; matches == null && i < branches.length; ++i) {\n    // Incoming pathnames are generally encoded from either window.location\n    // or from router.navigate, but we want to match against the unencoded\n    // paths in the route definitions.  Memory router locations won't be\n    // encoded here but there also shouldn't be anything to decode so this\n    // should be a safe operation.  This avoids needing matchRoutes to be\n    // history-aware.\n    let decoded = decodePath(pathname);\n    matches = matchRouteBranch(branches[i], decoded, allowPartial);\n  }\n  return matches;\n}\nfunction convertRouteMatchToUiMatch(match, loaderData) {\n  let {\n    route,\n    pathname,\n    params\n  } = match;\n  return {\n    id: route.id,\n    pathname,\n    params,\n    data: loaderData[route.id],\n    handle: route.handle\n  };\n}\nfunction flattenRoutes(routes, branches, parentsMeta, parentPath) {\n  if (branches === void 0) {\n    branches = [];\n  }\n  if (parentsMeta === void 0) {\n    parentsMeta = [];\n  }\n  if (parentPath === void 0) {\n    parentPath = \"\";\n  }\n  let flattenRoute = (route, index, relativePath) => {\n    let meta = {\n      relativePath: relativePath === undefined ? route.path || \"\" : relativePath,\n      caseSensitive: route.caseSensitive === true,\n      childrenIndex: index,\n      route\n    };\n    if (meta.relativePath.startsWith(\"/\")) {\n      invariant(meta.relativePath.startsWith(parentPath), \"Absolute route path \\\"\" + meta.relativePath + \"\\\" nested under path \" + (\"\\\"\" + parentPath + \"\\\" is not valid. An absolute child route path \") + \"must start with the combined path of all its parent routes.\");\n      meta.relativePath = meta.relativePath.slice(parentPath.length);\n    }\n    let path = joinPaths([parentPath, meta.relativePath]);\n    let routesMeta = parentsMeta.concat(meta);\n    // Add the children before adding this route to the array, so we traverse the\n    // route tree depth-first and child routes appear before their parents in\n    // the \"flattened\" version.\n    if (route.children && route.children.length > 0) {\n      invariant(\n      // Our types know better, but runtime JS may not!\n      // @ts-expect-error\n      route.index !== true, \"Index routes must not have child routes. Please remove \" + (\"all child routes from route path \\\"\" + path + \"\\\".\"));\n      flattenRoutes(route.children, branches, routesMeta, path);\n    }\n    // Routes without a path shouldn't ever match by themselves unless they are\n    // index routes, so don't add them to the list of possible branches.\n    if (route.path == null && !route.index) {\n      return;\n    }\n    branches.push({\n      path,\n      score: computeScore(path, route.index),\n      routesMeta\n    });\n  };\n  routes.forEach((route, index) => {\n    var _route$path;\n    // coarse-grain check for optional params\n    if (route.path === \"\" || !((_route$path = route.path) != null && _route$path.includes(\"?\"))) {\n      flattenRoute(route, index);\n    } else {\n      for (let exploded of explodeOptionalSegments(route.path)) {\n        flattenRoute(route, index, exploded);\n      }\n    }\n  });\n  return branches;\n}\n/**\n * Computes all combinations of optional path segments for a given path,\n * excluding combinations that are ambiguous and of lower priority.\n *\n * For example, `/one/:two?/three/:four?/:five?` explodes to:\n * - `/one/three`\n * - `/one/:two/three`\n * - `/one/three/:four`\n * - `/one/three/:five`\n * - `/one/:two/three/:four`\n * - `/one/:two/three/:five`\n * - `/one/three/:four/:five`\n * - `/one/:two/three/:four/:five`\n */\nfunction explodeOptionalSegments(path) {\n  let segments = path.split(\"/\");\n  if (segments.length === 0) return [];\n  let [first, ...rest] = segments;\n  // Optional path segments are denoted by a trailing `?`\n  let isOptional = first.endsWith(\"?\");\n  // Compute the corresponding required segment: `foo?` -> `foo`\n  let required = first.replace(/\\?$/, \"\");\n  if (rest.length === 0) {\n    // Intepret empty string as omitting an optional segment\n    // `[\"one\", \"\", \"three\"]` corresponds to omitting `:two` from `/one/:two?/three` -> `/one/three`\n    return isOptional ? [required, \"\"] : [required];\n  }\n  let restExploded = explodeOptionalSegments(rest.join(\"/\"));\n  let result = [];\n  // All child paths with the prefix.  Do this for all children before the\n  // optional version for all children, so we get consistent ordering where the\n  // parent optional aspect is preferred as required.  Otherwise, we can get\n  // child sections interspersed where deeper optional segments are higher than\n  // parent optional segments, where for example, /:two would explode _earlier_\n  // then /:one.  By always including the parent as required _for all children_\n  // first, we avoid this issue\n  result.push(...restExploded.map(subpath => subpath === \"\" ? required : [required, subpath].join(\"/\")));\n  // Then, if this is an optional value, add all child versions without\n  if (isOptional) {\n    result.push(...restExploded);\n  }\n  // for absolute paths, ensure `/` instead of empty segment\n  return result.map(exploded => path.startsWith(\"/\") && exploded === \"\" ? \"/\" : exploded);\n}\nfunction rankRouteBranches(branches) {\n  branches.sort((a, b) => a.score !== b.score ? b.score - a.score // Higher score first\n  : compareIndexes(a.routesMeta.map(meta => meta.childrenIndex), b.routesMeta.map(meta => meta.childrenIndex)));\n}\nconst paramRe = /^:[\\w-]+$/;\nconst dynamicSegmentValue = 3;\nconst indexRouteValue = 2;\nconst emptySegmentValue = 1;\nconst staticSegmentValue = 10;\nconst splatPenalty = -2;\nconst isSplat = s => s === \"*\";\nfunction computeScore(path, index) {\n  let segments = path.split(\"/\");\n  let initialScore = segments.length;\n  if (segments.some(isSplat)) {\n    initialScore += splatPenalty;\n  }\n  if (index) {\n    initialScore += indexRouteValue;\n  }\n  return segments.filter(s => !isSplat(s)).reduce((score, segment) => score + (paramRe.test(segment) ? dynamicSegmentValue : segment === \"\" ? emptySegmentValue : staticSegmentValue), initialScore);\n}\nfunction compareIndexes(a, b) {\n  let siblings = a.length === b.length && a.slice(0, -1).every((n, i) => n === b[i]);\n  return siblings ?\n  // If two routes are siblings, we should try to match the earlier sibling\n  // first. This allows people to have fine-grained control over the matching\n  // behavior by simply putting routes with identical paths in the order they\n  // want them tried.\n  a[a.length - 1] - b[b.length - 1] :\n  // Otherwise, it doesn't really make sense to rank non-siblings by index,\n  // so they sort equally.\n  0;\n}\nfunction matchRouteBranch(branch, pathname, allowPartial) {\n  if (allowPartial === void 0) {\n    allowPartial = false;\n  }\n  let {\n    routesMeta\n  } = branch;\n  let matchedParams = {};\n  let matchedPathname = \"/\";\n  let matches = [];\n  for (let i = 0; i < routesMeta.length; ++i) {\n    let meta = routesMeta[i];\n    let end = i === routesMeta.length - 1;\n    let remainingPathname = matchedPathname === \"/\" ? pathname : pathname.slice(matchedPathname.length) || \"/\";\n    let match = matchPath({\n      path: meta.relativePath,\n      caseSensitive: meta.caseSensitive,\n      end\n    }, remainingPathname);\n    let route = meta.route;\n    if (!match && end && allowPartial && !routesMeta[routesMeta.length - 1].route.index) {\n      match = matchPath({\n        path: meta.relativePath,\n        caseSensitive: meta.caseSensitive,\n        end: false\n      }, remainingPathname);\n    }\n    if (!match) {\n      return null;\n    }\n    Object.assign(matchedParams, match.params);\n    matches.push({\n      // TODO: Can this as be avoided?\n      params: matchedParams,\n      pathname: joinPaths([matchedPathname, match.pathname]),\n      pathnameBase: normalizePathname(joinPaths([matchedPathname, match.pathnameBase])),\n      route\n    });\n    if (match.pathnameBase !== \"/\") {\n      matchedPathname = joinPaths([matchedPathname, match.pathnameBase]);\n    }\n  }\n  return matches;\n}\n/**\n * Returns a path with params interpolated.\n *\n * @see https://reactrouter.com/v6/utils/generate-path\n */\nfunction generatePath(originalPath, params) {\n  if (params === void 0) {\n    params = {};\n  }\n  let path = originalPath;\n  if (path.endsWith(\"*\") && path !== \"*\" && !path.endsWith(\"/*\")) {\n    warning(false, \"Route path \\\"\" + path + \"\\\" will be treated as if it were \" + (\"\\\"\" + path.replace(/\\*$/, \"/*\") + \"\\\" because the `*` character must \") + \"always follow a `/` in the pattern. To get rid of this warning, \" + (\"please change the route path to \\\"\" + path.replace(/\\*$/, \"/*\") + \"\\\".\"));\n    path = path.replace(/\\*$/, \"/*\");\n  }\n  // ensure `/` is added at the beginning if the path is absolute\n  const prefix = path.startsWith(\"/\") ? \"/\" : \"\";\n  const stringify = p => p == null ? \"\" : typeof p === \"string\" ? p : String(p);\n  const segments = path.split(/\\/+/).map((segment, index, array) => {\n    const isLastSegment = index === array.length - 1;\n    // only apply the splat if it's the last segment\n    if (isLastSegment && segment === \"*\") {\n      const star = \"*\";\n      // Apply the splat\n      return stringify(params[star]);\n    }\n    const keyMatch = segment.match(/^:([\\w-]+)(\\??)$/);\n    if (keyMatch) {\n      const [, key, optional] = keyMatch;\n      let param = params[key];\n      invariant(optional === \"?\" || param != null, \"Missing \\\":\" + key + \"\\\" param\");\n      return stringify(param);\n    }\n    // Remove any optional markers from optional static segments\n    return segment.replace(/\\?$/g, \"\");\n  })\n  // Remove empty segments\n  .filter(segment => !!segment);\n  return prefix + segments.join(\"/\");\n}\n/**\n * Performs pattern matching on a URL pathname and returns information about\n * the match.\n *\n * @see https://reactrouter.com/v6/utils/match-path\n */\nfunction matchPath(pattern, pathname) {\n  if (typeof pattern === \"string\") {\n    pattern = {\n      path: pattern,\n      caseSensitive: false,\n      end: true\n    };\n  }\n  let [matcher, compiledParams] = compilePath(pattern.path, pattern.caseSensitive, pattern.end);\n  let match = pathname.match(matcher);\n  if (!match) return null;\n  let matchedPathname = match[0];\n  let pathnameBase = matchedPathname.replace(/(.)\\/+$/, \"$1\");\n  let captureGroups = match.slice(1);\n  let params = compiledParams.reduce((memo, _ref, index) => {\n    let {\n      paramName,\n      isOptional\n    } = _ref;\n    // We need to compute the pathnameBase here using the raw splat value\n    // instead of using params[\"*\"] later because it will be decoded then\n    if (paramName === \"*\") {\n      let splatValue = captureGroups[index] || \"\";\n      pathnameBase = matchedPathname.slice(0, matchedPathname.length - splatValue.length).replace(/(.)\\/+$/, \"$1\");\n    }\n    const value = captureGroups[index];\n    if (isOptional && !value) {\n      memo[paramName] = undefined;\n    } else {\n      memo[paramName] = (value || \"\").replace(/%2F/g, \"/\");\n    }\n    return memo;\n  }, {});\n  return {\n    params,\n    pathname: matchedPathname,\n    pathnameBase,\n    pattern\n  };\n}\nfunction compilePath(path, caseSensitive, end) {\n  if (caseSensitive === void 0) {\n    caseSensitive = false;\n  }\n  if (end === void 0) {\n    end = true;\n  }\n  warning(path === \"*\" || !path.endsWith(\"*\") || path.endsWith(\"/*\"), \"Route path \\\"\" + path + \"\\\" will be treated as if it were \" + (\"\\\"\" + path.replace(/\\*$/, \"/*\") + \"\\\" because the `*` character must \") + \"always follow a `/` in the pattern. To get rid of this warning, \" + (\"please change the route path to \\\"\" + path.replace(/\\*$/, \"/*\") + \"\\\".\"));\n  let params = [];\n  let regexpSource = \"^\" + path.replace(/\\/*\\*?$/, \"\") // Ignore trailing / and /*, we'll handle it below\n  .replace(/^\\/*/, \"/\") // Make sure it has a leading /\n  .replace(/[\\\\.*+^${}|()[\\]]/g, \"\\\\$&\") // Escape special regex chars\n  .replace(/\\/:([\\w-]+)(\\?)?/g, (_, paramName, isOptional) => {\n    params.push({\n      paramName,\n      isOptional: isOptional != null\n    });\n    return isOptional ? \"/?([^\\\\/]+)?\" : \"/([^\\\\/]+)\";\n  });\n  if (path.endsWith(\"*\")) {\n    params.push({\n      paramName: \"*\"\n    });\n    regexpSource += path === \"*\" || path === \"/*\" ? \"(.*)$\" // Already matched the initial /, just match the rest\n    : \"(?:\\\\/(.+)|\\\\/*)$\"; // Don't include the / in params[\"*\"]\n  } else if (end) {\n    // When matching to the end, ignore trailing slashes\n    regexpSource += \"\\\\/*$\";\n  } else if (path !== \"\" && path !== \"/\") {\n    // If our path is non-empty and contains anything beyond an initial slash,\n    // then we have _some_ form of path in our regex, so we should expect to\n    // match only if we find the end of this path segment.  Look for an optional\n    // non-captured trailing slash (to match a portion of the URL) or the end\n    // of the path (if we've matched to the end).  We used to do this with a\n    // word boundary but that gives false positives on routes like\n    // /user-preferences since `-` counts as a word boundary.\n    regexpSource += \"(?:(?=\\\\/|$))\";\n  } else ;\n  let matcher = new RegExp(regexpSource, caseSensitive ? undefined : \"i\");\n  return [matcher, params];\n}\nfunction decodePath(value) {\n  try {\n    return value.split(\"/\").map(v => decodeURIComponent(v).replace(/\\//g, \"%2F\")).join(\"/\");\n  } catch (error) {\n    warning(false, \"The URL path \\\"\" + value + \"\\\" could not be decoded because it is is a \" + \"malformed URL segment. This is probably due to a bad percent \" + (\"encoding (\" + error + \").\"));\n    return value;\n  }\n}\n/**\n * @private\n */\nfunction stripBasename(pathname, basename) {\n  if (basename === \"/\") return pathname;\n  if (!pathname.toLowerCase().startsWith(basename.toLowerCase())) {\n    return null;\n  }\n  // We want to leave trailing slash behavior in the user's control, so if they\n  // specify a basename with a trailing slash, we should support it\n  let startIndex = basename.endsWith(\"/\") ? basename.length - 1 : basename.length;\n  let nextChar = pathname.charAt(startIndex);\n  if (nextChar && nextChar !== \"/\") {\n    // pathname does not start with basename/\n    return null;\n  }\n  return pathname.slice(startIndex) || \"/\";\n}\n/**\n * Returns a resolved path object relative to the given pathname.\n *\n * @see https://reactrouter.com/v6/utils/resolve-path\n */\nfunction resolvePath(to, fromPathname) {\n  if (fromPathname === void 0) {\n    fromPathname = \"/\";\n  }\n  let {\n    pathname: toPathname,\n    search = \"\",\n    hash = \"\"\n  } = typeof to === \"string\" ? parsePath(to) : to;\n  let pathname = toPathname ? toPathname.startsWith(\"/\") ? toPathname : resolvePathname(toPathname, fromPathname) : fromPathname;\n  return {\n    pathname,\n    search: normalizeSearch(search),\n    hash: normalizeHash(hash)\n  };\n}\nfunction resolvePathname(relativePath, fromPathname) {\n  let segments = fromPathname.replace(/\\/+$/, \"\").split(\"/\");\n  let relativeSegments = relativePath.split(\"/\");\n  relativeSegments.forEach(segment => {\n    if (segment === \"..\") {\n      // Keep the root \"\" segment so the pathname starts at /\n      if (segments.length > 1) segments.pop();\n    } else if (segment !== \".\") {\n      segments.push(segment);\n    }\n  });\n  return segments.length > 1 ? segments.join(\"/\") : \"/\";\n}\nfunction getInvalidPathError(char, field, dest, path) {\n  return \"Cannot include a '\" + char + \"' character in a manually specified \" + (\"`to.\" + field + \"` field [\" + JSON.stringify(path) + \"].  Please separate it out to the \") + (\"`to.\" + dest + \"` field. Alternatively you may provide the full path as \") + \"a string in <Link to=\\\"...\\\"> and the router will parse it for you.\";\n}\n/**\n * @private\n *\n * When processing relative navigation we want to ignore ancestor routes that\n * do not contribute to the path, such that index/pathless layout routes don't\n * interfere.\n *\n * For example, when moving a route element into an index route and/or a\n * pathless layout route, relative link behavior contained within should stay\n * the same.  Both of the following examples should link back to the root:\n *\n *   <Route path=\"/\">\n *     <Route path=\"accounts\" element={<Link to=\"..\"}>\n *   </Route>\n *\n *   <Route path=\"/\">\n *     <Route path=\"accounts\">\n *       <Route element={<AccountsLayout />}>       // <-- Does not contribute\n *         <Route index element={<Link to=\"..\"} />  // <-- Does not contribute\n *       </Route\n *     </Route>\n *   </Route>\n */\nfunction getPathContributingMatches(matches) {\n  return matches.filter((match, index) => index === 0 || match.route.path && match.route.path.length > 0);\n}\n// Return the array of pathnames for the current route matches - used to\n// generate the routePathnames input for resolveTo()\nfunction getResolveToMatches(matches, v7_relativeSplatPath) {\n  let pathMatches = getPathContributingMatches(matches);\n  // When v7_relativeSplatPath is enabled, use the full pathname for the leaf\n  // match so we include splat values for \".\" links.  See:\n  // https://github.com/remix-run/react-router/issues/11052#issuecomment-1836589329\n  if (v7_relativeSplatPath) {\n    return pathMatches.map((match, idx) => idx === pathMatches.length - 1 ? match.pathname : match.pathnameBase);\n  }\n  return pathMatches.map(match => match.pathnameBase);\n}\n/**\n * @private\n */\nfunction resolveTo(toArg, routePathnames, locationPathname, isPathRelative) {\n  if (isPathRelative === void 0) {\n    isPathRelative = false;\n  }\n  let to;\n  if (typeof toArg === \"string\") {\n    to = parsePath(toArg);\n  } else {\n    to = _extends({}, toArg);\n    invariant(!to.pathname || !to.pathname.includes(\"?\"), getInvalidPathError(\"?\", \"pathname\", \"search\", to));\n    invariant(!to.pathname || !to.pathname.includes(\"#\"), getInvalidPathError(\"#\", \"pathname\", \"hash\", to));\n    invariant(!to.search || !to.search.includes(\"#\"), getInvalidPathError(\"#\", \"search\", \"hash\", to));\n  }\n  let isEmptyPath = toArg === \"\" || to.pathname === \"\";\n  let toPathname = isEmptyPath ? \"/\" : to.pathname;\n  let from;\n  // Routing is relative to the current pathname if explicitly requested.\n  //\n  // If a pathname is explicitly provided in `to`, it should be relative to the\n  // route context. This is explained in `Note on `<Link to>` values` in our\n  // migration guide from v5 as a means of disambiguation between `to` values\n  // that begin with `/` and those that do not. However, this is problematic for\n  // `to` values that do not provide a pathname. `to` can simply be a search or\n  // hash string, in which case we should assume that the navigation is relative\n  // to the current location's pathname and *not* the route pathname.\n  if (toPathname == null) {\n    from = locationPathname;\n  } else {\n    let routePathnameIndex = routePathnames.length - 1;\n    // With relative=\"route\" (the default), each leading .. segment means\n    // \"go up one route\" instead of \"go up one URL segment\".  This is a key\n    // difference from how <a href> works and a major reason we call this a\n    // \"to\" value instead of a \"href\".\n    if (!isPathRelative && toPathname.startsWith(\"..\")) {\n      let toSegments = toPathname.split(\"/\");\n      while (toSegments[0] === \"..\") {\n        toSegments.shift();\n        routePathnameIndex -= 1;\n      }\n      to.pathname = toSegments.join(\"/\");\n    }\n    from = routePathnameIndex >= 0 ? routePathnames[routePathnameIndex] : \"/\";\n  }\n  let path = resolvePath(to, from);\n  // Ensure the pathname has a trailing slash if the original \"to\" had one\n  let hasExplicitTrailingSlash = toPathname && toPathname !== \"/\" && toPathname.endsWith(\"/\");\n  // Or if this was a link to the current path which has a trailing slash\n  let hasCurrentTrailingSlash = (isEmptyPath || toPathname === \".\") && locationPathname.endsWith(\"/\");\n  if (!path.pathname.endsWith(\"/\") && (hasExplicitTrailingSlash || hasCurrentTrailingSlash)) {\n    path.pathname += \"/\";\n  }\n  return path;\n}\n/**\n * @private\n */\nfunction getToPathname(to) {\n  // Empty strings should be treated the same as / paths\n  return to === \"\" || to.pathname === \"\" ? \"/\" : typeof to === \"string\" ? parsePath(to).pathname : to.pathname;\n}\n/**\n * @private\n */\nconst joinPaths = paths => paths.join(\"/\").replace(/\\/\\/+/g, \"/\");\n/**\n * @private\n */\nconst normalizePathname = pathname => pathname.replace(/\\/+$/, \"\").replace(/^\\/*/, \"/\");\n/**\n * @private\n */\nconst normalizeSearch = search => !search || search === \"?\" ? \"\" : search.startsWith(\"?\") ? search : \"?\" + search;\n/**\n * @private\n */\nconst normalizeHash = hash => !hash || hash === \"#\" ? \"\" : hash.startsWith(\"#\") ? hash : \"#\" + hash;\n/**\n * This is a shortcut for creating `application/json` responses. Converts `data`\n * to JSON and sets the `Content-Type` header.\n *\n * @deprecated The `json` method is deprecated in favor of returning raw objects.\n * This method will be removed in v7.\n */\nconst json = function json(data, init) {\n  if (init === void 0) {\n    init = {};\n  }\n  let responseInit = typeof init === \"number\" ? {\n    status: init\n  } : init;\n  let headers = new Headers(responseInit.headers);\n  if (!headers.has(\"Content-Type\")) {\n    headers.set(\"Content-Type\", \"application/json; charset=utf-8\");\n  }\n  return new Response(JSON.stringify(data), _extends({}, responseInit, {\n    headers\n  }));\n};\nclass DataWithResponseInit {\n  constructor(data, init) {\n    this.type = \"DataWithResponseInit\";\n    this.data = data;\n    this.init = init || null;\n  }\n}\n/**\n * Create \"responses\" that contain `status`/`headers` without forcing\n * serialization into an actual `Response` - used by Remix single fetch\n */\nfunction data(data, init) {\n  return new DataWithResponseInit(data, typeof init === \"number\" ? {\n    status: init\n  } : init);\n}\nclass AbortedDeferredError extends Error {}\nclass DeferredData {\n  constructor(data, responseInit) {\n    this.pendingKeysSet = new Set();\n    this.subscribers = new Set();\n    this.deferredKeys = [];\n    invariant(data && typeof data === \"object\" && !Array.isArray(data), \"defer() only accepts plain objects\");\n    // Set up an AbortController + Promise we can race against to exit early\n    // cancellation\n    let reject;\n    this.abortPromise = new Promise((_, r) => reject = r);\n    this.controller = new AbortController();\n    let onAbort = () => reject(new AbortedDeferredError(\"Deferred data aborted\"));\n    this.unlistenAbortSignal = () => this.controller.signal.removeEventListener(\"abort\", onAbort);\n    this.controller.signal.addEventListener(\"abort\", onAbort);\n    this.data = Object.entries(data).reduce((acc, _ref2) => {\n      let [key, value] = _ref2;\n      return Object.assign(acc, {\n        [key]: this.trackPromise(key, value)\n      });\n    }, {});\n    if (this.done) {\n      // All incoming values were resolved\n      this.unlistenAbortSignal();\n    }\n    this.init = responseInit;\n  }\n  trackPromise(key, value) {\n    if (!(value instanceof Promise)) {\n      return value;\n    }\n    this.deferredKeys.push(key);\n    this.pendingKeysSet.add(key);\n    // We store a little wrapper promise that will be extended with\n    // _data/_error props upon resolve/reject\n    let promise = Promise.race([value, this.abortPromise]).then(data => this.onSettle(promise, key, undefined, data), error => this.onSettle(promise, key, error));\n    // Register rejection listeners to avoid uncaught promise rejections on\n    // errors or aborted deferred values\n    promise.catch(() => {});\n    Object.defineProperty(promise, \"_tracked\", {\n      get: () => true\n    });\n    return promise;\n  }\n  onSettle(promise, key, error, data) {\n    if (this.controller.signal.aborted && error instanceof AbortedDeferredError) {\n      this.unlistenAbortSignal();\n      Object.defineProperty(promise, \"_error\", {\n        get: () => error\n      });\n      return Promise.reject(error);\n    }\n    this.pendingKeysSet.delete(key);\n    if (this.done) {\n      // Nothing left to abort!\n      this.unlistenAbortSignal();\n    }\n    // If the promise was resolved/rejected with undefined, we'll throw an error as you\n    // should always resolve with a value or null\n    if (error === undefined && data === undefined) {\n      let undefinedError = new Error(\"Deferred data for key \\\"\" + key + \"\\\" resolved/rejected with `undefined`, \" + \"you must resolve/reject with a value or `null`.\");\n      Object.defineProperty(promise, \"_error\", {\n        get: () => undefinedError\n      });\n      this.emit(false, key);\n      return Promise.reject(undefinedError);\n    }\n    if (data === undefined) {\n      Object.defineProperty(promise, \"_error\", {\n        get: () => error\n      });\n      this.emit(false, key);\n      return Promise.reject(error);\n    }\n    Object.defineProperty(promise, \"_data\", {\n      get: () => data\n    });\n    this.emit(false, key);\n    return data;\n  }\n  emit(aborted, settledKey) {\n    this.subscribers.forEach(subscriber => subscriber(aborted, settledKey));\n  }\n  subscribe(fn) {\n    this.subscribers.add(fn);\n    return () => this.subscribers.delete(fn);\n  }\n  cancel() {\n    this.controller.abort();\n    this.pendingKeysSet.forEach((v, k) => this.pendingKeysSet.delete(k));\n    this.emit(true);\n  }\n  async resolveData(signal) {\n    let aborted = false;\n    if (!this.done) {\n      let onAbort = () => this.cancel();\n      signal.addEventListener(\"abort\", onAbort);\n      aborted = await new Promise(resolve => {\n        this.subscribe(aborted => {\n          signal.removeEventListener(\"abort\", onAbort);\n          if (aborted || this.done) {\n            resolve(aborted);\n          }\n        });\n      });\n    }\n    return aborted;\n  }\n  get done() {\n    return this.pendingKeysSet.size === 0;\n  }\n  get unwrappedData() {\n    invariant(this.data !== null && this.done, \"Can only unwrap data on initialized and settled deferreds\");\n    return Object.entries(this.data).reduce((acc, _ref3) => {\n      let [key, value] = _ref3;\n      return Object.assign(acc, {\n        [key]: unwrapTrackedPromise(value)\n      });\n    }, {});\n  }\n  get pendingKeys() {\n    return Array.from(this.pendingKeysSet);\n  }\n}\nfunction isTrackedPromise(value) {\n  return value instanceof Promise && value._tracked === true;\n}\nfunction unwrapTrackedPromise(value) {\n  if (!isTrackedPromise(value)) {\n    return value;\n  }\n  if (value._error) {\n    throw value._error;\n  }\n  return value._data;\n}\n/**\n * @deprecated The `defer` method is deprecated in favor of returning raw\n * objects. This method will be removed in v7.\n */\nconst defer = function defer(data, init) {\n  if (init === void 0) {\n    init = {};\n  }\n  let responseInit = typeof init === \"number\" ? {\n    status: init\n  } : init;\n  return new DeferredData(data, responseInit);\n};\n/**\n * A redirect response. Sets the status code and the `Location` header.\n * Defaults to \"302 Found\".\n */\nconst redirect = function redirect(url, init) {\n  if (init === void 0) {\n    init = 302;\n  }\n  let responseInit = init;\n  if (typeof responseInit === \"number\") {\n    responseInit = {\n      status: responseInit\n    };\n  } else if (typeof responseInit.status === \"undefined\") {\n    responseInit.status = 302;\n  }\n  let headers = new Headers(responseInit.headers);\n  headers.set(\"Location\", url);\n  return new Response(null, _extends({}, responseInit, {\n    headers\n  }));\n};\n/**\n * A redirect response that will force a document reload to the new location.\n * Sets the status code and the `Location` header.\n * Defaults to \"302 Found\".\n */\nconst redirectDocument = (url, init) => {\n  let response = redirect(url, init);\n  response.headers.set(\"X-Remix-Reload-Document\", \"true\");\n  return response;\n};\n/**\n * A redirect response that will perform a `history.replaceState` instead of a\n * `history.pushState` for client-side navigation redirects.\n * Sets the status code and the `Location` header.\n * Defaults to \"302 Found\".\n */\nconst replace = (url, init) => {\n  let response = redirect(url, init);\n  response.headers.set(\"X-Remix-Replace\", \"true\");\n  return response;\n};\n/**\n * @private\n * Utility class we use to hold auto-unwrapped 4xx/5xx Response bodies\n *\n * We don't export the class for public use since it's an implementation\n * detail, but we export the interface above so folks can build their own\n * abstractions around instances via isRouteErrorResponse()\n */\nclass ErrorResponseImpl {\n  constructor(status, statusText, data, internal) {\n    if (internal === void 0) {\n      internal = false;\n    }\n    this.status = status;\n    this.statusText = statusText || \"\";\n    this.internal = internal;\n    if (data instanceof Error) {\n      this.data = data.toString();\n      this.error = data;\n    } else {\n      this.data = data;\n    }\n  }\n}\n/**\n * Check if the given error is an ErrorResponse generated from a 4xx/5xx\n * Response thrown from an action/loader\n */\nfunction isRouteErrorResponse(error) {\n  return error != null && typeof error.status === \"number\" && typeof error.statusText === \"string\" && typeof error.internal === \"boolean\" && \"data\" in error;\n}\n\nconst validMutationMethodsArr = [\"post\", \"put\", \"patch\", \"delete\"];\nconst validMutationMethods = new Set(validMutationMethodsArr);\nconst validRequestMethodsArr = [\"get\", ...validMutationMethodsArr];\nconst validRequestMethods = new Set(validRequestMethodsArr);\nconst redirectStatusCodes = new Set([301, 302, 303, 307, 308]);\nconst redirectPreserveMethodStatusCodes = new Set([307, 308]);\nconst IDLE_NAVIGATION = {\n  state: \"idle\",\n  location: undefined,\n  formMethod: undefined,\n  formAction: undefined,\n  formEncType: undefined,\n  formData: undefined,\n  json: undefined,\n  text: undefined\n};\nconst IDLE_FETCHER = {\n  state: \"idle\",\n  data: undefined,\n  formMethod: undefined,\n  formAction: undefined,\n  formEncType: undefined,\n  formData: undefined,\n  json: undefined,\n  text: undefined\n};\nconst IDLE_BLOCKER = {\n  state: \"unblocked\",\n  proceed: undefined,\n  reset: undefined,\n  location: undefined\n};\nconst ABSOLUTE_URL_REGEX = /^(?:[a-z][a-z0-9+.-]*:|\\/\\/)/i;\nconst defaultMapRouteProperties = route => ({\n  hasErrorBoundary: Boolean(route.hasErrorBoundary)\n});\nconst TRANSITIONS_STORAGE_KEY = \"remix-router-transitions\";\n//#endregion\n////////////////////////////////////////////////////////////////////////////////\n//#region createRouter\n////////////////////////////////////////////////////////////////////////////////\n/**\n * Create a router and listen to history POP navigations\n */\nfunction createRouter(init) {\n  const routerWindow = init.window ? init.window : typeof window !== \"undefined\" ? window : undefined;\n  const isBrowser = typeof routerWindow !== \"undefined\" && typeof routerWindow.document !== \"undefined\" && typeof routerWindow.document.createElement !== \"undefined\";\n  const isServer = !isBrowser;\n  invariant(init.routes.length > 0, \"You must provide a non-empty routes array to createRouter\");\n  let mapRouteProperties;\n  if (init.mapRouteProperties) {\n    mapRouteProperties = init.mapRouteProperties;\n  } else if (init.detectErrorBoundary) {\n    // If they are still using the deprecated version, wrap it with the new API\n    let detectErrorBoundary = init.detectErrorBoundary;\n    mapRouteProperties = route => ({\n      hasErrorBoundary: detectErrorBoundary(route)\n    });\n  } else {\n    mapRouteProperties = defaultMapRouteProperties;\n  }\n  // Routes keyed by ID\n  let manifest = {};\n  // Routes in tree format for matching\n  let dataRoutes = convertRoutesToDataRoutes(init.routes, mapRouteProperties, undefined, manifest);\n  let inFlightDataRoutes;\n  let basename = init.basename || \"/\";\n  let dataStrategyImpl = init.dataStrategy || defaultDataStrategy;\n  let patchRoutesOnNavigationImpl = init.patchRoutesOnNavigation;\n  // Config driven behavior flags\n  let future = _extends({\n    v7_fetcherPersist: false,\n    v7_normalizeFormMethod: false,\n    v7_partialHydration: false,\n    v7_prependBasename: false,\n    v7_relativeSplatPath: false,\n    v7_skipActionErrorRevalidation: false\n  }, init.future);\n  // Cleanup function for history\n  let unlistenHistory = null;\n  // Externally-provided functions to call on all state changes\n  let subscribers = new Set();\n  // Externally-provided object to hold scroll restoration locations during routing\n  let savedScrollPositions = null;\n  // Externally-provided function to get scroll restoration keys\n  let getScrollRestorationKey = null;\n  // Externally-provided function to get current scroll position\n  let getScrollPosition = null;\n  // One-time flag to control the initial hydration scroll restoration.  Because\n  // we don't get the saved positions from <ScrollRestoration /> until _after_\n  // the initial render, we need to manually trigger a separate updateState to\n  // send along the restoreScrollPosition\n  // Set to true if we have `hydrationData` since we assume we were SSR'd and that\n  // SSR did the initial scroll restoration.\n  let initialScrollRestored = init.hydrationData != null;\n  let initialMatches = matchRoutes(dataRoutes, init.history.location, basename);\n  let initialMatchesIsFOW = false;\n  let initialErrors = null;\n  if (initialMatches == null && !patchRoutesOnNavigationImpl) {\n    // If we do not match a user-provided-route, fall back to the root\n    // to allow the error boundary to take over\n    let error = getInternalRouterError(404, {\n      pathname: init.history.location.pathname\n    });\n    let {\n      matches,\n      route\n    } = getShortCircuitMatches(dataRoutes);\n    initialMatches = matches;\n    initialErrors = {\n      [route.id]: error\n    };\n  }\n  // In SPA apps, if the user provided a patchRoutesOnNavigation implementation and\n  // our initial match is a splat route, clear them out so we run through lazy\n  // discovery on hydration in case there's a more accurate lazy route match.\n  // In SSR apps (with `hydrationData`), we expect that the server will send\n  // up the proper matched routes so we don't want to run lazy discovery on\n  // initial hydration and want to hydrate into the splat route.\n  if (initialMatches && !init.hydrationData) {\n    let fogOfWar = checkFogOfWar(initialMatches, dataRoutes, init.history.location.pathname);\n    if (fogOfWar.active) {\n      initialMatches = null;\n    }\n  }\n  let initialized;\n  if (!initialMatches) {\n    initialized = false;\n    initialMatches = [];\n    // If partial hydration and fog of war is enabled, we will be running\n    // `patchRoutesOnNavigation` during hydration so include any partial matches as\n    // the initial matches so we can properly render `HydrateFallback`'s\n    if (future.v7_partialHydration) {\n      let fogOfWar = checkFogOfWar(null, dataRoutes, init.history.location.pathname);\n      if (fogOfWar.active && fogOfWar.matches) {\n        initialMatchesIsFOW = true;\n        initialMatches = fogOfWar.matches;\n      }\n    }\n  } else if (initialMatches.some(m => m.route.lazy)) {\n    // All initialMatches need to be loaded before we're ready.  If we have lazy\n    // functions around still then we'll need to run them in initialize()\n    initialized = false;\n  } else if (!initialMatches.some(m => m.route.loader)) {\n    // If we've got no loaders to run, then we're good to go\n    initialized = true;\n  } else if (future.v7_partialHydration) {\n    // If partial hydration is enabled, we're initialized so long as we were\n    // provided with hydrationData for every route with a loader, and no loaders\n    // were marked for explicit hydration\n    let loaderData = init.hydrationData ? init.hydrationData.loaderData : null;\n    let errors = init.hydrationData ? init.hydrationData.errors : null;\n    // If errors exist, don't consider routes below the boundary\n    if (errors) {\n      let idx = initialMatches.findIndex(m => errors[m.route.id] !== undefined);\n      initialized = initialMatches.slice(0, idx + 1).every(m => !shouldLoadRouteOnHydration(m.route, loaderData, errors));\n    } else {\n      initialized = initialMatches.every(m => !shouldLoadRouteOnHydration(m.route, loaderData, errors));\n    }\n  } else {\n    // Without partial hydration - we're initialized if we were provided any\n    // hydrationData - which is expected to be complete\n    initialized = init.hydrationData != null;\n  }\n  let router;\n  let state = {\n    historyAction: init.history.action,\n    location: init.history.location,\n    matches: initialMatches,\n    initialized,\n    navigation: IDLE_NAVIGATION,\n    // Don't restore on initial updateState() if we were SSR'd\n    restoreScrollPosition: init.hydrationData != null ? false : null,\n    preventScrollReset: false,\n    revalidation: \"idle\",\n    loaderData: init.hydrationData && init.hydrationData.loaderData || {},\n    actionData: init.hydrationData && init.hydrationData.actionData || null,\n    errors: init.hydrationData && init.hydrationData.errors || initialErrors,\n    fetchers: new Map(),\n    blockers: new Map()\n  };\n  // -- Stateful internal variables to manage navigations --\n  // Current navigation in progress (to be committed in completeNavigation)\n  let pendingAction = Action.Pop;\n  // Should the current navigation prevent the scroll reset if scroll cannot\n  // be restored?\n  let pendingPreventScrollReset = false;\n  // AbortController for the active navigation\n  let pendingNavigationController;\n  // Should the current navigation enable document.startViewTransition?\n  let pendingViewTransitionEnabled = false;\n  // Store applied view transitions so we can apply them on POP\n  let appliedViewTransitions = new Map();\n  // Cleanup function for persisting applied transitions to sessionStorage\n  let removePageHideEventListener = null;\n  // We use this to avoid touching history in completeNavigation if a\n  // revalidation is entirely uninterrupted\n  let isUninterruptedRevalidation = false;\n  // Use this internal flag to force revalidation of all loaders:\n  //  - submissions (completed or interrupted)\n  //  - useRevalidator()\n  //  - X-Remix-Revalidate (from redirect)\n  let isRevalidationRequired = false;\n  // Use this internal array to capture routes that require revalidation due\n  // to a cancelled deferred on action submission\n  let cancelledDeferredRoutes = [];\n  // Use this internal array to capture fetcher loads that were cancelled by an\n  // action navigation and require revalidation\n  let cancelledFetcherLoads = new Set();\n  // AbortControllers for any in-flight fetchers\n  let fetchControllers = new Map();\n  // Track loads based on the order in which they started\n  let incrementingLoadId = 0;\n  // Track the outstanding pending navigation data load to be compared against\n  // the globally incrementing load when a fetcher load lands after a completed\n  // navigation\n  let pendingNavigationLoadId = -1;\n  // Fetchers that triggered data reloads as a result of their actions\n  let fetchReloadIds = new Map();\n  // Fetchers that triggered redirect navigations\n  let fetchRedirectIds = new Set();\n  // Most recent href/match for fetcher.load calls for fetchers\n  let fetchLoadMatches = new Map();\n  // Ref-count mounted fetchers so we know when it's ok to clean them up\n  let activeFetchers = new Map();\n  // Fetchers that have requested a delete when using v7_fetcherPersist,\n  // they'll be officially removed after they return to idle\n  let deletedFetchers = new Set();\n  // Store DeferredData instances for active route matches.  When a\n  // route loader returns defer() we stick one in here.  Then, when a nested\n  // promise resolves we update loaderData.  If a new navigation starts we\n  // cancel active deferreds for eliminated routes.\n  let activeDeferreds = new Map();\n  // Store blocker functions in a separate Map outside of router state since\n  // we don't need to update UI state if they change\n  let blockerFunctions = new Map();\n  // Flag to ignore the next history update, so we can revert the URL change on\n  // a POP navigation that was blocked by the user without touching router state\n  let unblockBlockerHistoryUpdate = undefined;\n  // Initialize the router, all side effects should be kicked off from here.\n  // Implemented as a Fluent API for ease of:\n  //   let router = createRouter(init).initialize();\n  function initialize() {\n    // If history informs us of a POP navigation, start the navigation but do not update\n    // state.  We'll update our own state once the navigation completes\n    unlistenHistory = init.history.listen(_ref => {\n      let {\n        action: historyAction,\n        location,\n        delta\n      } = _ref;\n      // Ignore this event if it was just us resetting the URL from a\n      // blocked POP navigation\n      if (unblockBlockerHistoryUpdate) {\n        unblockBlockerHistoryUpdate();\n        unblockBlockerHistoryUpdate = undefined;\n        return;\n      }\n      warning(blockerFunctions.size === 0 || delta != null, \"You are trying to use a blocker on a POP navigation to a location \" + \"that was not created by @remix-run/router. This will fail silently in \" + \"production. This can happen if you are navigating outside the router \" + \"via `window.history.pushState`/`window.location.hash` instead of using \" + \"router navigation APIs.  This can also happen if you are using \" + \"createHashRouter and the user manually changes the URL.\");\n      let blockerKey = shouldBlockNavigation({\n        currentLocation: state.location,\n        nextLocation: location,\n        historyAction\n      });\n      if (blockerKey && delta != null) {\n        // Restore the URL to match the current UI, but don't update router state\n        let nextHistoryUpdatePromise = new Promise(resolve => {\n          unblockBlockerHistoryUpdate = resolve;\n        });\n        init.history.go(delta * -1);\n        // Put the blocker into a blocked state\n        updateBlocker(blockerKey, {\n          state: \"blocked\",\n          location,\n          proceed() {\n            updateBlocker(blockerKey, {\n              state: \"proceeding\",\n              proceed: undefined,\n              reset: undefined,\n              location\n            });\n            // Re-do the same POP navigation we just blocked, after the url\n            // restoration is also complete.  See:\n            // https://github.com/remix-run/react-router/issues/11613\n            nextHistoryUpdatePromise.then(() => init.history.go(delta));\n          },\n          reset() {\n            let blockers = new Map(state.blockers);\n            blockers.set(blockerKey, IDLE_BLOCKER);\n            updateState({\n              blockers\n            });\n          }\n        });\n        return;\n      }\n      return startNavigation(historyAction, location);\n    });\n    if (isBrowser) {\n      // FIXME: This feels gross.  How can we cleanup the lines between\n      // scrollRestoration/appliedTransitions persistance?\n      restoreAppliedTransitions(routerWindow, appliedViewTransitions);\n      let _saveAppliedTransitions = () => persistAppliedTransitions(routerWindow, appliedViewTransitions);\n      routerWindow.addEventListener(\"pagehide\", _saveAppliedTransitions);\n      removePageHideEventListener = () => routerWindow.removeEventListener(\"pagehide\", _saveAppliedTransitions);\n    }\n    // Kick off initial data load if needed.  Use Pop to avoid modifying history\n    // Note we don't do any handling of lazy here.  For SPA's it'll get handled\n    // in the normal navigation flow.  For SSR it's expected that lazy modules are\n    // resolved prior to router creation since we can't go into a fallbackElement\n    // UI for SSR'd apps\n    if (!state.initialized) {\n      startNavigation(Action.Pop, state.location, {\n        initialHydration: true\n      });\n    }\n    return router;\n  }\n  // Clean up a router and it's side effects\n  function dispose() {\n    if (unlistenHistory) {\n      unlistenHistory();\n    }\n    if (removePageHideEventListener) {\n      removePageHideEventListener();\n    }\n    subscribers.clear();\n    pendingNavigationController && pendingNavigationController.abort();\n    state.fetchers.forEach((_, key) => deleteFetcher(key));\n    state.blockers.forEach((_, key) => deleteBlocker(key));\n  }\n  // Subscribe to state updates for the router\n  function subscribe(fn) {\n    subscribers.add(fn);\n    return () => subscribers.delete(fn);\n  }\n  // Update our state and notify the calling context of the change\n  function updateState(newState, opts) {\n    if (opts === void 0) {\n      opts = {};\n    }\n    state = _extends({}, state, newState);\n    // Prep fetcher cleanup so we can tell the UI which fetcher data entries\n    // can be removed\n    let completedFetchers = [];\n    let deletedFetchersKeys = [];\n    if (future.v7_fetcherPersist) {\n      state.fetchers.forEach((fetcher, key) => {\n        if (fetcher.state === \"idle\") {\n          if (deletedFetchers.has(key)) {\n            // Unmounted from the UI and can be totally removed\n            deletedFetchersKeys.push(key);\n          } else {\n            // Returned to idle but still mounted in the UI, so semi-remains for\n            // revalidations and such\n            completedFetchers.push(key);\n          }\n        }\n      });\n    }\n    // Remove any lingering deleted fetchers that have already been removed\n    // from state.fetchers\n    deletedFetchers.forEach(key => {\n      if (!state.fetchers.has(key) && !fetchControllers.has(key)) {\n        deletedFetchersKeys.push(key);\n      }\n    });\n    // Iterate over a local copy so that if flushSync is used and we end up\n    // removing and adding a new subscriber due to the useCallback dependencies,\n    // we don't get ourselves into a loop calling the new subscriber immediately\n    [...subscribers].forEach(subscriber => subscriber(state, {\n      deletedFetchers: deletedFetchersKeys,\n      viewTransitionOpts: opts.viewTransitionOpts,\n      flushSync: opts.flushSync === true\n    }));\n    // Remove idle fetchers from state since we only care about in-flight fetchers.\n    if (future.v7_fetcherPersist) {\n      completedFetchers.forEach(key => state.fetchers.delete(key));\n      deletedFetchersKeys.forEach(key => deleteFetcher(key));\n    } else {\n      // We already called deleteFetcher() on these, can remove them from this\n      // Set now that we've handed the keys off to the data layer\n      deletedFetchersKeys.forEach(key => deletedFetchers.delete(key));\n    }\n  }\n  // Complete a navigation returning the state.navigation back to the IDLE_NAVIGATION\n  // and setting state.[historyAction/location/matches] to the new route.\n  // - Location is a required param\n  // - Navigation will always be set to IDLE_NAVIGATION\n  // - Can pass any other state in newState\n  function completeNavigation(location, newState, _temp) {\n    var _location$state, _location$state2;\n    let {\n      flushSync\n    } = _temp === void 0 ? {} : _temp;\n    // Deduce if we're in a loading/actionReload state:\n    // - We have committed actionData in the store\n    // - The current navigation was a mutation submission\n    // - We're past the submitting state and into the loading state\n    // - The location being loaded is not the result of a redirect\n    let isActionReload = state.actionData != null && state.navigation.formMethod != null && isMutationMethod(state.navigation.formMethod) && state.navigation.state === \"loading\" && ((_location$state = location.state) == null ? void 0 : _location$state._isRedirect) !== true;\n    let actionData;\n    if (newState.actionData) {\n      if (Object.keys(newState.actionData).length > 0) {\n        actionData = newState.actionData;\n      } else {\n        // Empty actionData -> clear prior actionData due to an action error\n        actionData = null;\n      }\n    } else if (isActionReload) {\n      // Keep the current data if we're wrapping up the action reload\n      actionData = state.actionData;\n    } else {\n      // Clear actionData on any other completed navigations\n      actionData = null;\n    }\n    // Always preserve any existing loaderData from re-used routes\n    let loaderData = newState.loaderData ? mergeLoaderData(state.loaderData, newState.loaderData, newState.matches || [], newState.errors) : state.loaderData;\n    // On a successful navigation we can assume we got through all blockers\n    // so we can start fresh\n    let blockers = state.blockers;\n    if (blockers.size > 0) {\n      blockers = new Map(blockers);\n      blockers.forEach((_, k) => blockers.set(k, IDLE_BLOCKER));\n    }\n    // Always respect the user flag.  Otherwise don't reset on mutation\n    // submission navigations unless they redirect\n    let preventScrollReset = pendingPreventScrollReset === true || state.navigation.formMethod != null && isMutationMethod(state.navigation.formMethod) && ((_location$state2 = location.state) == null ? void 0 : _location$state2._isRedirect) !== true;\n    // Commit any in-flight routes at the end of the HMR revalidation \"navigation\"\n    if (inFlightDataRoutes) {\n      dataRoutes = inFlightDataRoutes;\n      inFlightDataRoutes = undefined;\n    }\n    if (isUninterruptedRevalidation) ; else if (pendingAction === Action.Pop) ; else if (pendingAction === Action.Push) {\n      init.history.push(location, location.state);\n    } else if (pendingAction === Action.Replace) {\n      init.history.replace(location, location.state);\n    }\n    let viewTransitionOpts;\n    // On POP, enable transitions if they were enabled on the original navigation\n    if (pendingAction === Action.Pop) {\n      // Forward takes precedence so they behave like the original navigation\n      let priorPaths = appliedViewTransitions.get(state.location.pathname);\n      if (priorPaths && priorPaths.has(location.pathname)) {\n        viewTransitionOpts = {\n          currentLocation: state.location,\n          nextLocation: location\n        };\n      } else if (appliedViewTransitions.has(location.pathname)) {\n        // If we don't have a previous forward nav, assume we're popping back to\n        // the new location and enable if that location previously enabled\n        viewTransitionOpts = {\n          currentLocation: location,\n          nextLocation: state.location\n        };\n      }\n    } else if (pendingViewTransitionEnabled) {\n      // Store the applied transition on PUSH/REPLACE\n      let toPaths = appliedViewTransitions.get(state.location.pathname);\n      if (toPaths) {\n        toPaths.add(location.pathname);\n      } else {\n        toPaths = new Set([location.pathname]);\n        appliedViewTransitions.set(state.location.pathname, toPaths);\n      }\n      viewTransitionOpts = {\n        currentLocation: state.location,\n        nextLocation: location\n      };\n    }\n    updateState(_extends({}, newState, {\n      actionData,\n      loaderData,\n      historyAction: pendingAction,\n      location,\n      initialized: true,\n      navigation: IDLE_NAVIGATION,\n      revalidation: \"idle\",\n      restoreScrollPosition: getSavedScrollPosition(location, newState.matches || state.matches),\n      preventScrollReset,\n      blockers\n    }), {\n      viewTransitionOpts,\n      flushSync: flushSync === true\n    });\n    // Reset stateful navigation vars\n    pendingAction = Action.Pop;\n    pendingPreventScrollReset = false;\n    pendingViewTransitionEnabled = false;\n    isUninterruptedRevalidation = false;\n    isRevalidationRequired = false;\n    cancelledDeferredRoutes = [];\n  }\n  // Trigger a navigation event, which can either be a numerical POP or a PUSH\n  // replace with an optional submission\n  async function navigate(to, opts) {\n    if (typeof to === \"number\") {\n      init.history.go(to);\n      return;\n    }\n    let normalizedPath = normalizeTo(state.location, state.matches, basename, future.v7_prependBasename, to, future.v7_relativeSplatPath, opts == null ? void 0 : opts.fromRouteId, opts == null ? void 0 : opts.relative);\n    let {\n      path,\n      submission,\n      error\n    } = normalizeNavigateOptions(future.v7_normalizeFormMethod, false, normalizedPath, opts);\n    let currentLocation = state.location;\n    let nextLocation = createLocation(state.location, path, opts && opts.state);\n    // When using navigate as a PUSH/REPLACE we aren't reading an already-encoded\n    // URL from window.location, so we need to encode it here so the behavior\n    // remains the same as POP and non-data-router usages.  new URL() does all\n    // the same encoding we'd get from a history.pushState/window.location read\n    // without having to touch history\n    nextLocation = _extends({}, nextLocation, init.history.encodeLocation(nextLocation));\n    let userReplace = opts && opts.replace != null ? opts.replace : undefined;\n    let historyAction = Action.Push;\n    if (userReplace === true) {\n      historyAction = Action.Replace;\n    } else if (userReplace === false) ; else if (submission != null && isMutationMethod(submission.formMethod) && submission.formAction === state.location.pathname + state.location.search) {\n      // By default on submissions to the current location we REPLACE so that\n      // users don't have to double-click the back button to get to the prior\n      // location.  If the user redirects to a different location from the\n      // action/loader this will be ignored and the redirect will be a PUSH\n      historyAction = Action.Replace;\n    }\n    let preventScrollReset = opts && \"preventScrollReset\" in opts ? opts.preventScrollReset === true : undefined;\n    let flushSync = (opts && opts.flushSync) === true;\n    let blockerKey = shouldBlockNavigation({\n      currentLocation,\n      nextLocation,\n      historyAction\n    });\n    if (blockerKey) {\n      // Put the blocker into a blocked state\n      updateBlocker(blockerKey, {\n        state: \"blocked\",\n        location: nextLocation,\n        proceed() {\n          updateBlocker(blockerKey, {\n            state: \"proceeding\",\n            proceed: undefined,\n            reset: undefined,\n            location: nextLocation\n          });\n          // Send the same navigation through\n          navigate(to, opts);\n        },\n        reset() {\n          let blockers = new Map(state.blockers);\n          blockers.set(blockerKey, IDLE_BLOCKER);\n          updateState({\n            blockers\n          });\n        }\n      });\n      return;\n    }\n    return await startNavigation(historyAction, nextLocation, {\n      submission,\n      // Send through the formData serialization error if we have one so we can\n      // render at the right error boundary after we match routes\n      pendingError: error,\n      preventScrollReset,\n      replace: opts && opts.replace,\n      enableViewTransition: opts && opts.viewTransition,\n      flushSync\n    });\n  }\n  // Revalidate all current loaders.  If a navigation is in progress or if this\n  // is interrupted by a navigation, allow this to \"succeed\" by calling all\n  // loaders during the next loader round\n  function revalidate() {\n    interruptActiveLoads();\n    updateState({\n      revalidation: \"loading\"\n    });\n    // If we're currently submitting an action, we don't need to start a new\n    // navigation, we'll just let the follow up loader execution call all loaders\n    if (state.navigation.state === \"submitting\") {\n      return;\n    }\n    // If we're currently in an idle state, start a new navigation for the current\n    // action/location and mark it as uninterrupted, which will skip the history\n    // update in completeNavigation\n    if (state.navigation.state === \"idle\") {\n      startNavigation(state.historyAction, state.location, {\n        startUninterruptedRevalidation: true\n      });\n      return;\n    }\n    // Otherwise, if we're currently in a loading state, just start a new\n    // navigation to the navigation.location but do not trigger an uninterrupted\n    // revalidation so that history correctly updates once the navigation completes\n    startNavigation(pendingAction || state.historyAction, state.navigation.location, {\n      overrideNavigation: state.navigation,\n      // Proxy through any rending view transition\n      enableViewTransition: pendingViewTransitionEnabled === true\n    });\n  }\n  // Start a navigation to the given action/location.  Can optionally provide a\n  // overrideNavigation which will override the normalLoad in the case of a redirect\n  // navigation\n  async function startNavigation(historyAction, location, opts) {\n    // Abort any in-progress navigations and start a new one. Unset any ongoing\n    // uninterrupted revalidations unless told otherwise, since we want this\n    // new navigation to update history normally\n    pendingNavigationController && pendingNavigationController.abort();\n    pendingNavigationController = null;\n    pendingAction = historyAction;\n    isUninterruptedRevalidation = (opts && opts.startUninterruptedRevalidation) === true;\n    // Save the current scroll position every time we start a new navigation,\n    // and track whether we should reset scroll on completion\n    saveScrollPosition(state.location, state.matches);\n    pendingPreventScrollReset = (opts && opts.preventScrollReset) === true;\n    pendingViewTransitionEnabled = (opts && opts.enableViewTransition) === true;\n    let routesToUse = inFlightDataRoutes || dataRoutes;\n    let loadingNavigation = opts && opts.overrideNavigation;\n    let matches = opts != null && opts.initialHydration && state.matches && state.matches.length > 0 && !initialMatchesIsFOW ?\n    // `matchRoutes()` has already been called if we're in here via `router.initialize()`\n    state.matches : matchRoutes(routesToUse, location, basename);\n    let flushSync = (opts && opts.flushSync) === true;\n    // Short circuit if it's only a hash change and not a revalidation or\n    // mutation submission.\n    //\n    // Ignore on initial page loads because since the initial hydration will always\n    // be \"same hash\".  For example, on /page#hash and submit a <Form method=\"post\">\n    // which will default to a navigation to /page\n    if (matches && state.initialized && !isRevalidationRequired && isHashChangeOnly(state.location, location) && !(opts && opts.submission && isMutationMethod(opts.submission.formMethod))) {\n      completeNavigation(location, {\n        matches\n      }, {\n        flushSync\n      });\n      return;\n    }\n    let fogOfWar = checkFogOfWar(matches, routesToUse, location.pathname);\n    if (fogOfWar.active && fogOfWar.matches) {\n      matches = fogOfWar.matches;\n    }\n    // Short circuit with a 404 on the root error boundary if we match nothing\n    if (!matches) {\n      let {\n        error,\n        notFoundMatches,\n        route\n      } = handleNavigational404(location.pathname);\n      completeNavigation(location, {\n        matches: notFoundMatches,\n        loaderData: {},\n        errors: {\n          [route.id]: error\n        }\n      }, {\n        flushSync\n      });\n      return;\n    }\n    // Create a controller/Request for this navigation\n    pendingNavigationController = new AbortController();\n    let request = createClientSideRequest(init.history, location, pendingNavigationController.signal, opts && opts.submission);\n    let pendingActionResult;\n    if (opts && opts.pendingError) {\n      // If we have a pendingError, it means the user attempted a GET submission\n      // with binary FormData so assign here and skip to handleLoaders.  That\n      // way we handle calling loaders above the boundary etc.  It's not really\n      // different from an actionError in that sense.\n      pendingActionResult = [findNearestBoundary(matches).route.id, {\n        type: ResultType.error,\n        error: opts.pendingError\n      }];\n    } else if (opts && opts.submission && isMutationMethod(opts.submission.formMethod)) {\n      // Call action if we received an action submission\n      let actionResult = await handleAction(request, location, opts.submission, matches, fogOfWar.active, {\n        replace: opts.replace,\n        flushSync\n      });\n      if (actionResult.shortCircuited) {\n        return;\n      }\n      // If we received a 404 from handleAction, it's because we couldn't lazily\n      // discover the destination route so we don't want to call loaders\n      if (actionResult.pendingActionResult) {\n        let [routeId, result] = actionResult.pendingActionResult;\n        if (isErrorResult(result) && isRouteErrorResponse(result.error) && result.error.status === 404) {\n          pendingNavigationController = null;\n          completeNavigation(location, {\n            matches: actionResult.matches,\n            loaderData: {},\n            errors: {\n              [routeId]: result.error\n            }\n          });\n          return;\n        }\n      }\n      matches = actionResult.matches || matches;\n      pendingActionResult = actionResult.pendingActionResult;\n      loadingNavigation = getLoadingNavigation(location, opts.submission);\n      flushSync = false;\n      // No need to do fog of war matching again on loader execution\n      fogOfWar.active = false;\n      // Create a GET request for the loaders\n      request = createClientSideRequest(init.history, request.url, request.signal);\n    }\n    // Call loaders\n    let {\n      shortCircuited,\n      matches: updatedMatches,\n      loaderData,\n      errors\n    } = await handleLoaders(request, location, matches, fogOfWar.active, loadingNavigation, opts && opts.submission, opts && opts.fetcherSubmission, opts && opts.replace, opts && opts.initialHydration === true, flushSync, pendingActionResult);\n    if (shortCircuited) {\n      return;\n    }\n    // Clean up now that the action/loaders have completed.  Don't clean up if\n    // we short circuited because pendingNavigationController will have already\n    // been assigned to a new controller for the next navigation\n    pendingNavigationController = null;\n    completeNavigation(location, _extends({\n      matches: updatedMatches || matches\n    }, getActionDataForCommit(pendingActionResult), {\n      loaderData,\n      errors\n    }));\n  }\n  // Call the action matched by the leaf route for this navigation and handle\n  // redirects/errors\n  async function handleAction(request, location, submission, matches, isFogOfWar, opts) {\n    if (opts === void 0) {\n      opts = {};\n    }\n    interruptActiveLoads();\n    // Put us in a submitting state\n    let navigation = getSubmittingNavigation(location, submission);\n    updateState({\n      navigation\n    }, {\n      flushSync: opts.flushSync === true\n    });\n    if (isFogOfWar) {\n      let discoverResult = await discoverRoutes(matches, location.pathname, request.signal);\n      if (discoverResult.type === \"aborted\") {\n        return {\n          shortCircuited: true\n        };\n      } else if (discoverResult.type === \"error\") {\n        let boundaryId = findNearestBoundary(discoverResult.partialMatches).route.id;\n        return {\n          matches: discoverResult.partialMatches,\n          pendingActionResult: [boundaryId, {\n            type: ResultType.error,\n            error: discoverResult.error\n          }]\n        };\n      } else if (!discoverResult.matches) {\n        let {\n          notFoundMatches,\n          error,\n          route\n        } = handleNavigational404(location.pathname);\n        return {\n          matches: notFoundMatches,\n          pendingActionResult: [route.id, {\n            type: ResultType.error,\n            error\n          }]\n        };\n      } else {\n        matches = discoverResult.matches;\n      }\n    }\n    // Call our action and get the result\n    let result;\n    let actionMatch = getTargetMatch(matches, location);\n    if (!actionMatch.route.action && !actionMatch.route.lazy) {\n      result = {\n        type: ResultType.error,\n        error: getInternalRouterError(405, {\n          method: request.method,\n          pathname: location.pathname,\n          routeId: actionMatch.route.id\n        })\n      };\n    } else {\n      let results = await callDataStrategy(\"action\", state, request, [actionMatch], matches, null);\n      result = results[actionMatch.route.id];\n      if (request.signal.aborted) {\n        return {\n          shortCircuited: true\n        };\n      }\n    }\n    if (isRedirectResult(result)) {\n      let replace;\n      if (opts && opts.replace != null) {\n        replace = opts.replace;\n      } else {\n        // If the user didn't explicity indicate replace behavior, replace if\n        // we redirected to the exact same location we're currently at to avoid\n        // double back-buttons\n        let location = normalizeRedirectLocation(result.response.headers.get(\"Location\"), new URL(request.url), basename);\n        replace = location === state.location.pathname + state.location.search;\n      }\n      await startRedirectNavigation(request, result, true, {\n        submission,\n        replace\n      });\n      return {\n        shortCircuited: true\n      };\n    }\n    if (isDeferredResult(result)) {\n      throw getInternalRouterError(400, {\n        type: \"defer-action\"\n      });\n    }\n    if (isErrorResult(result)) {\n      // Store off the pending error - we use it to determine which loaders\n      // to call and will commit it when we complete the navigation\n      let boundaryMatch = findNearestBoundary(matches, actionMatch.route.id);\n      // By default, all submissions to the current location are REPLACE\n      // navigations, but if the action threw an error that'll be rendered in\n      // an errorElement, we fall back to PUSH so that the user can use the\n      // back button to get back to the pre-submission form location to try\n      // again\n      if ((opts && opts.replace) !== true) {\n        pendingAction = Action.Push;\n      }\n      return {\n        matches,\n        pendingActionResult: [boundaryMatch.route.id, result]\n      };\n    }\n    return {\n      matches,\n      pendingActionResult: [actionMatch.route.id, result]\n    };\n  }\n  // Call all applicable loaders for the given matches, handling redirects,\n  // errors, etc.\n  async function handleLoaders(request, location, matches, isFogOfWar, overrideNavigation, submission, fetcherSubmission, replace, initialHydration, flushSync, pendingActionResult) {\n    // Figure out the right navigation we want to use for data loading\n    let loadingNavigation = overrideNavigation || getLoadingNavigation(location, submission);\n    // If this was a redirect from an action we don't have a \"submission\" but\n    // we have it on the loading navigation so use that if available\n    let activeSubmission = submission || fetcherSubmission || getSubmissionFromNavigation(loadingNavigation);\n    // If this is an uninterrupted revalidation, we remain in our current idle\n    // state.  If not, we need to switch to our loading state and load data,\n    // preserving any new action data or existing action data (in the case of\n    // a revalidation interrupting an actionReload)\n    // If we have partialHydration enabled, then don't update the state for the\n    // initial data load since it's not a \"navigation\"\n    let shouldUpdateNavigationState = !isUninterruptedRevalidation && (!future.v7_partialHydration || !initialHydration);\n    // When fog of war is enabled, we enter our `loading` state earlier so we\n    // can discover new routes during the `loading` state.  We skip this if\n    // we've already run actions since we would have done our matching already.\n    // If the children() function threw then, we want to proceed with the\n    // partial matches it discovered.\n    if (isFogOfWar) {\n      if (shouldUpdateNavigationState) {\n        let actionData = getUpdatedActionData(pendingActionResult);\n        updateState(_extends({\n          navigation: loadingNavigation\n        }, actionData !== undefined ? {\n          actionData\n        } : {}), {\n          flushSync\n        });\n      }\n      let discoverResult = await discoverRoutes(matches, location.pathname, request.signal);\n      if (discoverResult.type === \"aborted\") {\n        return {\n          shortCircuited: true\n        };\n      } else if (discoverResult.type === \"error\") {\n        let boundaryId = findNearestBoundary(discoverResult.partialMatches).route.id;\n        return {\n          matches: discoverResult.partialMatches,\n          loaderData: {},\n          errors: {\n            [boundaryId]: discoverResult.error\n          }\n        };\n      } else if (!discoverResult.matches) {\n        let {\n          error,\n          notFoundMatches,\n          route\n        } = handleNavigational404(location.pathname);\n        return {\n          matches: notFoundMatches,\n          loaderData: {},\n          errors: {\n            [route.id]: error\n          }\n        };\n      } else {\n        matches = discoverResult.matches;\n      }\n    }\n    let routesToUse = inFlightDataRoutes || dataRoutes;\n    let [matchesToLoad, revalidatingFetchers] = getMatchesToLoad(init.history, state, matches, activeSubmission, location, future.v7_partialHydration && initialHydration === true, future.v7_skipActionErrorRevalidation, isRevalidationRequired, cancelledDeferredRoutes, cancelledFetcherLoads, deletedFetchers, fetchLoadMatches, fetchRedirectIds, routesToUse, basename, pendingActionResult);\n    // Cancel pending deferreds for no-longer-matched routes or routes we're\n    // about to reload.  Note that if this is an action reload we would have\n    // already cancelled all pending deferreds so this would be a no-op\n    cancelActiveDeferreds(routeId => !(matches && matches.some(m => m.route.id === routeId)) || matchesToLoad && matchesToLoad.some(m => m.route.id === routeId));\n    pendingNavigationLoadId = ++incrementingLoadId;\n    // Short circuit if we have no loaders to run\n    if (matchesToLoad.length === 0 && revalidatingFetchers.length === 0) {\n      let updatedFetchers = markFetchRedirectsDone();\n      completeNavigation(location, _extends({\n        matches,\n        loaderData: {},\n        // Commit pending error if we're short circuiting\n        errors: pendingActionResult && isErrorResult(pendingActionResult[1]) ? {\n          [pendingActionResult[0]]: pendingActionResult[1].error\n        } : null\n      }, getActionDataForCommit(pendingActionResult), updatedFetchers ? {\n        fetchers: new Map(state.fetchers)\n      } : {}), {\n        flushSync\n      });\n      return {\n        shortCircuited: true\n      };\n    }\n    if (shouldUpdateNavigationState) {\n      let updates = {};\n      if (!isFogOfWar) {\n        // Only update navigation/actionNData if we didn't already do it above\n        updates.navigation = loadingNavigation;\n        let actionData = getUpdatedActionData(pendingActionResult);\n        if (actionData !== undefined) {\n          updates.actionData = actionData;\n        }\n      }\n      if (revalidatingFetchers.length > 0) {\n        updates.fetchers = getUpdatedRevalidatingFetchers(revalidatingFetchers);\n      }\n      updateState(updates, {\n        flushSync\n      });\n    }\n    revalidatingFetchers.forEach(rf => {\n      abortFetcher(rf.key);\n      if (rf.controller) {\n        // Fetchers use an independent AbortController so that aborting a fetcher\n        // (via deleteFetcher) does not abort the triggering navigation that\n        // triggered the revalidation\n        fetchControllers.set(rf.key, rf.controller);\n      }\n    });\n    // Proxy navigation abort through to revalidation fetchers\n    let abortPendingFetchRevalidations = () => revalidatingFetchers.forEach(f => abortFetcher(f.key));\n    if (pendingNavigationController) {\n      pendingNavigationController.signal.addEventListener(\"abort\", abortPendingFetchRevalidations);\n    }\n    let {\n      loaderResults,\n      fetcherResults\n    } = await callLoadersAndMaybeResolveData(state, matches, matchesToLoad, revalidatingFetchers, request);\n    if (request.signal.aborted) {\n      return {\n        shortCircuited: true\n      };\n    }\n    // Clean up _after_ loaders have completed.  Don't clean up if we short\n    // circuited because fetchControllers would have been aborted and\n    // reassigned to new controllers for the next navigation\n    if (pendingNavigationController) {\n      pendingNavigationController.signal.removeEventListener(\"abort\", abortPendingFetchRevalidations);\n    }\n    revalidatingFetchers.forEach(rf => fetchControllers.delete(rf.key));\n    // If any loaders returned a redirect Response, start a new REPLACE navigation\n    let redirect = findRedirect(loaderResults);\n    if (redirect) {\n      await startRedirectNavigation(request, redirect.result, true, {\n        replace\n      });\n      return {\n        shortCircuited: true\n      };\n    }\n    redirect = findRedirect(fetcherResults);\n    if (redirect) {\n      // If this redirect came from a fetcher make sure we mark it in\n      // fetchRedirectIds so it doesn't get revalidated on the next set of\n      // loader executions\n      fetchRedirectIds.add(redirect.key);\n      await startRedirectNavigation(request, redirect.result, true, {\n        replace\n      });\n      return {\n        shortCircuited: true\n      };\n    }\n    // Process and commit output from loaders\n    let {\n      loaderData,\n      errors\n    } = processLoaderData(state, matches, loaderResults, pendingActionResult, revalidatingFetchers, fetcherResults, activeDeferreds);\n    // Wire up subscribers to update loaderData as promises settle\n    activeDeferreds.forEach((deferredData, routeId) => {\n      deferredData.subscribe(aborted => {\n        // Note: No need to updateState here since the TrackedPromise on\n        // loaderData is stable across resolve/reject\n        // Remove this instance if we were aborted or if promises have settled\n        if (aborted || deferredData.done) {\n          activeDeferreds.delete(routeId);\n        }\n      });\n    });\n    // Preserve SSR errors during partial hydration\n    if (future.v7_partialHydration && initialHydration && state.errors) {\n      errors = _extends({}, state.errors, errors);\n    }\n    let updatedFetchers = markFetchRedirectsDone();\n    let didAbortFetchLoads = abortStaleFetchLoads(pendingNavigationLoadId);\n    let shouldUpdateFetchers = updatedFetchers || didAbortFetchLoads || revalidatingFetchers.length > 0;\n    return _extends({\n      matches,\n      loaderData,\n      errors\n    }, shouldUpdateFetchers ? {\n      fetchers: new Map(state.fetchers)\n    } : {});\n  }\n  function getUpdatedActionData(pendingActionResult) {\n    if (pendingActionResult && !isErrorResult(pendingActionResult[1])) {\n      // This is cast to `any` currently because `RouteData`uses any and it\n      // would be a breaking change to use any.\n      // TODO: v7 - change `RouteData` to use `unknown` instead of `any`\n      return {\n        [pendingActionResult[0]]: pendingActionResult[1].data\n      };\n    } else if (state.actionData) {\n      if (Object.keys(state.actionData).length === 0) {\n        return null;\n      } else {\n        return state.actionData;\n      }\n    }\n  }\n  function getUpdatedRevalidatingFetchers(revalidatingFetchers) {\n    revalidatingFetchers.forEach(rf => {\n      let fetcher = state.fetchers.get(rf.key);\n      let revalidatingFetcher = getLoadingFetcher(undefined, fetcher ? fetcher.data : undefined);\n      state.fetchers.set(rf.key, revalidatingFetcher);\n    });\n    return new Map(state.fetchers);\n  }\n  // Trigger a fetcher load/submit for the given fetcher key\n  function fetch(key, routeId, href, opts) {\n    if (isServer) {\n      throw new Error(\"router.fetch() was called during the server render, but it shouldn't be. \" + \"You are likely calling a useFetcher() method in the body of your component. \" + \"Try moving it to a useEffect or a callback.\");\n    }\n    abortFetcher(key);\n    let flushSync = (opts && opts.flushSync) === true;\n    let routesToUse = inFlightDataRoutes || dataRoutes;\n    let normalizedPath = normalizeTo(state.location, state.matches, basename, future.v7_prependBasename, href, future.v7_relativeSplatPath, routeId, opts == null ? void 0 : opts.relative);\n    let matches = matchRoutes(routesToUse, normalizedPath, basename);\n    let fogOfWar = checkFogOfWar(matches, routesToUse, normalizedPath);\n    if (fogOfWar.active && fogOfWar.matches) {\n      matches = fogOfWar.matches;\n    }\n    if (!matches) {\n      setFetcherError(key, routeId, getInternalRouterError(404, {\n        pathname: normalizedPath\n      }), {\n        flushSync\n      });\n      return;\n    }\n    let {\n      path,\n      submission,\n      error\n    } = normalizeNavigateOptions(future.v7_normalizeFormMethod, true, normalizedPath, opts);\n    if (error) {\n      setFetcherError(key, routeId, error, {\n        flushSync\n      });\n      return;\n    }\n    let match = getTargetMatch(matches, path);\n    let preventScrollReset = (opts && opts.preventScrollReset) === true;\n    if (submission && isMutationMethod(submission.formMethod)) {\n      handleFetcherAction(key, routeId, path, match, matches, fogOfWar.active, flushSync, preventScrollReset, submission);\n      return;\n    }\n    // Store off the match so we can call it's shouldRevalidate on subsequent\n    // revalidations\n    fetchLoadMatches.set(key, {\n      routeId,\n      path\n    });\n    handleFetcherLoader(key, routeId, path, match, matches, fogOfWar.active, flushSync, preventScrollReset, submission);\n  }\n  // Call the action for the matched fetcher.submit(), and then handle redirects,\n  // errors, and revalidation\n  async function handleFetcherAction(key, routeId, path, match, requestMatches, isFogOfWar, flushSync, preventScrollReset, submission) {\n    interruptActiveLoads();\n    fetchLoadMatches.delete(key);\n    function detectAndHandle405Error(m) {\n      if (!m.route.action && !m.route.lazy) {\n        let error = getInternalRouterError(405, {\n          method: submission.formMethod,\n          pathname: path,\n          routeId: routeId\n        });\n        setFetcherError(key, routeId, error, {\n          flushSync\n        });\n        return true;\n      }\n      return false;\n    }\n    if (!isFogOfWar && detectAndHandle405Error(match)) {\n      return;\n    }\n    // Put this fetcher into it's submitting state\n    let existingFetcher = state.fetchers.get(key);\n    updateFetcherState(key, getSubmittingFetcher(submission, existingFetcher), {\n      flushSync\n    });\n    let abortController = new AbortController();\n    let fetchRequest = createClientSideRequest(init.history, path, abortController.signal, submission);\n    if (isFogOfWar) {\n      let discoverResult = await discoverRoutes(requestMatches, new URL(fetchRequest.url).pathname, fetchRequest.signal, key);\n      if (discoverResult.type === \"aborted\") {\n        return;\n      } else if (discoverResult.type === \"error\") {\n        setFetcherError(key, routeId, discoverResult.error, {\n          flushSync\n        });\n        return;\n      } else if (!discoverResult.matches) {\n        setFetcherError(key, routeId, getInternalRouterError(404, {\n          pathname: path\n        }), {\n          flushSync\n        });\n        return;\n      } else {\n        requestMatches = discoverResult.matches;\n        match = getTargetMatch(requestMatches, path);\n        if (detectAndHandle405Error(match)) {\n          return;\n        }\n      }\n    }\n    // Call the action for the fetcher\n    fetchControllers.set(key, abortController);\n    let originatingLoadId = incrementingLoadId;\n    let actionResults = await callDataStrategy(\"action\", state, fetchRequest, [match], requestMatches, key);\n    let actionResult = actionResults[match.route.id];\n    if (fetchRequest.signal.aborted) {\n      // We can delete this so long as we weren't aborted by our own fetcher\n      // re-submit which would have put _new_ controller is in fetchControllers\n      if (fetchControllers.get(key) === abortController) {\n        fetchControllers.delete(key);\n      }\n      return;\n    }\n    // When using v7_fetcherPersist, we don't want errors bubbling up to the UI\n    // or redirects processed for unmounted fetchers so we just revert them to\n    // idle\n    if (future.v7_fetcherPersist && deletedFetchers.has(key)) {\n      if (isRedirectResult(actionResult) || isErrorResult(actionResult)) {\n        updateFetcherState(key, getDoneFetcher(undefined));\n        return;\n      }\n      // Let SuccessResult's fall through for revalidation\n    } else {\n      if (isRedirectResult(actionResult)) {\n        fetchControllers.delete(key);\n        if (pendingNavigationLoadId > originatingLoadId) {\n          // A new navigation was kicked off after our action started, so that\n          // should take precedence over this redirect navigation.  We already\n          // set isRevalidationRequired so all loaders for the new route should\n          // fire unless opted out via shouldRevalidate\n          updateFetcherState(key, getDoneFetcher(undefined));\n          return;\n        } else {\n          fetchRedirectIds.add(key);\n          updateFetcherState(key, getLoadingFetcher(submission));\n          return startRedirectNavigation(fetchRequest, actionResult, false, {\n            fetcherSubmission: submission,\n            preventScrollReset\n          });\n        }\n      }\n      // Process any non-redirect errors thrown\n      if (isErrorResult(actionResult)) {\n        setFetcherError(key, routeId, actionResult.error);\n        return;\n      }\n    }\n    if (isDeferredResult(actionResult)) {\n      throw getInternalRouterError(400, {\n        type: \"defer-action\"\n      });\n    }\n    // Start the data load for current matches, or the next location if we're\n    // in the middle of a navigation\n    let nextLocation = state.navigation.location || state.location;\n    let revalidationRequest = createClientSideRequest(init.history, nextLocation, abortController.signal);\n    let routesToUse = inFlightDataRoutes || dataRoutes;\n    let matches = state.navigation.state !== \"idle\" ? matchRoutes(routesToUse, state.navigation.location, basename) : state.matches;\n    invariant(matches, \"Didn't find any matches after fetcher action\");\n    let loadId = ++incrementingLoadId;\n    fetchReloadIds.set(key, loadId);\n    let loadFetcher = getLoadingFetcher(submission, actionResult.data);\n    state.fetchers.set(key, loadFetcher);\n    let [matchesToLoad, revalidatingFetchers] = getMatchesToLoad(init.history, state, matches, submission, nextLocation, false, future.v7_skipActionErrorRevalidation, isRevalidationRequired, cancelledDeferredRoutes, cancelledFetcherLoads, deletedFetchers, fetchLoadMatches, fetchRedirectIds, routesToUse, basename, [match.route.id, actionResult]);\n    // Put all revalidating fetchers into the loading state, except for the\n    // current fetcher which we want to keep in it's current loading state which\n    // contains it's action submission info + action data\n    revalidatingFetchers.filter(rf => rf.key !== key).forEach(rf => {\n      let staleKey = rf.key;\n      let existingFetcher = state.fetchers.get(staleKey);\n      let revalidatingFetcher = getLoadingFetcher(undefined, existingFetcher ? existingFetcher.data : undefined);\n      state.fetchers.set(staleKey, revalidatingFetcher);\n      abortFetcher(staleKey);\n      if (rf.controller) {\n        fetchControllers.set(staleKey, rf.controller);\n      }\n    });\n    updateState({\n      fetchers: new Map(state.fetchers)\n    });\n    let abortPendingFetchRevalidations = () => revalidatingFetchers.forEach(rf => abortFetcher(rf.key));\n    abortController.signal.addEventListener(\"abort\", abortPendingFetchRevalidations);\n    let {\n      loaderResults,\n      fetcherResults\n    } = await callLoadersAndMaybeResolveData(state, matches, matchesToLoad, revalidatingFetchers, revalidationRequest);\n    if (abortController.signal.aborted) {\n      return;\n    }\n    abortController.signal.removeEventListener(\"abort\", abortPendingFetchRevalidations);\n    fetchReloadIds.delete(key);\n    fetchControllers.delete(key);\n    revalidatingFetchers.forEach(r => fetchControllers.delete(r.key));\n    let redirect = findRedirect(loaderResults);\n    if (redirect) {\n      return startRedirectNavigation(revalidationRequest, redirect.result, false, {\n        preventScrollReset\n      });\n    }\n    redirect = findRedirect(fetcherResults);\n    if (redirect) {\n      // If this redirect came from a fetcher make sure we mark it in\n      // fetchRedirectIds so it doesn't get revalidated on the next set of\n      // loader executions\n      fetchRedirectIds.add(redirect.key);\n      return startRedirectNavigation(revalidationRequest, redirect.result, false, {\n        preventScrollReset\n      });\n    }\n    // Process and commit output from loaders\n    let {\n      loaderData,\n      errors\n    } = processLoaderData(state, matches, loaderResults, undefined, revalidatingFetchers, fetcherResults, activeDeferreds);\n    // Since we let revalidations complete even if the submitting fetcher was\n    // deleted, only put it back to idle if it hasn't been deleted\n    if (state.fetchers.has(key)) {\n      let doneFetcher = getDoneFetcher(actionResult.data);\n      state.fetchers.set(key, doneFetcher);\n    }\n    abortStaleFetchLoads(loadId);\n    // If we are currently in a navigation loading state and this fetcher is\n    // more recent than the navigation, we want the newer data so abort the\n    // navigation and complete it with the fetcher data\n    if (state.navigation.state === \"loading\" && loadId > pendingNavigationLoadId) {\n      invariant(pendingAction, \"Expected pending action\");\n      pendingNavigationController && pendingNavigationController.abort();\n      completeNavigation(state.navigation.location, {\n        matches,\n        loaderData,\n        errors,\n        fetchers: new Map(state.fetchers)\n      });\n    } else {\n      // otherwise just update with the fetcher data, preserving any existing\n      // loaderData for loaders that did not need to reload.  We have to\n      // manually merge here since we aren't going through completeNavigation\n      updateState({\n        errors,\n        loaderData: mergeLoaderData(state.loaderData, loaderData, matches, errors),\n        fetchers: new Map(state.fetchers)\n      });\n      isRevalidationRequired = false;\n    }\n  }\n  // Call the matched loader for fetcher.load(), handling redirects, errors, etc.\n  async function handleFetcherLoader(key, routeId, path, match, matches, isFogOfWar, flushSync, preventScrollReset, submission) {\n    let existingFetcher = state.fetchers.get(key);\n    updateFetcherState(key, getLoadingFetcher(submission, existingFetcher ? existingFetcher.data : undefined), {\n      flushSync\n    });\n    let abortController = new AbortController();\n    let fetchRequest = createClientSideRequest(init.history, path, abortController.signal);\n    if (isFogOfWar) {\n      let discoverResult = await discoverRoutes(matches, new URL(fetchRequest.url).pathname, fetchRequest.signal, key);\n      if (discoverResult.type === \"aborted\") {\n        return;\n      } else if (discoverResult.type === \"error\") {\n        setFetcherError(key, routeId, discoverResult.error, {\n          flushSync\n        });\n        return;\n      } else if (!discoverResult.matches) {\n        setFetcherError(key, routeId, getInternalRouterError(404, {\n          pathname: path\n        }), {\n          flushSync\n        });\n        return;\n      } else {\n        matches = discoverResult.matches;\n        match = getTargetMatch(matches, path);\n      }\n    }\n    // Call the loader for this fetcher route match\n    fetchControllers.set(key, abortController);\n    let originatingLoadId = incrementingLoadId;\n    let results = await callDataStrategy(\"loader\", state, fetchRequest, [match], matches, key);\n    let result = results[match.route.id];\n    // Deferred isn't supported for fetcher loads, await everything and treat it\n    // as a normal load.  resolveDeferredData will return undefined if this\n    // fetcher gets aborted, so we just leave result untouched and short circuit\n    // below if that happens\n    if (isDeferredResult(result)) {\n      result = (await resolveDeferredData(result, fetchRequest.signal, true)) || result;\n    }\n    // We can delete this so long as we weren't aborted by our our own fetcher\n    // re-load which would have put _new_ controller is in fetchControllers\n    if (fetchControllers.get(key) === abortController) {\n      fetchControllers.delete(key);\n    }\n    if (fetchRequest.signal.aborted) {\n      return;\n    }\n    // We don't want errors bubbling up or redirects followed for unmounted\n    // fetchers, so short circuit here if it was removed from the UI\n    if (deletedFetchers.has(key)) {\n      updateFetcherState(key, getDoneFetcher(undefined));\n      return;\n    }\n    // If the loader threw a redirect Response, start a new REPLACE navigation\n    if (isRedirectResult(result)) {\n      if (pendingNavigationLoadId > originatingLoadId) {\n        // A new navigation was kicked off after our loader started, so that\n        // should take precedence over this redirect navigation\n        updateFetcherState(key, getDoneFetcher(undefined));\n        return;\n      } else {\n        fetchRedirectIds.add(key);\n        await startRedirectNavigation(fetchRequest, result, false, {\n          preventScrollReset\n        });\n        return;\n      }\n    }\n    // Process any non-redirect errors thrown\n    if (isErrorResult(result)) {\n      setFetcherError(key, routeId, result.error);\n      return;\n    }\n    invariant(!isDeferredResult(result), \"Unhandled fetcher deferred data\");\n    // Put the fetcher back into an idle state\n    updateFetcherState(key, getDoneFetcher(result.data));\n  }\n  /**\n   * Utility function to handle redirects returned from an action or loader.\n   * Normally, a redirect \"replaces\" the navigation that triggered it.  So, for\n   * example:\n   *\n   *  - user is on /a\n   *  - user clicks a link to /b\n   *  - loader for /b redirects to /c\n   *\n   * In a non-JS app the browser would track the in-flight navigation to /b and\n   * then replace it with /c when it encountered the redirect response.  In\n   * the end it would only ever update the URL bar with /c.\n   *\n   * In client-side routing using pushState/replaceState, we aim to emulate\n   * this behavior and we also do not update history until the end of the\n   * navigation (including processed redirects).  This means that we never\n   * actually touch history until we've processed redirects, so we just use\n   * the history action from the original navigation (PUSH or REPLACE).\n   */\n  async function startRedirectNavigation(request, redirect, isNavigation, _temp2) {\n    let {\n      submission,\n      fetcherSubmission,\n      preventScrollReset,\n      replace\n    } = _temp2 === void 0 ? {} : _temp2;\n    if (redirect.response.headers.has(\"X-Remix-Revalidate\")) {\n      isRevalidationRequired = true;\n    }\n    let location = redirect.response.headers.get(\"Location\");\n    invariant(location, \"Expected a Location header on the redirect Response\");\n    location = normalizeRedirectLocation(location, new URL(request.url), basename);\n    let redirectLocation = createLocation(state.location, location, {\n      _isRedirect: true\n    });\n    if (isBrowser) {\n      let isDocumentReload = false;\n      if (redirect.response.headers.has(\"X-Remix-Reload-Document\")) {\n        // Hard reload if the response contained X-Remix-Reload-Document\n        isDocumentReload = true;\n      } else if (ABSOLUTE_URL_REGEX.test(location)) {\n        const url = init.history.createURL(location);\n        isDocumentReload =\n        // Hard reload if it's an absolute URL to a new origin\n        url.origin !== routerWindow.location.origin ||\n        // Hard reload if it's an absolute URL that does not match our basename\n        stripBasename(url.pathname, basename) == null;\n      }\n      if (isDocumentReload) {\n        if (replace) {\n          routerWindow.location.replace(location);\n        } else {\n          routerWindow.location.assign(location);\n        }\n        return;\n      }\n    }\n    // There's no need to abort on redirects, since we don't detect the\n    // redirect until the action/loaders have settled\n    pendingNavigationController = null;\n    let redirectHistoryAction = replace === true || redirect.response.headers.has(\"X-Remix-Replace\") ? Action.Replace : Action.Push;\n    // Use the incoming submission if provided, fallback on the active one in\n    // state.navigation\n    let {\n      formMethod,\n      formAction,\n      formEncType\n    } = state.navigation;\n    if (!submission && !fetcherSubmission && formMethod && formAction && formEncType) {\n      submission = getSubmissionFromNavigation(state.navigation);\n    }\n    // If this was a 307/308 submission we want to preserve the HTTP method and\n    // re-submit the GET/POST/PUT/PATCH/DELETE as a submission navigation to the\n    // redirected location\n    let activeSubmission = submission || fetcherSubmission;\n    if (redirectPreserveMethodStatusCodes.has(redirect.response.status) && activeSubmission && isMutationMethod(activeSubmission.formMethod)) {\n      await startNavigation(redirectHistoryAction, redirectLocation, {\n        submission: _extends({}, activeSubmission, {\n          formAction: location\n        }),\n        // Preserve these flags across redirects\n        preventScrollReset: preventScrollReset || pendingPreventScrollReset,\n        enableViewTransition: isNavigation ? pendingViewTransitionEnabled : undefined\n      });\n    } else {\n      // If we have a navigation submission, we will preserve it through the\n      // redirect navigation\n      let overrideNavigation = getLoadingNavigation(redirectLocation, submission);\n      await startNavigation(redirectHistoryAction, redirectLocation, {\n        overrideNavigation,\n        // Send fetcher submissions through for shouldRevalidate\n        fetcherSubmission,\n        // Preserve these flags across redirects\n        preventScrollReset: preventScrollReset || pendingPreventScrollReset,\n        enableViewTransition: isNavigation ? pendingViewTransitionEnabled : undefined\n      });\n    }\n  }\n  // Utility wrapper for calling dataStrategy client-side without having to\n  // pass around the manifest, mapRouteProperties, etc.\n  async function callDataStrategy(type, state, request, matchesToLoad, matches, fetcherKey) {\n    let results;\n    let dataResults = {};\n    try {\n      results = await callDataStrategyImpl(dataStrategyImpl, type, state, request, matchesToLoad, matches, fetcherKey, manifest, mapRouteProperties);\n    } catch (e) {\n      // If the outer dataStrategy method throws, just return the error for all\n      // matches - and it'll naturally bubble to the root\n      matchesToLoad.forEach(m => {\n        dataResults[m.route.id] = {\n          type: ResultType.error,\n          error: e\n        };\n      });\n      return dataResults;\n    }\n    for (let [routeId, result] of Object.entries(results)) {\n      if (isRedirectDataStrategyResultResult(result)) {\n        let response = result.result;\n        dataResults[routeId] = {\n          type: ResultType.redirect,\n          response: normalizeRelativeRoutingRedirectResponse(response, request, routeId, matches, basename, future.v7_relativeSplatPath)\n        };\n      } else {\n        dataResults[routeId] = await convertDataStrategyResultToDataResult(result);\n      }\n    }\n    return dataResults;\n  }\n  async function callLoadersAndMaybeResolveData(state, matches, matchesToLoad, fetchersToLoad, request) {\n    let currentMatches = state.matches;\n    // Kick off loaders and fetchers in parallel\n    let loaderResultsPromise = callDataStrategy(\"loader\", state, request, matchesToLoad, matches, null);\n    let fetcherResultsPromise = Promise.all(fetchersToLoad.map(async f => {\n      if (f.matches && f.match && f.controller) {\n        let results = await callDataStrategy(\"loader\", state, createClientSideRequest(init.history, f.path, f.controller.signal), [f.match], f.matches, f.key);\n        let result = results[f.match.route.id];\n        // Fetcher results are keyed by fetcher key from here on out, not routeId\n        return {\n          [f.key]: result\n        };\n      } else {\n        return Promise.resolve({\n          [f.key]: {\n            type: ResultType.error,\n            error: getInternalRouterError(404, {\n              pathname: f.path\n            })\n          }\n        });\n      }\n    }));\n    let loaderResults = await loaderResultsPromise;\n    let fetcherResults = (await fetcherResultsPromise).reduce((acc, r) => Object.assign(acc, r), {});\n    await Promise.all([resolveNavigationDeferredResults(matches, loaderResults, request.signal, currentMatches, state.loaderData), resolveFetcherDeferredResults(matches, fetcherResults, fetchersToLoad)]);\n    return {\n      loaderResults,\n      fetcherResults\n    };\n  }\n  function interruptActiveLoads() {\n    // Every interruption triggers a revalidation\n    isRevalidationRequired = true;\n    // Cancel pending route-level deferreds and mark cancelled routes for\n    // revalidation\n    cancelledDeferredRoutes.push(...cancelActiveDeferreds());\n    // Abort in-flight fetcher loads\n    fetchLoadMatches.forEach((_, key) => {\n      if (fetchControllers.has(key)) {\n        cancelledFetcherLoads.add(key);\n      }\n      abortFetcher(key);\n    });\n  }\n  function updateFetcherState(key, fetcher, opts) {\n    if (opts === void 0) {\n      opts = {};\n    }\n    state.fetchers.set(key, fetcher);\n    updateState({\n      fetchers: new Map(state.fetchers)\n    }, {\n      flushSync: (opts && opts.flushSync) === true\n    });\n  }\n  function setFetcherError(key, routeId, error, opts) {\n    if (opts === void 0) {\n      opts = {};\n    }\n    let boundaryMatch = findNearestBoundary(state.matches, routeId);\n    deleteFetcher(key);\n    updateState({\n      errors: {\n        [boundaryMatch.route.id]: error\n      },\n      fetchers: new Map(state.fetchers)\n    }, {\n      flushSync: (opts && opts.flushSync) === true\n    });\n  }\n  function getFetcher(key) {\n    activeFetchers.set(key, (activeFetchers.get(key) || 0) + 1);\n    // If this fetcher was previously marked for deletion, unmark it since we\n    // have a new instance\n    if (deletedFetchers.has(key)) {\n      deletedFetchers.delete(key);\n    }\n    return state.fetchers.get(key) || IDLE_FETCHER;\n  }\n  function deleteFetcher(key) {\n    let fetcher = state.fetchers.get(key);\n    // Don't abort the controller if this is a deletion of a fetcher.submit()\n    // in it's loading phase since - we don't want to abort the corresponding\n    // revalidation and want them to complete and land\n    if (fetchControllers.has(key) && !(fetcher && fetcher.state === \"loading\" && fetchReloadIds.has(key))) {\n      abortFetcher(key);\n    }\n    fetchLoadMatches.delete(key);\n    fetchReloadIds.delete(key);\n    fetchRedirectIds.delete(key);\n    // If we opted into the flag we can clear this now since we're calling\n    // deleteFetcher() at the end of updateState() and we've already handed the\n    // deleted fetcher keys off to the data layer.\n    // If not, we're eagerly calling deleteFetcher() and we need to keep this\n    // Set populated until the next updateState call, and we'll clear\n    // `deletedFetchers` then\n    if (future.v7_fetcherPersist) {\n      deletedFetchers.delete(key);\n    }\n    cancelledFetcherLoads.delete(key);\n    state.fetchers.delete(key);\n  }\n  function deleteFetcherAndUpdateState(key) {\n    let count = (activeFetchers.get(key) || 0) - 1;\n    if (count <= 0) {\n      activeFetchers.delete(key);\n      deletedFetchers.add(key);\n      if (!future.v7_fetcherPersist) {\n        deleteFetcher(key);\n      }\n    } else {\n      activeFetchers.set(key, count);\n    }\n    updateState({\n      fetchers: new Map(state.fetchers)\n    });\n  }\n  function abortFetcher(key) {\n    let controller = fetchControllers.get(key);\n    if (controller) {\n      controller.abort();\n      fetchControllers.delete(key);\n    }\n  }\n  function markFetchersDone(keys) {\n    for (let key of keys) {\n      let fetcher = getFetcher(key);\n      let doneFetcher = getDoneFetcher(fetcher.data);\n      state.fetchers.set(key, doneFetcher);\n    }\n  }\n  function markFetchRedirectsDone() {\n    let doneKeys = [];\n    let updatedFetchers = false;\n    for (let key of fetchRedirectIds) {\n      let fetcher = state.fetchers.get(key);\n      invariant(fetcher, \"Expected fetcher: \" + key);\n      if (fetcher.state === \"loading\") {\n        fetchRedirectIds.delete(key);\n        doneKeys.push(key);\n        updatedFetchers = true;\n      }\n    }\n    markFetchersDone(doneKeys);\n    return updatedFetchers;\n  }\n  function abortStaleFetchLoads(landedId) {\n    let yeetedKeys = [];\n    for (let [key, id] of fetchReloadIds) {\n      if (id < landedId) {\n        let fetcher = state.fetchers.get(key);\n        invariant(fetcher, \"Expected fetcher: \" + key);\n        if (fetcher.state === \"loading\") {\n          abortFetcher(key);\n          fetchReloadIds.delete(key);\n          yeetedKeys.push(key);\n        }\n      }\n    }\n    markFetchersDone(yeetedKeys);\n    return yeetedKeys.length > 0;\n  }\n  function getBlocker(key, fn) {\n    let blocker = state.blockers.get(key) || IDLE_BLOCKER;\n    if (blockerFunctions.get(key) !== fn) {\n      blockerFunctions.set(key, fn);\n    }\n    return blocker;\n  }\n  function deleteBlocker(key) {\n    state.blockers.delete(key);\n    blockerFunctions.delete(key);\n  }\n  // Utility function to update blockers, ensuring valid state transitions\n  function updateBlocker(key, newBlocker) {\n    let blocker = state.blockers.get(key) || IDLE_BLOCKER;\n    // Poor mans state machine :)\n    // https://mermaid.live/edit#pako:eNqVkc9OwzAMxl8l8nnjAYrEtDIOHEBIgwvKJTReGy3_lDpIqO27k6awMG0XcrLlnz87nwdonESogKXXBuE79rq75XZO3-yHds0RJVuv70YrPlUrCEe2HfrORS3rubqZfuhtpg5C9wk5tZ4VKcRUq88q9Z8RS0-48cE1iHJkL0ugbHuFLus9L6spZy8nX9MP2CNdomVaposqu3fGayT8T8-jJQwhepo_UtpgBQaDEUom04dZhAN1aJBDlUKJBxE1ceB2Smj0Mln-IBW5AFU2dwUiktt_2Qaq2dBfaKdEup85UV7Yd-dKjlnkabl2Pvr0DTkTreM\n    invariant(blocker.state === \"unblocked\" && newBlocker.state === \"blocked\" || blocker.state === \"blocked\" && newBlocker.state === \"blocked\" || blocker.state === \"blocked\" && newBlocker.state === \"proceeding\" || blocker.state === \"blocked\" && newBlocker.state === \"unblocked\" || blocker.state === \"proceeding\" && newBlocker.state === \"unblocked\", \"Invalid blocker state transition: \" + blocker.state + \" -> \" + newBlocker.state);\n    let blockers = new Map(state.blockers);\n    blockers.set(key, newBlocker);\n    updateState({\n      blockers\n    });\n  }\n  function shouldBlockNavigation(_ref2) {\n    let {\n      currentLocation,\n      nextLocation,\n      historyAction\n    } = _ref2;\n    if (blockerFunctions.size === 0) {\n      return;\n    }\n    // We ony support a single active blocker at the moment since we don't have\n    // any compelling use cases for multi-blocker yet\n    if (blockerFunctions.size > 1) {\n      warning(false, \"A router only supports one blocker at a time\");\n    }\n    let entries = Array.from(blockerFunctions.entries());\n    let [blockerKey, blockerFunction] = entries[entries.length - 1];\n    let blocker = state.blockers.get(blockerKey);\n    if (blocker && blocker.state === \"proceeding\") {\n      // If the blocker is currently proceeding, we don't need to re-check\n      // it and can let this navigation continue\n      return;\n    }\n    // At this point, we know we're unblocked/blocked so we need to check the\n    // user-provided blocker function\n    if (blockerFunction({\n      currentLocation,\n      nextLocation,\n      historyAction\n    })) {\n      return blockerKey;\n    }\n  }\n  function handleNavigational404(pathname) {\n    let error = getInternalRouterError(404, {\n      pathname\n    });\n    let routesToUse = inFlightDataRoutes || dataRoutes;\n    let {\n      matches,\n      route\n    } = getShortCircuitMatches(routesToUse);\n    // Cancel all pending deferred on 404s since we don't keep any routes\n    cancelActiveDeferreds();\n    return {\n      notFoundMatches: matches,\n      route,\n      error\n    };\n  }\n  function cancelActiveDeferreds(predicate) {\n    let cancelledRouteIds = [];\n    activeDeferreds.forEach((dfd, routeId) => {\n      if (!predicate || predicate(routeId)) {\n        // Cancel the deferred - but do not remove from activeDeferreds here -\n        // we rely on the subscribers to do that so our tests can assert proper\n        // cleanup via _internalActiveDeferreds\n        dfd.cancel();\n        cancelledRouteIds.push(routeId);\n        activeDeferreds.delete(routeId);\n      }\n    });\n    return cancelledRouteIds;\n  }\n  // Opt in to capturing and reporting scroll positions during navigations,\n  // used by the <ScrollRestoration> component\n  function enableScrollRestoration(positions, getPosition, getKey) {\n    savedScrollPositions = positions;\n    getScrollPosition = getPosition;\n    getScrollRestorationKey = getKey || null;\n    // Perform initial hydration scroll restoration, since we miss the boat on\n    // the initial updateState() because we've not yet rendered <ScrollRestoration/>\n    // and therefore have no savedScrollPositions available\n    if (!initialScrollRestored && state.navigation === IDLE_NAVIGATION) {\n      initialScrollRestored = true;\n      let y = getSavedScrollPosition(state.location, state.matches);\n      if (y != null) {\n        updateState({\n          restoreScrollPosition: y\n        });\n      }\n    }\n    return () => {\n      savedScrollPositions = null;\n      getScrollPosition = null;\n      getScrollRestorationKey = null;\n    };\n  }\n  function getScrollKey(location, matches) {\n    if (getScrollRestorationKey) {\n      let key = getScrollRestorationKey(location, matches.map(m => convertRouteMatchToUiMatch(m, state.loaderData)));\n      return key || location.key;\n    }\n    return location.key;\n  }\n  function saveScrollPosition(location, matches) {\n    if (savedScrollPositions && getScrollPosition) {\n      let key = getScrollKey(location, matches);\n      savedScrollPositions[key] = getScrollPosition();\n    }\n  }\n  function getSavedScrollPosition(location, matches) {\n    if (savedScrollPositions) {\n      let key = getScrollKey(location, matches);\n      let y = savedScrollPositions[key];\n      if (typeof y === \"number\") {\n        return y;\n      }\n    }\n    return null;\n  }\n  function checkFogOfWar(matches, routesToUse, pathname) {\n    if (patchRoutesOnNavigationImpl) {\n      if (!matches) {\n        let fogMatches = matchRoutesImpl(routesToUse, pathname, basename, true);\n        return {\n          active: true,\n          matches: fogMatches || []\n        };\n      } else {\n        if (Object.keys(matches[0].params).length > 0) {\n          // If we matched a dynamic param or a splat, it might only be because\n          // we haven't yet discovered other routes that would match with a\n          // higher score.  Call patchRoutesOnNavigation just to be sure\n          let partialMatches = matchRoutesImpl(routesToUse, pathname, basename, true);\n          return {\n            active: true,\n            matches: partialMatches\n          };\n        }\n      }\n    }\n    return {\n      active: false,\n      matches: null\n    };\n  }\n  async function discoverRoutes(matches, pathname, signal, fetcherKey) {\n    if (!patchRoutesOnNavigationImpl) {\n      return {\n        type: \"success\",\n        matches\n      };\n    }\n    let partialMatches = matches;\n    while (true) {\n      let isNonHMR = inFlightDataRoutes == null;\n      let routesToUse = inFlightDataRoutes || dataRoutes;\n      let localManifest = manifest;\n      try {\n        await patchRoutesOnNavigationImpl({\n          signal,\n          path: pathname,\n          matches: partialMatches,\n          fetcherKey,\n          patch: (routeId, children) => {\n            if (signal.aborted) return;\n            patchRoutesImpl(routeId, children, routesToUse, localManifest, mapRouteProperties);\n          }\n        });\n      } catch (e) {\n        return {\n          type: \"error\",\n          error: e,\n          partialMatches\n        };\n      } finally {\n        // If we are not in the middle of an HMR revalidation and we changed the\n        // routes, provide a new identity so when we `updateState` at the end of\n        // this navigation/fetch `router.routes` will be a new identity and\n        // trigger a re-run of memoized `router.routes` dependencies.\n        // HMR will already update the identity and reflow when it lands\n        // `inFlightDataRoutes` in `completeNavigation`\n        if (isNonHMR && !signal.aborted) {\n          dataRoutes = [...dataRoutes];\n        }\n      }\n      if (signal.aborted) {\n        return {\n          type: \"aborted\"\n        };\n      }\n      let newMatches = matchRoutes(routesToUse, pathname, basename);\n      if (newMatches) {\n        return {\n          type: \"success\",\n          matches: newMatches\n        };\n      }\n      let newPartialMatches = matchRoutesImpl(routesToUse, pathname, basename, true);\n      // Avoid loops if the second pass results in the same partial matches\n      if (!newPartialMatches || partialMatches.length === newPartialMatches.length && partialMatches.every((m, i) => m.route.id === newPartialMatches[i].route.id)) {\n        return {\n          type: \"success\",\n          matches: null\n        };\n      }\n      partialMatches = newPartialMatches;\n    }\n  }\n  function _internalSetRoutes(newRoutes) {\n    manifest = {};\n    inFlightDataRoutes = convertRoutesToDataRoutes(newRoutes, mapRouteProperties, undefined, manifest);\n  }\n  function patchRoutes(routeId, children) {\n    let isNonHMR = inFlightDataRoutes == null;\n    let routesToUse = inFlightDataRoutes || dataRoutes;\n    patchRoutesImpl(routeId, children, routesToUse, manifest, mapRouteProperties);\n    // If we are not in the middle of an HMR revalidation and we changed the\n    // routes, provide a new identity and trigger a reflow via `updateState`\n    // to re-run memoized `router.routes` dependencies.\n    // HMR will already update the identity and reflow when it lands\n    // `inFlightDataRoutes` in `completeNavigation`\n    if (isNonHMR) {\n      dataRoutes = [...dataRoutes];\n      updateState({});\n    }\n  }\n  router = {\n    get basename() {\n      return basename;\n    },\n    get future() {\n      return future;\n    },\n    get state() {\n      return state;\n    },\n    get routes() {\n      return dataRoutes;\n    },\n    get window() {\n      return routerWindow;\n    },\n    initialize,\n    subscribe,\n    enableScrollRestoration,\n    navigate,\n    fetch,\n    revalidate,\n    // Passthrough to history-aware createHref used by useHref so we get proper\n    // hash-aware URLs in DOM paths\n    createHref: to => init.history.createHref(to),\n    encodeLocation: to => init.history.encodeLocation(to),\n    getFetcher,\n    deleteFetcher: deleteFetcherAndUpdateState,\n    dispose,\n    getBlocker,\n    deleteBlocker,\n    patchRoutes,\n    _internalFetchControllers: fetchControllers,\n    _internalActiveDeferreds: activeDeferreds,\n    // TODO: Remove setRoutes, it's temporary to avoid dealing with\n    // updating the tree while validating the update algorithm.\n    _internalSetRoutes\n  };\n  return router;\n}\n//#endregion\n////////////////////////////////////////////////////////////////////////////////\n//#region createStaticHandler\n////////////////////////////////////////////////////////////////////////////////\nconst UNSAFE_DEFERRED_SYMBOL = Symbol(\"deferred\");\nfunction createStaticHandler(routes, opts) {\n  invariant(routes.length > 0, \"You must provide a non-empty routes array to createStaticHandler\");\n  let manifest = {};\n  let basename = (opts ? opts.basename : null) || \"/\";\n  let mapRouteProperties;\n  if (opts != null && opts.mapRouteProperties) {\n    mapRouteProperties = opts.mapRouteProperties;\n  } else if (opts != null && opts.detectErrorBoundary) {\n    // If they are still using the deprecated version, wrap it with the new API\n    let detectErrorBoundary = opts.detectErrorBoundary;\n    mapRouteProperties = route => ({\n      hasErrorBoundary: detectErrorBoundary(route)\n    });\n  } else {\n    mapRouteProperties = defaultMapRouteProperties;\n  }\n  // Config driven behavior flags\n  let future = _extends({\n    v7_relativeSplatPath: false,\n    v7_throwAbortReason: false\n  }, opts ? opts.future : null);\n  let dataRoutes = convertRoutesToDataRoutes(routes, mapRouteProperties, undefined, manifest);\n  /**\n   * The query() method is intended for document requests, in which we want to\n   * call an optional action and potentially multiple loaders for all nested\n   * routes.  It returns a StaticHandlerContext object, which is very similar\n   * to the router state (location, loaderData, actionData, errors, etc.) and\n   * also adds SSR-specific information such as the statusCode and headers\n   * from action/loaders Responses.\n   *\n   * It _should_ never throw and should report all errors through the\n   * returned context.errors object, properly associating errors to their error\n   * boundary.  Additionally, it tracks _deepestRenderedBoundaryId which can be\n   * used to emulate React error boundaries during SSr by performing a second\n   * pass only down to the boundaryId.\n   *\n   * The one exception where we do not return a StaticHandlerContext is when a\n   * redirect response is returned or thrown from any action/loader.  We\n   * propagate that out and return the raw Response so the HTTP server can\n   * return it directly.\n   *\n   * - `opts.requestContext` is an optional server context that will be passed\n   *   to actions/loaders in the `context` parameter\n   * - `opts.skipLoaderErrorBubbling` is an optional parameter that will prevent\n   *   the bubbling of errors which allows single-fetch-type implementations\n   *   where the client will handle the bubbling and we may need to return data\n   *   for the handling route\n   */\n  async function query(request, _temp3) {\n    let {\n      requestContext,\n      skipLoaderErrorBubbling,\n      dataStrategy\n    } = _temp3 === void 0 ? {} : _temp3;\n    let url = new URL(request.url);\n    let method = request.method;\n    let location = createLocation(\"\", createPath(url), null, \"default\");\n    let matches = matchRoutes(dataRoutes, location, basename);\n    // SSR supports HEAD requests while SPA doesn't\n    if (!isValidMethod(method) && method !== \"HEAD\") {\n      let error = getInternalRouterError(405, {\n        method\n      });\n      let {\n        matches: methodNotAllowedMatches,\n        route\n      } = getShortCircuitMatches(dataRoutes);\n      return {\n        basename,\n        location,\n        matches: methodNotAllowedMatches,\n        loaderData: {},\n        actionData: null,\n        errors: {\n          [route.id]: error\n        },\n        statusCode: error.status,\n        loaderHeaders: {},\n        actionHeaders: {},\n        activeDeferreds: null\n      };\n    } else if (!matches) {\n      let error = getInternalRouterError(404, {\n        pathname: location.pathname\n      });\n      let {\n        matches: notFoundMatches,\n        route\n      } = getShortCircuitMatches(dataRoutes);\n      return {\n        basename,\n        location,\n        matches: notFoundMatches,\n        loaderData: {},\n        actionData: null,\n        errors: {\n          [route.id]: error\n        },\n        statusCode: error.status,\n        loaderHeaders: {},\n        actionHeaders: {},\n        activeDeferreds: null\n      };\n    }\n    let result = await queryImpl(request, location, matches, requestContext, dataStrategy || null, skipLoaderErrorBubbling === true, null);\n    if (isResponse(result)) {\n      return result;\n    }\n    // When returning StaticHandlerContext, we patch back in the location here\n    // since we need it for React Context.  But this helps keep our submit and\n    // loadRouteData operating on a Request instead of a Location\n    return _extends({\n      location,\n      basename\n    }, result);\n  }\n  /**\n   * The queryRoute() method is intended for targeted route requests, either\n   * for fetch ?_data requests or resource route requests.  In this case, we\n   * are only ever calling a single action or loader, and we are returning the\n   * returned value directly.  In most cases, this will be a Response returned\n   * from the action/loader, but it may be a primitive or other value as well -\n   * and in such cases the calling context should handle that accordingly.\n   *\n   * We do respect the throw/return differentiation, so if an action/loader\n   * throws, then this method will throw the value.  This is important so we\n   * can do proper boundary identification in Remix where a thrown Response\n   * must go to the Catch Boundary but a returned Response is happy-path.\n   *\n   * One thing to note is that any Router-initiated Errors that make sense\n   * to associate with a status code will be thrown as an ErrorResponse\n   * instance which include the raw Error, such that the calling context can\n   * serialize the error as they see fit while including the proper response\n   * code.  Examples here are 404 and 405 errors that occur prior to reaching\n   * any user-defined loaders.\n   *\n   * - `opts.routeId` allows you to specify the specific route handler to call.\n   *   If not provided the handler will determine the proper route by matching\n   *   against `request.url`\n   * - `opts.requestContext` is an optional server context that will be passed\n   *    to actions/loaders in the `context` parameter\n   */\n  async function queryRoute(request, _temp4) {\n    let {\n      routeId,\n      requestContext,\n      dataStrategy\n    } = _temp4 === void 0 ? {} : _temp4;\n    let url = new URL(request.url);\n    let method = request.method;\n    let location = createLocation(\"\", createPath(url), null, \"default\");\n    let matches = matchRoutes(dataRoutes, location, basename);\n    // SSR supports HEAD requests while SPA doesn't\n    if (!isValidMethod(method) && method !== \"HEAD\" && method !== \"OPTIONS\") {\n      throw getInternalRouterError(405, {\n        method\n      });\n    } else if (!matches) {\n      throw getInternalRouterError(404, {\n        pathname: location.pathname\n      });\n    }\n    let match = routeId ? matches.find(m => m.route.id === routeId) : getTargetMatch(matches, location);\n    if (routeId && !match) {\n      throw getInternalRouterError(403, {\n        pathname: location.pathname,\n        routeId\n      });\n    } else if (!match) {\n      // This should never hit I don't think?\n      throw getInternalRouterError(404, {\n        pathname: location.pathname\n      });\n    }\n    let result = await queryImpl(request, location, matches, requestContext, dataStrategy || null, false, match);\n    if (isResponse(result)) {\n      return result;\n    }\n    let error = result.errors ? Object.values(result.errors)[0] : undefined;\n    if (error !== undefined) {\n      // If we got back result.errors, that means the loader/action threw\n      // _something_ that wasn't a Response, but it's not guaranteed/required\n      // to be an `instanceof Error` either, so we have to use throw here to\n      // preserve the \"error\" state outside of queryImpl.\n      throw error;\n    }\n    // Pick off the right state value to return\n    if (result.actionData) {\n      return Object.values(result.actionData)[0];\n    }\n    if (result.loaderData) {\n      var _result$activeDeferre;\n      let data = Object.values(result.loaderData)[0];\n      if ((_result$activeDeferre = result.activeDeferreds) != null && _result$activeDeferre[match.route.id]) {\n        data[UNSAFE_DEFERRED_SYMBOL] = result.activeDeferreds[match.route.id];\n      }\n      return data;\n    }\n    return undefined;\n  }\n  async function queryImpl(request, location, matches, requestContext, dataStrategy, skipLoaderErrorBubbling, routeMatch) {\n    invariant(request.signal, \"query()/queryRoute() requests must contain an AbortController signal\");\n    try {\n      if (isMutationMethod(request.method.toLowerCase())) {\n        let result = await submit(request, matches, routeMatch || getTargetMatch(matches, location), requestContext, dataStrategy, skipLoaderErrorBubbling, routeMatch != null);\n        return result;\n      }\n      let result = await loadRouteData(request, matches, requestContext, dataStrategy, skipLoaderErrorBubbling, routeMatch);\n      return isResponse(result) ? result : _extends({}, result, {\n        actionData: null,\n        actionHeaders: {}\n      });\n    } catch (e) {\n      // If the user threw/returned a Response in callLoaderOrAction for a\n      // `queryRoute` call, we throw the `DataStrategyResult` to bail out early\n      // and then return or throw the raw Response here accordingly\n      if (isDataStrategyResult(e) && isResponse(e.result)) {\n        if (e.type === ResultType.error) {\n          throw e.result;\n        }\n        return e.result;\n      }\n      // Redirects are always returned since they don't propagate to catch\n      // boundaries\n      if (isRedirectResponse(e)) {\n        return e;\n      }\n      throw e;\n    }\n  }\n  async function submit(request, matches, actionMatch, requestContext, dataStrategy, skipLoaderErrorBubbling, isRouteRequest) {\n    let result;\n    if (!actionMatch.route.action && !actionMatch.route.lazy) {\n      let error = getInternalRouterError(405, {\n        method: request.method,\n        pathname: new URL(request.url).pathname,\n        routeId: actionMatch.route.id\n      });\n      if (isRouteRequest) {\n        throw error;\n      }\n      result = {\n        type: ResultType.error,\n        error\n      };\n    } else {\n      let results = await callDataStrategy(\"action\", request, [actionMatch], matches, isRouteRequest, requestContext, dataStrategy);\n      result = results[actionMatch.route.id];\n      if (request.signal.aborted) {\n        throwStaticHandlerAbortedError(request, isRouteRequest, future);\n      }\n    }\n    if (isRedirectResult(result)) {\n      // Uhhhh - this should never happen, we should always throw these from\n      // callLoaderOrAction, but the type narrowing here keeps TS happy and we\n      // can get back on the \"throw all redirect responses\" train here should\n      // this ever happen :/\n      throw new Response(null, {\n        status: result.response.status,\n        headers: {\n          Location: result.response.headers.get(\"Location\")\n        }\n      });\n    }\n    if (isDeferredResult(result)) {\n      let error = getInternalRouterError(400, {\n        type: \"defer-action\"\n      });\n      if (isRouteRequest) {\n        throw error;\n      }\n      result = {\n        type: ResultType.error,\n        error\n      };\n    }\n    if (isRouteRequest) {\n      // Note: This should only be non-Response values if we get here, since\n      // isRouteRequest should throw any Response received in callLoaderOrAction\n      if (isErrorResult(result)) {\n        throw result.error;\n      }\n      return {\n        matches: [actionMatch],\n        loaderData: {},\n        actionData: {\n          [actionMatch.route.id]: result.data\n        },\n        errors: null,\n        // Note: statusCode + headers are unused here since queryRoute will\n        // return the raw Response or value\n        statusCode: 200,\n        loaderHeaders: {},\n        actionHeaders: {},\n        activeDeferreds: null\n      };\n    }\n    // Create a GET request for the loaders\n    let loaderRequest = new Request(request.url, {\n      headers: request.headers,\n      redirect: request.redirect,\n      signal: request.signal\n    });\n    if (isErrorResult(result)) {\n      // Store off the pending error - we use it to determine which loaders\n      // to call and will commit it when we complete the navigation\n      let boundaryMatch = skipLoaderErrorBubbling ? actionMatch : findNearestBoundary(matches, actionMatch.route.id);\n      let context = await loadRouteData(loaderRequest, matches, requestContext, dataStrategy, skipLoaderErrorBubbling, null, [boundaryMatch.route.id, result]);\n      // action status codes take precedence over loader status codes\n      return _extends({}, context, {\n        statusCode: isRouteErrorResponse(result.error) ? result.error.status : result.statusCode != null ? result.statusCode : 500,\n        actionData: null,\n        actionHeaders: _extends({}, result.headers ? {\n          [actionMatch.route.id]: result.headers\n        } : {})\n      });\n    }\n    let context = await loadRouteData(loaderRequest, matches, requestContext, dataStrategy, skipLoaderErrorBubbling, null);\n    return _extends({}, context, {\n      actionData: {\n        [actionMatch.route.id]: result.data\n      }\n    }, result.statusCode ? {\n      statusCode: result.statusCode\n    } : {}, {\n      actionHeaders: result.headers ? {\n        [actionMatch.route.id]: result.headers\n      } : {}\n    });\n  }\n  async function loadRouteData(request, matches, requestContext, dataStrategy, skipLoaderErrorBubbling, routeMatch, pendingActionResult) {\n    let isRouteRequest = routeMatch != null;\n    // Short circuit if we have no loaders to run (queryRoute())\n    if (isRouteRequest && !(routeMatch != null && routeMatch.route.loader) && !(routeMatch != null && routeMatch.route.lazy)) {\n      throw getInternalRouterError(400, {\n        method: request.method,\n        pathname: new URL(request.url).pathname,\n        routeId: routeMatch == null ? void 0 : routeMatch.route.id\n      });\n    }\n    let requestMatches = routeMatch ? [routeMatch] : pendingActionResult && isErrorResult(pendingActionResult[1]) ? getLoaderMatchesUntilBoundary(matches, pendingActionResult[0]) : matches;\n    let matchesToLoad = requestMatches.filter(m => m.route.loader || m.route.lazy);\n    // Short circuit if we have no loaders to run (query())\n    if (matchesToLoad.length === 0) {\n      return {\n        matches,\n        // Add a null for all matched routes for proper revalidation on the client\n        loaderData: matches.reduce((acc, m) => Object.assign(acc, {\n          [m.route.id]: null\n        }), {}),\n        errors: pendingActionResult && isErrorResult(pendingActionResult[1]) ? {\n          [pendingActionResult[0]]: pendingActionResult[1].error\n        } : null,\n        statusCode: 200,\n        loaderHeaders: {},\n        activeDeferreds: null\n      };\n    }\n    let results = await callDataStrategy(\"loader\", request, matchesToLoad, matches, isRouteRequest, requestContext, dataStrategy);\n    if (request.signal.aborted) {\n      throwStaticHandlerAbortedError(request, isRouteRequest, future);\n    }\n    // Process and commit output from loaders\n    let activeDeferreds = new Map();\n    let context = processRouteLoaderData(matches, results, pendingActionResult, activeDeferreds, skipLoaderErrorBubbling);\n    // Add a null for any non-loader matches for proper revalidation on the client\n    let executedLoaders = new Set(matchesToLoad.map(match => match.route.id));\n    matches.forEach(match => {\n      if (!executedLoaders.has(match.route.id)) {\n        context.loaderData[match.route.id] = null;\n      }\n    });\n    return _extends({}, context, {\n      matches,\n      activeDeferreds: activeDeferreds.size > 0 ? Object.fromEntries(activeDeferreds.entries()) : null\n    });\n  }\n  // Utility wrapper for calling dataStrategy server-side without having to\n  // pass around the manifest, mapRouteProperties, etc.\n  async function callDataStrategy(type, request, matchesToLoad, matches, isRouteRequest, requestContext, dataStrategy) {\n    let results = await callDataStrategyImpl(dataStrategy || defaultDataStrategy, type, null, request, matchesToLoad, matches, null, manifest, mapRouteProperties, requestContext);\n    let dataResults = {};\n    await Promise.all(matches.map(async match => {\n      if (!(match.route.id in results)) {\n        return;\n      }\n      let result = results[match.route.id];\n      if (isRedirectDataStrategyResultResult(result)) {\n        let response = result.result;\n        // Throw redirects and let the server handle them with an HTTP redirect\n        throw normalizeRelativeRoutingRedirectResponse(response, request, match.route.id, matches, basename, future.v7_relativeSplatPath);\n      }\n      if (isResponse(result.result) && isRouteRequest) {\n        // For SSR single-route requests, we want to hand Responses back\n        // directly without unwrapping\n        throw result;\n      }\n      dataResults[match.route.id] = await convertDataStrategyResultToDataResult(result);\n    }));\n    return dataResults;\n  }\n  return {\n    dataRoutes,\n    query,\n    queryRoute\n  };\n}\n//#endregion\n////////////////////////////////////////////////////////////////////////////////\n//#region Helpers\n////////////////////////////////////////////////////////////////////////////////\n/**\n * Given an existing StaticHandlerContext and an error thrown at render time,\n * provide an updated StaticHandlerContext suitable for a second SSR render\n */\nfunction getStaticContextFromError(routes, context, error) {\n  let newContext = _extends({}, context, {\n    statusCode: isRouteErrorResponse(error) ? error.status : 500,\n    errors: {\n      [context._deepestRenderedBoundaryId || routes[0].id]: error\n    }\n  });\n  return newContext;\n}\nfunction throwStaticHandlerAbortedError(request, isRouteRequest, future) {\n  if (future.v7_throwAbortReason && request.signal.reason !== undefined) {\n    throw request.signal.reason;\n  }\n  let method = isRouteRequest ? \"queryRoute\" : \"query\";\n  throw new Error(method + \"() call aborted: \" + request.method + \" \" + request.url);\n}\nfunction isSubmissionNavigation(opts) {\n  return opts != null && (\"formData\" in opts && opts.formData != null || \"body\" in opts && opts.body !== undefined);\n}\nfunction normalizeTo(location, matches, basename, prependBasename, to, v7_relativeSplatPath, fromRouteId, relative) {\n  let contextualMatches;\n  let activeRouteMatch;\n  if (fromRouteId) {\n    // Grab matches up to the calling route so our route-relative logic is\n    // relative to the correct source route\n    contextualMatches = [];\n    for (let match of matches) {\n      contextualMatches.push(match);\n      if (match.route.id === fromRouteId) {\n        activeRouteMatch = match;\n        break;\n      }\n    }\n  } else {\n    contextualMatches = matches;\n    activeRouteMatch = matches[matches.length - 1];\n  }\n  // Resolve the relative path\n  let path = resolveTo(to ? to : \".\", getResolveToMatches(contextualMatches, v7_relativeSplatPath), stripBasename(location.pathname, basename) || location.pathname, relative === \"path\");\n  // When `to` is not specified we inherit search/hash from the current\n  // location, unlike when to=\".\" and we just inherit the path.\n  // See https://github.com/remix-run/remix/issues/927\n  if (to == null) {\n    path.search = location.search;\n    path.hash = location.hash;\n  }\n  // Account for `?index` params when routing to the current location\n  if ((to == null || to === \"\" || to === \".\") && activeRouteMatch) {\n    let nakedIndex = hasNakedIndexQuery(path.search);\n    if (activeRouteMatch.route.index && !nakedIndex) {\n      // Add one when we're targeting an index route\n      path.search = path.search ? path.search.replace(/^\\?/, \"?index&\") : \"?index\";\n    } else if (!activeRouteMatch.route.index && nakedIndex) {\n      // Remove existing ones when we're not\n      let params = new URLSearchParams(path.search);\n      let indexValues = params.getAll(\"index\");\n      params.delete(\"index\");\n      indexValues.filter(v => v).forEach(v => params.append(\"index\", v));\n      let qs = params.toString();\n      path.search = qs ? \"?\" + qs : \"\";\n    }\n  }\n  // If we're operating within a basename, prepend it to the pathname.  If\n  // this is a root navigation, then just use the raw basename which allows\n  // the basename to have full control over the presence of a trailing slash\n  // on root actions\n  if (prependBasename && basename !== \"/\") {\n    path.pathname = path.pathname === \"/\" ? basename : joinPaths([basename, path.pathname]);\n  }\n  return createPath(path);\n}\n// Normalize navigation options by converting formMethod=GET formData objects to\n// URLSearchParams so they behave identically to links with query params\nfunction normalizeNavigateOptions(normalizeFormMethod, isFetcher, path, opts) {\n  // Return location verbatim on non-submission navigations\n  if (!opts || !isSubmissionNavigation(opts)) {\n    return {\n      path\n    };\n  }\n  if (opts.formMethod && !isValidMethod(opts.formMethod)) {\n    return {\n      path,\n      error: getInternalRouterError(405, {\n        method: opts.formMethod\n      })\n    };\n  }\n  let getInvalidBodyError = () => ({\n    path,\n    error: getInternalRouterError(400, {\n      type: \"invalid-body\"\n    })\n  });\n  // Create a Submission on non-GET navigations\n  let rawFormMethod = opts.formMethod || \"get\";\n  let formMethod = normalizeFormMethod ? rawFormMethod.toUpperCase() : rawFormMethod.toLowerCase();\n  let formAction = stripHashFromPath(path);\n  if (opts.body !== undefined) {\n    if (opts.formEncType === \"text/plain\") {\n      // text only support POST/PUT/PATCH/DELETE submissions\n      if (!isMutationMethod(formMethod)) {\n        return getInvalidBodyError();\n      }\n      let text = typeof opts.body === \"string\" ? opts.body : opts.body instanceof FormData || opts.body instanceof URLSearchParams ?\n      // https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#plain-text-form-data\n      Array.from(opts.body.entries()).reduce((acc, _ref3) => {\n        let [name, value] = _ref3;\n        return \"\" + acc + name + \"=\" + value + \"\\n\";\n      }, \"\") : String(opts.body);\n      return {\n        path,\n        submission: {\n          formMethod,\n          formAction,\n          formEncType: opts.formEncType,\n          formData: undefined,\n          json: undefined,\n          text\n        }\n      };\n    } else if (opts.formEncType === \"application/json\") {\n      // json only supports POST/PUT/PATCH/DELETE submissions\n      if (!isMutationMethod(formMethod)) {\n        return getInvalidBodyError();\n      }\n      try {\n        let json = typeof opts.body === \"string\" ? JSON.parse(opts.body) : opts.body;\n        return {\n          path,\n          submission: {\n            formMethod,\n            formAction,\n            formEncType: opts.formEncType,\n            formData: undefined,\n            json,\n            text: undefined\n          }\n        };\n      } catch (e) {\n        return getInvalidBodyError();\n      }\n    }\n  }\n  invariant(typeof FormData === \"function\", \"FormData is not available in this environment\");\n  let searchParams;\n  let formData;\n  if (opts.formData) {\n    searchParams = convertFormDataToSearchParams(opts.formData);\n    formData = opts.formData;\n  } else if (opts.body instanceof FormData) {\n    searchParams = convertFormDataToSearchParams(opts.body);\n    formData = opts.body;\n  } else if (opts.body instanceof URLSearchParams) {\n    searchParams = opts.body;\n    formData = convertSearchParamsToFormData(searchParams);\n  } else if (opts.body == null) {\n    searchParams = new URLSearchParams();\n    formData = new FormData();\n  } else {\n    try {\n      searchParams = new URLSearchParams(opts.body);\n      formData = convertSearchParamsToFormData(searchParams);\n    } catch (e) {\n      return getInvalidBodyError();\n    }\n  }\n  let submission = {\n    formMethod,\n    formAction,\n    formEncType: opts && opts.formEncType || \"application/x-www-form-urlencoded\",\n    formData,\n    json: undefined,\n    text: undefined\n  };\n  if (isMutationMethod(submission.formMethod)) {\n    return {\n      path,\n      submission\n    };\n  }\n  // Flatten submission onto URLSearchParams for GET submissions\n  let parsedPath = parsePath(path);\n  // On GET navigation submissions we can drop the ?index param from the\n  // resulting location since all loaders will run.  But fetcher GET submissions\n  // only run a single loader so we need to preserve any incoming ?index params\n  if (isFetcher && parsedPath.search && hasNakedIndexQuery(parsedPath.search)) {\n    searchParams.append(\"index\", \"\");\n  }\n  parsedPath.search = \"?\" + searchParams;\n  return {\n    path: createPath(parsedPath),\n    submission\n  };\n}\n// Filter out all routes at/below any caught error as they aren't going to\n// render so we don't need to load them\nfunction getLoaderMatchesUntilBoundary(matches, boundaryId, includeBoundary) {\n  if (includeBoundary === void 0) {\n    includeBoundary = false;\n  }\n  let index = matches.findIndex(m => m.route.id === boundaryId);\n  if (index >= 0) {\n    return matches.slice(0, includeBoundary ? index + 1 : index);\n  }\n  return matches;\n}\nfunction getMatchesToLoad(history, state, matches, submission, location, initialHydration, skipActionErrorRevalidation, isRevalidationRequired, cancelledDeferredRoutes, cancelledFetcherLoads, deletedFetchers, fetchLoadMatches, fetchRedirectIds, routesToUse, basename, pendingActionResult) {\n  let actionResult = pendingActionResult ? isErrorResult(pendingActionResult[1]) ? pendingActionResult[1].error : pendingActionResult[1].data : undefined;\n  let currentUrl = history.createURL(state.location);\n  let nextUrl = history.createURL(location);\n  // Pick navigation matches that are net-new or qualify for revalidation\n  let boundaryMatches = matches;\n  if (initialHydration && state.errors) {\n    // On initial hydration, only consider matches up to _and including_ the boundary.\n    // This is inclusive to handle cases where a server loader ran successfully,\n    // a child server loader bubbled up to this route, but this route has\n    // `clientLoader.hydrate` so we want to still run the `clientLoader` so that\n    // we have a complete version of `loaderData`\n    boundaryMatches = getLoaderMatchesUntilBoundary(matches, Object.keys(state.errors)[0], true);\n  } else if (pendingActionResult && isErrorResult(pendingActionResult[1])) {\n    // If an action threw an error, we call loaders up to, but not including the\n    // boundary\n    boundaryMatches = getLoaderMatchesUntilBoundary(matches, pendingActionResult[0]);\n  }\n  // Don't revalidate loaders by default after action 4xx/5xx responses\n  // when the flag is enabled.  They can still opt-into revalidation via\n  // `shouldRevalidate` via `actionResult`\n  let actionStatus = pendingActionResult ? pendingActionResult[1].statusCode : undefined;\n  let shouldSkipRevalidation = skipActionErrorRevalidation && actionStatus && actionStatus >= 400;\n  let navigationMatches = boundaryMatches.filter((match, index) => {\n    let {\n      route\n    } = match;\n    if (route.lazy) {\n      // We haven't loaded this route yet so we don't know if it's got a loader!\n      return true;\n    }\n    if (route.loader == null) {\n      return false;\n    }\n    if (initialHydration) {\n      return shouldLoadRouteOnHydration(route, state.loaderData, state.errors);\n    }\n    // Always call the loader on new route instances and pending defer cancellations\n    if (isNewLoader(state.loaderData, state.matches[index], match) || cancelledDeferredRoutes.some(id => id === match.route.id)) {\n      return true;\n    }\n    // This is the default implementation for when we revalidate.  If the route\n    // provides it's own implementation, then we give them full control but\n    // provide this value so they can leverage it if needed after they check\n    // their own specific use cases\n    let currentRouteMatch = state.matches[index];\n    let nextRouteMatch = match;\n    return shouldRevalidateLoader(match, _extends({\n      currentUrl,\n      currentParams: currentRouteMatch.params,\n      nextUrl,\n      nextParams: nextRouteMatch.params\n    }, submission, {\n      actionResult,\n      actionStatus,\n      defaultShouldRevalidate: shouldSkipRevalidation ? false :\n      // Forced revalidation due to submission, useRevalidator, or X-Remix-Revalidate\n      isRevalidationRequired || currentUrl.pathname + currentUrl.search === nextUrl.pathname + nextUrl.search ||\n      // Search params affect all loaders\n      currentUrl.search !== nextUrl.search || isNewRouteInstance(currentRouteMatch, nextRouteMatch)\n    }));\n  });\n  // Pick fetcher.loads that need to be revalidated\n  let revalidatingFetchers = [];\n  fetchLoadMatches.forEach((f, key) => {\n    // Don't revalidate:\n    //  - on initial hydration (shouldn't be any fetchers then anyway)\n    //  - if fetcher won't be present in the subsequent render\n    //    - no longer matches the URL (v7_fetcherPersist=false)\n    //    - was unmounted but persisted due to v7_fetcherPersist=true\n    if (initialHydration || !matches.some(m => m.route.id === f.routeId) || deletedFetchers.has(key)) {\n      return;\n    }\n    let fetcherMatches = matchRoutes(routesToUse, f.path, basename);\n    // If the fetcher path no longer matches, push it in with null matches so\n    // we can trigger a 404 in callLoadersAndMaybeResolveData.  Note this is\n    // currently only a use-case for Remix HMR where the route tree can change\n    // at runtime and remove a route previously loaded via a fetcher\n    if (!fetcherMatches) {\n      revalidatingFetchers.push({\n        key,\n        routeId: f.routeId,\n        path: f.path,\n        matches: null,\n        match: null,\n        controller: null\n      });\n      return;\n    }\n    // Revalidating fetchers are decoupled from the route matches since they\n    // load from a static href.  They revalidate based on explicit revalidation\n    // (submission, useRevalidator, or X-Remix-Revalidate)\n    let fetcher = state.fetchers.get(key);\n    let fetcherMatch = getTargetMatch(fetcherMatches, f.path);\n    let shouldRevalidate = false;\n    if (fetchRedirectIds.has(key)) {\n      // Never trigger a revalidation of an actively redirecting fetcher\n      shouldRevalidate = false;\n    } else if (cancelledFetcherLoads.has(key)) {\n      // Always mark for revalidation if the fetcher was cancelled\n      cancelledFetcherLoads.delete(key);\n      shouldRevalidate = true;\n    } else if (fetcher && fetcher.state !== \"idle\" && fetcher.data === undefined) {\n      // If the fetcher hasn't ever completed loading yet, then this isn't a\n      // revalidation, it would just be a brand new load if an explicit\n      // revalidation is required\n      shouldRevalidate = isRevalidationRequired;\n    } else {\n      // Otherwise fall back on any user-defined shouldRevalidate, defaulting\n      // to explicit revalidations only\n      shouldRevalidate = shouldRevalidateLoader(fetcherMatch, _extends({\n        currentUrl,\n        currentParams: state.matches[state.matches.length - 1].params,\n        nextUrl,\n        nextParams: matches[matches.length - 1].params\n      }, submission, {\n        actionResult,\n        actionStatus,\n        defaultShouldRevalidate: shouldSkipRevalidation ? false : isRevalidationRequired\n      }));\n    }\n    if (shouldRevalidate) {\n      revalidatingFetchers.push({\n        key,\n        routeId: f.routeId,\n        path: f.path,\n        matches: fetcherMatches,\n        match: fetcherMatch,\n        controller: new AbortController()\n      });\n    }\n  });\n  return [navigationMatches, revalidatingFetchers];\n}\nfunction shouldLoadRouteOnHydration(route, loaderData, errors) {\n  // We dunno if we have a loader - gotta find out!\n  if (route.lazy) {\n    return true;\n  }\n  // No loader, nothing to initialize\n  if (!route.loader) {\n    return false;\n  }\n  let hasData = loaderData != null && loaderData[route.id] !== undefined;\n  let hasError = errors != null && errors[route.id] !== undefined;\n  // Don't run if we error'd during SSR\n  if (!hasData && hasError) {\n    return false;\n  }\n  // Explicitly opting-in to running on hydration\n  if (typeof route.loader === \"function\" && route.loader.hydrate === true) {\n    return true;\n  }\n  // Otherwise, run if we're not yet initialized with anything\n  return !hasData && !hasError;\n}\nfunction isNewLoader(currentLoaderData, currentMatch, match) {\n  let isNew =\n  // [a] -> [a, b]\n  !currentMatch ||\n  // [a, b] -> [a, c]\n  match.route.id !== currentMatch.route.id;\n  // Handle the case that we don't have data for a re-used route, potentially\n  // from a prior error or from a cancelled pending deferred\n  let isMissingData = currentLoaderData[match.route.id] === undefined;\n  // Always load if this is a net-new route or we don't yet have data\n  return isNew || isMissingData;\n}\nfunction isNewRouteInstance(currentMatch, match) {\n  let currentPath = currentMatch.route.path;\n  return (\n    // param change for this match, /users/123 -> /users/456\n    currentMatch.pathname !== match.pathname ||\n    // splat param changed, which is not present in match.path\n    // e.g. /files/images/avatar.jpg -> files/finances.xls\n    currentPath != null && currentPath.endsWith(\"*\") && currentMatch.params[\"*\"] !== match.params[\"*\"]\n  );\n}\nfunction shouldRevalidateLoader(loaderMatch, arg) {\n  if (loaderMatch.route.shouldRevalidate) {\n    let routeChoice = loaderMatch.route.shouldRevalidate(arg);\n    if (typeof routeChoice === \"boolean\") {\n      return routeChoice;\n    }\n  }\n  return arg.defaultShouldRevalidate;\n}\nfunction patchRoutesImpl(routeId, children, routesToUse, manifest, mapRouteProperties) {\n  var _childrenToPatch;\n  let childrenToPatch;\n  if (routeId) {\n    let route = manifest[routeId];\n    invariant(route, \"No route found to patch children into: routeId = \" + routeId);\n    if (!route.children) {\n      route.children = [];\n    }\n    childrenToPatch = route.children;\n  } else {\n    childrenToPatch = routesToUse;\n  }\n  // Don't patch in routes we already know about so that `patch` is idempotent\n  // to simplify user-land code. This is useful because we re-call the\n  // `patchRoutesOnNavigation` function for matched routes with params.\n  let uniqueChildren = children.filter(newRoute => !childrenToPatch.some(existingRoute => isSameRoute(newRoute, existingRoute)));\n  let newRoutes = convertRoutesToDataRoutes(uniqueChildren, mapRouteProperties, [routeId || \"_\", \"patch\", String(((_childrenToPatch = childrenToPatch) == null ? void 0 : _childrenToPatch.length) || \"0\")], manifest);\n  childrenToPatch.push(...newRoutes);\n}\nfunction isSameRoute(newRoute, existingRoute) {\n  // Most optimal check is by id\n  if (\"id\" in newRoute && \"id\" in existingRoute && newRoute.id === existingRoute.id) {\n    return true;\n  }\n  // Second is by pathing differences\n  if (!(newRoute.index === existingRoute.index && newRoute.path === existingRoute.path && newRoute.caseSensitive === existingRoute.caseSensitive)) {\n    return false;\n  }\n  // Pathless layout routes are trickier since we need to check children.\n  // If they have no children then they're the same as far as we can tell\n  if ((!newRoute.children || newRoute.children.length === 0) && (!existingRoute.children || existingRoute.children.length === 0)) {\n    return true;\n  }\n  // Otherwise, we look to see if every child in the new route is already\n  // represented in the existing route's children\n  return newRoute.children.every((aChild, i) => {\n    var _existingRoute$childr;\n    return (_existingRoute$childr = existingRoute.children) == null ? void 0 : _existingRoute$childr.some(bChild => isSameRoute(aChild, bChild));\n  });\n}\n/**\n * Execute route.lazy() methods to lazily load route modules (loader, action,\n * shouldRevalidate) and update the routeManifest in place which shares objects\n * with dataRoutes so those get updated as well.\n */\nasync function loadLazyRouteModule(route, mapRouteProperties, manifest) {\n  if (!route.lazy) {\n    return;\n  }\n  let lazyRoute = await route.lazy();\n  // If the lazy route function was executed and removed by another parallel\n  // call then we can return - first lazy() to finish wins because the return\n  // value of lazy is expected to be static\n  if (!route.lazy) {\n    return;\n  }\n  let routeToUpdate = manifest[route.id];\n  invariant(routeToUpdate, \"No route found in manifest\");\n  // Update the route in place.  This should be safe because there's no way\n  // we could yet be sitting on this route as we can't get there without\n  // resolving lazy() first.\n  //\n  // This is different than the HMR \"update\" use-case where we may actively be\n  // on the route being updated.  The main concern boils down to \"does this\n  // mutation affect any ongoing navigations or any current state.matches\n  // values?\".  If not, it should be safe to update in place.\n  let routeUpdates = {};\n  for (let lazyRouteProperty in lazyRoute) {\n    let staticRouteValue = routeToUpdate[lazyRouteProperty];\n    let isPropertyStaticallyDefined = staticRouteValue !== undefined &&\n    // This property isn't static since it should always be updated based\n    // on the route updates\n    lazyRouteProperty !== \"hasErrorBoundary\";\n    warning(!isPropertyStaticallyDefined, \"Route \\\"\" + routeToUpdate.id + \"\\\" has a static property \\\"\" + lazyRouteProperty + \"\\\" \" + \"defined but its lazy function is also returning a value for this property. \" + (\"The lazy route property \\\"\" + lazyRouteProperty + \"\\\" will be ignored.\"));\n    if (!isPropertyStaticallyDefined && !immutableRouteKeys.has(lazyRouteProperty)) {\n      routeUpdates[lazyRouteProperty] = lazyRoute[lazyRouteProperty];\n    }\n  }\n  // Mutate the route with the provided updates.  Do this first so we pass\n  // the updated version to mapRouteProperties\n  Object.assign(routeToUpdate, routeUpdates);\n  // Mutate the `hasErrorBoundary` property on the route based on the route\n  // updates and remove the `lazy` function so we don't resolve the lazy\n  // route again.\n  Object.assign(routeToUpdate, _extends({}, mapRouteProperties(routeToUpdate), {\n    lazy: undefined\n  }));\n}\n// Default implementation of `dataStrategy` which fetches all loaders in parallel\nasync function defaultDataStrategy(_ref4) {\n  let {\n    matches\n  } = _ref4;\n  let matchesToLoad = matches.filter(m => m.shouldLoad);\n  let results = await Promise.all(matchesToLoad.map(m => m.resolve()));\n  return results.reduce((acc, result, i) => Object.assign(acc, {\n    [matchesToLoad[i].route.id]: result\n  }), {});\n}\nasync function callDataStrategyImpl(dataStrategyImpl, type, state, request, matchesToLoad, matches, fetcherKey, manifest, mapRouteProperties, requestContext) {\n  let loadRouteDefinitionsPromises = matches.map(m => m.route.lazy ? loadLazyRouteModule(m.route, mapRouteProperties, manifest) : undefined);\n  let dsMatches = matches.map((match, i) => {\n    let loadRoutePromise = loadRouteDefinitionsPromises[i];\n    let shouldLoad = matchesToLoad.some(m => m.route.id === match.route.id);\n    // `resolve` encapsulates route.lazy(), executing the loader/action,\n    // and mapping return values/thrown errors to a `DataStrategyResult`.  Users\n    // can pass a callback to take fine-grained control over the execution\n    // of the loader/action\n    let resolve = async handlerOverride => {\n      if (handlerOverride && request.method === \"GET\" && (match.route.lazy || match.route.loader)) {\n        shouldLoad = true;\n      }\n      return shouldLoad ? callLoaderOrAction(type, request, match, loadRoutePromise, handlerOverride, requestContext) : Promise.resolve({\n        type: ResultType.data,\n        result: undefined\n      });\n    };\n    return _extends({}, match, {\n      shouldLoad,\n      resolve\n    });\n  });\n  // Send all matches here to allow for a middleware-type implementation.\n  // handler will be a no-op for unneeded routes and we filter those results\n  // back out below.\n  let results = await dataStrategyImpl({\n    matches: dsMatches,\n    request,\n    params: matches[0].params,\n    fetcherKey,\n    context: requestContext\n  });\n  // Wait for all routes to load here but 'swallow the error since we want\n  // it to bubble up from the `await loadRoutePromise` in `callLoaderOrAction` -\n  // called from `match.resolve()`\n  try {\n    await Promise.all(loadRouteDefinitionsPromises);\n  } catch (e) {\n    // No-op\n  }\n  return results;\n}\n// Default logic for calling a loader/action is the user has no specified a dataStrategy\nasync function callLoaderOrAction(type, request, match, loadRoutePromise, handlerOverride, staticContext) {\n  let result;\n  let onReject;\n  let runHandler = handler => {\n    // Setup a promise we can race against so that abort signals short circuit\n    let reject;\n    // This will never resolve so safe to type it as Promise<DataStrategyResult> to\n    // satisfy the function return value\n    let abortPromise = new Promise((_, r) => reject = r);\n    onReject = () => reject();\n    request.signal.addEventListener(\"abort\", onReject);\n    let actualHandler = ctx => {\n      if (typeof handler !== \"function\") {\n        return Promise.reject(new Error(\"You cannot call the handler for a route which defines a boolean \" + (\"\\\"\" + type + \"\\\" [routeId: \" + match.route.id + \"]\")));\n      }\n      return handler({\n        request,\n        params: match.params,\n        context: staticContext\n      }, ...(ctx !== undefined ? [ctx] : []));\n    };\n    let handlerPromise = (async () => {\n      try {\n        let val = await (handlerOverride ? handlerOverride(ctx => actualHandler(ctx)) : actualHandler());\n        return {\n          type: \"data\",\n          result: val\n        };\n      } catch (e) {\n        return {\n          type: \"error\",\n          result: e\n        };\n      }\n    })();\n    return Promise.race([handlerPromise, abortPromise]);\n  };\n  try {\n    let handler = match.route[type];\n    // If we have a route.lazy promise, await that first\n    if (loadRoutePromise) {\n      if (handler) {\n        // Run statically defined handler in parallel with lazy()\n        let handlerError;\n        let [value] = await Promise.all([\n        // If the handler throws, don't let it immediately bubble out,\n        // since we need to let the lazy() execution finish so we know if this\n        // route has a boundary that can handle the error\n        runHandler(handler).catch(e => {\n          handlerError = e;\n        }), loadRoutePromise]);\n        if (handlerError !== undefined) {\n          throw handlerError;\n        }\n        result = value;\n      } else {\n        // Load lazy route module, then run any returned handler\n        await loadRoutePromise;\n        handler = match.route[type];\n        if (handler) {\n          // Handler still runs even if we got interrupted to maintain consistency\n          // with un-abortable behavior of handler execution on non-lazy or\n          // previously-lazy-loaded routes\n          result = await runHandler(handler);\n        } else if (type === \"action\") {\n          let url = new URL(request.url);\n          let pathname = url.pathname + url.search;\n          throw getInternalRouterError(405, {\n            method: request.method,\n            pathname,\n            routeId: match.route.id\n          });\n        } else {\n          // lazy() route has no loader to run.  Short circuit here so we don't\n          // hit the invariant below that errors on returning undefined.\n          return {\n            type: ResultType.data,\n            result: undefined\n          };\n        }\n      }\n    } else if (!handler) {\n      let url = new URL(request.url);\n      let pathname = url.pathname + url.search;\n      throw getInternalRouterError(404, {\n        pathname\n      });\n    } else {\n      result = await runHandler(handler);\n    }\n    invariant(result.result !== undefined, \"You defined \" + (type === \"action\" ? \"an action\" : \"a loader\") + \" for route \" + (\"\\\"\" + match.route.id + \"\\\" but didn't return anything from your `\" + type + \"` \") + \"function. Please return a value or `null`.\");\n  } catch (e) {\n    // We should already be catching and converting normal handler executions to\n    // DataStrategyResults and returning them, so anything that throws here is an\n    // unexpected error we still need to wrap\n    return {\n      type: ResultType.error,\n      result: e\n    };\n  } finally {\n    if (onReject) {\n      request.signal.removeEventListener(\"abort\", onReject);\n    }\n  }\n  return result;\n}\nasync function convertDataStrategyResultToDataResult(dataStrategyResult) {\n  let {\n    result,\n    type\n  } = dataStrategyResult;\n  if (isResponse(result)) {\n    let data;\n    try {\n      let contentType = result.headers.get(\"Content-Type\");\n      // Check between word boundaries instead of startsWith() due to the last\n      // paragraph of https://httpwg.org/specs/rfc9110.html#field.content-type\n      if (contentType && /\\bapplication\\/json\\b/.test(contentType)) {\n        if (result.body == null) {\n          data = null;\n        } else {\n          data = await result.json();\n        }\n      } else {\n        data = await result.text();\n      }\n    } catch (e) {\n      return {\n        type: ResultType.error,\n        error: e\n      };\n    }\n    if (type === ResultType.error) {\n      return {\n        type: ResultType.error,\n        error: new ErrorResponseImpl(result.status, result.statusText, data),\n        statusCode: result.status,\n        headers: result.headers\n      };\n    }\n    return {\n      type: ResultType.data,\n      data,\n      statusCode: result.status,\n      headers: result.headers\n    };\n  }\n  if (type === ResultType.error) {\n    if (isDataWithResponseInit(result)) {\n      var _result$init3, _result$init4;\n      if (result.data instanceof Error) {\n        var _result$init, _result$init2;\n        return {\n          type: ResultType.error,\n          error: result.data,\n          statusCode: (_result$init = result.init) == null ? void 0 : _result$init.status,\n          headers: (_result$init2 = result.init) != null && _result$init2.headers ? new Headers(result.init.headers) : undefined\n        };\n      }\n      // Convert thrown data() to ErrorResponse instances\n      return {\n        type: ResultType.error,\n        error: new ErrorResponseImpl(((_result$init3 = result.init) == null ? void 0 : _result$init3.status) || 500, undefined, result.data),\n        statusCode: isRouteErrorResponse(result) ? result.status : undefined,\n        headers: (_result$init4 = result.init) != null && _result$init4.headers ? new Headers(result.init.headers) : undefined\n      };\n    }\n    return {\n      type: ResultType.error,\n      error: result,\n      statusCode: isRouteErrorResponse(result) ? result.status : undefined\n    };\n  }\n  if (isDeferredData(result)) {\n    var _result$init5, _result$init6;\n    return {\n      type: ResultType.deferred,\n      deferredData: result,\n      statusCode: (_result$init5 = result.init) == null ? void 0 : _result$init5.status,\n      headers: ((_result$init6 = result.init) == null ? void 0 : _result$init6.headers) && new Headers(result.init.headers)\n    };\n  }\n  if (isDataWithResponseInit(result)) {\n    var _result$init7, _result$init8;\n    return {\n      type: ResultType.data,\n      data: result.data,\n      statusCode: (_result$init7 = result.init) == null ? void 0 : _result$init7.status,\n      headers: (_result$init8 = result.init) != null && _result$init8.headers ? new Headers(result.init.headers) : undefined\n    };\n  }\n  return {\n    type: ResultType.data,\n    data: result\n  };\n}\n// Support relative routing in internal redirects\nfunction normalizeRelativeRoutingRedirectResponse(response, request, routeId, matches, basename, v7_relativeSplatPath) {\n  let location = response.headers.get(\"Location\");\n  invariant(location, \"Redirects returned/thrown from loaders/actions must have a Location header\");\n  if (!ABSOLUTE_URL_REGEX.test(location)) {\n    let trimmedMatches = matches.slice(0, matches.findIndex(m => m.route.id === routeId) + 1);\n    location = normalizeTo(new URL(request.url), trimmedMatches, basename, true, location, v7_relativeSplatPath);\n    response.headers.set(\"Location\", location);\n  }\n  return response;\n}\nfunction normalizeRedirectLocation(location, currentUrl, basename) {\n  if (ABSOLUTE_URL_REGEX.test(location)) {\n    // Strip off the protocol+origin for same-origin + same-basename absolute redirects\n    let normalizedLocation = location;\n    let url = normalizedLocation.startsWith(\"//\") ? new URL(currentUrl.protocol + normalizedLocation) : new URL(normalizedLocation);\n    let isSameBasename = stripBasename(url.pathname, basename) != null;\n    if (url.origin === currentUrl.origin && isSameBasename) {\n      return url.pathname + url.search + url.hash;\n    }\n  }\n  return location;\n}\n// Utility method for creating the Request instances for loaders/actions during\n// client-side navigations and fetches.  During SSR we will always have a\n// Request instance from the static handler (query/queryRoute)\nfunction createClientSideRequest(history, location, signal, submission) {\n  let url = history.createURL(stripHashFromPath(location)).toString();\n  let init = {\n    signal\n  };\n  if (submission && isMutationMethod(submission.formMethod)) {\n    let {\n      formMethod,\n      formEncType\n    } = submission;\n    // Didn't think we needed this but it turns out unlike other methods, patch\n    // won't be properly normalized to uppercase and results in a 405 error.\n    // See: https://fetch.spec.whatwg.org/#concept-method\n    init.method = formMethod.toUpperCase();\n    if (formEncType === \"application/json\") {\n      init.headers = new Headers({\n        \"Content-Type\": formEncType\n      });\n      init.body = JSON.stringify(submission.json);\n    } else if (formEncType === \"text/plain\") {\n      // Content-Type is inferred (https://fetch.spec.whatwg.org/#dom-request)\n      init.body = submission.text;\n    } else if (formEncType === \"application/x-www-form-urlencoded\" && submission.formData) {\n      // Content-Type is inferred (https://fetch.spec.whatwg.org/#dom-request)\n      init.body = convertFormDataToSearchParams(submission.formData);\n    } else {\n      // Content-Type is inferred (https://fetch.spec.whatwg.org/#dom-request)\n      init.body = submission.formData;\n    }\n  }\n  return new Request(url, init);\n}\nfunction convertFormDataToSearchParams(formData) {\n  let searchParams = new URLSearchParams();\n  for (let [key, value] of formData.entries()) {\n    // https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#converting-an-entry-list-to-a-list-of-name-value-pairs\n    searchParams.append(key, typeof value === \"string\" ? value : value.name);\n  }\n  return searchParams;\n}\nfunction convertSearchParamsToFormData(searchParams) {\n  let formData = new FormData();\n  for (let [key, value] of searchParams.entries()) {\n    formData.append(key, value);\n  }\n  return formData;\n}\nfunction processRouteLoaderData(matches, results, pendingActionResult, activeDeferreds, skipLoaderErrorBubbling) {\n  // Fill in loaderData/errors from our loaders\n  let loaderData = {};\n  let errors = null;\n  let statusCode;\n  let foundError = false;\n  let loaderHeaders = {};\n  let pendingError = pendingActionResult && isErrorResult(pendingActionResult[1]) ? pendingActionResult[1].error : undefined;\n  // Process loader results into state.loaderData/state.errors\n  matches.forEach(match => {\n    if (!(match.route.id in results)) {\n      return;\n    }\n    let id = match.route.id;\n    let result = results[id];\n    invariant(!isRedirectResult(result), \"Cannot handle redirect results in processLoaderData\");\n    if (isErrorResult(result)) {\n      let error = result.error;\n      // If we have a pending action error, we report it at the highest-route\n      // that throws a loader error, and then clear it out to indicate that\n      // it was consumed\n      if (pendingError !== undefined) {\n        error = pendingError;\n        pendingError = undefined;\n      }\n      errors = errors || {};\n      if (skipLoaderErrorBubbling) {\n        errors[id] = error;\n      } else {\n        // Look upwards from the matched route for the closest ancestor error\n        // boundary, defaulting to the root match.  Prefer higher error values\n        // if lower errors bubble to the same boundary\n        let boundaryMatch = findNearestBoundary(matches, id);\n        if (errors[boundaryMatch.route.id] == null) {\n          errors[boundaryMatch.route.id] = error;\n        }\n      }\n      // Clear our any prior loaderData for the throwing route\n      loaderData[id] = undefined;\n      // Once we find our first (highest) error, we set the status code and\n      // prevent deeper status codes from overriding\n      if (!foundError) {\n        foundError = true;\n        statusCode = isRouteErrorResponse(result.error) ? result.error.status : 500;\n      }\n      if (result.headers) {\n        loaderHeaders[id] = result.headers;\n      }\n    } else {\n      if (isDeferredResult(result)) {\n        activeDeferreds.set(id, result.deferredData);\n        loaderData[id] = result.deferredData.data;\n        // Error status codes always override success status codes, but if all\n        // loaders are successful we take the deepest status code.\n        if (result.statusCode != null && result.statusCode !== 200 && !foundError) {\n          statusCode = result.statusCode;\n        }\n        if (result.headers) {\n          loaderHeaders[id] = result.headers;\n        }\n      } else {\n        loaderData[id] = result.data;\n        // Error status codes always override success status codes, but if all\n        // loaders are successful we take the deepest status code.\n        if (result.statusCode && result.statusCode !== 200 && !foundError) {\n          statusCode = result.statusCode;\n        }\n        if (result.headers) {\n          loaderHeaders[id] = result.headers;\n        }\n      }\n    }\n  });\n  // If we didn't consume the pending action error (i.e., all loaders\n  // resolved), then consume it here.  Also clear out any loaderData for the\n  // throwing route\n  if (pendingError !== undefined && pendingActionResult) {\n    errors = {\n      [pendingActionResult[0]]: pendingError\n    };\n    loaderData[pendingActionResult[0]] = undefined;\n  }\n  return {\n    loaderData,\n    errors,\n    statusCode: statusCode || 200,\n    loaderHeaders\n  };\n}\nfunction processLoaderData(state, matches, results, pendingActionResult, revalidatingFetchers, fetcherResults, activeDeferreds) {\n  let {\n    loaderData,\n    errors\n  } = processRouteLoaderData(matches, results, pendingActionResult, activeDeferreds, false // This method is only called client side so we always want to bubble\n  );\n  // Process results from our revalidating fetchers\n  revalidatingFetchers.forEach(rf => {\n    let {\n      key,\n      match,\n      controller\n    } = rf;\n    let result = fetcherResults[key];\n    invariant(result, \"Did not find corresponding fetcher result\");\n    // Process fetcher non-redirect errors\n    if (controller && controller.signal.aborted) {\n      // Nothing to do for aborted fetchers\n      return;\n    } else if (isErrorResult(result)) {\n      let boundaryMatch = findNearestBoundary(state.matches, match == null ? void 0 : match.route.id);\n      if (!(errors && errors[boundaryMatch.route.id])) {\n        errors = _extends({}, errors, {\n          [boundaryMatch.route.id]: result.error\n        });\n      }\n      state.fetchers.delete(key);\n    } else if (isRedirectResult(result)) {\n      // Should never get here, redirects should get processed above, but we\n      // keep this to type narrow to a success result in the else\n      invariant(false, \"Unhandled fetcher revalidation redirect\");\n    } else if (isDeferredResult(result)) {\n      // Should never get here, deferred data should be awaited for fetchers\n      // in resolveDeferredResults\n      invariant(false, \"Unhandled fetcher deferred data\");\n    } else {\n      let doneFetcher = getDoneFetcher(result.data);\n      state.fetchers.set(key, doneFetcher);\n    }\n  });\n  return {\n    loaderData,\n    errors\n  };\n}\nfunction mergeLoaderData(loaderData, newLoaderData, matches, errors) {\n  let mergedLoaderData = _extends({}, newLoaderData);\n  for (let match of matches) {\n    let id = match.route.id;\n    if (newLoaderData.hasOwnProperty(id)) {\n      if (newLoaderData[id] !== undefined) {\n        mergedLoaderData[id] = newLoaderData[id];\n      }\n    } else if (loaderData[id] !== undefined && match.route.loader) {\n      // Preserve existing keys not included in newLoaderData and where a loader\n      // wasn't removed by HMR\n      mergedLoaderData[id] = loaderData[id];\n    }\n    if (errors && errors.hasOwnProperty(id)) {\n      // Don't keep any loader data below the boundary\n      break;\n    }\n  }\n  return mergedLoaderData;\n}\nfunction getActionDataForCommit(pendingActionResult) {\n  if (!pendingActionResult) {\n    return {};\n  }\n  return isErrorResult(pendingActionResult[1]) ? {\n    // Clear out prior actionData on errors\n    actionData: {}\n  } : {\n    actionData: {\n      [pendingActionResult[0]]: pendingActionResult[1].data\n    }\n  };\n}\n// Find the nearest error boundary, looking upwards from the leaf route (or the\n// route specified by routeId) for the closest ancestor error boundary,\n// defaulting to the root match\nfunction findNearestBoundary(matches, routeId) {\n  let eligibleMatches = routeId ? matches.slice(0, matches.findIndex(m => m.route.id === routeId) + 1) : [...matches];\n  return eligibleMatches.reverse().find(m => m.route.hasErrorBoundary === true) || matches[0];\n}\nfunction getShortCircuitMatches(routes) {\n  // Prefer a root layout route if present, otherwise shim in a route object\n  let route = routes.length === 1 ? routes[0] : routes.find(r => r.index || !r.path || r.path === \"/\") || {\n    id: \"__shim-error-route__\"\n  };\n  return {\n    matches: [{\n      params: {},\n      pathname: \"\",\n      pathnameBase: \"\",\n      route\n    }],\n    route\n  };\n}\nfunction getInternalRouterError(status, _temp5) {\n  let {\n    pathname,\n    routeId,\n    method,\n    type,\n    message\n  } = _temp5 === void 0 ? {} : _temp5;\n  let statusText = \"Unknown Server Error\";\n  let errorMessage = \"Unknown @remix-run/router error\";\n  if (status === 400) {\n    statusText = \"Bad Request\";\n    if (method && pathname && routeId) {\n      errorMessage = \"You made a \" + method + \" request to \\\"\" + pathname + \"\\\" but \" + (\"did not provide a `loader` for route \\\"\" + routeId + \"\\\", \") + \"so there is no way to handle the request.\";\n    } else if (type === \"defer-action\") {\n      errorMessage = \"defer() is not supported in actions\";\n    } else if (type === \"invalid-body\") {\n      errorMessage = \"Unable to encode submission body\";\n    }\n  } else if (status === 403) {\n    statusText = \"Forbidden\";\n    errorMessage = \"Route \\\"\" + routeId + \"\\\" does not match URL \\\"\" + pathname + \"\\\"\";\n  } else if (status === 404) {\n    statusText = \"Not Found\";\n    errorMessage = \"No route matches URL \\\"\" + pathname + \"\\\"\";\n  } else if (status === 405) {\n    statusText = \"Method Not Allowed\";\n    if (method && pathname && routeId) {\n      errorMessage = \"You made a \" + method.toUpperCase() + \" request to \\\"\" + pathname + \"\\\" but \" + (\"did not provide an `action` for route \\\"\" + routeId + \"\\\", \") + \"so there is no way to handle the request.\";\n    } else if (method) {\n      errorMessage = \"Invalid request method \\\"\" + method.toUpperCase() + \"\\\"\";\n    }\n  }\n  return new ErrorResponseImpl(status || 500, statusText, new Error(errorMessage), true);\n}\n// Find any returned redirect errors, starting from the lowest match\nfunction findRedirect(results) {\n  let entries = Object.entries(results);\n  for (let i = entries.length - 1; i >= 0; i--) {\n    let [key, result] = entries[i];\n    if (isRedirectResult(result)) {\n      return {\n        key,\n        result\n      };\n    }\n  }\n}\nfunction stripHashFromPath(path) {\n  let parsedPath = typeof path === \"string\" ? parsePath(path) : path;\n  return createPath(_extends({}, parsedPath, {\n    hash: \"\"\n  }));\n}\nfunction isHashChangeOnly(a, b) {\n  if (a.pathname !== b.pathname || a.search !== b.search) {\n    return false;\n  }\n  if (a.hash === \"\") {\n    // /page -> /page#hash\n    return b.hash !== \"\";\n  } else if (a.hash === b.hash) {\n    // /page#hash -> /page#hash\n    return true;\n  } else if (b.hash !== \"\") {\n    // /page#hash -> /page#other\n    return true;\n  }\n  // If the hash is removed the browser will re-perform a request to the server\n  // /page#hash -> /page\n  return false;\n}\nfunction isDataStrategyResult(result) {\n  return result != null && typeof result === \"object\" && \"type\" in result && \"result\" in result && (result.type === ResultType.data || result.type === ResultType.error);\n}\nfunction isRedirectDataStrategyResultResult(result) {\n  return isResponse(result.result) && redirectStatusCodes.has(result.result.status);\n}\nfunction isDeferredResult(result) {\n  return result.type === ResultType.deferred;\n}\nfunction isErrorResult(result) {\n  return result.type === ResultType.error;\n}\nfunction isRedirectResult(result) {\n  return (result && result.type) === ResultType.redirect;\n}\nfunction isDataWithResponseInit(value) {\n  return typeof value === \"object\" && value != null && \"type\" in value && \"data\" in value && \"init\" in value && value.type === \"DataWithResponseInit\";\n}\nfunction isDeferredData(value) {\n  let deferred = value;\n  return deferred && typeof deferred === \"object\" && typeof deferred.data === \"object\" && typeof deferred.subscribe === \"function\" && typeof deferred.cancel === \"function\" && typeof deferred.resolveData === \"function\";\n}\nfunction isResponse(value) {\n  return value != null && typeof value.status === \"number\" && typeof value.statusText === \"string\" && typeof value.headers === \"object\" && typeof value.body !== \"undefined\";\n}\nfunction isRedirectResponse(result) {\n  if (!isResponse(result)) {\n    return false;\n  }\n  let status = result.status;\n  let location = result.headers.get(\"Location\");\n  return status >= 300 && status <= 399 && location != null;\n}\nfunction isValidMethod(method) {\n  return validRequestMethods.has(method.toLowerCase());\n}\nfunction isMutationMethod(method) {\n  return validMutationMethods.has(method.toLowerCase());\n}\nasync function resolveNavigationDeferredResults(matches, results, signal, currentMatches, currentLoaderData) {\n  let entries = Object.entries(results);\n  for (let index = 0; index < entries.length; index++) {\n    let [routeId, result] = entries[index];\n    let match = matches.find(m => (m == null ? void 0 : m.route.id) === routeId);\n    // If we don't have a match, then we can have a deferred result to do\n    // anything with.  This is for revalidating fetchers where the route was\n    // removed during HMR\n    if (!match) {\n      continue;\n    }\n    let currentMatch = currentMatches.find(m => m.route.id === match.route.id);\n    let isRevalidatingLoader = currentMatch != null && !isNewRouteInstance(currentMatch, match) && (currentLoaderData && currentLoaderData[match.route.id]) !== undefined;\n    if (isDeferredResult(result) && isRevalidatingLoader) {\n      // Note: we do not have to touch activeDeferreds here since we race them\n      // against the signal in resolveDeferredData and they'll get aborted\n      // there if needed\n      await resolveDeferredData(result, signal, false).then(result => {\n        if (result) {\n          results[routeId] = result;\n        }\n      });\n    }\n  }\n}\nasync function resolveFetcherDeferredResults(matches, results, revalidatingFetchers) {\n  for (let index = 0; index < revalidatingFetchers.length; index++) {\n    let {\n      key,\n      routeId,\n      controller\n    } = revalidatingFetchers[index];\n    let result = results[key];\n    let match = matches.find(m => (m == null ? void 0 : m.route.id) === routeId);\n    // If we don't have a match, then we can have a deferred result to do\n    // anything with.  This is for revalidating fetchers where the route was\n    // removed during HMR\n    if (!match) {\n      continue;\n    }\n    if (isDeferredResult(result)) {\n      // Note: we do not have to touch activeDeferreds here since we race them\n      // against the signal in resolveDeferredData and they'll get aborted\n      // there if needed\n      invariant(controller, \"Expected an AbortController for revalidating fetcher deferred result\");\n      await resolveDeferredData(result, controller.signal, true).then(result => {\n        if (result) {\n          results[key] = result;\n        }\n      });\n    }\n  }\n}\nasync function resolveDeferredData(result, signal, unwrap) {\n  if (unwrap === void 0) {\n    unwrap = false;\n  }\n  let aborted = await result.deferredData.resolveData(signal);\n  if (aborted) {\n    return;\n  }\n  if (unwrap) {\n    try {\n      return {\n        type: ResultType.data,\n        data: result.deferredData.unwrappedData\n      };\n    } catch (e) {\n      // Handle any TrackedPromise._error values encountered while unwrapping\n      return {\n        type: ResultType.error,\n        error: e\n      };\n    }\n  }\n  return {\n    type: ResultType.data,\n    data: result.deferredData.data\n  };\n}\nfunction hasNakedIndexQuery(search) {\n  return new URLSearchParams(search).getAll(\"index\").some(v => v === \"\");\n}\nfunction getTargetMatch(matches, location) {\n  let search = typeof location === \"string\" ? parsePath(location).search : location.search;\n  if (matches[matches.length - 1].route.index && hasNakedIndexQuery(search || \"\")) {\n    // Return the leaf index route when index is present\n    return matches[matches.length - 1];\n  }\n  // Otherwise grab the deepest \"path contributing\" match (ignoring index and\n  // pathless layout routes)\n  let pathMatches = getPathContributingMatches(matches);\n  return pathMatches[pathMatches.length - 1];\n}\nfunction getSubmissionFromNavigation(navigation) {\n  let {\n    formMethod,\n    formAction,\n    formEncType,\n    text,\n    formData,\n    json\n  } = navigation;\n  if (!formMethod || !formAction || !formEncType) {\n    return;\n  }\n  if (text != null) {\n    return {\n      formMethod,\n      formAction,\n      formEncType,\n      formData: undefined,\n      json: undefined,\n      text\n    };\n  } else if (formData != null) {\n    return {\n      formMethod,\n      formAction,\n      formEncType,\n      formData,\n      json: undefined,\n      text: undefined\n    };\n  } else if (json !== undefined) {\n    return {\n      formMethod,\n      formAction,\n      formEncType,\n      formData: undefined,\n      json,\n      text: undefined\n    };\n  }\n}\nfunction getLoadingNavigation(location, submission) {\n  if (submission) {\n    let navigation = {\n      state: \"loading\",\n      location,\n      formMethod: submission.formMethod,\n      formAction: submission.formAction,\n      formEncType: submission.formEncType,\n      formData: submission.formData,\n      json: submission.json,\n      text: submission.text\n    };\n    return navigation;\n  } else {\n    let navigation = {\n      state: \"loading\",\n      location,\n      formMethod: undefined,\n      formAction: undefined,\n      formEncType: undefined,\n      formData: undefined,\n      json: undefined,\n      text: undefined\n    };\n    return navigation;\n  }\n}\nfunction getSubmittingNavigation(location, submission) {\n  let navigation = {\n    state: \"submitting\",\n    location,\n    formMethod: submission.formMethod,\n    formAction: submission.formAction,\n    formEncType: submission.formEncType,\n    formData: submission.formData,\n    json: submission.json,\n    text: submission.text\n  };\n  return navigation;\n}\nfunction getLoadingFetcher(submission, data) {\n  if (submission) {\n    let fetcher = {\n      state: \"loading\",\n      formMethod: submission.formMethod,\n      formAction: submission.formAction,\n      formEncType: submission.formEncType,\n      formData: submission.formData,\n      json: submission.json,\n      text: submission.text,\n      data\n    };\n    return fetcher;\n  } else {\n    let fetcher = {\n      state: \"loading\",\n      formMethod: undefined,\n      formAction: undefined,\n      formEncType: undefined,\n      formData: undefined,\n      json: undefined,\n      text: undefined,\n      data\n    };\n    return fetcher;\n  }\n}\nfunction getSubmittingFetcher(submission, existingFetcher) {\n  let fetcher = {\n    state: \"submitting\",\n    formMethod: submission.formMethod,\n    formAction: submission.formAction,\n    formEncType: submission.formEncType,\n    formData: submission.formData,\n    json: submission.json,\n    text: submission.text,\n    data: existingFetcher ? existingFetcher.data : undefined\n  };\n  return fetcher;\n}\nfunction getDoneFetcher(data) {\n  let fetcher = {\n    state: \"idle\",\n    formMethod: undefined,\n    formAction: undefined,\n    formEncType: undefined,\n    formData: undefined,\n    json: undefined,\n    text: undefined,\n    data\n  };\n  return fetcher;\n}\nfunction restoreAppliedTransitions(_window, transitions) {\n  try {\n    let sessionPositions = _window.sessionStorage.getItem(TRANSITIONS_STORAGE_KEY);\n    if (sessionPositions) {\n      let json = JSON.parse(sessionPositions);\n      for (let [k, v] of Object.entries(json || {})) {\n        if (v && Array.isArray(v)) {\n          transitions.set(k, new Set(v || []));\n        }\n      }\n    }\n  } catch (e) {\n    // no-op, use default empty object\n  }\n}\nfunction persistAppliedTransitions(_window, transitions) {\n  if (transitions.size > 0) {\n    let json = {};\n    for (let [k, v] of transitions) {\n      json[k] = [...v];\n    }\n    try {\n      _window.sessionStorage.setItem(TRANSITIONS_STORAGE_KEY, JSON.stringify(json));\n    } catch (error) {\n      warning(false, \"Failed to save applied view transitions in sessionStorage (\" + error + \").\");\n    }\n  }\n}\n//#endregion\n\nexport { AbortedDeferredError, Action, IDLE_BLOCKER, IDLE_FETCHER, IDLE_NAVIGATION, UNSAFE_DEFERRED_SYMBOL, DeferredData as UNSAFE_DeferredData, ErrorResponseImpl as UNSAFE_ErrorResponseImpl, convertRouteMatchToUiMatch as UNSAFE_convertRouteMatchToUiMatch, convertRoutesToDataRoutes as UNSAFE_convertRoutesToDataRoutes, decodePath as UNSAFE_decodePath, getResolveToMatches as UNSAFE_getResolveToMatches, invariant as UNSAFE_invariant, warning as UNSAFE_warning, createBrowserHistory, createHashHistory, createMemoryHistory, createPath, createRouter, createStaticHandler, data, defer, generatePath, getStaticContextFromError, getToPathname, isDataWithResponseInit, isDeferredData, isRouteErrorResponse, joinPaths, json, matchPath, matchRoutes, normalizePathname, parsePath, redirect, redirectDocument, replace, resolvePath, resolveTo, stripBasename };\n//# sourceMappingURL=router.js.map\n","/**\n * React Router v6.30.1\n *\n * Copyright (c) Remix Software Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.md file in the root directory of this source tree.\n *\n * @license MIT\n */\nimport * as React from 'react';\nimport { UNSAFE_invariant, joinPaths, matchPath, UNSAFE_decodePath, UNSAFE_getResolveToMatches, UNSAFE_warning, resolveTo, parsePath, matchRoutes, Action, UNSAFE_convertRouteMatchToUiMatch, stripBasename, IDLE_BLOCKER, isRouteErrorResponse, createMemoryHistory, AbortedDeferredError, createRouter } from '@remix-run/router';\nexport { AbortedDeferredError, Action as NavigationType, createPath, defer, generatePath, isRouteErrorResponse, json, matchPath, matchRoutes, parsePath, redirect, redirectDocument, replace, resolvePath } from '@remix-run/router';\n\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\n\n// Create react-specific types from the agnostic types in @remix-run/router to\n// export from react-router\nconst DataRouterContext = /*#__PURE__*/React.createContext(null);\nif (process.env.NODE_ENV !== \"production\") {\n  DataRouterContext.displayName = \"DataRouter\";\n}\nconst DataRouterStateContext = /*#__PURE__*/React.createContext(null);\nif (process.env.NODE_ENV !== \"production\") {\n  DataRouterStateContext.displayName = \"DataRouterState\";\n}\nconst AwaitContext = /*#__PURE__*/React.createContext(null);\nif (process.env.NODE_ENV !== \"production\") {\n  AwaitContext.displayName = \"Await\";\n}\n\n/**\n * A Navigator is a \"location changer\"; it's how you get to different locations.\n *\n * Every history instance conforms to the Navigator interface, but the\n * distinction is useful primarily when it comes to the low-level `<Router>` API\n * where both the location and a navigator must be provided separately in order\n * to avoid \"tearing\" that may occur in a suspense-enabled app if the action\n * and/or location were to be read directly from the history instance.\n */\n\nconst NavigationContext = /*#__PURE__*/React.createContext(null);\nif (process.env.NODE_ENV !== \"production\") {\n  NavigationContext.displayName = \"Navigation\";\n}\nconst LocationContext = /*#__PURE__*/React.createContext(null);\nif (process.env.NODE_ENV !== \"production\") {\n  LocationContext.displayName = \"Location\";\n}\nconst RouteContext = /*#__PURE__*/React.createContext({\n  outlet: null,\n  matches: [],\n  isDataRoute: false\n});\nif (process.env.NODE_ENV !== \"production\") {\n  RouteContext.displayName = \"Route\";\n}\nconst RouteErrorContext = /*#__PURE__*/React.createContext(null);\nif (process.env.NODE_ENV !== \"production\") {\n  RouteErrorContext.displayName = \"RouteError\";\n}\n\n/**\n * Returns the full href for the given \"to\" value. This is useful for building\n * custom links that are also accessible and preserve right-click behavior.\n *\n * @see https://reactrouter.com/v6/hooks/use-href\n */\nfunction useHref(to, _temp) {\n  let {\n    relative\n  } = _temp === void 0 ? {} : _temp;\n  !useInRouterContext() ? process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, // TODO: This error is probably because they somehow have 2 versions of the\n  // router loaded. We can help them understand how to avoid that.\n  \"useHref() may be used only in the context of a <Router> component.\") : UNSAFE_invariant(false) : void 0;\n  let {\n    basename,\n    navigator\n  } = React.useContext(NavigationContext);\n  let {\n    hash,\n    pathname,\n    search\n  } = useResolvedPath(to, {\n    relative\n  });\n  let joinedPathname = pathname;\n\n  // If we're operating within a basename, prepend it to the pathname prior\n  // to creating the href.  If this is a root navigation, then just use the raw\n  // basename which allows the basename to have full control over the presence\n  // of a trailing slash on root links\n  if (basename !== \"/\") {\n    joinedPathname = pathname === \"/\" ? basename : joinPaths([basename, pathname]);\n  }\n  return navigator.createHref({\n    pathname: joinedPathname,\n    search,\n    hash\n  });\n}\n\n/**\n * Returns true if this component is a descendant of a `<Router>`.\n *\n * @see https://reactrouter.com/v6/hooks/use-in-router-context\n */\nfunction useInRouterContext() {\n  return React.useContext(LocationContext) != null;\n}\n\n/**\n * Returns the current location object, which represents the current URL in web\n * browsers.\n *\n * Note: If you're using this it may mean you're doing some of your own\n * \"routing\" in your app, and we'd like to know what your use case is. We may\n * be able to provide something higher-level to better suit your needs.\n *\n * @see https://reactrouter.com/v6/hooks/use-location\n */\nfunction useLocation() {\n  !useInRouterContext() ? process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, // TODO: This error is probably because they somehow have 2 versions of the\n  // router loaded. We can help them understand how to avoid that.\n  \"useLocation() may be used only in the context of a <Router> component.\") : UNSAFE_invariant(false) : void 0;\n  return React.useContext(LocationContext).location;\n}\n\n/**\n * Returns the current navigation action which describes how the router came to\n * the current location, either by a pop, push, or replace on the history stack.\n *\n * @see https://reactrouter.com/v6/hooks/use-navigation-type\n */\nfunction useNavigationType() {\n  return React.useContext(LocationContext).navigationType;\n}\n\n/**\n * Returns a PathMatch object if the given pattern matches the current URL.\n * This is useful for components that need to know \"active\" state, e.g.\n * `<NavLink>`.\n *\n * @see https://reactrouter.com/v6/hooks/use-match\n */\nfunction useMatch(pattern) {\n  !useInRouterContext() ? process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, // TODO: This error is probably because they somehow have 2 versions of the\n  // router loaded. We can help them understand how to avoid that.\n  \"useMatch() may be used only in the context of a <Router> component.\") : UNSAFE_invariant(false) : void 0;\n  let {\n    pathname\n  } = useLocation();\n  return React.useMemo(() => matchPath(pattern, UNSAFE_decodePath(pathname)), [pathname, pattern]);\n}\n\n/**\n * The interface for the navigate() function returned from useNavigate().\n */\n\nconst navigateEffectWarning = \"You should call navigate() in a React.useEffect(), not when \" + \"your component is first rendered.\";\n\n// Mute warnings for calls to useNavigate in SSR environments\nfunction useIsomorphicLayoutEffect(cb) {\n  let isStatic = React.useContext(NavigationContext).static;\n  if (!isStatic) {\n    // We should be able to get rid of this once react 18.3 is released\n    // See: https://github.com/facebook/react/pull/26395\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    React.useLayoutEffect(cb);\n  }\n}\n\n/**\n * Returns an imperative method for changing the location. Used by `<Link>`s, but\n * may also be used by other elements to change the location.\n *\n * @see https://reactrouter.com/v6/hooks/use-navigate\n */\nfunction useNavigate() {\n  let {\n    isDataRoute\n  } = React.useContext(RouteContext);\n  // Conditional usage is OK here because the usage of a data router is static\n  // eslint-disable-next-line react-hooks/rules-of-hooks\n  return isDataRoute ? useNavigateStable() : useNavigateUnstable();\n}\nfunction useNavigateUnstable() {\n  !useInRouterContext() ? process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, // TODO: This error is probably because they somehow have 2 versions of the\n  // router loaded. We can help them understand how to avoid that.\n  \"useNavigate() may be used only in the context of a <Router> component.\") : UNSAFE_invariant(false) : void 0;\n  let dataRouterContext = React.useContext(DataRouterContext);\n  let {\n    basename,\n    future,\n    navigator\n  } = React.useContext(NavigationContext);\n  let {\n    matches\n  } = React.useContext(RouteContext);\n  let {\n    pathname: locationPathname\n  } = useLocation();\n  let routePathnamesJson = JSON.stringify(UNSAFE_getResolveToMatches(matches, future.v7_relativeSplatPath));\n  let activeRef = React.useRef(false);\n  useIsomorphicLayoutEffect(() => {\n    activeRef.current = true;\n  });\n  let navigate = React.useCallback(function (to, options) {\n    if (options === void 0) {\n      options = {};\n    }\n    process.env.NODE_ENV !== \"production\" ? UNSAFE_warning(activeRef.current, navigateEffectWarning) : void 0;\n\n    // Short circuit here since if this happens on first render the navigate\n    // is useless because we haven't wired up our history listener yet\n    if (!activeRef.current) return;\n    if (typeof to === \"number\") {\n      navigator.go(to);\n      return;\n    }\n    let path = resolveTo(to, JSON.parse(routePathnamesJson), locationPathname, options.relative === \"path\");\n\n    // If we're operating within a basename, prepend it to the pathname prior\n    // to handing off to history (but only if we're not in a data router,\n    // otherwise it'll prepend the basename inside of the router).\n    // If this is a root navigation, then we navigate to the raw basename\n    // which allows the basename to have full control over the presence of a\n    // trailing slash on root links\n    if (dataRouterContext == null && basename !== \"/\") {\n      path.pathname = path.pathname === \"/\" ? basename : joinPaths([basename, path.pathname]);\n    }\n    (!!options.replace ? navigator.replace : navigator.push)(path, options.state, options);\n  }, [basename, navigator, routePathnamesJson, locationPathname, dataRouterContext]);\n  return navigate;\n}\nconst OutletContext = /*#__PURE__*/React.createContext(null);\n\n/**\n * Returns the context (if provided) for the child route at this level of the route\n * hierarchy.\n * @see https://reactrouter.com/v6/hooks/use-outlet-context\n */\nfunction useOutletContext() {\n  return React.useContext(OutletContext);\n}\n\n/**\n * Returns the element for the child route at this level of the route\n * hierarchy. Used internally by `<Outlet>` to render child routes.\n *\n * @see https://reactrouter.com/v6/hooks/use-outlet\n */\nfunction useOutlet(context) {\n  let outlet = React.useContext(RouteContext).outlet;\n  if (outlet) {\n    return /*#__PURE__*/React.createElement(OutletContext.Provider, {\n      value: context\n    }, outlet);\n  }\n  return outlet;\n}\n\n/**\n * Returns an object of key/value pairs of the dynamic params from the current\n * URL that were matched by the route path.\n *\n * @see https://reactrouter.com/v6/hooks/use-params\n */\nfunction useParams() {\n  let {\n    matches\n  } = React.useContext(RouteContext);\n  let routeMatch = matches[matches.length - 1];\n  return routeMatch ? routeMatch.params : {};\n}\n\n/**\n * Resolves the pathname of the given `to` value against the current location.\n *\n * @see https://reactrouter.com/v6/hooks/use-resolved-path\n */\nfunction useResolvedPath(to, _temp2) {\n  let {\n    relative\n  } = _temp2 === void 0 ? {} : _temp2;\n  let {\n    future\n  } = React.useContext(NavigationContext);\n  let {\n    matches\n  } = React.useContext(RouteContext);\n  let {\n    pathname: locationPathname\n  } = useLocation();\n  let routePathnamesJson = JSON.stringify(UNSAFE_getResolveToMatches(matches, future.v7_relativeSplatPath));\n  return React.useMemo(() => resolveTo(to, JSON.parse(routePathnamesJson), locationPathname, relative === \"path\"), [to, routePathnamesJson, locationPathname, relative]);\n}\n\n/**\n * Returns the element of the route that matched the current location, prepared\n * with the correct context to render the remainder of the route tree. Route\n * elements in the tree must render an `<Outlet>` to render their child route's\n * element.\n *\n * @see https://reactrouter.com/v6/hooks/use-routes\n */\nfunction useRoutes(routes, locationArg) {\n  return useRoutesImpl(routes, locationArg);\n}\n\n// Internal implementation with accept optional param for RouterProvider usage\nfunction useRoutesImpl(routes, locationArg, dataRouterState, future) {\n  !useInRouterContext() ? process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, // TODO: This error is probably because they somehow have 2 versions of the\n  // router loaded. We can help them understand how to avoid that.\n  \"useRoutes() may be used only in the context of a <Router> component.\") : UNSAFE_invariant(false) : void 0;\n  let {\n    navigator\n  } = React.useContext(NavigationContext);\n  let {\n    matches: parentMatches\n  } = React.useContext(RouteContext);\n  let routeMatch = parentMatches[parentMatches.length - 1];\n  let parentParams = routeMatch ? routeMatch.params : {};\n  let parentPathname = routeMatch ? routeMatch.pathname : \"/\";\n  let parentPathnameBase = routeMatch ? routeMatch.pathnameBase : \"/\";\n  let parentRoute = routeMatch && routeMatch.route;\n  if (process.env.NODE_ENV !== \"production\") {\n    // You won't get a warning about 2 different <Routes> under a <Route>\n    // without a trailing *, but this is a best-effort warning anyway since we\n    // cannot even give the warning unless they land at the parent route.\n    //\n    // Example:\n    //\n    // <Routes>\n    //   {/* This route path MUST end with /* because otherwise\n    //       it will never match /blog/post/123 */}\n    //   <Route path=\"blog\" element={<Blog />} />\n    //   <Route path=\"blog/feed\" element={<BlogFeed />} />\n    // </Routes>\n    //\n    // function Blog() {\n    //   return (\n    //     <Routes>\n    //       <Route path=\"post/:id\" element={<Post />} />\n    //     </Routes>\n    //   );\n    // }\n    let parentPath = parentRoute && parentRoute.path || \"\";\n    warningOnce(parentPathname, !parentRoute || parentPath.endsWith(\"*\"), \"You rendered descendant <Routes> (or called `useRoutes()`) at \" + (\"\\\"\" + parentPathname + \"\\\" (under <Route path=\\\"\" + parentPath + \"\\\">) but the \") + \"parent route path has no trailing \\\"*\\\". This means if you navigate \" + \"deeper, the parent won't match anymore and therefore the child \" + \"routes will never render.\\n\\n\" + (\"Please change the parent <Route path=\\\"\" + parentPath + \"\\\"> to <Route \") + (\"path=\\\"\" + (parentPath === \"/\" ? \"*\" : parentPath + \"/*\") + \"\\\">.\"));\n  }\n  let locationFromContext = useLocation();\n  let location;\n  if (locationArg) {\n    var _parsedLocationArg$pa;\n    let parsedLocationArg = typeof locationArg === \"string\" ? parsePath(locationArg) : locationArg;\n    !(parentPathnameBase === \"/\" || ((_parsedLocationArg$pa = parsedLocationArg.pathname) == null ? void 0 : _parsedLocationArg$pa.startsWith(parentPathnameBase))) ? process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, \"When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, \" + \"the location pathname must begin with the portion of the URL pathname that was \" + (\"matched by all parent routes. The current pathname base is \\\"\" + parentPathnameBase + \"\\\" \") + (\"but pathname \\\"\" + parsedLocationArg.pathname + \"\\\" was given in the `location` prop.\")) : UNSAFE_invariant(false) : void 0;\n    location = parsedLocationArg;\n  } else {\n    location = locationFromContext;\n  }\n  let pathname = location.pathname || \"/\";\n  let remainingPathname = pathname;\n  if (parentPathnameBase !== \"/\") {\n    // Determine the remaining pathname by removing the # of URL segments the\n    // parentPathnameBase has, instead of removing based on character count.\n    // This is because we can't guarantee that incoming/outgoing encodings/\n    // decodings will match exactly.\n    // We decode paths before matching on a per-segment basis with\n    // decodeURIComponent(), but we re-encode pathnames via `new URL()` so they\n    // match what `window.location.pathname` would reflect.  Those don't 100%\n    // align when it comes to encoded URI characters such as % and &.\n    //\n    // So we may end up with:\n    //   pathname:           \"/descendant/a%25b/match\"\n    //   parentPathnameBase: \"/descendant/a%b\"\n    //\n    // And the direct substring removal approach won't work :/\n    let parentSegments = parentPathnameBase.replace(/^\\//, \"\").split(\"/\");\n    let segments = pathname.replace(/^\\//, \"\").split(\"/\");\n    remainingPathname = \"/\" + segments.slice(parentSegments.length).join(\"/\");\n  }\n  let matches = matchRoutes(routes, {\n    pathname: remainingPathname\n  });\n  if (process.env.NODE_ENV !== \"production\") {\n    process.env.NODE_ENV !== \"production\" ? UNSAFE_warning(parentRoute || matches != null, \"No routes matched location \\\"\" + location.pathname + location.search + location.hash + \"\\\" \") : void 0;\n    process.env.NODE_ENV !== \"production\" ? UNSAFE_warning(matches == null || matches[matches.length - 1].route.element !== undefined || matches[matches.length - 1].route.Component !== undefined || matches[matches.length - 1].route.lazy !== undefined, \"Matched leaf route at location \\\"\" + location.pathname + location.search + location.hash + \"\\\" \" + \"does not have an element or Component. This means it will render an <Outlet /> with a \" + \"null value by default resulting in an \\\"empty\\\" page.\") : void 0;\n  }\n  let renderedMatches = _renderMatches(matches && matches.map(match => Object.assign({}, match, {\n    params: Object.assign({}, parentParams, match.params),\n    pathname: joinPaths([parentPathnameBase,\n    // Re-encode pathnames that were decoded inside matchRoutes\n    navigator.encodeLocation ? navigator.encodeLocation(match.pathname).pathname : match.pathname]),\n    pathnameBase: match.pathnameBase === \"/\" ? parentPathnameBase : joinPaths([parentPathnameBase,\n    // Re-encode pathnames that were decoded inside matchRoutes\n    navigator.encodeLocation ? navigator.encodeLocation(match.pathnameBase).pathname : match.pathnameBase])\n  })), parentMatches, dataRouterState, future);\n\n  // When a user passes in a `locationArg`, the associated routes need to\n  // be wrapped in a new `LocationContext.Provider` in order for `useLocation`\n  // to use the scoped location instead of the global location.\n  if (locationArg && renderedMatches) {\n    return /*#__PURE__*/React.createElement(LocationContext.Provider, {\n      value: {\n        location: _extends({\n          pathname: \"/\",\n          search: \"\",\n          hash: \"\",\n          state: null,\n          key: \"default\"\n        }, location),\n        navigationType: Action.Pop\n      }\n    }, renderedMatches);\n  }\n  return renderedMatches;\n}\nfunction DefaultErrorComponent() {\n  let error = useRouteError();\n  let message = isRouteErrorResponse(error) ? error.status + \" \" + error.statusText : error instanceof Error ? error.message : JSON.stringify(error);\n  let stack = error instanceof Error ? error.stack : null;\n  let lightgrey = \"rgba(200,200,200, 0.5)\";\n  let preStyles = {\n    padding: \"0.5rem\",\n    backgroundColor: lightgrey\n  };\n  let codeStyles = {\n    padding: \"2px 4px\",\n    backgroundColor: lightgrey\n  };\n  let devInfo = null;\n  if (process.env.NODE_ENV !== \"production\") {\n    console.error(\"Error handled by React Router default ErrorBoundary:\", error);\n    devInfo = /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"p\", null, \"\\uD83D\\uDCBF Hey developer \\uD83D\\uDC4B\"), /*#__PURE__*/React.createElement(\"p\", null, \"You can provide a way better UX than this when your app throws errors by providing your own \", /*#__PURE__*/React.createElement(\"code\", {\n      style: codeStyles\n    }, \"ErrorBoundary\"), \" or\", \" \", /*#__PURE__*/React.createElement(\"code\", {\n      style: codeStyles\n    }, \"errorElement\"), \" prop on your route.\"));\n  }\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h2\", null, \"Unexpected Application Error!\"), /*#__PURE__*/React.createElement(\"h3\", {\n    style: {\n      fontStyle: \"italic\"\n    }\n  }, message), stack ? /*#__PURE__*/React.createElement(\"pre\", {\n    style: preStyles\n  }, stack) : null, devInfo);\n}\nconst defaultErrorElement = /*#__PURE__*/React.createElement(DefaultErrorComponent, null);\nclass RenderErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      location: props.location,\n      revalidation: props.revalidation,\n      error: props.error\n    };\n  }\n  static getDerivedStateFromError(error) {\n    return {\n      error: error\n    };\n  }\n  static getDerivedStateFromProps(props, state) {\n    // When we get into an error state, the user will likely click \"back\" to the\n    // previous page that didn't have an error. Because this wraps the entire\n    // application, that will have no effect--the error page continues to display.\n    // This gives us a mechanism to recover from the error when the location changes.\n    //\n    // Whether we're in an error state or not, we update the location in state\n    // so that when we are in an error state, it gets reset when a new location\n    // comes in and the user recovers from the error.\n    if (state.location !== props.location || state.revalidation !== \"idle\" && props.revalidation === \"idle\") {\n      return {\n        error: props.error,\n        location: props.location,\n        revalidation: props.revalidation\n      };\n    }\n\n    // If we're not changing locations, preserve the location but still surface\n    // any new errors that may come through. We retain the existing error, we do\n    // this because the error provided from the app state may be cleared without\n    // the location changing.\n    return {\n      error: props.error !== undefined ? props.error : state.error,\n      location: state.location,\n      revalidation: props.revalidation || state.revalidation\n    };\n  }\n  componentDidCatch(error, errorInfo) {\n    console.error(\"React Router caught the following error during render\", error, errorInfo);\n  }\n  render() {\n    return this.state.error !== undefined ? /*#__PURE__*/React.createElement(RouteContext.Provider, {\n      value: this.props.routeContext\n    }, /*#__PURE__*/React.createElement(RouteErrorContext.Provider, {\n      value: this.state.error,\n      children: this.props.component\n    })) : this.props.children;\n  }\n}\nfunction RenderedRoute(_ref) {\n  let {\n    routeContext,\n    match,\n    children\n  } = _ref;\n  let dataRouterContext = React.useContext(DataRouterContext);\n\n  // Track how deep we got in our render pass to emulate SSR componentDidCatch\n  // in a DataStaticRouter\n  if (dataRouterContext && dataRouterContext.static && dataRouterContext.staticContext && (match.route.errorElement || match.route.ErrorBoundary)) {\n    dataRouterContext.staticContext._deepestRenderedBoundaryId = match.route.id;\n  }\n  return /*#__PURE__*/React.createElement(RouteContext.Provider, {\n    value: routeContext\n  }, children);\n}\nfunction _renderMatches(matches, parentMatches, dataRouterState, future) {\n  var _dataRouterState;\n  if (parentMatches === void 0) {\n    parentMatches = [];\n  }\n  if (dataRouterState === void 0) {\n    dataRouterState = null;\n  }\n  if (future === void 0) {\n    future = null;\n  }\n  if (matches == null) {\n    var _future;\n    if (!dataRouterState) {\n      return null;\n    }\n    if (dataRouterState.errors) {\n      // Don't bail if we have data router errors so we can render them in the\n      // boundary.  Use the pre-matched (or shimmed) matches\n      matches = dataRouterState.matches;\n    } else if ((_future = future) != null && _future.v7_partialHydration && parentMatches.length === 0 && !dataRouterState.initialized && dataRouterState.matches.length > 0) {\n      // Don't bail if we're initializing with partial hydration and we have\n      // router matches.  That means we're actively running `patchRoutesOnNavigation`\n      // so we should render down the partial matches to the appropriate\n      // `HydrateFallback`.  We only do this if `parentMatches` is empty so it\n      // only impacts the root matches for `RouterProvider` and no descendant\n      // `<Routes>`\n      matches = dataRouterState.matches;\n    } else {\n      return null;\n    }\n  }\n  let renderedMatches = matches;\n\n  // If we have data errors, trim matches to the highest error boundary\n  let errors = (_dataRouterState = dataRouterState) == null ? void 0 : _dataRouterState.errors;\n  if (errors != null) {\n    let errorIndex = renderedMatches.findIndex(m => m.route.id && (errors == null ? void 0 : errors[m.route.id]) !== undefined);\n    !(errorIndex >= 0) ? process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, \"Could not find a matching route for errors on route IDs: \" + Object.keys(errors).join(\",\")) : UNSAFE_invariant(false) : void 0;\n    renderedMatches = renderedMatches.slice(0, Math.min(renderedMatches.length, errorIndex + 1));\n  }\n\n  // If we're in a partial hydration mode, detect if we need to render down to\n  // a given HydrateFallback while we load the rest of the hydration data\n  let renderFallback = false;\n  let fallbackIndex = -1;\n  if (dataRouterState && future && future.v7_partialHydration) {\n    for (let i = 0; i < renderedMatches.length; i++) {\n      let match = renderedMatches[i];\n      // Track the deepest fallback up until the first route without data\n      if (match.route.HydrateFallback || match.route.hydrateFallbackElement) {\n        fallbackIndex = i;\n      }\n      if (match.route.id) {\n        let {\n          loaderData,\n          errors\n        } = dataRouterState;\n        let needsToRunLoader = match.route.loader && loaderData[match.route.id] === undefined && (!errors || errors[match.route.id] === undefined);\n        if (match.route.lazy || needsToRunLoader) {\n          // We found the first route that's not ready to render (waiting on\n          // lazy, or has a loader that hasn't run yet).  Flag that we need to\n          // render a fallback and render up until the appropriate fallback\n          renderFallback = true;\n          if (fallbackIndex >= 0) {\n            renderedMatches = renderedMatches.slice(0, fallbackIndex + 1);\n          } else {\n            renderedMatches = [renderedMatches[0]];\n          }\n          break;\n        }\n      }\n    }\n  }\n  return renderedMatches.reduceRight((outlet, match, index) => {\n    // Only data routers handle errors/fallbacks\n    let error;\n    let shouldRenderHydrateFallback = false;\n    let errorElement = null;\n    let hydrateFallbackElement = null;\n    if (dataRouterState) {\n      error = errors && match.route.id ? errors[match.route.id] : undefined;\n      errorElement = match.route.errorElement || defaultErrorElement;\n      if (renderFallback) {\n        if (fallbackIndex < 0 && index === 0) {\n          warningOnce(\"route-fallback\", false, \"No `HydrateFallback` element provided to render during initial hydration\");\n          shouldRenderHydrateFallback = true;\n          hydrateFallbackElement = null;\n        } else if (fallbackIndex === index) {\n          shouldRenderHydrateFallback = true;\n          hydrateFallbackElement = match.route.hydrateFallbackElement || null;\n        }\n      }\n    }\n    let matches = parentMatches.concat(renderedMatches.slice(0, index + 1));\n    let getChildren = () => {\n      let children;\n      if (error) {\n        children = errorElement;\n      } else if (shouldRenderHydrateFallback) {\n        children = hydrateFallbackElement;\n      } else if (match.route.Component) {\n        // Note: This is a de-optimized path since React won't re-use the\n        // ReactElement since it's identity changes with each new\n        // React.createElement call.  We keep this so folks can use\n        // `<Route Component={...}>` in `<Routes>` but generally `Component`\n        // usage is only advised in `RouterProvider` when we can convert it to\n        // `element` ahead of time.\n        children = /*#__PURE__*/React.createElement(match.route.Component, null);\n      } else if (match.route.element) {\n        children = match.route.element;\n      } else {\n        children = outlet;\n      }\n      return /*#__PURE__*/React.createElement(RenderedRoute, {\n        match: match,\n        routeContext: {\n          outlet,\n          matches,\n          isDataRoute: dataRouterState != null\n        },\n        children: children\n      });\n    };\n    // Only wrap in an error boundary within data router usages when we have an\n    // ErrorBoundary/errorElement on this route.  Otherwise let it bubble up to\n    // an ancestor ErrorBoundary/errorElement\n    return dataRouterState && (match.route.ErrorBoundary || match.route.errorElement || index === 0) ? /*#__PURE__*/React.createElement(RenderErrorBoundary, {\n      location: dataRouterState.location,\n      revalidation: dataRouterState.revalidation,\n      component: errorElement,\n      error: error,\n      children: getChildren(),\n      routeContext: {\n        outlet: null,\n        matches,\n        isDataRoute: true\n      }\n    }) : getChildren();\n  }, null);\n}\nvar DataRouterHook = /*#__PURE__*/function (DataRouterHook) {\n  DataRouterHook[\"UseBlocker\"] = \"useBlocker\";\n  DataRouterHook[\"UseRevalidator\"] = \"useRevalidator\";\n  DataRouterHook[\"UseNavigateStable\"] = \"useNavigate\";\n  return DataRouterHook;\n}(DataRouterHook || {});\nvar DataRouterStateHook = /*#__PURE__*/function (DataRouterStateHook) {\n  DataRouterStateHook[\"UseBlocker\"] = \"useBlocker\";\n  DataRouterStateHook[\"UseLoaderData\"] = \"useLoaderData\";\n  DataRouterStateHook[\"UseActionData\"] = \"useActionData\";\n  DataRouterStateHook[\"UseRouteError\"] = \"useRouteError\";\n  DataRouterStateHook[\"UseNavigation\"] = \"useNavigation\";\n  DataRouterStateHook[\"UseRouteLoaderData\"] = \"useRouteLoaderData\";\n  DataRouterStateHook[\"UseMatches\"] = \"useMatches\";\n  DataRouterStateHook[\"UseRevalidator\"] = \"useRevalidator\";\n  DataRouterStateHook[\"UseNavigateStable\"] = \"useNavigate\";\n  DataRouterStateHook[\"UseRouteId\"] = \"useRouteId\";\n  return DataRouterStateHook;\n}(DataRouterStateHook || {});\nfunction getDataRouterConsoleError(hookName) {\n  return hookName + \" must be used within a data router.  See https://reactrouter.com/v6/routers/picking-a-router.\";\n}\nfunction useDataRouterContext(hookName) {\n  let ctx = React.useContext(DataRouterContext);\n  !ctx ? process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, getDataRouterConsoleError(hookName)) : UNSAFE_invariant(false) : void 0;\n  return ctx;\n}\nfunction useDataRouterState(hookName) {\n  let state = React.useContext(DataRouterStateContext);\n  !state ? process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, getDataRouterConsoleError(hookName)) : UNSAFE_invariant(false) : void 0;\n  return state;\n}\nfunction useRouteContext(hookName) {\n  let route = React.useContext(RouteContext);\n  !route ? process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, getDataRouterConsoleError(hookName)) : UNSAFE_invariant(false) : void 0;\n  return route;\n}\n\n// Internal version with hookName-aware debugging\nfunction useCurrentRouteId(hookName) {\n  let route = useRouteContext(hookName);\n  let thisRoute = route.matches[route.matches.length - 1];\n  !thisRoute.route.id ? process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, hookName + \" can only be used on routes that contain a unique \\\"id\\\"\") : UNSAFE_invariant(false) : void 0;\n  return thisRoute.route.id;\n}\n\n/**\n * Returns the ID for the nearest contextual route\n */\nfunction useRouteId() {\n  return useCurrentRouteId(DataRouterStateHook.UseRouteId);\n}\n\n/**\n * Returns the current navigation, defaulting to an \"idle\" navigation when\n * no navigation is in progress\n */\nfunction useNavigation() {\n  let state = useDataRouterState(DataRouterStateHook.UseNavigation);\n  return state.navigation;\n}\n\n/**\n * Returns a revalidate function for manually triggering revalidation, as well\n * as the current state of any manual revalidations\n */\nfunction useRevalidator() {\n  let dataRouterContext = useDataRouterContext(DataRouterHook.UseRevalidator);\n  let state = useDataRouterState(DataRouterStateHook.UseRevalidator);\n  return React.useMemo(() => ({\n    revalidate: dataRouterContext.router.revalidate,\n    state: state.revalidation\n  }), [dataRouterContext.router.revalidate, state.revalidation]);\n}\n\n/**\n * Returns the active route matches, useful for accessing loaderData for\n * parent/child routes or the route \"handle\" property\n */\nfunction useMatches() {\n  let {\n    matches,\n    loaderData\n  } = useDataRouterState(DataRouterStateHook.UseMatches);\n  return React.useMemo(() => matches.map(m => UNSAFE_convertRouteMatchToUiMatch(m, loaderData)), [matches, loaderData]);\n}\n\n/**\n * Returns the loader data for the nearest ancestor Route loader\n */\nfunction useLoaderData() {\n  let state = useDataRouterState(DataRouterStateHook.UseLoaderData);\n  let routeId = useCurrentRouteId(DataRouterStateHook.UseLoaderData);\n  if (state.errors && state.errors[routeId] != null) {\n    console.error(\"You cannot `useLoaderData` in an errorElement (routeId: \" + routeId + \")\");\n    return undefined;\n  }\n  return state.loaderData[routeId];\n}\n\n/**\n * Returns the loaderData for the given routeId\n */\nfunction useRouteLoaderData(routeId) {\n  let state = useDataRouterState(DataRouterStateHook.UseRouteLoaderData);\n  return state.loaderData[routeId];\n}\n\n/**\n * Returns the action data for the nearest ancestor Route action\n */\nfunction useActionData() {\n  let state = useDataRouterState(DataRouterStateHook.UseActionData);\n  let routeId = useCurrentRouteId(DataRouterStateHook.UseLoaderData);\n  return state.actionData ? state.actionData[routeId] : undefined;\n}\n\n/**\n * Returns the nearest ancestor Route error, which could be a loader/action\n * error or a render error.  This is intended to be called from your\n * ErrorBoundary/errorElement to display a proper error message.\n */\nfunction useRouteError() {\n  var _state$errors;\n  let error = React.useContext(RouteErrorContext);\n  let state = useDataRouterState(DataRouterStateHook.UseRouteError);\n  let routeId = useCurrentRouteId(DataRouterStateHook.UseRouteError);\n\n  // If this was a render error, we put it in a RouteError context inside\n  // of RenderErrorBoundary\n  if (error !== undefined) {\n    return error;\n  }\n\n  // Otherwise look for errors from our data router state\n  return (_state$errors = state.errors) == null ? void 0 : _state$errors[routeId];\n}\n\n/**\n * Returns the happy-path data from the nearest ancestor `<Await />` value\n */\nfunction useAsyncValue() {\n  let value = React.useContext(AwaitContext);\n  return value == null ? void 0 : value._data;\n}\n\n/**\n * Returns the error from the nearest ancestor `<Await />` value\n */\nfunction useAsyncError() {\n  let value = React.useContext(AwaitContext);\n  return value == null ? void 0 : value._error;\n}\nlet blockerId = 0;\n\n/**\n * Allow the application to block navigations within the SPA and present the\n * user a confirmation dialog to confirm the navigation.  Mostly used to avoid\n * using half-filled form data.  This does not handle hard-reloads or\n * cross-origin navigations.\n */\nfunction useBlocker(shouldBlock) {\n  let {\n    router,\n    basename\n  } = useDataRouterContext(DataRouterHook.UseBlocker);\n  let state = useDataRouterState(DataRouterStateHook.UseBlocker);\n  let [blockerKey, setBlockerKey] = React.useState(\"\");\n  let blockerFunction = React.useCallback(arg => {\n    if (typeof shouldBlock !== \"function\") {\n      return !!shouldBlock;\n    }\n    if (basename === \"/\") {\n      return shouldBlock(arg);\n    }\n\n    // If they provided us a function and we've got an active basename, strip\n    // it from the locations we expose to the user to match the behavior of\n    // useLocation\n    let {\n      currentLocation,\n      nextLocation,\n      historyAction\n    } = arg;\n    return shouldBlock({\n      currentLocation: _extends({}, currentLocation, {\n        pathname: stripBasename(currentLocation.pathname, basename) || currentLocation.pathname\n      }),\n      nextLocation: _extends({}, nextLocation, {\n        pathname: stripBasename(nextLocation.pathname, basename) || nextLocation.pathname\n      }),\n      historyAction\n    });\n  }, [basename, shouldBlock]);\n\n  // This effect is in charge of blocker key assignment and deletion (which is\n  // tightly coupled to the key)\n  React.useEffect(() => {\n    let key = String(++blockerId);\n    setBlockerKey(key);\n    return () => router.deleteBlocker(key);\n  }, [router]);\n\n  // This effect handles assigning the blockerFunction.  This is to handle\n  // unstable blocker function identities, and happens only after the prior\n  // effect so we don't get an orphaned blockerFunction in the router with a\n  // key of \"\".  Until then we just have the IDLE_BLOCKER.\n  React.useEffect(() => {\n    if (blockerKey !== \"\") {\n      router.getBlocker(blockerKey, blockerFunction);\n    }\n  }, [router, blockerKey, blockerFunction]);\n\n  // Prefer the blocker from `state` not `router.state` since DataRouterContext\n  // is memoized so this ensures we update on blocker state updates\n  return blockerKey && state.blockers.has(blockerKey) ? state.blockers.get(blockerKey) : IDLE_BLOCKER;\n}\n\n/**\n * Stable version of useNavigate that is used when we are in the context of\n * a RouterProvider.\n */\nfunction useNavigateStable() {\n  let {\n    router\n  } = useDataRouterContext(DataRouterHook.UseNavigateStable);\n  let id = useCurrentRouteId(DataRouterStateHook.UseNavigateStable);\n  let activeRef = React.useRef(false);\n  useIsomorphicLayoutEffect(() => {\n    activeRef.current = true;\n  });\n  let navigate = React.useCallback(function (to, options) {\n    if (options === void 0) {\n      options = {};\n    }\n    process.env.NODE_ENV !== \"production\" ? UNSAFE_warning(activeRef.current, navigateEffectWarning) : void 0;\n\n    // Short circuit here since if this happens on first render the navigate\n    // is useless because we haven't wired up our router subscriber yet\n    if (!activeRef.current) return;\n    if (typeof to === \"number\") {\n      router.navigate(to);\n    } else {\n      router.navigate(to, _extends({\n        fromRouteId: id\n      }, options));\n    }\n  }, [router, id]);\n  return navigate;\n}\nconst alreadyWarned$1 = {};\nfunction warningOnce(key, cond, message) {\n  if (!cond && !alreadyWarned$1[key]) {\n    alreadyWarned$1[key] = true;\n    process.env.NODE_ENV !== \"production\" ? UNSAFE_warning(false, message) : void 0;\n  }\n}\n\nconst alreadyWarned = {};\nfunction warnOnce(key, message) {\n  if (process.env.NODE_ENV !== \"production\" && !alreadyWarned[message]) {\n    alreadyWarned[message] = true;\n    console.warn(message);\n  }\n}\nconst logDeprecation = (flag, msg, link) => warnOnce(flag, \"\\u26A0\\uFE0F React Router Future Flag Warning: \" + msg + \". \" + (\"You can use the `\" + flag + \"` future flag to opt-in early. \") + (\"For more information, see \" + link + \".\"));\nfunction logV6DeprecationWarnings(renderFuture, routerFuture) {\n  if ((renderFuture == null ? void 0 : renderFuture.v7_startTransition) === undefined) {\n    logDeprecation(\"v7_startTransition\", \"React Router will begin wrapping state updates in `React.startTransition` in v7\", \"https://reactrouter.com/v6/upgrading/future#v7_starttransition\");\n  }\n  if ((renderFuture == null ? void 0 : renderFuture.v7_relativeSplatPath) === undefined && (!routerFuture || routerFuture.v7_relativeSplatPath === undefined)) {\n    logDeprecation(\"v7_relativeSplatPath\", \"Relative route resolution within Splat routes is changing in v7\", \"https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath\");\n  }\n  if (routerFuture) {\n    if (routerFuture.v7_fetcherPersist === undefined) {\n      logDeprecation(\"v7_fetcherPersist\", \"The persistence behavior of fetchers is changing in v7\", \"https://reactrouter.com/v6/upgrading/future#v7_fetcherpersist\");\n    }\n    if (routerFuture.v7_normalizeFormMethod === undefined) {\n      logDeprecation(\"v7_normalizeFormMethod\", \"Casing of `formMethod` fields is being normalized to uppercase in v7\", \"https://reactrouter.com/v6/upgrading/future#v7_normalizeformmethod\");\n    }\n    if (routerFuture.v7_partialHydration === undefined) {\n      logDeprecation(\"v7_partialHydration\", \"`RouterProvider` hydration behavior is changing in v7\", \"https://reactrouter.com/v6/upgrading/future#v7_partialhydration\");\n    }\n    if (routerFuture.v7_skipActionErrorRevalidation === undefined) {\n      logDeprecation(\"v7_skipActionErrorRevalidation\", \"The revalidation behavior after 4xx/5xx `action` responses is changing in v7\", \"https://reactrouter.com/v6/upgrading/future#v7_skipactionerrorrevalidation\");\n    }\n  }\n}\n\n/**\n  Webpack + React 17 fails to compile on any of the following because webpack\n  complains that `startTransition` doesn't exist in `React`:\n  * import { startTransition } from \"react\"\n  * import * as React from from \"react\";\n    \"startTransition\" in React ? React.startTransition(() => setState()) : setState()\n  * import * as React from from \"react\";\n    \"startTransition\" in React ? React[\"startTransition\"](() => setState()) : setState()\n\n  Moving it to a constant such as the following solves the Webpack/React 17 issue:\n  * import * as React from from \"react\";\n    const START_TRANSITION = \"startTransition\";\n    START_TRANSITION in React ? React[START_TRANSITION](() => setState()) : setState()\n\n  However, that introduces webpack/terser minification issues in production builds\n  in React 18 where minification/obfuscation ends up removing the call of\n  React.startTransition entirely from the first half of the ternary.  Grabbing\n  this exported reference once up front resolves that issue.\n\n  See https://github.com/remix-run/react-router/issues/10579\n*/\nconst START_TRANSITION = \"startTransition\";\nconst startTransitionImpl = React[START_TRANSITION];\n\n/**\n * Given a Remix Router instance, render the appropriate UI\n */\nfunction RouterProvider(_ref) {\n  let {\n    fallbackElement,\n    router,\n    future\n  } = _ref;\n  let [state, setStateImpl] = React.useState(router.state);\n  let {\n    v7_startTransition\n  } = future || {};\n  let setState = React.useCallback(newState => {\n    if (v7_startTransition && startTransitionImpl) {\n      startTransitionImpl(() => setStateImpl(newState));\n    } else {\n      setStateImpl(newState);\n    }\n  }, [setStateImpl, v7_startTransition]);\n\n  // Need to use a layout effect here so we are subscribed early enough to\n  // pick up on any render-driven redirects/navigations (useEffect/<Navigate>)\n  React.useLayoutEffect(() => router.subscribe(setState), [router, setState]);\n  React.useEffect(() => {\n    process.env.NODE_ENV !== \"production\" ? UNSAFE_warning(fallbackElement == null || !router.future.v7_partialHydration, \"`<RouterProvider fallbackElement>` is deprecated when using \" + \"`v7_partialHydration`, use a `HydrateFallback` component instead\") : void 0;\n    // Only log this once on initial mount\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  let navigator = React.useMemo(() => {\n    return {\n      createHref: router.createHref,\n      encodeLocation: router.encodeLocation,\n      go: n => router.navigate(n),\n      push: (to, state, opts) => router.navigate(to, {\n        state,\n        preventScrollReset: opts == null ? void 0 : opts.preventScrollReset\n      }),\n      replace: (to, state, opts) => router.navigate(to, {\n        replace: true,\n        state,\n        preventScrollReset: opts == null ? void 0 : opts.preventScrollReset\n      })\n    };\n  }, [router]);\n  let basename = router.basename || \"/\";\n  let dataRouterContext = React.useMemo(() => ({\n    router,\n    navigator,\n    static: false,\n    basename\n  }), [router, navigator, basename]);\n  React.useEffect(() => logV6DeprecationWarnings(future, router.future), [router, future]);\n\n  // The fragment and {null} here are important!  We need them to keep React 18's\n  // useId happy when we are server-rendering since we may have a <script> here\n  // containing the hydrated server-side staticContext (from StaticRouterProvider).\n  // useId relies on the component tree structure to generate deterministic id's\n  // so we need to ensure it remains the same on the client even though\n  // we don't need the <script> tag\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(DataRouterContext.Provider, {\n    value: dataRouterContext\n  }, /*#__PURE__*/React.createElement(DataRouterStateContext.Provider, {\n    value: state\n  }, /*#__PURE__*/React.createElement(Router, {\n    basename: basename,\n    location: state.location,\n    navigationType: state.historyAction,\n    navigator: navigator,\n    future: {\n      v7_relativeSplatPath: router.future.v7_relativeSplatPath\n    }\n  }, state.initialized || router.future.v7_partialHydration ? /*#__PURE__*/React.createElement(DataRoutes, {\n    routes: router.routes,\n    future: router.future,\n    state: state\n  }) : fallbackElement))), null);\n}\nfunction DataRoutes(_ref2) {\n  let {\n    routes,\n    future,\n    state\n  } = _ref2;\n  return useRoutesImpl(routes, undefined, state, future);\n}\n/**\n * A `<Router>` that stores all entries in memory.\n *\n * @see https://reactrouter.com/v6/router-components/memory-router\n */\nfunction MemoryRouter(_ref3) {\n  let {\n    basename,\n    children,\n    initialEntries,\n    initialIndex,\n    future\n  } = _ref3;\n  let historyRef = React.useRef();\n  if (historyRef.current == null) {\n    historyRef.current = createMemoryHistory({\n      initialEntries,\n      initialIndex,\n      v5Compat: true\n    });\n  }\n  let history = historyRef.current;\n  let [state, setStateImpl] = React.useState({\n    action: history.action,\n    location: history.location\n  });\n  let {\n    v7_startTransition\n  } = future || {};\n  let setState = React.useCallback(newState => {\n    v7_startTransition && startTransitionImpl ? startTransitionImpl(() => setStateImpl(newState)) : setStateImpl(newState);\n  }, [setStateImpl, v7_startTransition]);\n  React.useLayoutEffect(() => history.listen(setState), [history, setState]);\n  React.useEffect(() => logV6DeprecationWarnings(future), [future]);\n  return /*#__PURE__*/React.createElement(Router, {\n    basename: basename,\n    children: children,\n    location: state.location,\n    navigationType: state.action,\n    navigator: history,\n    future: future\n  });\n}\n/**\n * Changes the current location.\n *\n * Note: This API is mostly useful in React.Component subclasses that are not\n * able to use hooks. In functional components, we recommend you use the\n * `useNavigate` hook instead.\n *\n * @see https://reactrouter.com/v6/components/navigate\n */\nfunction Navigate(_ref4) {\n  let {\n    to,\n    replace,\n    state,\n    relative\n  } = _ref4;\n  !useInRouterContext() ? process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, // TODO: This error is probably because they somehow have 2 versions of\n  // the router loaded. We can help them understand how to avoid that.\n  \"<Navigate> may be used only in the context of a <Router> component.\") : UNSAFE_invariant(false) : void 0;\n  let {\n    future,\n    static: isStatic\n  } = React.useContext(NavigationContext);\n  process.env.NODE_ENV !== \"production\" ? UNSAFE_warning(!isStatic, \"<Navigate> must not be used on the initial render in a <StaticRouter>. \" + \"This is a no-op, but you should modify your code so the <Navigate> is \" + \"only ever rendered in response to some user interaction or state change.\") : void 0;\n  let {\n    matches\n  } = React.useContext(RouteContext);\n  let {\n    pathname: locationPathname\n  } = useLocation();\n  let navigate = useNavigate();\n\n  // Resolve the path outside of the effect so that when effects run twice in\n  // StrictMode they navigate to the same place\n  let path = resolveTo(to, UNSAFE_getResolveToMatches(matches, future.v7_relativeSplatPath), locationPathname, relative === \"path\");\n  let jsonPath = JSON.stringify(path);\n  React.useEffect(() => navigate(JSON.parse(jsonPath), {\n    replace,\n    state,\n    relative\n  }), [navigate, jsonPath, relative, replace, state]);\n  return null;\n}\n/**\n * Renders the child route's element, if there is one.\n *\n * @see https://reactrouter.com/v6/components/outlet\n */\nfunction Outlet(props) {\n  return useOutlet(props.context);\n}\n/**\n * Declares an element that should be rendered at a certain URL path.\n *\n * @see https://reactrouter.com/v6/components/route\n */\nfunction Route(_props) {\n  process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, \"A <Route> is only ever to be used as the child of <Routes> element, \" + \"never rendered directly. Please wrap your <Route> in a <Routes>.\") : UNSAFE_invariant(false) ;\n}\n/**\n * Provides location context for the rest of the app.\n *\n * Note: You usually won't render a `<Router>` directly. Instead, you'll render a\n * router that is more specific to your environment such as a `<BrowserRouter>`\n * in web browsers or a `<StaticRouter>` for server rendering.\n *\n * @see https://reactrouter.com/v6/router-components/router\n */\nfunction Router(_ref5) {\n  let {\n    basename: basenameProp = \"/\",\n    children = null,\n    location: locationProp,\n    navigationType = Action.Pop,\n    navigator,\n    static: staticProp = false,\n    future\n  } = _ref5;\n  !!useInRouterContext() ? process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, \"You cannot render a <Router> inside another <Router>.\" + \" You should never have more than one in your app.\") : UNSAFE_invariant(false) : void 0;\n\n  // Preserve trailing slashes on basename, so we can let the user control\n  // the enforcement of trailing slashes throughout the app\n  let basename = basenameProp.replace(/^\\/*/, \"/\");\n  let navigationContext = React.useMemo(() => ({\n    basename,\n    navigator,\n    static: staticProp,\n    future: _extends({\n      v7_relativeSplatPath: false\n    }, future)\n  }), [basename, future, navigator, staticProp]);\n  if (typeof locationProp === \"string\") {\n    locationProp = parsePath(locationProp);\n  }\n  let {\n    pathname = \"/\",\n    search = \"\",\n    hash = \"\",\n    state = null,\n    key = \"default\"\n  } = locationProp;\n  let locationContext = React.useMemo(() => {\n    let trailingPathname = stripBasename(pathname, basename);\n    if (trailingPathname == null) {\n      return null;\n    }\n    return {\n      location: {\n        pathname: trailingPathname,\n        search,\n        hash,\n        state,\n        key\n      },\n      navigationType\n    };\n  }, [basename, pathname, search, hash, state, key, navigationType]);\n  process.env.NODE_ENV !== \"production\" ? UNSAFE_warning(locationContext != null, \"<Router basename=\\\"\" + basename + \"\\\"> is not able to match the URL \" + (\"\\\"\" + pathname + search + hash + \"\\\" because it does not start with the \") + \"basename, so the <Router> won't render anything.\") : void 0;\n  if (locationContext == null) {\n    return null;\n  }\n  return /*#__PURE__*/React.createElement(NavigationContext.Provider, {\n    value: navigationContext\n  }, /*#__PURE__*/React.createElement(LocationContext.Provider, {\n    children: children,\n    value: locationContext\n  }));\n}\n/**\n * A container for a nested tree of `<Route>` elements that renders the branch\n * that best matches the current location.\n *\n * @see https://reactrouter.com/v6/components/routes\n */\nfunction Routes(_ref6) {\n  let {\n    children,\n    location\n  } = _ref6;\n  return useRoutes(createRoutesFromChildren(children), location);\n}\n/**\n * Component to use for rendering lazily loaded data from returning defer()\n * in a loader function\n */\nfunction Await(_ref7) {\n  let {\n    children,\n    errorElement,\n    resolve\n  } = _ref7;\n  return /*#__PURE__*/React.createElement(AwaitErrorBoundary, {\n    resolve: resolve,\n    errorElement: errorElement\n  }, /*#__PURE__*/React.createElement(ResolveAwait, null, children));\n}\nvar AwaitRenderStatus = /*#__PURE__*/function (AwaitRenderStatus) {\n  AwaitRenderStatus[AwaitRenderStatus[\"pending\"] = 0] = \"pending\";\n  AwaitRenderStatus[AwaitRenderStatus[\"success\"] = 1] = \"success\";\n  AwaitRenderStatus[AwaitRenderStatus[\"error\"] = 2] = \"error\";\n  return AwaitRenderStatus;\n}(AwaitRenderStatus || {});\nconst neverSettledPromise = new Promise(() => {});\nclass AwaitErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      error: null\n    };\n  }\n  static getDerivedStateFromError(error) {\n    return {\n      error\n    };\n  }\n  componentDidCatch(error, errorInfo) {\n    console.error(\"<Await> caught the following error during render\", error, errorInfo);\n  }\n  render() {\n    let {\n      children,\n      errorElement,\n      resolve\n    } = this.props;\n    let promise = null;\n    let status = AwaitRenderStatus.pending;\n    if (!(resolve instanceof Promise)) {\n      // Didn't get a promise - provide as a resolved promise\n      status = AwaitRenderStatus.success;\n      promise = Promise.resolve();\n      Object.defineProperty(promise, \"_tracked\", {\n        get: () => true\n      });\n      Object.defineProperty(promise, \"_data\", {\n        get: () => resolve\n      });\n    } else if (this.state.error) {\n      // Caught a render error, provide it as a rejected promise\n      status = AwaitRenderStatus.error;\n      let renderError = this.state.error;\n      promise = Promise.reject().catch(() => {}); // Avoid unhandled rejection warnings\n      Object.defineProperty(promise, \"_tracked\", {\n        get: () => true\n      });\n      Object.defineProperty(promise, \"_error\", {\n        get: () => renderError\n      });\n    } else if (resolve._tracked) {\n      // Already tracked promise - check contents\n      promise = resolve;\n      status = \"_error\" in promise ? AwaitRenderStatus.error : \"_data\" in promise ? AwaitRenderStatus.success : AwaitRenderStatus.pending;\n    } else {\n      // Raw (untracked) promise - track it\n      status = AwaitRenderStatus.pending;\n      Object.defineProperty(resolve, \"_tracked\", {\n        get: () => true\n      });\n      promise = resolve.then(data => Object.defineProperty(resolve, \"_data\", {\n        get: () => data\n      }), error => Object.defineProperty(resolve, \"_error\", {\n        get: () => error\n      }));\n    }\n    if (status === AwaitRenderStatus.error && promise._error instanceof AbortedDeferredError) {\n      // Freeze the UI by throwing a never resolved promise\n      throw neverSettledPromise;\n    }\n    if (status === AwaitRenderStatus.error && !errorElement) {\n      // No errorElement, throw to the nearest route-level error boundary\n      throw promise._error;\n    }\n    if (status === AwaitRenderStatus.error) {\n      // Render via our errorElement\n      return /*#__PURE__*/React.createElement(AwaitContext.Provider, {\n        value: promise,\n        children: errorElement\n      });\n    }\n    if (status === AwaitRenderStatus.success) {\n      // Render children with resolved value\n      return /*#__PURE__*/React.createElement(AwaitContext.Provider, {\n        value: promise,\n        children: children\n      });\n    }\n\n    // Throw to the suspense boundary\n    throw promise;\n  }\n}\n\n/**\n * @private\n * Indirection to leverage useAsyncValue for a render-prop API on `<Await>`\n */\nfunction ResolveAwait(_ref8) {\n  let {\n    children\n  } = _ref8;\n  let data = useAsyncValue();\n  let toRender = typeof children === \"function\" ? children(data) : children;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, toRender);\n}\n\n///////////////////////////////////////////////////////////////////////////////\n// UTILS\n///////////////////////////////////////////////////////////////////////////////\n\n/**\n * Creates a route config from a React \"children\" object, which is usually\n * either a `<Route>` element or an array of them. Used internally by\n * `<Routes>` to create a route config from its children.\n *\n * @see https://reactrouter.com/v6/utils/create-routes-from-children\n */\nfunction createRoutesFromChildren(children, parentPath) {\n  if (parentPath === void 0) {\n    parentPath = [];\n  }\n  let routes = [];\n  React.Children.forEach(children, (element, index) => {\n    if (! /*#__PURE__*/React.isValidElement(element)) {\n      // Ignore non-elements. This allows people to more easily inline\n      // conditionals in their route config.\n      return;\n    }\n    let treePath = [...parentPath, index];\n    if (element.type === React.Fragment) {\n      // Transparently support React.Fragment and its children.\n      routes.push.apply(routes, createRoutesFromChildren(element.props.children, treePath));\n      return;\n    }\n    !(element.type === Route) ? process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, \"[\" + (typeof element.type === \"string\" ? element.type : element.type.name) + \"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>\") : UNSAFE_invariant(false) : void 0;\n    !(!element.props.index || !element.props.children) ? process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, \"An index route cannot have child routes.\") : UNSAFE_invariant(false) : void 0;\n    let route = {\n      id: element.props.id || treePath.join(\"-\"),\n      caseSensitive: element.props.caseSensitive,\n      element: element.props.element,\n      Component: element.props.Component,\n      index: element.props.index,\n      path: element.props.path,\n      loader: element.props.loader,\n      action: element.props.action,\n      errorElement: element.props.errorElement,\n      ErrorBoundary: element.props.ErrorBoundary,\n      hasErrorBoundary: element.props.ErrorBoundary != null || element.props.errorElement != null,\n      shouldRevalidate: element.props.shouldRevalidate,\n      handle: element.props.handle,\n      lazy: element.props.lazy\n    };\n    if (element.props.children) {\n      route.children = createRoutesFromChildren(element.props.children, treePath);\n    }\n    routes.push(route);\n  });\n  return routes;\n}\n\n/**\n * Renders the result of `matchRoutes()` into a React element.\n */\nfunction renderMatches(matches) {\n  return _renderMatches(matches);\n}\n\nfunction mapRouteProperties(route) {\n  let updates = {\n    // Note: this check also occurs in createRoutesFromChildren so update\n    // there if you change this -- please and thank you!\n    hasErrorBoundary: route.ErrorBoundary != null || route.errorElement != null\n  };\n  if (route.Component) {\n    if (process.env.NODE_ENV !== \"production\") {\n      if (route.element) {\n        process.env.NODE_ENV !== \"production\" ? UNSAFE_warning(false, \"You should not include both `Component` and `element` on your route - \" + \"`Component` will be used.\") : void 0;\n      }\n    }\n    Object.assign(updates, {\n      element: /*#__PURE__*/React.createElement(route.Component),\n      Component: undefined\n    });\n  }\n  if (route.HydrateFallback) {\n    if (process.env.NODE_ENV !== \"production\") {\n      if (route.hydrateFallbackElement) {\n        process.env.NODE_ENV !== \"production\" ? UNSAFE_warning(false, \"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - \" + \"`HydrateFallback` will be used.\") : void 0;\n      }\n    }\n    Object.assign(updates, {\n      hydrateFallbackElement: /*#__PURE__*/React.createElement(route.HydrateFallback),\n      HydrateFallback: undefined\n    });\n  }\n  if (route.ErrorBoundary) {\n    if (process.env.NODE_ENV !== \"production\") {\n      if (route.errorElement) {\n        process.env.NODE_ENV !== \"production\" ? UNSAFE_warning(false, \"You should not include both `ErrorBoundary` and `errorElement` on your route - \" + \"`ErrorBoundary` will be used.\") : void 0;\n      }\n    }\n    Object.assign(updates, {\n      errorElement: /*#__PURE__*/React.createElement(route.ErrorBoundary),\n      ErrorBoundary: undefined\n    });\n  }\n  return updates;\n}\nfunction createMemoryRouter(routes, opts) {\n  return createRouter({\n    basename: opts == null ? void 0 : opts.basename,\n    future: _extends({}, opts == null ? void 0 : opts.future, {\n      v7_prependBasename: true\n    }),\n    history: createMemoryHistory({\n      initialEntries: opts == null ? void 0 : opts.initialEntries,\n      initialIndex: opts == null ? void 0 : opts.initialIndex\n    }),\n    hydrationData: opts == null ? void 0 : opts.hydrationData,\n    routes,\n    mapRouteProperties,\n    dataStrategy: opts == null ? void 0 : opts.dataStrategy,\n    patchRoutesOnNavigation: opts == null ? void 0 : opts.patchRoutesOnNavigation\n  }).initialize();\n}\n\nexport { Await, MemoryRouter, Navigate, Outlet, Route, Router, RouterProvider, Routes, DataRouterContext as UNSAFE_DataRouterContext, DataRouterStateContext as UNSAFE_DataRouterStateContext, LocationContext as UNSAFE_LocationContext, NavigationContext as UNSAFE_NavigationContext, RouteContext as UNSAFE_RouteContext, logV6DeprecationWarnings as UNSAFE_logV6DeprecationWarnings, mapRouteProperties as UNSAFE_mapRouteProperties, useRouteId as UNSAFE_useRouteId, useRoutesImpl as UNSAFE_useRoutesImpl, createMemoryRouter, createRoutesFromChildren, createRoutesFromChildren as createRoutesFromElements, renderMatches, useActionData, useAsyncError, useAsyncValue, useBlocker, useHref, useInRouterContext, useLoaderData, useLocation, useMatch, useMatches, useNavigate, useNavigation, useNavigationType, useOutlet, useOutletContext, useParams, useResolvedPath, useRevalidator, useRouteError, useRouteLoaderData, useRoutes };\n//# sourceMappingURL=index.js.map\n","/**\n * React Router DOM v6.30.1\n *\n * Copyright (c) Remix Software Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.md file in the root directory of this source tree.\n *\n * @license MIT\n */\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport { UNSAFE_mapRouteProperties, UNSAFE_logV6DeprecationWarnings, UNSAFE_DataRouterContext, UNSAFE_DataRouterStateContext, Router, UNSAFE_useRoutesImpl, UNSAFE_NavigationContext, useHref, useResolvedPath, useLocation, useNavigate, createPath, UNSAFE_useRouteId, UNSAFE_RouteContext, useMatches, useNavigation, useBlocker } from 'react-router';\nexport { AbortedDeferredError, Await, MemoryRouter, Navigate, NavigationType, Outlet, Route, Router, Routes, UNSAFE_DataRouterContext, UNSAFE_DataRouterStateContext, UNSAFE_LocationContext, UNSAFE_NavigationContext, UNSAFE_RouteContext, UNSAFE_useRouteId, createMemoryRouter, createPath, createRoutesFromChildren, createRoutesFromElements, defer, generatePath, isRouteErrorResponse, json, matchPath, matchRoutes, parsePath, redirect, redirectDocument, renderMatches, replace, resolvePath, useActionData, useAsyncError, useAsyncValue, useBlocker, useHref, useInRouterContext, useLoaderData, useLocation, useMatch, useMatches, useNavigate, useNavigation, useNavigationType, useOutlet, useOutletContext, useParams, useResolvedPath, useRevalidator, useRouteError, useRouteLoaderData, useRoutes } from 'react-router';\nimport { stripBasename, UNSAFE_warning, createRouter, createBrowserHistory, createHashHistory, UNSAFE_ErrorResponseImpl, UNSAFE_invariant, joinPaths, IDLE_FETCHER, matchPath } from '@remix-run/router';\nexport { UNSAFE_ErrorResponseImpl } from '@remix-run/router';\n\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}\n\nconst defaultMethod = \"get\";\nconst defaultEncType = \"application/x-www-form-urlencoded\";\nfunction isHtmlElement(object) {\n  return object != null && typeof object.tagName === \"string\";\n}\nfunction isButtonElement(object) {\n  return isHtmlElement(object) && object.tagName.toLowerCase() === \"button\";\n}\nfunction isFormElement(object) {\n  return isHtmlElement(object) && object.tagName.toLowerCase() === \"form\";\n}\nfunction isInputElement(object) {\n  return isHtmlElement(object) && object.tagName.toLowerCase() === \"input\";\n}\nfunction isModifiedEvent(event) {\n  return !!(event.metaKey || event.altKey || event.ctrlKey || event.shiftKey);\n}\nfunction shouldProcessLinkClick(event, target) {\n  return event.button === 0 && (\n  // Ignore everything but left clicks\n  !target || target === \"_self\") &&\n  // Let browser handle \"target=_blank\" etc.\n  !isModifiedEvent(event) // Ignore clicks with modifier keys\n  ;\n}\n/**\n * Creates a URLSearchParams object using the given initializer.\n *\n * This is identical to `new URLSearchParams(init)` except it also\n * supports arrays as values in the object form of the initializer\n * instead of just strings. This is convenient when you need multiple\n * values for a given key, but don't want to use an array initializer.\n *\n * For example, instead of:\n *\n *   let searchParams = new URLSearchParams([\n *     ['sort', 'name'],\n *     ['sort', 'price']\n *   ]);\n *\n * you can do:\n *\n *   let searchParams = createSearchParams({\n *     sort: ['name', 'price']\n *   });\n */\nfunction createSearchParams(init) {\n  if (init === void 0) {\n    init = \"\";\n  }\n  return new URLSearchParams(typeof init === \"string\" || Array.isArray(init) || init instanceof URLSearchParams ? init : Object.keys(init).reduce((memo, key) => {\n    let value = init[key];\n    return memo.concat(Array.isArray(value) ? value.map(v => [key, v]) : [[key, value]]);\n  }, []));\n}\nfunction getSearchParamsForLocation(locationSearch, defaultSearchParams) {\n  let searchParams = createSearchParams(locationSearch);\n  if (defaultSearchParams) {\n    // Use `defaultSearchParams.forEach(...)` here instead of iterating of\n    // `defaultSearchParams.keys()` to work-around a bug in Firefox related to\n    // web extensions. Relevant Bugzilla tickets:\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=1414602\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=1023984\n    defaultSearchParams.forEach((_, key) => {\n      if (!searchParams.has(key)) {\n        defaultSearchParams.getAll(key).forEach(value => {\n          searchParams.append(key, value);\n        });\n      }\n    });\n  }\n  return searchParams;\n}\n// One-time check for submitter support\nlet _formDataSupportsSubmitter = null;\nfunction isFormDataSubmitterSupported() {\n  if (_formDataSupportsSubmitter === null) {\n    try {\n      new FormData(document.createElement(\"form\"),\n      // @ts-expect-error if FormData supports the submitter parameter, this will throw\n      0);\n      _formDataSupportsSubmitter = false;\n    } catch (e) {\n      _formDataSupportsSubmitter = true;\n    }\n  }\n  return _formDataSupportsSubmitter;\n}\nconst supportedFormEncTypes = new Set([\"application/x-www-form-urlencoded\", \"multipart/form-data\", \"text/plain\"]);\nfunction getFormEncType(encType) {\n  if (encType != null && !supportedFormEncTypes.has(encType)) {\n    process.env.NODE_ENV !== \"production\" ? UNSAFE_warning(false, \"\\\"\" + encType + \"\\\" is not a valid `encType` for `<Form>`/`<fetcher.Form>` \" + (\"and will default to \\\"\" + defaultEncType + \"\\\"\")) : void 0;\n    return null;\n  }\n  return encType;\n}\nfunction getFormSubmissionInfo(target, basename) {\n  let method;\n  let action;\n  let encType;\n  let formData;\n  let body;\n  if (isFormElement(target)) {\n    // When grabbing the action from the element, it will have had the basename\n    // prefixed to ensure non-JS scenarios work, so strip it since we'll\n    // re-prefix in the router\n    let attr = target.getAttribute(\"action\");\n    action = attr ? stripBasename(attr, basename) : null;\n    method = target.getAttribute(\"method\") || defaultMethod;\n    encType = getFormEncType(target.getAttribute(\"enctype\")) || defaultEncType;\n    formData = new FormData(target);\n  } else if (isButtonElement(target) || isInputElement(target) && (target.type === \"submit\" || target.type === \"image\")) {\n    let form = target.form;\n    if (form == null) {\n      throw new Error(\"Cannot submit a <button> or <input type=\\\"submit\\\"> without a <form>\");\n    }\n    // <button>/<input type=\"submit\"> may override attributes of <form>\n    // When grabbing the action from the element, it will have had the basename\n    // prefixed to ensure non-JS scenarios work, so strip it since we'll\n    // re-prefix in the router\n    let attr = target.getAttribute(\"formaction\") || form.getAttribute(\"action\");\n    action = attr ? stripBasename(attr, basename) : null;\n    method = target.getAttribute(\"formmethod\") || form.getAttribute(\"method\") || defaultMethod;\n    encType = getFormEncType(target.getAttribute(\"formenctype\")) || getFormEncType(form.getAttribute(\"enctype\")) || defaultEncType;\n    // Build a FormData object populated from a form and submitter\n    formData = new FormData(form, target);\n    // If this browser doesn't support the `FormData(el, submitter)` format,\n    // then tack on the submitter value at the end.  This is a lightweight\n    // solution that is not 100% spec compliant.  For complete support in older\n    // browsers, consider using the `formdata-submitter-polyfill` package\n    if (!isFormDataSubmitterSupported()) {\n      let {\n        name,\n        type,\n        value\n      } = target;\n      if (type === \"image\") {\n        let prefix = name ? name + \".\" : \"\";\n        formData.append(prefix + \"x\", \"0\");\n        formData.append(prefix + \"y\", \"0\");\n      } else if (name) {\n        formData.append(name, value);\n      }\n    }\n  } else if (isHtmlElement(target)) {\n    throw new Error(\"Cannot submit element that is not <form>, <button>, or \" + \"<input type=\\\"submit|image\\\">\");\n  } else {\n    method = defaultMethod;\n    action = null;\n    encType = defaultEncType;\n    body = target;\n  }\n  // Send body for <Form encType=\"text/plain\" so we encode it into text\n  if (formData && encType === \"text/plain\") {\n    body = formData;\n    formData = undefined;\n  }\n  return {\n    action,\n    method: method.toLowerCase(),\n    encType,\n    formData,\n    body\n  };\n}\n\nconst _excluded = [\"onClick\", \"relative\", \"reloadDocument\", \"replace\", \"state\", \"target\", \"to\", \"preventScrollReset\", \"viewTransition\"],\n  _excluded2 = [\"aria-current\", \"caseSensitive\", \"className\", \"end\", \"style\", \"to\", \"viewTransition\", \"children\"],\n  _excluded3 = [\"fetcherKey\", \"navigate\", \"reloadDocument\", \"replace\", \"state\", \"method\", \"action\", \"onSubmit\", \"relative\", \"preventScrollReset\", \"viewTransition\"];\n// HEY YOU! DON'T TOUCH THIS VARIABLE!\n//\n// It is replaced with the proper version at build time via a babel plugin in\n// the rollup config.\n//\n// Export a global property onto the window for React Router detection by the\n// Core Web Vitals Technology Report.  This way they can configure the `wappalyzer`\n// to detect and properly classify live websites as being built with React Router:\n// https://github.com/HTTPArchive/wappalyzer/blob/main/src/technologies/r.json\nconst REACT_ROUTER_VERSION = \"6\";\ntry {\n  window.__reactRouterVersion = REACT_ROUTER_VERSION;\n} catch (e) {\n  // no-op\n}\nfunction createBrowserRouter(routes, opts) {\n  return createRouter({\n    basename: opts == null ? void 0 : opts.basename,\n    future: _extends({}, opts == null ? void 0 : opts.future, {\n      v7_prependBasename: true\n    }),\n    history: createBrowserHistory({\n      window: opts == null ? void 0 : opts.window\n    }),\n    hydrationData: (opts == null ? void 0 : opts.hydrationData) || parseHydrationData(),\n    routes,\n    mapRouteProperties: UNSAFE_mapRouteProperties,\n    dataStrategy: opts == null ? void 0 : opts.dataStrategy,\n    patchRoutesOnNavigation: opts == null ? void 0 : opts.patchRoutesOnNavigation,\n    window: opts == null ? void 0 : opts.window\n  }).initialize();\n}\nfunction createHashRouter(routes, opts) {\n  return createRouter({\n    basename: opts == null ? void 0 : opts.basename,\n    future: _extends({}, opts == null ? void 0 : opts.future, {\n      v7_prependBasename: true\n    }),\n    history: createHashHistory({\n      window: opts == null ? void 0 : opts.window\n    }),\n    hydrationData: (opts == null ? void 0 : opts.hydrationData) || parseHydrationData(),\n    routes,\n    mapRouteProperties: UNSAFE_mapRouteProperties,\n    dataStrategy: opts == null ? void 0 : opts.dataStrategy,\n    patchRoutesOnNavigation: opts == null ? void 0 : opts.patchRoutesOnNavigation,\n    window: opts == null ? void 0 : opts.window\n  }).initialize();\n}\nfunction parseHydrationData() {\n  var _window;\n  let state = (_window = window) == null ? void 0 : _window.__staticRouterHydrationData;\n  if (state && state.errors) {\n    state = _extends({}, state, {\n      errors: deserializeErrors(state.errors)\n    });\n  }\n  return state;\n}\nfunction deserializeErrors(errors) {\n  if (!errors) return null;\n  let entries = Object.entries(errors);\n  let serialized = {};\n  for (let [key, val] of entries) {\n    // Hey you!  If you change this, please change the corresponding logic in\n    // serializeErrors in react-router-dom/server.tsx :)\n    if (val && val.__type === \"RouteErrorResponse\") {\n      serialized[key] = new UNSAFE_ErrorResponseImpl(val.status, val.statusText, val.data, val.internal === true);\n    } else if (val && val.__type === \"Error\") {\n      // Attempt to reconstruct the right type of Error (i.e., ReferenceError)\n      if (val.__subType) {\n        let ErrorConstructor = window[val.__subType];\n        if (typeof ErrorConstructor === \"function\") {\n          try {\n            // @ts-expect-error\n            let error = new ErrorConstructor(val.message);\n            // Wipe away the client-side stack trace.  Nothing to fill it in with\n            // because we don't serialize SSR stack traces for security reasons\n            error.stack = \"\";\n            serialized[key] = error;\n          } catch (e) {\n            // no-op - fall through and create a normal Error\n          }\n        }\n      }\n      if (serialized[key] == null) {\n        let error = new Error(val.message);\n        // Wipe away the client-side stack trace.  Nothing to fill it in with\n        // because we don't serialize SSR stack traces for security reasons\n        error.stack = \"\";\n        serialized[key] = error;\n      }\n    } else {\n      serialized[key] = val;\n    }\n  }\n  return serialized;\n}\nconst ViewTransitionContext = /*#__PURE__*/React.createContext({\n  isTransitioning: false\n});\nif (process.env.NODE_ENV !== \"production\") {\n  ViewTransitionContext.displayName = \"ViewTransition\";\n}\nconst FetchersContext = /*#__PURE__*/React.createContext(new Map());\nif (process.env.NODE_ENV !== \"production\") {\n  FetchersContext.displayName = \"Fetchers\";\n}\n//#endregion\n////////////////////////////////////////////////////////////////////////////////\n//#region Components\n////////////////////////////////////////////////////////////////////////////////\n/**\n  Webpack + React 17 fails to compile on any of the following because webpack\n  complains that `startTransition` doesn't exist in `React`:\n  * import { startTransition } from \"react\"\n  * import * as React from from \"react\";\n    \"startTransition\" in React ? React.startTransition(() => setState()) : setState()\n  * import * as React from from \"react\";\n    \"startTransition\" in React ? React[\"startTransition\"](() => setState()) : setState()\n\n  Moving it to a constant such as the following solves the Webpack/React 17 issue:\n  * import * as React from from \"react\";\n    const START_TRANSITION = \"startTransition\";\n    START_TRANSITION in React ? React[START_TRANSITION](() => setState()) : setState()\n\n  However, that introduces webpack/terser minification issues in production builds\n  in React 18 where minification/obfuscation ends up removing the call of\n  React.startTransition entirely from the first half of the ternary.  Grabbing\n  this exported reference once up front resolves that issue.\n\n  See https://github.com/remix-run/react-router/issues/10579\n*/\nconst START_TRANSITION = \"startTransition\";\nconst startTransitionImpl = React[START_TRANSITION];\nconst FLUSH_SYNC = \"flushSync\";\nconst flushSyncImpl = ReactDOM[FLUSH_SYNC];\nconst USE_ID = \"useId\";\nconst useIdImpl = React[USE_ID];\nfunction startTransitionSafe(cb) {\n  if (startTransitionImpl) {\n    startTransitionImpl(cb);\n  } else {\n    cb();\n  }\n}\nfunction flushSyncSafe(cb) {\n  if (flushSyncImpl) {\n    flushSyncImpl(cb);\n  } else {\n    cb();\n  }\n}\nclass Deferred {\n  constructor() {\n    this.status = \"pending\";\n    this.promise = new Promise((resolve, reject) => {\n      this.resolve = value => {\n        if (this.status === \"pending\") {\n          this.status = \"resolved\";\n          resolve(value);\n        }\n      };\n      this.reject = reason => {\n        if (this.status === \"pending\") {\n          this.status = \"rejected\";\n          reject(reason);\n        }\n      };\n    });\n  }\n}\n/**\n * Given a Remix Router instance, render the appropriate UI\n */\nfunction RouterProvider(_ref) {\n  let {\n    fallbackElement,\n    router,\n    future\n  } = _ref;\n  let [state, setStateImpl] = React.useState(router.state);\n  let [pendingState, setPendingState] = React.useState();\n  let [vtContext, setVtContext] = React.useState({\n    isTransitioning: false\n  });\n  let [renderDfd, setRenderDfd] = React.useState();\n  let [transition, setTransition] = React.useState();\n  let [interruption, setInterruption] = React.useState();\n  let fetcherData = React.useRef(new Map());\n  let {\n    v7_startTransition\n  } = future || {};\n  let optInStartTransition = React.useCallback(cb => {\n    if (v7_startTransition) {\n      startTransitionSafe(cb);\n    } else {\n      cb();\n    }\n  }, [v7_startTransition]);\n  let setState = React.useCallback((newState, _ref2) => {\n    let {\n      deletedFetchers,\n      flushSync: flushSync,\n      viewTransitionOpts: viewTransitionOpts\n    } = _ref2;\n    newState.fetchers.forEach((fetcher, key) => {\n      if (fetcher.data !== undefined) {\n        fetcherData.current.set(key, fetcher.data);\n      }\n    });\n    deletedFetchers.forEach(key => fetcherData.current.delete(key));\n    let isViewTransitionUnavailable = router.window == null || router.window.document == null || typeof router.window.document.startViewTransition !== \"function\";\n    // If this isn't a view transition or it's not available in this browser,\n    // just update and be done with it\n    if (!viewTransitionOpts || isViewTransitionUnavailable) {\n      if (flushSync) {\n        flushSyncSafe(() => setStateImpl(newState));\n      } else {\n        optInStartTransition(() => setStateImpl(newState));\n      }\n      return;\n    }\n    // flushSync + startViewTransition\n    if (flushSync) {\n      // Flush through the context to mark DOM elements as transition=ing\n      flushSyncSafe(() => {\n        // Cancel any pending transitions\n        if (transition) {\n          renderDfd && renderDfd.resolve();\n          transition.skipTransition();\n        }\n        setVtContext({\n          isTransitioning: true,\n          flushSync: true,\n          currentLocation: viewTransitionOpts.currentLocation,\n          nextLocation: viewTransitionOpts.nextLocation\n        });\n      });\n      // Update the DOM\n      let t = router.window.document.startViewTransition(() => {\n        flushSyncSafe(() => setStateImpl(newState));\n      });\n      // Clean up after the animation completes\n      t.finished.finally(() => {\n        flushSyncSafe(() => {\n          setRenderDfd(undefined);\n          setTransition(undefined);\n          setPendingState(undefined);\n          setVtContext({\n            isTransitioning: false\n          });\n        });\n      });\n      flushSyncSafe(() => setTransition(t));\n      return;\n    }\n    // startTransition + startViewTransition\n    if (transition) {\n      // Interrupting an in-progress transition, cancel and let everything flush\n      // out, and then kick off a new transition from the interruption state\n      renderDfd && renderDfd.resolve();\n      transition.skipTransition();\n      setInterruption({\n        state: newState,\n        currentLocation: viewTransitionOpts.currentLocation,\n        nextLocation: viewTransitionOpts.nextLocation\n      });\n    } else {\n      // Completed navigation update with opted-in view transitions, let 'er rip\n      setPendingState(newState);\n      setVtContext({\n        isTransitioning: true,\n        flushSync: false,\n        currentLocation: viewTransitionOpts.currentLocation,\n        nextLocation: viewTransitionOpts.nextLocation\n      });\n    }\n  }, [router.window, transition, renderDfd, fetcherData, optInStartTransition]);\n  // Need to use a layout effect here so we are subscribed early enough to\n  // pick up on any render-driven redirects/navigations (useEffect/<Navigate>)\n  React.useLayoutEffect(() => router.subscribe(setState), [router, setState]);\n  // When we start a view transition, create a Deferred we can use for the\n  // eventual \"completed\" render\n  React.useEffect(() => {\n    if (vtContext.isTransitioning && !vtContext.flushSync) {\n      setRenderDfd(new Deferred());\n    }\n  }, [vtContext]);\n  // Once the deferred is created, kick off startViewTransition() to update the\n  // DOM and then wait on the Deferred to resolve (indicating the DOM update has\n  // happened)\n  React.useEffect(() => {\n    if (renderDfd && pendingState && router.window) {\n      let newState = pendingState;\n      let renderPromise = renderDfd.promise;\n      let transition = router.window.document.startViewTransition(async () => {\n        optInStartTransition(() => setStateImpl(newState));\n        await renderPromise;\n      });\n      transition.finished.finally(() => {\n        setRenderDfd(undefined);\n        setTransition(undefined);\n        setPendingState(undefined);\n        setVtContext({\n          isTransitioning: false\n        });\n      });\n      setTransition(transition);\n    }\n  }, [optInStartTransition, pendingState, renderDfd, router.window]);\n  // When the new location finally renders and is committed to the DOM, this\n  // effect will run to resolve the transition\n  React.useEffect(() => {\n    if (renderDfd && pendingState && state.location.key === pendingState.location.key) {\n      renderDfd.resolve();\n    }\n  }, [renderDfd, transition, state.location, pendingState]);\n  // If we get interrupted with a new navigation during a transition, we skip\n  // the active transition, let it cleanup, then kick it off again here\n  React.useEffect(() => {\n    if (!vtContext.isTransitioning && interruption) {\n      setPendingState(interruption.state);\n      setVtContext({\n        isTransitioning: true,\n        flushSync: false,\n        currentLocation: interruption.currentLocation,\n        nextLocation: interruption.nextLocation\n      });\n      setInterruption(undefined);\n    }\n  }, [vtContext.isTransitioning, interruption]);\n  React.useEffect(() => {\n    process.env.NODE_ENV !== \"production\" ? UNSAFE_warning(fallbackElement == null || !router.future.v7_partialHydration, \"`<RouterProvider fallbackElement>` is deprecated when using \" + \"`v7_partialHydration`, use a `HydrateFallback` component instead\") : void 0;\n    // Only log this once on initial mount\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  let navigator = React.useMemo(() => {\n    return {\n      createHref: router.createHref,\n      encodeLocation: router.encodeLocation,\n      go: n => router.navigate(n),\n      push: (to, state, opts) => router.navigate(to, {\n        state,\n        preventScrollReset: opts == null ? void 0 : opts.preventScrollReset\n      }),\n      replace: (to, state, opts) => router.navigate(to, {\n        replace: true,\n        state,\n        preventScrollReset: opts == null ? void 0 : opts.preventScrollReset\n      })\n    };\n  }, [router]);\n  let basename = router.basename || \"/\";\n  let dataRouterContext = React.useMemo(() => ({\n    router,\n    navigator,\n    static: false,\n    basename\n  }), [router, navigator, basename]);\n  let routerFuture = React.useMemo(() => ({\n    v7_relativeSplatPath: router.future.v7_relativeSplatPath\n  }), [router.future.v7_relativeSplatPath]);\n  React.useEffect(() => UNSAFE_logV6DeprecationWarnings(future, router.future), [future, router.future]);\n  // The fragment and {null} here are important!  We need them to keep React 18's\n  // useId happy when we are server-rendering since we may have a <script> here\n  // containing the hydrated server-side staticContext (from StaticRouterProvider).\n  // useId relies on the component tree structure to generate deterministic id's\n  // so we need to ensure it remains the same on the client even though\n  // we don't need the <script> tag\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(UNSAFE_DataRouterContext.Provider, {\n    value: dataRouterContext\n  }, /*#__PURE__*/React.createElement(UNSAFE_DataRouterStateContext.Provider, {\n    value: state\n  }, /*#__PURE__*/React.createElement(FetchersContext.Provider, {\n    value: fetcherData.current\n  }, /*#__PURE__*/React.createElement(ViewTransitionContext.Provider, {\n    value: vtContext\n  }, /*#__PURE__*/React.createElement(Router, {\n    basename: basename,\n    location: state.location,\n    navigationType: state.historyAction,\n    navigator: navigator,\n    future: routerFuture\n  }, state.initialized || router.future.v7_partialHydration ? /*#__PURE__*/React.createElement(MemoizedDataRoutes, {\n    routes: router.routes,\n    future: router.future,\n    state: state\n  }) : fallbackElement))))), null);\n}\n// Memoize to avoid re-renders when updating `ViewTransitionContext`\nconst MemoizedDataRoutes = /*#__PURE__*/React.memo(DataRoutes);\nfunction DataRoutes(_ref3) {\n  let {\n    routes,\n    future,\n    state\n  } = _ref3;\n  return UNSAFE_useRoutesImpl(routes, undefined, state, future);\n}\n/**\n * A `<Router>` for use in web browsers. Provides the cleanest URLs.\n */\nfunction BrowserRouter(_ref4) {\n  let {\n    basename,\n    children,\n    future,\n    window\n  } = _ref4;\n  let historyRef = React.useRef();\n  if (historyRef.current == null) {\n    historyRef.current = createBrowserHistory({\n      window,\n      v5Compat: true\n    });\n  }\n  let history = historyRef.current;\n  let [state, setStateImpl] = React.useState({\n    action: history.action,\n    location: history.location\n  });\n  let {\n    v7_startTransition\n  } = future || {};\n  let setState = React.useCallback(newState => {\n    v7_startTransition && startTransitionImpl ? startTransitionImpl(() => setStateImpl(newState)) : setStateImpl(newState);\n  }, [setStateImpl, v7_startTransition]);\n  React.useLayoutEffect(() => history.listen(setState), [history, setState]);\n  React.useEffect(() => UNSAFE_logV6DeprecationWarnings(future), [future]);\n  return /*#__PURE__*/React.createElement(Router, {\n    basename: basename,\n    children: children,\n    location: state.location,\n    navigationType: state.action,\n    navigator: history,\n    future: future\n  });\n}\n/**\n * A `<Router>` for use in web browsers. Stores the location in the hash\n * portion of the URL so it is not sent to the server.\n */\nfunction HashRouter(_ref5) {\n  let {\n    basename,\n    children,\n    future,\n    window\n  } = _ref5;\n  let historyRef = React.useRef();\n  if (historyRef.current == null) {\n    historyRef.current = createHashHistory({\n      window,\n      v5Compat: true\n    });\n  }\n  let history = historyRef.current;\n  let [state, setStateImpl] = React.useState({\n    action: history.action,\n    location: history.location\n  });\n  let {\n    v7_startTransition\n  } = future || {};\n  let setState = React.useCallback(newState => {\n    v7_startTransition && startTransitionImpl ? startTransitionImpl(() => setStateImpl(newState)) : setStateImpl(newState);\n  }, [setStateImpl, v7_startTransition]);\n  React.useLayoutEffect(() => history.listen(setState), [history, setState]);\n  React.useEffect(() => UNSAFE_logV6DeprecationWarnings(future), [future]);\n  return /*#__PURE__*/React.createElement(Router, {\n    basename: basename,\n    children: children,\n    location: state.location,\n    navigationType: state.action,\n    navigator: history,\n    future: future\n  });\n}\n/**\n * A `<Router>` that accepts a pre-instantiated history object. It's important\n * to note that using your own history object is highly discouraged and may add\n * two versions of the history library to your bundles unless you use the same\n * version of the history library that React Router uses internally.\n */\nfunction HistoryRouter(_ref6) {\n  let {\n    basename,\n    children,\n    future,\n    history\n  } = _ref6;\n  let [state, setStateImpl] = React.useState({\n    action: history.action,\n    location: history.location\n  });\n  let {\n    v7_startTransition\n  } = future || {};\n  let setState = React.useCallback(newState => {\n    v7_startTransition && startTransitionImpl ? startTransitionImpl(() => setStateImpl(newState)) : setStateImpl(newState);\n  }, [setStateImpl, v7_startTransition]);\n  React.useLayoutEffect(() => history.listen(setState), [history, setState]);\n  React.useEffect(() => UNSAFE_logV6DeprecationWarnings(future), [future]);\n  return /*#__PURE__*/React.createElement(Router, {\n    basename: basename,\n    children: children,\n    location: state.location,\n    navigationType: state.action,\n    navigator: history,\n    future: future\n  });\n}\nif (process.env.NODE_ENV !== \"production\") {\n  HistoryRouter.displayName = \"unstable_HistoryRouter\";\n}\nconst isBrowser = typeof window !== \"undefined\" && typeof window.document !== \"undefined\" && typeof window.document.createElement !== \"undefined\";\nconst ABSOLUTE_URL_REGEX = /^(?:[a-z][a-z0-9+.-]*:|\\/\\/)/i;\n/**\n * The public API for rendering a history-aware `<a>`.\n */\nconst Link = /*#__PURE__*/React.forwardRef(function LinkWithRef(_ref7, ref) {\n  let {\n      onClick,\n      relative,\n      reloadDocument,\n      replace,\n      state,\n      target,\n      to,\n      preventScrollReset,\n      viewTransition\n    } = _ref7,\n    rest = _objectWithoutPropertiesLoose(_ref7, _excluded);\n  let {\n    basename\n  } = React.useContext(UNSAFE_NavigationContext);\n  // Rendered into <a href> for absolute URLs\n  let absoluteHref;\n  let isExternal = false;\n  if (typeof to === \"string\" && ABSOLUTE_URL_REGEX.test(to)) {\n    // Render the absolute href server- and client-side\n    absoluteHref = to;\n    // Only check for external origins client-side\n    if (isBrowser) {\n      try {\n        let currentUrl = new URL(window.location.href);\n        let targetUrl = to.startsWith(\"//\") ? new URL(currentUrl.protocol + to) : new URL(to);\n        let path = stripBasename(targetUrl.pathname, basename);\n        if (targetUrl.origin === currentUrl.origin && path != null) {\n          // Strip the protocol/origin/basename for same-origin absolute URLs\n          to = path + targetUrl.search + targetUrl.hash;\n        } else {\n          isExternal = true;\n        }\n      } catch (e) {\n        // We can't do external URL detection without a valid URL\n        process.env.NODE_ENV !== \"production\" ? UNSAFE_warning(false, \"<Link to=\\\"\" + to + \"\\\"> contains an invalid URL which will probably break \" + \"when clicked - please update to a valid URL path.\") : void 0;\n      }\n    }\n  }\n  // Rendered into <a href> for relative URLs\n  let href = useHref(to, {\n    relative\n  });\n  let internalOnClick = useLinkClickHandler(to, {\n    replace,\n    state,\n    target,\n    preventScrollReset,\n    relative,\n    viewTransition\n  });\n  function handleClick(event) {\n    if (onClick) onClick(event);\n    if (!event.defaultPrevented) {\n      internalOnClick(event);\n    }\n  }\n  return (\n    /*#__PURE__*/\n    // eslint-disable-next-line jsx-a11y/anchor-has-content\n    React.createElement(\"a\", _extends({}, rest, {\n      href: absoluteHref || href,\n      onClick: isExternal || reloadDocument ? onClick : handleClick,\n      ref: ref,\n      target: target\n    }))\n  );\n});\nif (process.env.NODE_ENV !== \"production\") {\n  Link.displayName = \"Link\";\n}\n/**\n * A `<Link>` wrapper that knows if it's \"active\" or not.\n */\nconst NavLink = /*#__PURE__*/React.forwardRef(function NavLinkWithRef(_ref8, ref) {\n  let {\n      \"aria-current\": ariaCurrentProp = \"page\",\n      caseSensitive = false,\n      className: classNameProp = \"\",\n      end = false,\n      style: styleProp,\n      to,\n      viewTransition,\n      children\n    } = _ref8,\n    rest = _objectWithoutPropertiesLoose(_ref8, _excluded2);\n  let path = useResolvedPath(to, {\n    relative: rest.relative\n  });\n  let location = useLocation();\n  let routerState = React.useContext(UNSAFE_DataRouterStateContext);\n  let {\n    navigator,\n    basename\n  } = React.useContext(UNSAFE_NavigationContext);\n  let isTransitioning = routerState != null &&\n  // Conditional usage is OK here because the usage of a data router is static\n  // eslint-disable-next-line react-hooks/rules-of-hooks\n  useViewTransitionState(path) && viewTransition === true;\n  let toPathname = navigator.encodeLocation ? navigator.encodeLocation(path).pathname : path.pathname;\n  let locationPathname = location.pathname;\n  let nextLocationPathname = routerState && routerState.navigation && routerState.navigation.location ? routerState.navigation.location.pathname : null;\n  if (!caseSensitive) {\n    locationPathname = locationPathname.toLowerCase();\n    nextLocationPathname = nextLocationPathname ? nextLocationPathname.toLowerCase() : null;\n    toPathname = toPathname.toLowerCase();\n  }\n  if (nextLocationPathname && basename) {\n    nextLocationPathname = stripBasename(nextLocationPathname, basename) || nextLocationPathname;\n  }\n  // If the `to` has a trailing slash, look at that exact spot.  Otherwise,\n  // we're looking for a slash _after_ what's in `to`.  For example:\n  //\n  // <NavLink to=\"/users\"> and <NavLink to=\"/users/\">\n  // both want to look for a / at index 6 to match URL `/users/matt`\n  const endSlashPosition = toPathname !== \"/\" && toPathname.endsWith(\"/\") ? toPathname.length - 1 : toPathname.length;\n  let isActive = locationPathname === toPathname || !end && locationPathname.startsWith(toPathname) && locationPathname.charAt(endSlashPosition) === \"/\";\n  let isPending = nextLocationPathname != null && (nextLocationPathname === toPathname || !end && nextLocationPathname.startsWith(toPathname) && nextLocationPathname.charAt(toPathname.length) === \"/\");\n  let renderProps = {\n    isActive,\n    isPending,\n    isTransitioning\n  };\n  let ariaCurrent = isActive ? ariaCurrentProp : undefined;\n  let className;\n  if (typeof classNameProp === \"function\") {\n    className = classNameProp(renderProps);\n  } else {\n    // If the className prop is not a function, we use a default `active`\n    // class for <NavLink />s that are active. In v5 `active` was the default\n    // value for `activeClassName`, but we are removing that API and can still\n    // use the old default behavior for a cleaner upgrade path and keep the\n    // simple styling rules working as they currently do.\n    className = [classNameProp, isActive ? \"active\" : null, isPending ? \"pending\" : null, isTransitioning ? \"transitioning\" : null].filter(Boolean).join(\" \");\n  }\n  let style = typeof styleProp === \"function\" ? styleProp(renderProps) : styleProp;\n  return /*#__PURE__*/React.createElement(Link, _extends({}, rest, {\n    \"aria-current\": ariaCurrent,\n    className: className,\n    ref: ref,\n    style: style,\n    to: to,\n    viewTransition: viewTransition\n  }), typeof children === \"function\" ? children(renderProps) : children);\n});\nif (process.env.NODE_ENV !== \"production\") {\n  NavLink.displayName = \"NavLink\";\n}\n/**\n * A `@remix-run/router`-aware `<form>`. It behaves like a normal form except\n * that the interaction with the server is with `fetch` instead of new document\n * requests, allowing components to add nicer UX to the page as the form is\n * submitted and returns with data.\n */\nconst Form = /*#__PURE__*/React.forwardRef((_ref9, forwardedRef) => {\n  let {\n      fetcherKey,\n      navigate,\n      reloadDocument,\n      replace,\n      state,\n      method = defaultMethod,\n      action,\n      onSubmit,\n      relative,\n      preventScrollReset,\n      viewTransition\n    } = _ref9,\n    props = _objectWithoutPropertiesLoose(_ref9, _excluded3);\n  let submit = useSubmit();\n  let formAction = useFormAction(action, {\n    relative\n  });\n  let formMethod = method.toLowerCase() === \"get\" ? \"get\" : \"post\";\n  let submitHandler = event => {\n    onSubmit && onSubmit(event);\n    if (event.defaultPrevented) return;\n    event.preventDefault();\n    let submitter = event.nativeEvent.submitter;\n    let submitMethod = (submitter == null ? void 0 : submitter.getAttribute(\"formmethod\")) || method;\n    submit(submitter || event.currentTarget, {\n      fetcherKey,\n      method: submitMethod,\n      navigate,\n      replace,\n      state,\n      relative,\n      preventScrollReset,\n      viewTransition\n    });\n  };\n  return /*#__PURE__*/React.createElement(\"form\", _extends({\n    ref: forwardedRef,\n    method: formMethod,\n    action: formAction,\n    onSubmit: reloadDocument ? onSubmit : submitHandler\n  }, props));\n});\nif (process.env.NODE_ENV !== \"production\") {\n  Form.displayName = \"Form\";\n}\n/**\n * This component will emulate the browser's scroll restoration on location\n * changes.\n */\nfunction ScrollRestoration(_ref10) {\n  let {\n    getKey,\n    storageKey\n  } = _ref10;\n  useScrollRestoration({\n    getKey,\n    storageKey\n  });\n  return null;\n}\nif (process.env.NODE_ENV !== \"production\") {\n  ScrollRestoration.displayName = \"ScrollRestoration\";\n}\n//#endregion\n////////////////////////////////////////////////////////////////////////////////\n//#region Hooks\n////////////////////////////////////////////////////////////////////////////////\nvar DataRouterHook;\n(function (DataRouterHook) {\n  DataRouterHook[\"UseScrollRestoration\"] = \"useScrollRestoration\";\n  DataRouterHook[\"UseSubmit\"] = \"useSubmit\";\n  DataRouterHook[\"UseSubmitFetcher\"] = \"useSubmitFetcher\";\n  DataRouterHook[\"UseFetcher\"] = \"useFetcher\";\n  DataRouterHook[\"useViewTransitionState\"] = \"useViewTransitionState\";\n})(DataRouterHook || (DataRouterHook = {}));\nvar DataRouterStateHook;\n(function (DataRouterStateHook) {\n  DataRouterStateHook[\"UseFetcher\"] = \"useFetcher\";\n  DataRouterStateHook[\"UseFetchers\"] = \"useFetchers\";\n  DataRouterStateHook[\"UseScrollRestoration\"] = \"useScrollRestoration\";\n})(DataRouterStateHook || (DataRouterStateHook = {}));\n// Internal hooks\nfunction getDataRouterConsoleError(hookName) {\n  return hookName + \" must be used within a data router.  See https://reactrouter.com/v6/routers/picking-a-router.\";\n}\nfunction useDataRouterContext(hookName) {\n  let ctx = React.useContext(UNSAFE_DataRouterContext);\n  !ctx ? process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, getDataRouterConsoleError(hookName)) : UNSAFE_invariant(false) : void 0;\n  return ctx;\n}\nfunction useDataRouterState(hookName) {\n  let state = React.useContext(UNSAFE_DataRouterStateContext);\n  !state ? process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, getDataRouterConsoleError(hookName)) : UNSAFE_invariant(false) : void 0;\n  return state;\n}\n// External hooks\n/**\n * Handles the click behavior for router `<Link>` components. This is useful if\n * you need to create custom `<Link>` components with the same click behavior we\n * use in our exported `<Link>`.\n */\nfunction useLinkClickHandler(to, _temp) {\n  let {\n    target,\n    replace: replaceProp,\n    state,\n    preventScrollReset,\n    relative,\n    viewTransition\n  } = _temp === void 0 ? {} : _temp;\n  let navigate = useNavigate();\n  let location = useLocation();\n  let path = useResolvedPath(to, {\n    relative\n  });\n  return React.useCallback(event => {\n    if (shouldProcessLinkClick(event, target)) {\n      event.preventDefault();\n      // If the URL hasn't changed, a regular <a> will do a replace instead of\n      // a push, so do the same here unless the replace prop is explicitly set\n      let replace = replaceProp !== undefined ? replaceProp : createPath(location) === createPath(path);\n      navigate(to, {\n        replace,\n        state,\n        preventScrollReset,\n        relative,\n        viewTransition\n      });\n    }\n  }, [location, navigate, path, replaceProp, state, target, to, preventScrollReset, relative, viewTransition]);\n}\n/**\n * A convenient wrapper for reading and writing search parameters via the\n * URLSearchParams interface.\n */\nfunction useSearchParams(defaultInit) {\n  process.env.NODE_ENV !== \"production\" ? UNSAFE_warning(typeof URLSearchParams !== \"undefined\", \"You cannot use the `useSearchParams` hook in a browser that does not \" + \"support the URLSearchParams API. If you need to support Internet \" + \"Explorer 11, we recommend you load a polyfill such as \" + \"https://github.com/ungap/url-search-params.\") : void 0;\n  let defaultSearchParamsRef = React.useRef(createSearchParams(defaultInit));\n  let hasSetSearchParamsRef = React.useRef(false);\n  let location = useLocation();\n  let searchParams = React.useMemo(() =>\n  // Only merge in the defaults if we haven't yet called setSearchParams.\n  // Once we call that we want those to take precedence, otherwise you can't\n  // remove a param with setSearchParams({}) if it has an initial value\n  getSearchParamsForLocation(location.search, hasSetSearchParamsRef.current ? null : defaultSearchParamsRef.current), [location.search]);\n  let navigate = useNavigate();\n  let setSearchParams = React.useCallback((nextInit, navigateOptions) => {\n    const newSearchParams = createSearchParams(typeof nextInit === \"function\" ? nextInit(searchParams) : nextInit);\n    hasSetSearchParamsRef.current = true;\n    navigate(\"?\" + newSearchParams, navigateOptions);\n  }, [navigate, searchParams]);\n  return [searchParams, setSearchParams];\n}\nfunction validateClientSideSubmission() {\n  if (typeof document === \"undefined\") {\n    throw new Error(\"You are calling submit during the server render. \" + \"Try calling submit within a `useEffect` or callback instead.\");\n  }\n}\nlet fetcherId = 0;\nlet getUniqueFetcherId = () => \"__\" + String(++fetcherId) + \"__\";\n/**\n * Returns a function that may be used to programmatically submit a form (or\n * some arbitrary data) to the server.\n */\nfunction useSubmit() {\n  let {\n    router\n  } = useDataRouterContext(DataRouterHook.UseSubmit);\n  let {\n    basename\n  } = React.useContext(UNSAFE_NavigationContext);\n  let currentRouteId = UNSAFE_useRouteId();\n  return React.useCallback(function (target, options) {\n    if (options === void 0) {\n      options = {};\n    }\n    validateClientSideSubmission();\n    let {\n      action,\n      method,\n      encType,\n      formData,\n      body\n    } = getFormSubmissionInfo(target, basename);\n    if (options.navigate === false) {\n      let key = options.fetcherKey || getUniqueFetcherId();\n      router.fetch(key, currentRouteId, options.action || action, {\n        preventScrollReset: options.preventScrollReset,\n        formData,\n        body,\n        formMethod: options.method || method,\n        formEncType: options.encType || encType,\n        flushSync: options.flushSync\n      });\n    } else {\n      router.navigate(options.action || action, {\n        preventScrollReset: options.preventScrollReset,\n        formData,\n        body,\n        formMethod: options.method || method,\n        formEncType: options.encType || encType,\n        replace: options.replace,\n        state: options.state,\n        fromRouteId: currentRouteId,\n        flushSync: options.flushSync,\n        viewTransition: options.viewTransition\n      });\n    }\n  }, [router, basename, currentRouteId]);\n}\n// v7: Eventually we should deprecate this entirely in favor of using the\n// router method directly?\nfunction useFormAction(action, _temp2) {\n  let {\n    relative\n  } = _temp2 === void 0 ? {} : _temp2;\n  let {\n    basename\n  } = React.useContext(UNSAFE_NavigationContext);\n  let routeContext = React.useContext(UNSAFE_RouteContext);\n  !routeContext ? process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, \"useFormAction must be used inside a RouteContext\") : UNSAFE_invariant(false) : void 0;\n  let [match] = routeContext.matches.slice(-1);\n  // Shallow clone path so we can modify it below, otherwise we modify the\n  // object referenced by useMemo inside useResolvedPath\n  let path = _extends({}, useResolvedPath(action ? action : \".\", {\n    relative\n  }));\n  // If no action was specified, browsers will persist current search params\n  // when determining the path, so match that behavior\n  // https://github.com/remix-run/remix/issues/927\n  let location = useLocation();\n  if (action == null) {\n    // Safe to write to this directly here since if action was undefined, we\n    // would have called useResolvedPath(\".\") which will never include a search\n    path.search = location.search;\n    // When grabbing search params from the URL, remove any included ?index param\n    // since it might not apply to our contextual route.  We add it back based\n    // on match.route.index below\n    let params = new URLSearchParams(path.search);\n    let indexValues = params.getAll(\"index\");\n    let hasNakedIndexParam = indexValues.some(v => v === \"\");\n    if (hasNakedIndexParam) {\n      params.delete(\"index\");\n      indexValues.filter(v => v).forEach(v => params.append(\"index\", v));\n      let qs = params.toString();\n      path.search = qs ? \"?\" + qs : \"\";\n    }\n  }\n  if ((!action || action === \".\") && match.route.index) {\n    path.search = path.search ? path.search.replace(/^\\?/, \"?index&\") : \"?index\";\n  }\n  // If we're operating within a basename, prepend it to the pathname prior\n  // to creating the form action.  If this is a root navigation, then just use\n  // the raw basename which allows the basename to have full control over the\n  // presence of a trailing slash on root actions\n  if (basename !== \"/\") {\n    path.pathname = path.pathname === \"/\" ? basename : joinPaths([basename, path.pathname]);\n  }\n  return createPath(path);\n}\n// TODO: (v7) Change the useFetcher generic default from `any` to `unknown`\n/**\n * Interacts with route loaders and actions without causing a navigation. Great\n * for any interaction that stays on the same page.\n */\nfunction useFetcher(_temp3) {\n  var _route$matches;\n  let {\n    key\n  } = _temp3 === void 0 ? {} : _temp3;\n  let {\n    router\n  } = useDataRouterContext(DataRouterHook.UseFetcher);\n  let state = useDataRouterState(DataRouterStateHook.UseFetcher);\n  let fetcherData = React.useContext(FetchersContext);\n  let route = React.useContext(UNSAFE_RouteContext);\n  let routeId = (_route$matches = route.matches[route.matches.length - 1]) == null ? void 0 : _route$matches.route.id;\n  !fetcherData ? process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, \"useFetcher must be used inside a FetchersContext\") : UNSAFE_invariant(false) : void 0;\n  !route ? process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, \"useFetcher must be used inside a RouteContext\") : UNSAFE_invariant(false) : void 0;\n  !(routeId != null) ? process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, \"useFetcher can only be used on routes that contain a unique \\\"id\\\"\") : UNSAFE_invariant(false) : void 0;\n  // Fetcher key handling\n  // OK to call conditionally to feature detect `useId`\n  // eslint-disable-next-line react-hooks/rules-of-hooks\n  let defaultKey = useIdImpl ? useIdImpl() : \"\";\n  let [fetcherKey, setFetcherKey] = React.useState(key || defaultKey);\n  if (key && key !== fetcherKey) {\n    setFetcherKey(key);\n  } else if (!fetcherKey) {\n    // We will only fall through here when `useId` is not available\n    setFetcherKey(getUniqueFetcherId());\n  }\n  // Registration/cleanup\n  React.useEffect(() => {\n    router.getFetcher(fetcherKey);\n    return () => {\n      // Tell the router we've unmounted - if v7_fetcherPersist is enabled this\n      // will not delete immediately but instead queue up a delete after the\n      // fetcher returns to an `idle` state\n      router.deleteFetcher(fetcherKey);\n    };\n  }, [router, fetcherKey]);\n  // Fetcher additions\n  let load = React.useCallback((href, opts) => {\n    !routeId ? process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, \"No routeId available for fetcher.load()\") : UNSAFE_invariant(false) : void 0;\n    router.fetch(fetcherKey, routeId, href, opts);\n  }, [fetcherKey, routeId, router]);\n  let submitImpl = useSubmit();\n  let submit = React.useCallback((target, opts) => {\n    submitImpl(target, _extends({}, opts, {\n      navigate: false,\n      fetcherKey\n    }));\n  }, [fetcherKey, submitImpl]);\n  let FetcherForm = React.useMemo(() => {\n    let FetcherForm = /*#__PURE__*/React.forwardRef((props, ref) => {\n      return /*#__PURE__*/React.createElement(Form, _extends({}, props, {\n        navigate: false,\n        fetcherKey: fetcherKey,\n        ref: ref\n      }));\n    });\n    if (process.env.NODE_ENV !== \"production\") {\n      FetcherForm.displayName = \"fetcher.Form\";\n    }\n    return FetcherForm;\n  }, [fetcherKey]);\n  // Exposed FetcherWithComponents\n  let fetcher = state.fetchers.get(fetcherKey) || IDLE_FETCHER;\n  let data = fetcherData.get(fetcherKey);\n  let fetcherWithComponents = React.useMemo(() => _extends({\n    Form: FetcherForm,\n    submit,\n    load\n  }, fetcher, {\n    data\n  }), [FetcherForm, submit, load, fetcher, data]);\n  return fetcherWithComponents;\n}\n/**\n * Provides all fetchers currently on the page. Useful for layouts and parent\n * routes that need to provide pending/optimistic UI regarding the fetch.\n */\nfunction useFetchers() {\n  let state = useDataRouterState(DataRouterStateHook.UseFetchers);\n  return Array.from(state.fetchers.entries()).map(_ref11 => {\n    let [key, fetcher] = _ref11;\n    return _extends({}, fetcher, {\n      key\n    });\n  });\n}\nconst SCROLL_RESTORATION_STORAGE_KEY = \"react-router-scroll-positions\";\nlet savedScrollPositions = {};\n/**\n * When rendered inside a RouterProvider, will restore scroll positions on navigations\n */\nfunction useScrollRestoration(_temp4) {\n  let {\n    getKey,\n    storageKey\n  } = _temp4 === void 0 ? {} : _temp4;\n  let {\n    router\n  } = useDataRouterContext(DataRouterHook.UseScrollRestoration);\n  let {\n    restoreScrollPosition,\n    preventScrollReset\n  } = useDataRouterState(DataRouterStateHook.UseScrollRestoration);\n  let {\n    basename\n  } = React.useContext(UNSAFE_NavigationContext);\n  let location = useLocation();\n  let matches = useMatches();\n  let navigation = useNavigation();\n  // Trigger manual scroll restoration while we're active\n  React.useEffect(() => {\n    window.history.scrollRestoration = \"manual\";\n    return () => {\n      window.history.scrollRestoration = \"auto\";\n    };\n  }, []);\n  // Save positions on pagehide\n  usePageHide(React.useCallback(() => {\n    if (navigation.state === \"idle\") {\n      let key = (getKey ? getKey(location, matches) : null) || location.key;\n      savedScrollPositions[key] = window.scrollY;\n    }\n    try {\n      sessionStorage.setItem(storageKey || SCROLL_RESTORATION_STORAGE_KEY, JSON.stringify(savedScrollPositions));\n    } catch (error) {\n      process.env.NODE_ENV !== \"production\" ? UNSAFE_warning(false, \"Failed to save scroll positions in sessionStorage, <ScrollRestoration /> will not work properly (\" + error + \").\") : void 0;\n    }\n    window.history.scrollRestoration = \"auto\";\n  }, [storageKey, getKey, navigation.state, location, matches]));\n  // Read in any saved scroll locations\n  if (typeof document !== \"undefined\") {\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    React.useLayoutEffect(() => {\n      try {\n        let sessionPositions = sessionStorage.getItem(storageKey || SCROLL_RESTORATION_STORAGE_KEY);\n        if (sessionPositions) {\n          savedScrollPositions = JSON.parse(sessionPositions);\n        }\n      } catch (e) {\n        // no-op, use default empty object\n      }\n    }, [storageKey]);\n    // Enable scroll restoration in the router\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    React.useLayoutEffect(() => {\n      let getKeyWithoutBasename = getKey && basename !== \"/\" ? (location, matches) => getKey( // Strip the basename to match useLocation()\n      _extends({}, location, {\n        pathname: stripBasename(location.pathname, basename) || location.pathname\n      }), matches) : getKey;\n      let disableScrollRestoration = router == null ? void 0 : router.enableScrollRestoration(savedScrollPositions, () => window.scrollY, getKeyWithoutBasename);\n      return () => disableScrollRestoration && disableScrollRestoration();\n    }, [router, basename, getKey]);\n    // Restore scrolling when state.restoreScrollPosition changes\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    React.useLayoutEffect(() => {\n      // Explicit false means don't do anything (used for submissions)\n      if (restoreScrollPosition === false) {\n        return;\n      }\n      // been here before, scroll to it\n      if (typeof restoreScrollPosition === \"number\") {\n        window.scrollTo(0, restoreScrollPosition);\n        return;\n      }\n      // try to scroll to the hash\n      if (location.hash) {\n        let el = document.getElementById(decodeURIComponent(location.hash.slice(1)));\n        if (el) {\n          el.scrollIntoView();\n          return;\n        }\n      }\n      // Don't reset if this navigation opted out\n      if (preventScrollReset === true) {\n        return;\n      }\n      // otherwise go to the top on new locations\n      window.scrollTo(0, 0);\n    }, [location, restoreScrollPosition, preventScrollReset]);\n  }\n}\n/**\n * Setup a callback to be fired on the window's `beforeunload` event. This is\n * useful for saving some data to `window.localStorage` just before the page\n * refreshes.\n *\n * Note: The `callback` argument should be a function created with\n * `React.useCallback()`.\n */\nfunction useBeforeUnload(callback, options) {\n  let {\n    capture\n  } = options || {};\n  React.useEffect(() => {\n    let opts = capture != null ? {\n      capture\n    } : undefined;\n    window.addEventListener(\"beforeunload\", callback, opts);\n    return () => {\n      window.removeEventListener(\"beforeunload\", callback, opts);\n    };\n  }, [callback, capture]);\n}\n/**\n * Setup a callback to be fired on the window's `pagehide` event. This is\n * useful for saving some data to `window.localStorage` just before the page\n * refreshes.  This event is better supported than beforeunload across browsers.\n *\n * Note: The `callback` argument should be a function created with\n * `React.useCallback()`.\n */\nfunction usePageHide(callback, options) {\n  let {\n    capture\n  } = options || {};\n  React.useEffect(() => {\n    let opts = capture != null ? {\n      capture\n    } : undefined;\n    window.addEventListener(\"pagehide\", callback, opts);\n    return () => {\n      window.removeEventListener(\"pagehide\", callback, opts);\n    };\n  }, [callback, capture]);\n}\n/**\n * Wrapper around useBlocker to show a window.confirm prompt to users instead\n * of building a custom UI with useBlocker.\n *\n * Warning: This has *a lot of rough edges* and behaves very differently (and\n * very incorrectly in some cases) across browsers if user click addition\n * back/forward navigations while the confirm is open.  Use at your own risk.\n */\nfunction usePrompt(_ref12) {\n  let {\n    when,\n    message\n  } = _ref12;\n  let blocker = useBlocker(when);\n  React.useEffect(() => {\n    if (blocker.state === \"blocked\") {\n      let proceed = window.confirm(message);\n      if (proceed) {\n        // This timeout is needed to avoid a weird \"race\" on POP navigations\n        // between the `window.history` revert navigation and the result of\n        // `window.confirm`\n        setTimeout(blocker.proceed, 0);\n      } else {\n        blocker.reset();\n      }\n    }\n  }, [blocker, message]);\n  React.useEffect(() => {\n    if (blocker.state === \"blocked\" && !when) {\n      blocker.reset();\n    }\n  }, [blocker, when]);\n}\n/**\n * Return a boolean indicating if there is an active view transition to the\n * given href.  You can use this value to render CSS classes or viewTransitionName\n * styles onto your elements\n *\n * @param href The destination href\n * @param [opts.relative] Relative routing type (\"route\" | \"path\")\n */\nfunction useViewTransitionState(to, opts) {\n  if (opts === void 0) {\n    opts = {};\n  }\n  let vtContext = React.useContext(ViewTransitionContext);\n  !(vtContext != null) ? process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, \"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  \" + \"Did you accidentally import `RouterProvider` from `react-router`?\") : UNSAFE_invariant(false) : void 0;\n  let {\n    basename\n  } = useDataRouterContext(DataRouterHook.useViewTransitionState);\n  let path = useResolvedPath(to, {\n    relative: opts.relative\n  });\n  if (!vtContext.isTransitioning) {\n    return false;\n  }\n  let currentPath = stripBasename(vtContext.currentLocation.pathname, basename) || vtContext.currentLocation.pathname;\n  let nextPath = stripBasename(vtContext.nextLocation.pathname, basename) || vtContext.nextLocation.pathname;\n  // Transition is active if we're going to or coming from the indicated\n  // destination.  This ensures that other PUSH navigations that reverse\n  // an indicated transition apply.  I.e., on the list view you have:\n  //\n  //   <NavLink to=\"/details/1\" viewTransition>\n  //\n  // If you click the breadcrumb back to the list view:\n  //\n  //   <NavLink to=\"/list\" viewTransition>\n  //\n  // We should apply the transition because it's indicated as active going\n  // from /list -> /details/1 and therefore should be active on the reverse\n  // (even though this isn't strictly a POP reverse)\n  return matchPath(path.pathname, nextPath) != null || matchPath(path.pathname, currentPath) != null;\n}\n//#endregion\n\nexport { BrowserRouter, Form, HashRouter, Link, NavLink, RouterProvider, ScrollRestoration, FetchersContext as UNSAFE_FetchersContext, ViewTransitionContext as UNSAFE_ViewTransitionContext, useScrollRestoration as UNSAFE_useScrollRestoration, createBrowserRouter, createHashRouter, createSearchParams, HistoryRouter as unstable_HistoryRouter, usePrompt as unstable_usePrompt, useBeforeUnload, useFetcher, useFetchers, useFormAction, useLinkClickHandler, useSearchParams, useSubmit, useViewTransitionState };\n//# sourceMappingURL=index.js.map\n","// src/subscribable.ts\nvar Subscribable = class {\n  constructor() {\n    this.listeners = /* @__PURE__ */ new Set();\n    this.subscribe = this.subscribe.bind(this);\n  }\n  subscribe(listener) {\n    this.listeners.add(listener);\n    this.onSubscribe();\n    return () => {\n      this.listeners.delete(listener);\n      this.onUnsubscribe();\n    };\n  }\n  hasListeners() {\n    return this.listeners.size > 0;\n  }\n  onSubscribe() {\n  }\n  onUnsubscribe() {\n  }\n};\nexport {\n  Subscribable\n};\n//# sourceMappingURL=subscribable.js.map","// src/utils.ts\nvar isServer = typeof window === \"undefined\" || \"Deno\" in globalThis;\nfunction noop() {\n}\nfunction functionalUpdate(updater, input) {\n  return typeof updater === \"function\" ? updater(input) : updater;\n}\nfunction isValidTimeout(value) {\n  return typeof value === \"number\" && value >= 0 && value !== Infinity;\n}\nfunction timeUntilStale(updatedAt, staleTime) {\n  return Math.max(updatedAt + (staleTime || 0) - Date.now(), 0);\n}\nfunction resolveStaleTime(staleTime, query) {\n  return typeof staleTime === \"function\" ? staleTime(query) : staleTime;\n}\nfunction resolveEnabled(enabled, query) {\n  return typeof enabled === \"function\" ? enabled(query) : enabled;\n}\nfunction matchQuery(filters, query) {\n  const {\n    type = \"all\",\n    exact,\n    fetchStatus,\n    predicate,\n    queryKey,\n    stale\n  } = filters;\n  if (queryKey) {\n    if (exact) {\n      if (query.queryHash !== hashQueryKeyByOptions(queryKey, query.options)) {\n        return false;\n      }\n    } else if (!partialMatchKey(query.queryKey, queryKey)) {\n      return false;\n    }\n  }\n  if (type !== \"all\") {\n    const isActive = query.isActive();\n    if (type === \"active\" && !isActive) {\n      return false;\n    }\n    if (type === \"inactive\" && isActive) {\n      return false;\n    }\n  }\n  if (typeof stale === \"boolean\" && query.isStale() !== stale) {\n    return false;\n  }\n  if (fetchStatus && fetchStatus !== query.state.fetchStatus) {\n    return false;\n  }\n  if (predicate && !predicate(query)) {\n    return false;\n  }\n  return true;\n}\nfunction matchMutation(filters, mutation) {\n  const { exact, status, predicate, mutationKey } = filters;\n  if (mutationKey) {\n    if (!mutation.options.mutationKey) {\n      return false;\n    }\n    if (exact) {\n      if (hashKey(mutation.options.mutationKey) !== hashKey(mutationKey)) {\n        return false;\n      }\n    } else if (!partialMatchKey(mutation.options.mutationKey, mutationKey)) {\n      return false;\n    }\n  }\n  if (status && mutation.state.status !== status) {\n    return false;\n  }\n  if (predicate && !predicate(mutation)) {\n    return false;\n  }\n  return true;\n}\nfunction hashQueryKeyByOptions(queryKey, options) {\n  const hashFn = options?.queryKeyHashFn || hashKey;\n  return hashFn(queryKey);\n}\nfunction hashKey(queryKey) {\n  return JSON.stringify(\n    queryKey,\n    (_, val) => isPlainObject(val) ? Object.keys(val).sort().reduce((result, key) => {\n      result[key] = val[key];\n      return result;\n    }, {}) : val\n  );\n}\nfunction partialMatchKey(a, b) {\n  if (a === b) {\n    return true;\n  }\n  if (typeof a !== typeof b) {\n    return false;\n  }\n  if (a && b && typeof a === \"object\" && typeof b === \"object\") {\n    return Object.keys(b).every((key) => partialMatchKey(a[key], b[key]));\n  }\n  return false;\n}\nfunction replaceEqualDeep(a, b) {\n  if (a === b) {\n    return a;\n  }\n  const array = isPlainArray(a) && isPlainArray(b);\n  if (array || isPlainObject(a) && isPlainObject(b)) {\n    const aItems = array ? a : Object.keys(a);\n    const aSize = aItems.length;\n    const bItems = array ? b : Object.keys(b);\n    const bSize = bItems.length;\n    const copy = array ? [] : {};\n    const aItemsSet = new Set(aItems);\n    let equalItems = 0;\n    for (let i = 0; i < bSize; i++) {\n      const key = array ? i : bItems[i];\n      if ((!array && aItemsSet.has(key) || array) && a[key] === void 0 && b[key] === void 0) {\n        copy[key] = void 0;\n        equalItems++;\n      } else {\n        copy[key] = replaceEqualDeep(a[key], b[key]);\n        if (copy[key] === a[key] && a[key] !== void 0) {\n          equalItems++;\n        }\n      }\n    }\n    return aSize === bSize && equalItems === aSize ? a : copy;\n  }\n  return b;\n}\nfunction shallowEqualObjects(a, b) {\n  if (!b || Object.keys(a).length !== Object.keys(b).length) {\n    return false;\n  }\n  for (const key in a) {\n    if (a[key] !== b[key]) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction isPlainArray(value) {\n  return Array.isArray(value) && value.length === Object.keys(value).length;\n}\nfunction isPlainObject(o) {\n  if (!hasObjectPrototype(o)) {\n    return false;\n  }\n  const ctor = o.constructor;\n  if (ctor === void 0) {\n    return true;\n  }\n  const prot = ctor.prototype;\n  if (!hasObjectPrototype(prot)) {\n    return false;\n  }\n  if (!prot.hasOwnProperty(\"isPrototypeOf\")) {\n    return false;\n  }\n  if (Object.getPrototypeOf(o) !== Object.prototype) {\n    return false;\n  }\n  return true;\n}\nfunction hasObjectPrototype(o) {\n  return Object.prototype.toString.call(o) === \"[object Object]\";\n}\nfunction sleep(timeout) {\n  return new Promise((resolve) => {\n    setTimeout(resolve, timeout);\n  });\n}\nfunction replaceData(prevData, data, options) {\n  if (typeof options.structuralSharing === \"function\") {\n    return options.structuralSharing(prevData, data);\n  } else if (options.structuralSharing !== false) {\n    if (process.env.NODE_ENV !== \"production\") {\n      try {\n        return replaceEqualDeep(prevData, data);\n      } catch (error) {\n        console.error(\n          `Structural sharing requires data to be JSON serializable. To fix this, turn off structuralSharing or return JSON-serializable data from your queryFn. [${options.queryHash}]: ${error}`\n        );\n        throw error;\n      }\n    }\n    return replaceEqualDeep(prevData, data);\n  }\n  return data;\n}\nfunction keepPreviousData(previousData) {\n  return previousData;\n}\nfunction addToEnd(items, item, max = 0) {\n  const newItems = [...items, item];\n  return max && newItems.length > max ? newItems.slice(1) : newItems;\n}\nfunction addToStart(items, item, max = 0) {\n  const newItems = [item, ...items];\n  return max && newItems.length > max ? newItems.slice(0, -1) : newItems;\n}\nvar skipToken = Symbol();\nfunction ensureQueryFn(options, fetchOptions) {\n  if (process.env.NODE_ENV !== \"production\") {\n    if (options.queryFn === skipToken) {\n      console.error(\n        `Attempted to invoke queryFn when set to skipToken. This is likely a configuration error. Query hash: '${options.queryHash}'`\n      );\n    }\n  }\n  if (!options.queryFn && fetchOptions?.initialPromise) {\n    return () => fetchOptions.initialPromise;\n  }\n  if (!options.queryFn || options.queryFn === skipToken) {\n    return () => Promise.reject(new Error(`Missing queryFn: '${options.queryHash}'`));\n  }\n  return options.queryFn;\n}\nfunction shouldThrowError(throwOnError, params) {\n  if (typeof throwOnError === \"function\") {\n    return throwOnError(...params);\n  }\n  return !!throwOnError;\n}\nexport {\n  addToEnd,\n  addToStart,\n  ensureQueryFn,\n  functionalUpdate,\n  hashKey,\n  hashQueryKeyByOptions,\n  isPlainArray,\n  isPlainObject,\n  isServer,\n  isValidTimeout,\n  keepPreviousData,\n  matchMutation,\n  matchQuery,\n  noop,\n  partialMatchKey,\n  replaceData,\n  replaceEqualDeep,\n  resolveEnabled,\n  resolveStaleTime,\n  shallowEqualObjects,\n  shouldThrowError,\n  skipToken,\n  sleep,\n  timeUntilStale\n};\n//# sourceMappingURL=utils.js.map","// src/focusManager.ts\nimport { Subscribable } from \"./subscribable.js\";\nimport { isServer } from \"./utils.js\";\nvar FocusManager = class extends Subscribable {\n  #focused;\n  #cleanup;\n  #setup;\n  constructor() {\n    super();\n    this.#setup = (onFocus) => {\n      if (!isServer && window.addEventListener) {\n        const listener = () => onFocus();\n        window.addEventListener(\"visibilitychange\", listener, false);\n        return () => {\n          window.removeEventListener(\"visibilitychange\", listener);\n        };\n      }\n      return;\n    };\n  }\n  onSubscribe() {\n    if (!this.#cleanup) {\n      this.setEventListener(this.#setup);\n    }\n  }\n  onUnsubscribe() {\n    if (!this.hasListeners()) {\n      this.#cleanup?.();\n      this.#cleanup = void 0;\n    }\n  }\n  setEventListener(setup) {\n    this.#setup = setup;\n    this.#cleanup?.();\n    this.#cleanup = setup((focused) => {\n      if (typeof focused === \"boolean\") {\n        this.setFocused(focused);\n      } else {\n        this.onFocus();\n      }\n    });\n  }\n  setFocused(focused) {\n    const changed = this.#focused !== focused;\n    if (changed) {\n      this.#focused = focused;\n      this.onFocus();\n    }\n  }\n  onFocus() {\n    const isFocused = this.isFocused();\n    this.listeners.forEach((listener) => {\n      listener(isFocused);\n    });\n  }\n  isFocused() {\n    if (typeof this.#focused === \"boolean\") {\n      return this.#focused;\n    }\n    return globalThis.document?.visibilityState !== \"hidden\";\n  }\n};\nvar focusManager = new FocusManager();\nexport {\n  FocusManager,\n  focusManager\n};\n//# sourceMappingURL=focusManager.js.map","// src/onlineManager.ts\nimport { Subscribable } from \"./subscribable.js\";\nimport { isServer } from \"./utils.js\";\nvar OnlineManager = class extends Subscribable {\n  #online = true;\n  #cleanup;\n  #setup;\n  constructor() {\n    super();\n    this.#setup = (onOnline) => {\n      if (!isServer && window.addEventListener) {\n        const onlineListener = () => onOnline(true);\n        const offlineListener = () => onOnline(false);\n        window.addEventListener(\"online\", onlineListener, false);\n        window.addEventListener(\"offline\", offlineListener, false);\n        return () => {\n          window.removeEventListener(\"online\", onlineListener);\n          window.removeEventListener(\"offline\", offlineListener);\n        };\n      }\n      return;\n    };\n  }\n  onSubscribe() {\n    if (!this.#cleanup) {\n      this.setEventListener(this.#setup);\n    }\n  }\n  onUnsubscribe() {\n    if (!this.hasListeners()) {\n      this.#cleanup?.();\n      this.#cleanup = void 0;\n    }\n  }\n  setEventListener(setup) {\n    this.#setup = setup;\n    this.#cleanup?.();\n    this.#cleanup = setup(this.setOnline.bind(this));\n  }\n  setOnline(online) {\n    const changed = this.#online !== online;\n    if (changed) {\n      this.#online = online;\n      this.listeners.forEach((listener) => {\n        listener(online);\n      });\n    }\n  }\n  isOnline() {\n    return this.#online;\n  }\n};\nvar onlineManager = new OnlineManager();\nexport {\n  OnlineManager,\n  onlineManager\n};\n//# sourceMappingURL=onlineManager.js.map","// src/thenable.ts\nimport { noop } from \"./utils.js\";\nfunction pendingThenable() {\n  let resolve;\n  let reject;\n  const thenable = new Promise((_resolve, _reject) => {\n    resolve = _resolve;\n    reject = _reject;\n  });\n  thenable.status = \"pending\";\n  thenable.catch(() => {\n  });\n  function finalize(data) {\n    Object.assign(thenable, data);\n    delete thenable.resolve;\n    delete thenable.reject;\n  }\n  thenable.resolve = (value) => {\n    finalize({\n      status: \"fulfilled\",\n      value\n    });\n    resolve(value);\n  };\n  thenable.reject = (reason) => {\n    finalize({\n      status: \"rejected\",\n      reason\n    });\n    reject(reason);\n  };\n  return thenable;\n}\nfunction tryResolveSync(promise) {\n  let data;\n  promise.then((result) => {\n    data = result;\n    return result;\n  }, noop)?.catch(noop);\n  if (data !== void 0) {\n    return { data };\n  }\n  return void 0;\n}\nexport {\n  pendingThenable,\n  tryResolveSync\n};\n//# sourceMappingURL=thenable.js.map","// src/retryer.ts\nimport { focusManager } from \"./focusManager.js\";\nimport { onlineManager } from \"./onlineManager.js\";\nimport { pendingThenable } from \"./thenable.js\";\nimport { isServer, sleep } from \"./utils.js\";\nfunction defaultRetryDelay(failureCount) {\n  return Math.min(1e3 * 2 ** failureCount, 3e4);\n}\nfunction canFetch(networkMode) {\n  return (networkMode ?? \"online\") === \"online\" ? onlineManager.isOnline() : true;\n}\nvar CancelledError = class extends Error {\n  constructor(options) {\n    super(\"CancelledError\");\n    this.revert = options?.revert;\n    this.silent = options?.silent;\n  }\n};\nfunction isCancelledError(value) {\n  return value instanceof CancelledError;\n}\nfunction createRetryer(config) {\n  let isRetryCancelled = false;\n  let failureCount = 0;\n  let continueFn;\n  const thenable = pendingThenable();\n  const isResolved = () => thenable.status !== \"pending\";\n  const cancel = (cancelOptions) => {\n    if (!isResolved()) {\n      reject(new CancelledError(cancelOptions));\n      config.abort?.();\n    }\n  };\n  const cancelRetry = () => {\n    isRetryCancelled = true;\n  };\n  const continueRetry = () => {\n    isRetryCancelled = false;\n  };\n  const canContinue = () => focusManager.isFocused() && (config.networkMode === \"always\" || onlineManager.isOnline()) && config.canRun();\n  const canStart = () => canFetch(config.networkMode) && config.canRun();\n  const resolve = (value) => {\n    if (!isResolved()) {\n      continueFn?.();\n      thenable.resolve(value);\n    }\n  };\n  const reject = (value) => {\n    if (!isResolved()) {\n      continueFn?.();\n      thenable.reject(value);\n    }\n  };\n  const pause = () => {\n    return new Promise((continueResolve) => {\n      continueFn = (value) => {\n        if (isResolved() || canContinue()) {\n          continueResolve(value);\n        }\n      };\n      config.onPause?.();\n    }).then(() => {\n      continueFn = void 0;\n      if (!isResolved()) {\n        config.onContinue?.();\n      }\n    });\n  };\n  const run = () => {\n    if (isResolved()) {\n      return;\n    }\n    let promiseOrValue;\n    const initialPromise = failureCount === 0 ? config.initialPromise : void 0;\n    try {\n      promiseOrValue = initialPromise ?? config.fn();\n    } catch (error) {\n      promiseOrValue = Promise.reject(error);\n    }\n    Promise.resolve(promiseOrValue).then(resolve).catch((error) => {\n      if (isResolved()) {\n        return;\n      }\n      const retry = config.retry ?? (isServer ? 0 : 3);\n      const retryDelay = config.retryDelay ?? defaultRetryDelay;\n      const delay = typeof retryDelay === \"function\" ? retryDelay(failureCount, error) : retryDelay;\n      const shouldRetry = retry === true || typeof retry === \"number\" && failureCount < retry || typeof retry === \"function\" && retry(failureCount, error);\n      if (isRetryCancelled || !shouldRetry) {\n        reject(error);\n        return;\n      }\n      failureCount++;\n      config.onFail?.(failureCount, error);\n      sleep(delay).then(() => {\n        return canContinue() ? void 0 : pause();\n      }).then(() => {\n        if (isRetryCancelled) {\n          reject(error);\n        } else {\n          run();\n        }\n      });\n    });\n  };\n  return {\n    promise: thenable,\n    status: () => thenable.status,\n    cancel,\n    continue: () => {\n      continueFn?.();\n      return thenable;\n    },\n    cancelRetry,\n    continueRetry,\n    canStart,\n    start: () => {\n      if (canStart()) {\n        run();\n      } else {\n        pause().then(run);\n      }\n      return thenable;\n    }\n  };\n}\nexport {\n  CancelledError,\n  canFetch,\n  createRetryer,\n  isCancelledError\n};\n//# sourceMappingURL=retryer.js.map","// src/notifyManager.ts\nvar defaultScheduler = (cb) => setTimeout(cb, 0);\nfunction createNotifyManager() {\n  let queue = [];\n  let transactions = 0;\n  let notifyFn = (callback) => {\n    callback();\n  };\n  let batchNotifyFn = (callback) => {\n    callback();\n  };\n  let scheduleFn = defaultScheduler;\n  const schedule = (callback) => {\n    if (transactions) {\n      queue.push(callback);\n    } else {\n      scheduleFn(() => {\n        notifyFn(callback);\n      });\n    }\n  };\n  const flush = () => {\n    const originalQueue = queue;\n    queue = [];\n    if (originalQueue.length) {\n      scheduleFn(() => {\n        batchNotifyFn(() => {\n          originalQueue.forEach((callback) => {\n            notifyFn(callback);\n          });\n        });\n      });\n    }\n  };\n  return {\n    batch: (callback) => {\n      let result;\n      transactions++;\n      try {\n        result = callback();\n      } finally {\n        transactions--;\n        if (!transactions) {\n          flush();\n        }\n      }\n      return result;\n    },\n    /**\n     * All calls to the wrapped function will be batched.\n     */\n    batchCalls: (callback) => {\n      return (...args) => {\n        schedule(() => {\n          callback(...args);\n        });\n      };\n    },\n    schedule,\n    /**\n     * Use this method to set a custom notify function.\n     * This can be used to for example wrap notifications with `React.act` while running tests.\n     */\n    setNotifyFunction: (fn) => {\n      notifyFn = fn;\n    },\n    /**\n     * Use this method to set a custom function to batch notifications together into a single tick.\n     * By default React Query will use the batch function provided by ReactDOM or React Native.\n     */\n    setBatchNotifyFunction: (fn) => {\n      batchNotifyFn = fn;\n    },\n    setScheduler: (fn) => {\n      scheduleFn = fn;\n    }\n  };\n}\nvar notifyManager = createNotifyManager();\nexport {\n  createNotifyManager,\n  defaultScheduler,\n  notifyManager\n};\n//# sourceMappingURL=notifyManager.js.map","// src/removable.ts\nimport { isServer, isValidTimeout } from \"./utils.js\";\nvar Removable = class {\n  #gcTimeout;\n  destroy() {\n    this.clearGcTimeout();\n  }\n  scheduleGc() {\n    this.clearGcTimeout();\n    if (isValidTimeout(this.gcTime)) {\n      this.#gcTimeout = setTimeout(() => {\n        this.optionalRemove();\n      }, this.gcTime);\n    }\n  }\n  updateGcTime(newGcTime) {\n    this.gcTime = Math.max(\n      this.gcTime || 0,\n      newGcTime ?? (isServer ? Infinity : 5 * 60 * 1e3)\n    );\n  }\n  clearGcTimeout() {\n    if (this.#gcTimeout) {\n      clearTimeout(this.#gcTimeout);\n      this.#gcTimeout = void 0;\n    }\n  }\n};\nexport {\n  Removable\n};\n//# sourceMappingURL=removable.js.map","// src/query.ts\nimport {\n  ensureQueryFn,\n  noop,\n  replaceData,\n  resolveEnabled,\n  resolveStaleTime,\n  skipToken,\n  timeUntilStale\n} from \"./utils.js\";\nimport { notifyManager } from \"./notifyManager.js\";\nimport { CancelledError, canFetch, createRetryer } from \"./retryer.js\";\nimport { Removable } from \"./removable.js\";\nvar Query = class extends Removable {\n  #initialState;\n  #revertState;\n  #cache;\n  #client;\n  #retryer;\n  #defaultOptions;\n  #abortSignalConsumed;\n  constructor(config) {\n    super();\n    this.#abortSignalConsumed = false;\n    this.#defaultOptions = config.defaultOptions;\n    this.setOptions(config.options);\n    this.observers = [];\n    this.#client = config.client;\n    this.#cache = this.#client.getQueryCache();\n    this.queryKey = config.queryKey;\n    this.queryHash = config.queryHash;\n    this.#initialState = getDefaultState(this.options);\n    this.state = config.state ?? this.#initialState;\n    this.scheduleGc();\n  }\n  get meta() {\n    return this.options.meta;\n  }\n  get promise() {\n    return this.#retryer?.promise;\n  }\n  setOptions(options) {\n    this.options = { ...this.#defaultOptions, ...options };\n    this.updateGcTime(this.options.gcTime);\n  }\n  optionalRemove() {\n    if (!this.observers.length && this.state.fetchStatus === \"idle\") {\n      this.#cache.remove(this);\n    }\n  }\n  setData(newData, options) {\n    const data = replaceData(this.state.data, newData, this.options);\n    this.#dispatch({\n      data,\n      type: \"success\",\n      dataUpdatedAt: options?.updatedAt,\n      manual: options?.manual\n    });\n    return data;\n  }\n  setState(state, setStateOptions) {\n    this.#dispatch({ type: \"setState\", state, setStateOptions });\n  }\n  cancel(options) {\n    const promise = this.#retryer?.promise;\n    this.#retryer?.cancel(options);\n    return promise ? promise.then(noop).catch(noop) : Promise.resolve();\n  }\n  destroy() {\n    super.destroy();\n    this.cancel({ silent: true });\n  }\n  reset() {\n    this.destroy();\n    this.setState(this.#initialState);\n  }\n  isActive() {\n    return this.observers.some(\n      (observer) => resolveEnabled(observer.options.enabled, this) !== false\n    );\n  }\n  isDisabled() {\n    if (this.getObserversCount() > 0) {\n      return !this.isActive();\n    }\n    return this.options.queryFn === skipToken || this.state.dataUpdateCount + this.state.errorUpdateCount === 0;\n  }\n  isStatic() {\n    if (this.getObserversCount() > 0) {\n      return this.observers.some(\n        (observer) => resolveStaleTime(observer.options.staleTime, this) === \"static\"\n      );\n    }\n    return false;\n  }\n  isStale() {\n    if (this.getObserversCount() > 0) {\n      return this.observers.some(\n        (observer) => observer.getCurrentResult().isStale\n      );\n    }\n    return this.state.data === void 0 || this.state.isInvalidated;\n  }\n  isStaleByTime(staleTime = 0) {\n    if (this.state.data === void 0) {\n      return true;\n    }\n    if (staleTime === \"static\") {\n      return false;\n    }\n    if (this.state.isInvalidated) {\n      return true;\n    }\n    return !timeUntilStale(this.state.dataUpdatedAt, staleTime);\n  }\n  onFocus() {\n    const observer = this.observers.find((x) => x.shouldFetchOnWindowFocus());\n    observer?.refetch({ cancelRefetch: false });\n    this.#retryer?.continue();\n  }\n  onOnline() {\n    const observer = this.observers.find((x) => x.shouldFetchOnReconnect());\n    observer?.refetch({ cancelRefetch: false });\n    this.#retryer?.continue();\n  }\n  addObserver(observer) {\n    if (!this.observers.includes(observer)) {\n      this.observers.push(observer);\n      this.clearGcTimeout();\n      this.#cache.notify({ type: \"observerAdded\", query: this, observer });\n    }\n  }\n  removeObserver(observer) {\n    if (this.observers.includes(observer)) {\n      this.observers = this.observers.filter((x) => x !== observer);\n      if (!this.observers.length) {\n        if (this.#retryer) {\n          if (this.#abortSignalConsumed) {\n            this.#retryer.cancel({ revert: true });\n          } else {\n            this.#retryer.cancelRetry();\n          }\n        }\n        this.scheduleGc();\n      }\n      this.#cache.notify({ type: \"observerRemoved\", query: this, observer });\n    }\n  }\n  getObserversCount() {\n    return this.observers.length;\n  }\n  invalidate() {\n    if (!this.state.isInvalidated) {\n      this.#dispatch({ type: \"invalidate\" });\n    }\n  }\n  async fetch(options, fetchOptions) {\n    if (this.state.fetchStatus !== \"idle\" && // If the promise in the retyer is already rejected, we have to definitely\n    // re-start the fetch; there is a chance that the query is still in a\n    // pending state when that happens\n    this.#retryer?.status() !== \"rejected\") {\n      if (this.state.data !== void 0 && fetchOptions?.cancelRefetch) {\n        this.cancel({ silent: true });\n      } else if (this.#retryer) {\n        this.#retryer.continueRetry();\n        return this.#retryer.promise;\n      }\n    }\n    if (options) {\n      this.setOptions(options);\n    }\n    if (!this.options.queryFn) {\n      const observer = this.observers.find((x) => x.options.queryFn);\n      if (observer) {\n        this.setOptions(observer.options);\n      }\n    }\n    if (process.env.NODE_ENV !== \"production\") {\n      if (!Array.isArray(this.options.queryKey)) {\n        console.error(\n          `As of v4, queryKey needs to be an Array. If you are using a string like 'repoData', please change it to an Array, e.g. ['repoData']`\n        );\n      }\n    }\n    const abortController = new AbortController();\n    const addSignalProperty = (object) => {\n      Object.defineProperty(object, \"signal\", {\n        enumerable: true,\n        get: () => {\n          this.#abortSignalConsumed = true;\n          return abortController.signal;\n        }\n      });\n    };\n    const fetchFn = () => {\n      const queryFn = ensureQueryFn(this.options, fetchOptions);\n      const createQueryFnContext = () => {\n        const queryFnContext2 = {\n          client: this.#client,\n          queryKey: this.queryKey,\n          meta: this.meta\n        };\n        addSignalProperty(queryFnContext2);\n        return queryFnContext2;\n      };\n      const queryFnContext = createQueryFnContext();\n      this.#abortSignalConsumed = false;\n      if (this.options.persister) {\n        return this.options.persister(\n          queryFn,\n          queryFnContext,\n          this\n        );\n      }\n      return queryFn(queryFnContext);\n    };\n    const createFetchContext = () => {\n      const context2 = {\n        fetchOptions,\n        options: this.options,\n        queryKey: this.queryKey,\n        client: this.#client,\n        state: this.state,\n        fetchFn\n      };\n      addSignalProperty(context2);\n      return context2;\n    };\n    const context = createFetchContext();\n    this.options.behavior?.onFetch(context, this);\n    this.#revertState = this.state;\n    if (this.state.fetchStatus === \"idle\" || this.state.fetchMeta !== context.fetchOptions?.meta) {\n      this.#dispatch({ type: \"fetch\", meta: context.fetchOptions?.meta });\n    }\n    this.#retryer = createRetryer({\n      initialPromise: fetchOptions?.initialPromise,\n      fn: context.fetchFn,\n      abort: abortController.abort.bind(abortController),\n      onFail: (failureCount, error) => {\n        this.#dispatch({ type: \"failed\", failureCount, error });\n      },\n      onPause: () => {\n        this.#dispatch({ type: \"pause\" });\n      },\n      onContinue: () => {\n        this.#dispatch({ type: \"continue\" });\n      },\n      retry: context.options.retry,\n      retryDelay: context.options.retryDelay,\n      networkMode: context.options.networkMode,\n      canRun: () => true\n    });\n    try {\n      const data = await this.#retryer.start();\n      if (data === void 0) {\n        if (process.env.NODE_ENV !== \"production\") {\n          console.error(\n            `Query data cannot be undefined. Please make sure to return a value other than undefined from your query function. Affected query key: ${this.queryHash}`\n          );\n        }\n        throw new Error(`${this.queryHash} data is undefined`);\n      }\n      this.setData(data);\n      this.#cache.config.onSuccess?.(data, this);\n      this.#cache.config.onSettled?.(\n        data,\n        this.state.error,\n        this\n      );\n      return data;\n    } catch (error) {\n      if (error instanceof CancelledError) {\n        if (error.silent) {\n          return this.#retryer.promise;\n        } else if (error.revert) {\n          this.setState({\n            ...this.#revertState,\n            fetchStatus: \"idle\"\n          });\n          return this.state.data;\n        }\n      }\n      this.#dispatch({\n        type: \"error\",\n        error\n      });\n      this.#cache.config.onError?.(\n        error,\n        this\n      );\n      this.#cache.config.onSettled?.(\n        this.state.data,\n        error,\n        this\n      );\n      throw error;\n    } finally {\n      this.scheduleGc();\n    }\n  }\n  #dispatch(action) {\n    const reducer = (state) => {\n      switch (action.type) {\n        case \"failed\":\n          return {\n            ...state,\n            fetchFailureCount: action.failureCount,\n            fetchFailureReason: action.error\n          };\n        case \"pause\":\n          return {\n            ...state,\n            fetchStatus: \"paused\"\n          };\n        case \"continue\":\n          return {\n            ...state,\n            fetchStatus: \"fetching\"\n          };\n        case \"fetch\":\n          return {\n            ...state,\n            ...fetchState(state.data, this.options),\n            fetchMeta: action.meta ?? null\n          };\n        case \"success\":\n          const newState = {\n            ...state,\n            data: action.data,\n            dataUpdateCount: state.dataUpdateCount + 1,\n            dataUpdatedAt: action.dataUpdatedAt ?? Date.now(),\n            error: null,\n            isInvalidated: false,\n            status: \"success\",\n            ...!action.manual && {\n              fetchStatus: \"idle\",\n              fetchFailureCount: 0,\n              fetchFailureReason: null\n            }\n          };\n          this.#revertState = action.manual ? newState : void 0;\n          return newState;\n        case \"error\":\n          const error = action.error;\n          return {\n            ...state,\n            error,\n            errorUpdateCount: state.errorUpdateCount + 1,\n            errorUpdatedAt: Date.now(),\n            fetchFailureCount: state.fetchFailureCount + 1,\n            fetchFailureReason: error,\n            fetchStatus: \"idle\",\n            status: \"error\"\n          };\n        case \"invalidate\":\n          return {\n            ...state,\n            isInvalidated: true\n          };\n        case \"setState\":\n          return {\n            ...state,\n            ...action.state\n          };\n      }\n    };\n    this.state = reducer(this.state);\n    notifyManager.batch(() => {\n      this.observers.forEach((observer) => {\n        observer.onQueryUpdate();\n      });\n      this.#cache.notify({ query: this, type: \"updated\", action });\n    });\n  }\n};\nfunction fetchState(data, options) {\n  return {\n    fetchFailureCount: 0,\n    fetchFailureReason: null,\n    fetchStatus: canFetch(options.networkMode) ? \"fetching\" : \"paused\",\n    ...data === void 0 && {\n      error: null,\n      status: \"pending\"\n    }\n  };\n}\nfunction getDefaultState(options) {\n  const data = typeof options.initialData === \"function\" ? options.initialData() : options.initialData;\n  const hasData = data !== void 0;\n  const initialDataUpdatedAt = hasData ? typeof options.initialDataUpdatedAt === \"function\" ? options.initialDataUpdatedAt() : options.initialDataUpdatedAt : 0;\n  return {\n    data,\n    dataUpdateCount: 0,\n    dataUpdatedAt: hasData ? initialDataUpdatedAt ?? Date.now() : 0,\n    error: null,\n    errorUpdateCount: 0,\n    errorUpdatedAt: 0,\n    fetchFailureCount: 0,\n    fetchFailureReason: null,\n    fetchMeta: null,\n    isInvalidated: false,\n    status: hasData ? \"success\" : \"pending\",\n    fetchStatus: \"idle\"\n  };\n}\nexport {\n  Query,\n  fetchState\n};\n//# sourceMappingURL=query.js.map","// src/queryCache.ts\nimport { hashQueryKeyByOptions, matchQuery } from \"./utils.js\";\nimport { Query } from \"./query.js\";\nimport { notifyManager } from \"./notifyManager.js\";\nimport { Subscribable } from \"./subscribable.js\";\nvar QueryCache = class extends Subscribable {\n  constructor(config = {}) {\n    super();\n    this.config = config;\n    this.#queries = /* @__PURE__ */ new Map();\n  }\n  #queries;\n  build(client, options, state) {\n    const queryKey = options.queryKey;\n    const queryHash = options.queryHash ?? hashQueryKeyByOptions(queryKey, options);\n    let query = this.get(queryHash);\n    if (!query) {\n      query = new Query({\n        client,\n        queryKey,\n        queryHash,\n        options: client.defaultQueryOptions(options),\n        state,\n        defaultOptions: client.getQueryDefaults(queryKey)\n      });\n      this.add(query);\n    }\n    return query;\n  }\n  add(query) {\n    if (!this.#queries.has(query.queryHash)) {\n      this.#queries.set(query.queryHash, query);\n      this.notify({\n        type: \"added\",\n        query\n      });\n    }\n  }\n  remove(query) {\n    const queryInMap = this.#queries.get(query.queryHash);\n    if (queryInMap) {\n      query.destroy();\n      if (queryInMap === query) {\n        this.#queries.delete(query.queryHash);\n      }\n      this.notify({ type: \"removed\", query });\n    }\n  }\n  clear() {\n    notifyManager.batch(() => {\n      this.getAll().forEach((query) => {\n        this.remove(query);\n      });\n    });\n  }\n  get(queryHash) {\n    return this.#queries.get(queryHash);\n  }\n  getAll() {\n    return [...this.#queries.values()];\n  }\n  find(filters) {\n    const defaultedFilters = { exact: true, ...filters };\n    return this.getAll().find(\n      (query) => matchQuery(defaultedFilters, query)\n    );\n  }\n  findAll(filters = {}) {\n    const queries = this.getAll();\n    return Object.keys(filters).length > 0 ? queries.filter((query) => matchQuery(filters, query)) : queries;\n  }\n  notify(event) {\n    notifyManager.batch(() => {\n      this.listeners.forEach((listener) => {\n        listener(event);\n      });\n    });\n  }\n  onFocus() {\n    notifyManager.batch(() => {\n      this.getAll().forEach((query) => {\n        query.onFocus();\n      });\n    });\n  }\n  onOnline() {\n    notifyManager.batch(() => {\n      this.getAll().forEach((query) => {\n        query.onOnline();\n      });\n    });\n  }\n};\nexport {\n  QueryCache\n};\n//# sourceMappingURL=queryCache.js.map","// src/mutation.ts\nimport { notifyManager } from \"./notifyManager.js\";\nimport { Removable } from \"./removable.js\";\nimport { createRetryer } from \"./retryer.js\";\nvar Mutation = class extends Removable {\n  #observers;\n  #mutationCache;\n  #retryer;\n  constructor(config) {\n    super();\n    this.mutationId = config.mutationId;\n    this.#mutationCache = config.mutationCache;\n    this.#observers = [];\n    this.state = config.state || getDefaultState();\n    this.setOptions(config.options);\n    this.scheduleGc();\n  }\n  setOptions(options) {\n    this.options = options;\n    this.updateGcTime(this.options.gcTime);\n  }\n  get meta() {\n    return this.options.meta;\n  }\n  addObserver(observer) {\n    if (!this.#observers.includes(observer)) {\n      this.#observers.push(observer);\n      this.clearGcTimeout();\n      this.#mutationCache.notify({\n        type: \"observerAdded\",\n        mutation: this,\n        observer\n      });\n    }\n  }\n  removeObserver(observer) {\n    this.#observers = this.#observers.filter((x) => x !== observer);\n    this.scheduleGc();\n    this.#mutationCache.notify({\n      type: \"observerRemoved\",\n      mutation: this,\n      observer\n    });\n  }\n  optionalRemove() {\n    if (!this.#observers.length) {\n      if (this.state.status === \"pending\") {\n        this.scheduleGc();\n      } else {\n        this.#mutationCache.remove(this);\n      }\n    }\n  }\n  continue() {\n    return this.#retryer?.continue() ?? // continuing a mutation assumes that variables are set, mutation must have been dehydrated before\n    this.execute(this.state.variables);\n  }\n  async execute(variables) {\n    const onContinue = () => {\n      this.#dispatch({ type: \"continue\" });\n    };\n    this.#retryer = createRetryer({\n      fn: () => {\n        if (!this.options.mutationFn) {\n          return Promise.reject(new Error(\"No mutationFn found\"));\n        }\n        return this.options.mutationFn(variables);\n      },\n      onFail: (failureCount, error) => {\n        this.#dispatch({ type: \"failed\", failureCount, error });\n      },\n      onPause: () => {\n        this.#dispatch({ type: \"pause\" });\n      },\n      onContinue,\n      retry: this.options.retry ?? 0,\n      retryDelay: this.options.retryDelay,\n      networkMode: this.options.networkMode,\n      canRun: () => this.#mutationCache.canRun(this)\n    });\n    const restored = this.state.status === \"pending\";\n    const isPaused = !this.#retryer.canStart();\n    try {\n      if (restored) {\n        onContinue();\n      } else {\n        this.#dispatch({ type: \"pending\", variables, isPaused });\n        await this.#mutationCache.config.onMutate?.(\n          variables,\n          this\n        );\n        const context = await this.options.onMutate?.(variables);\n        if (context !== this.state.context) {\n          this.#dispatch({\n            type: \"pending\",\n            context,\n            variables,\n            isPaused\n          });\n        }\n      }\n      const data = await this.#retryer.start();\n      await this.#mutationCache.config.onSuccess?.(\n        data,\n        variables,\n        this.state.context,\n        this\n      );\n      await this.options.onSuccess?.(data, variables, this.state.context);\n      await this.#mutationCache.config.onSettled?.(\n        data,\n        null,\n        this.state.variables,\n        this.state.context,\n        this\n      );\n      await this.options.onSettled?.(data, null, variables, this.state.context);\n      this.#dispatch({ type: \"success\", data });\n      return data;\n    } catch (error) {\n      try {\n        await this.#mutationCache.config.onError?.(\n          error,\n          variables,\n          this.state.context,\n          this\n        );\n        await this.options.onError?.(\n          error,\n          variables,\n          this.state.context\n        );\n        await this.#mutationCache.config.onSettled?.(\n          void 0,\n          error,\n          this.state.variables,\n          this.state.context,\n          this\n        );\n        await this.options.onSettled?.(\n          void 0,\n          error,\n          variables,\n          this.state.context\n        );\n        throw error;\n      } finally {\n        this.#dispatch({ type: \"error\", error });\n      }\n    } finally {\n      this.#mutationCache.runNext(this);\n    }\n  }\n  #dispatch(action) {\n    const reducer = (state) => {\n      switch (action.type) {\n        case \"failed\":\n          return {\n            ...state,\n            failureCount: action.failureCount,\n            failureReason: action.error\n          };\n        case \"pause\":\n          return {\n            ...state,\n            isPaused: true\n          };\n        case \"continue\":\n          return {\n            ...state,\n            isPaused: false\n          };\n        case \"pending\":\n          return {\n            ...state,\n            context: action.context,\n            data: void 0,\n            failureCount: 0,\n            failureReason: null,\n            error: null,\n            isPaused: action.isPaused,\n            status: \"pending\",\n            variables: action.variables,\n            submittedAt: Date.now()\n          };\n        case \"success\":\n          return {\n            ...state,\n            data: action.data,\n            failureCount: 0,\n            failureReason: null,\n            error: null,\n            status: \"success\",\n            isPaused: false\n          };\n        case \"error\":\n          return {\n            ...state,\n            data: void 0,\n            error: action.error,\n            failureCount: state.failureCount + 1,\n            failureReason: action.error,\n            isPaused: false,\n            status: \"error\"\n          };\n      }\n    };\n    this.state = reducer(this.state);\n    notifyManager.batch(() => {\n      this.#observers.forEach((observer) => {\n        observer.onMutationUpdate(action);\n      });\n      this.#mutationCache.notify({\n        mutation: this,\n        type: \"updated\",\n        action\n      });\n    });\n  }\n};\nfunction getDefaultState() {\n  return {\n    context: void 0,\n    data: void 0,\n    error: null,\n    failureCount: 0,\n    failureReason: null,\n    isPaused: false,\n    status: \"idle\",\n    variables: void 0,\n    submittedAt: 0\n  };\n}\nexport {\n  Mutation,\n  getDefaultState\n};\n//# sourceMappingURL=mutation.js.map","// src/mutationCache.ts\nimport { notifyManager } from \"./notifyManager.js\";\nimport { Mutation } from \"./mutation.js\";\nimport { matchMutation, noop } from \"./utils.js\";\nimport { Subscribable } from \"./subscribable.js\";\nvar MutationCache = class extends Subscribable {\n  constructor(config = {}) {\n    super();\n    this.config = config;\n    this.#mutations = /* @__PURE__ */ new Set();\n    this.#scopes = /* @__PURE__ */ new Map();\n    this.#mutationId = 0;\n  }\n  #mutations;\n  #scopes;\n  #mutationId;\n  build(client, options, state) {\n    const mutation = new Mutation({\n      mutationCache: this,\n      mutationId: ++this.#mutationId,\n      options: client.defaultMutationOptions(options),\n      state\n    });\n    this.add(mutation);\n    return mutation;\n  }\n  add(mutation) {\n    this.#mutations.add(mutation);\n    const scope = scopeFor(mutation);\n    if (typeof scope === \"string\") {\n      const scopedMutations = this.#scopes.get(scope);\n      if (scopedMutations) {\n        scopedMutations.push(mutation);\n      } else {\n        this.#scopes.set(scope, [mutation]);\n      }\n    }\n    this.notify({ type: \"added\", mutation });\n  }\n  remove(mutation) {\n    if (this.#mutations.delete(mutation)) {\n      const scope = scopeFor(mutation);\n      if (typeof scope === \"string\") {\n        const scopedMutations = this.#scopes.get(scope);\n        if (scopedMutations) {\n          if (scopedMutations.length > 1) {\n            const index = scopedMutations.indexOf(mutation);\n            if (index !== -1) {\n              scopedMutations.splice(index, 1);\n            }\n          } else if (scopedMutations[0] === mutation) {\n            this.#scopes.delete(scope);\n          }\n        }\n      }\n    }\n    this.notify({ type: \"removed\", mutation });\n  }\n  canRun(mutation) {\n    const scope = scopeFor(mutation);\n    if (typeof scope === \"string\") {\n      const mutationsWithSameScope = this.#scopes.get(scope);\n      const firstPendingMutation = mutationsWithSameScope?.find(\n        (m) => m.state.status === \"pending\"\n      );\n      return !firstPendingMutation || firstPendingMutation === mutation;\n    } else {\n      return true;\n    }\n  }\n  runNext(mutation) {\n    const scope = scopeFor(mutation);\n    if (typeof scope === \"string\") {\n      const foundMutation = this.#scopes.get(scope)?.find((m) => m !== mutation && m.state.isPaused);\n      return foundMutation?.continue() ?? Promise.resolve();\n    } else {\n      return Promise.resolve();\n    }\n  }\n  clear() {\n    notifyManager.batch(() => {\n      this.#mutations.forEach((mutation) => {\n        this.notify({ type: \"removed\", mutation });\n      });\n      this.#mutations.clear();\n      this.#scopes.clear();\n    });\n  }\n  getAll() {\n    return Array.from(this.#mutations);\n  }\n  find(filters) {\n    const defaultedFilters = { exact: true, ...filters };\n    return this.getAll().find(\n      (mutation) => matchMutation(defaultedFilters, mutation)\n    );\n  }\n  findAll(filters = {}) {\n    return this.getAll().filter((mutation) => matchMutation(filters, mutation));\n  }\n  notify(event) {\n    notifyManager.batch(() => {\n      this.listeners.forEach((listener) => {\n        listener(event);\n      });\n    });\n  }\n  resumePausedMutations() {\n    const pausedMutations = this.getAll().filter((x) => x.state.isPaused);\n    return notifyManager.batch(\n      () => Promise.all(\n        pausedMutations.map((mutation) => mutation.continue().catch(noop))\n      )\n    );\n  }\n};\nfunction scopeFor(mutation) {\n  return mutation.options.scope?.id;\n}\nexport {\n  MutationCache\n};\n//# sourceMappingURL=mutationCache.js.map","// src/infiniteQueryBehavior.ts\nimport { addToEnd, addToStart, ensureQueryFn } from \"./utils.js\";\nfunction infiniteQueryBehavior(pages) {\n  return {\n    onFetch: (context, query) => {\n      const options = context.options;\n      const direction = context.fetchOptions?.meta?.fetchMore?.direction;\n      const oldPages = context.state.data?.pages || [];\n      const oldPageParams = context.state.data?.pageParams || [];\n      let result = { pages: [], pageParams: [] };\n      let currentPage = 0;\n      const fetchFn = async () => {\n        let cancelled = false;\n        const addSignalProperty = (object) => {\n          Object.defineProperty(object, \"signal\", {\n            enumerable: true,\n            get: () => {\n              if (context.signal.aborted) {\n                cancelled = true;\n              } else {\n                context.signal.addEventListener(\"abort\", () => {\n                  cancelled = true;\n                });\n              }\n              return context.signal;\n            }\n          });\n        };\n        const queryFn = ensureQueryFn(context.options, context.fetchOptions);\n        const fetchPage = async (data, param, previous) => {\n          if (cancelled) {\n            return Promise.reject();\n          }\n          if (param == null && data.pages.length) {\n            return Promise.resolve(data);\n          }\n          const createQueryFnContext = () => {\n            const queryFnContext2 = {\n              client: context.client,\n              queryKey: context.queryKey,\n              pageParam: param,\n              direction: previous ? \"backward\" : \"forward\",\n              meta: context.options.meta\n            };\n            addSignalProperty(queryFnContext2);\n            return queryFnContext2;\n          };\n          const queryFnContext = createQueryFnContext();\n          const page = await queryFn(queryFnContext);\n          const { maxPages } = context.options;\n          const addTo = previous ? addToStart : addToEnd;\n          return {\n            pages: addTo(data.pages, page, maxPages),\n            pageParams: addTo(data.pageParams, param, maxPages)\n          };\n        };\n        if (direction && oldPages.length) {\n          const previous = direction === \"backward\";\n          const pageParamFn = previous ? getPreviousPageParam : getNextPageParam;\n          const oldData = {\n            pages: oldPages,\n            pageParams: oldPageParams\n          };\n          const param = pageParamFn(options, oldData);\n          result = await fetchPage(oldData, param, previous);\n        } else {\n          const remainingPages = pages ?? oldPages.length;\n          do {\n            const param = currentPage === 0 ? oldPageParams[0] ?? options.initialPageParam : getNextPageParam(options, result);\n            if (currentPage > 0 && param == null) {\n              break;\n            }\n            result = await fetchPage(result, param);\n            currentPage++;\n          } while (currentPage < remainingPages);\n        }\n        return result;\n      };\n      if (context.options.persister) {\n        context.fetchFn = () => {\n          return context.options.persister?.(\n            fetchFn,\n            {\n              client: context.client,\n              queryKey: context.queryKey,\n              meta: context.options.meta,\n              signal: context.signal\n            },\n            query\n          );\n        };\n      } else {\n        context.fetchFn = fetchFn;\n      }\n    }\n  };\n}\nfunction getNextPageParam(options, { pages, pageParams }) {\n  const lastIndex = pages.length - 1;\n  return pages.length > 0 ? options.getNextPageParam(\n    pages[lastIndex],\n    pages,\n    pageParams[lastIndex],\n    pageParams\n  ) : void 0;\n}\nfunction getPreviousPageParam(options, { pages, pageParams }) {\n  return pages.length > 0 ? options.getPreviousPageParam?.(pages[0], pages, pageParams[0], pageParams) : void 0;\n}\nfunction hasNextPage(options, data) {\n  if (!data) return false;\n  return getNextPageParam(options, data) != null;\n}\nfunction hasPreviousPage(options, data) {\n  if (!data || !options.getPreviousPageParam) return false;\n  return getPreviousPageParam(options, data) != null;\n}\nexport {\n  hasNextPage,\n  hasPreviousPage,\n  infiniteQueryBehavior\n};\n//# sourceMappingURL=infiniteQueryBehavior.js.map","// src/queryClient.ts\nimport {\n  functionalUpdate,\n  hashKey,\n  hashQueryKeyByOptions,\n  noop,\n  partialMatchKey,\n  resolveStaleTime,\n  skipToken\n} from \"./utils.js\";\nimport { QueryCache } from \"./queryCache.js\";\nimport { MutationCache } from \"./mutationCache.js\";\nimport { focusManager } from \"./focusManager.js\";\nimport { onlineManager } from \"./onlineManager.js\";\nimport { notifyManager } from \"./notifyManager.js\";\nimport { infiniteQueryBehavior } from \"./infiniteQueryBehavior.js\";\nvar QueryClient = class {\n  #queryCache;\n  #mutationCache;\n  #defaultOptions;\n  #queryDefaults;\n  #mutationDefaults;\n  #mountCount;\n  #unsubscribeFocus;\n  #unsubscribeOnline;\n  constructor(config = {}) {\n    this.#queryCache = config.queryCache || new QueryCache();\n    this.#mutationCache = config.mutationCache || new MutationCache();\n    this.#defaultOptions = config.defaultOptions || {};\n    this.#queryDefaults = /* @__PURE__ */ new Map();\n    this.#mutationDefaults = /* @__PURE__ */ new Map();\n    this.#mountCount = 0;\n  }\n  mount() {\n    this.#mountCount++;\n    if (this.#mountCount !== 1) return;\n    this.#unsubscribeFocus = focusManager.subscribe(async (focused) => {\n      if (focused) {\n        await this.resumePausedMutations();\n        this.#queryCache.onFocus();\n      }\n    });\n    this.#unsubscribeOnline = onlineManager.subscribe(async (online) => {\n      if (online) {\n        await this.resumePausedMutations();\n        this.#queryCache.onOnline();\n      }\n    });\n  }\n  unmount() {\n    this.#mountCount--;\n    if (this.#mountCount !== 0) return;\n    this.#unsubscribeFocus?.();\n    this.#unsubscribeFocus = void 0;\n    this.#unsubscribeOnline?.();\n    this.#unsubscribeOnline = void 0;\n  }\n  isFetching(filters) {\n    return this.#queryCache.findAll({ ...filters, fetchStatus: \"fetching\" }).length;\n  }\n  isMutating(filters) {\n    return this.#mutationCache.findAll({ ...filters, status: \"pending\" }).length;\n  }\n  /**\n   * Imperative (non-reactive) way to retrieve data for a QueryKey.\n   * Should only be used in callbacks or functions where reading the latest data is necessary, e.g. for optimistic updates.\n   *\n   * Hint: Do not use this function inside a component, because it won't receive updates.\n   * Use `useQuery` to create a `QueryObserver` that subscribes to changes.\n   */\n  getQueryData(queryKey) {\n    const options = this.defaultQueryOptions({ queryKey });\n    return this.#queryCache.get(options.queryHash)?.state.data;\n  }\n  ensureQueryData(options) {\n    const defaultedOptions = this.defaultQueryOptions(options);\n    const query = this.#queryCache.build(this, defaultedOptions);\n    const cachedData = query.state.data;\n    if (cachedData === void 0) {\n      return this.fetchQuery(options);\n    }\n    if (options.revalidateIfStale && query.isStaleByTime(resolveStaleTime(defaultedOptions.staleTime, query))) {\n      void this.prefetchQuery(defaultedOptions);\n    }\n    return Promise.resolve(cachedData);\n  }\n  getQueriesData(filters) {\n    return this.#queryCache.findAll(filters).map(({ queryKey, state }) => {\n      const data = state.data;\n      return [queryKey, data];\n    });\n  }\n  setQueryData(queryKey, updater, options) {\n    const defaultedOptions = this.defaultQueryOptions({ queryKey });\n    const query = this.#queryCache.get(\n      defaultedOptions.queryHash\n    );\n    const prevData = query?.state.data;\n    const data = functionalUpdate(updater, prevData);\n    if (data === void 0) {\n      return void 0;\n    }\n    return this.#queryCache.build(this, defaultedOptions).setData(data, { ...options, manual: true });\n  }\n  setQueriesData(filters, updater, options) {\n    return notifyManager.batch(\n      () => this.#queryCache.findAll(filters).map(({ queryKey }) => [\n        queryKey,\n        this.setQueryData(queryKey, updater, options)\n      ])\n    );\n  }\n  getQueryState(queryKey) {\n    const options = this.defaultQueryOptions({ queryKey });\n    return this.#queryCache.get(\n      options.queryHash\n    )?.state;\n  }\n  removeQueries(filters) {\n    const queryCache = this.#queryCache;\n    notifyManager.batch(() => {\n      queryCache.findAll(filters).forEach((query) => {\n        queryCache.remove(query);\n      });\n    });\n  }\n  resetQueries(filters, options) {\n    const queryCache = this.#queryCache;\n    return notifyManager.batch(() => {\n      queryCache.findAll(filters).forEach((query) => {\n        query.reset();\n      });\n      return this.refetchQueries(\n        {\n          type: \"active\",\n          ...filters\n        },\n        options\n      );\n    });\n  }\n  cancelQueries(filters, cancelOptions = {}) {\n    const defaultedCancelOptions = { revert: true, ...cancelOptions };\n    const promises = notifyManager.batch(\n      () => this.#queryCache.findAll(filters).map((query) => query.cancel(defaultedCancelOptions))\n    );\n    return Promise.all(promises).then(noop).catch(noop);\n  }\n  invalidateQueries(filters, options = {}) {\n    return notifyManager.batch(() => {\n      this.#queryCache.findAll(filters).forEach((query) => {\n        query.invalidate();\n      });\n      if (filters?.refetchType === \"none\") {\n        return Promise.resolve();\n      }\n      return this.refetchQueries(\n        {\n          ...filters,\n          type: filters?.refetchType ?? filters?.type ?? \"active\"\n        },\n        options\n      );\n    });\n  }\n  refetchQueries(filters, options = {}) {\n    const fetchOptions = {\n      ...options,\n      cancelRefetch: options.cancelRefetch ?? true\n    };\n    const promises = notifyManager.batch(\n      () => this.#queryCache.findAll(filters).filter((query) => !query.isDisabled() && !query.isStatic()).map((query) => {\n        let promise = query.fetch(void 0, fetchOptions);\n        if (!fetchOptions.throwOnError) {\n          promise = promise.catch(noop);\n        }\n        return query.state.fetchStatus === \"paused\" ? Promise.resolve() : promise;\n      })\n    );\n    return Promise.all(promises).then(noop);\n  }\n  fetchQuery(options) {\n    const defaultedOptions = this.defaultQueryOptions(options);\n    if (defaultedOptions.retry === void 0) {\n      defaultedOptions.retry = false;\n    }\n    const query = this.#queryCache.build(this, defaultedOptions);\n    return query.isStaleByTime(\n      resolveStaleTime(defaultedOptions.staleTime, query)\n    ) ? query.fetch(defaultedOptions) : Promise.resolve(query.state.data);\n  }\n  prefetchQuery(options) {\n    return this.fetchQuery(options).then(noop).catch(noop);\n  }\n  fetchInfiniteQuery(options) {\n    options.behavior = infiniteQueryBehavior(options.pages);\n    return this.fetchQuery(options);\n  }\n  prefetchInfiniteQuery(options) {\n    return this.fetchInfiniteQuery(options).then(noop).catch(noop);\n  }\n  ensureInfiniteQueryData(options) {\n    options.behavior = infiniteQueryBehavior(options.pages);\n    return this.ensureQueryData(options);\n  }\n  resumePausedMutations() {\n    if (onlineManager.isOnline()) {\n      return this.#mutationCache.resumePausedMutations();\n    }\n    return Promise.resolve();\n  }\n  getQueryCache() {\n    return this.#queryCache;\n  }\n  getMutationCache() {\n    return this.#mutationCache;\n  }\n  getDefaultOptions() {\n    return this.#defaultOptions;\n  }\n  setDefaultOptions(options) {\n    this.#defaultOptions = options;\n  }\n  setQueryDefaults(queryKey, options) {\n    this.#queryDefaults.set(hashKey(queryKey), {\n      queryKey,\n      defaultOptions: options\n    });\n  }\n  getQueryDefaults(queryKey) {\n    const defaults = [...this.#queryDefaults.values()];\n    const result = {};\n    defaults.forEach((queryDefault) => {\n      if (partialMatchKey(queryKey, queryDefault.queryKey)) {\n        Object.assign(result, queryDefault.defaultOptions);\n      }\n    });\n    return result;\n  }\n  setMutationDefaults(mutationKey, options) {\n    this.#mutationDefaults.set(hashKey(mutationKey), {\n      mutationKey,\n      defaultOptions: options\n    });\n  }\n  getMutationDefaults(mutationKey) {\n    const defaults = [...this.#mutationDefaults.values()];\n    const result = {};\n    defaults.forEach((queryDefault) => {\n      if (partialMatchKey(mutationKey, queryDefault.mutationKey)) {\n        Object.assign(result, queryDefault.defaultOptions);\n      }\n    });\n    return result;\n  }\n  defaultQueryOptions(options) {\n    if (options._defaulted) {\n      return options;\n    }\n    const defaultedOptions = {\n      ...this.#defaultOptions.queries,\n      ...this.getQueryDefaults(options.queryKey),\n      ...options,\n      _defaulted: true\n    };\n    if (!defaultedOptions.queryHash) {\n      defaultedOptions.queryHash = hashQueryKeyByOptions(\n        defaultedOptions.queryKey,\n        defaultedOptions\n      );\n    }\n    if (defaultedOptions.refetchOnReconnect === void 0) {\n      defaultedOptions.refetchOnReconnect = defaultedOptions.networkMode !== \"always\";\n    }\n    if (defaultedOptions.throwOnError === void 0) {\n      defaultedOptions.throwOnError = !!defaultedOptions.suspense;\n    }\n    if (!defaultedOptions.networkMode && defaultedOptions.persister) {\n      defaultedOptions.networkMode = \"offlineFirst\";\n    }\n    if (defaultedOptions.queryFn === skipToken) {\n      defaultedOptions.enabled = false;\n    }\n    return defaultedOptions;\n  }\n  defaultMutationOptions(options) {\n    if (options?._defaulted) {\n      return options;\n    }\n    return {\n      ...this.#defaultOptions.mutations,\n      ...options?.mutationKey && this.getMutationDefaults(options.mutationKey),\n      ...options,\n      _defaulted: true\n    };\n  }\n  clear() {\n    this.#queryCache.clear();\n    this.#mutationCache.clear();\n  }\n};\nexport {\n  QueryClient\n};\n//# sourceMappingURL=queryClient.js.map","\"use client\";\n\n// src/QueryClientProvider.tsx\nimport * as React from \"react\";\nimport { jsx } from \"react/jsx-runtime\";\nvar QueryClientContext = React.createContext(\n  void 0\n);\nvar useQueryClient = (queryClient) => {\n  const client = React.useContext(QueryClientContext);\n  if (queryClient) {\n    return queryClient;\n  }\n  if (!client) {\n    throw new Error(\"No QueryClient set, use QueryClientProvider to set one\");\n  }\n  return client;\n};\nvar QueryClientProvider = ({\n  client,\n  children\n}) => {\n  React.useEffect(() => {\n    client.mount();\n    return () => {\n      client.unmount();\n    };\n  }, [client]);\n  return /* @__PURE__ */ jsx(QueryClientContext.Provider, { value: client, children });\n};\nexport {\n  QueryClientContext,\n  QueryClientProvider,\n  useQueryClient\n};\n//# sourceMappingURL=QueryClientProvider.js.map","let e={data:\"\"},t=t=>\"object\"==typeof window?((t?t.querySelector(\"#_goober\"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement(\"style\")),{innerHTML:\" \",id:\"_goober\"})).firstChild:t||e,r=e=>{let r=t(e),l=r.data;return r.data=\"\",l},l=/(?:([\\u0080-\\uFFFF\\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\\s*)/g,a=/\\/\\*[^]*?\\*\\/|  +/g,n=/\\n+/g,o=(e,t)=>{let r=\"\",l=\"\",a=\"\";for(let n in e){let c=e[n];\"@\"==n[0]?\"i\"==n[1]?r=n+\" \"+c+\";\":l+=\"f\"==n[1]?o(c,n):n+\"{\"+o(c,\"k\"==n[1]?\"\":t)+\"}\":\"object\"==typeof c?l+=o(c,t?t.replace(/([^,])+/g,e=>n.replace(/([^,]*:\\S+\\([^)]*\\))|([^,])+/g,t=>/&/.test(t)?t.replace(/&/g,e):e?e+\" \"+t:t)):n):null!=c&&(n=/^--/.test(n)?n:n.replace(/[A-Z]/g,\"-$&\").toLowerCase(),a+=o.p?o.p(n,c):n+\":\"+c+\";\")}return r+(t&&a?t+\"{\"+a+\"}\":a)+l},c={},s=e=>{if(\"object\"==typeof e){let t=\"\";for(let r in e)t+=r+s(e[r]);return t}return e},i=(e,t,r,i,p)=>{let u=s(e),d=c[u]||(c[u]=(e=>{let t=0,r=11;for(;t<e.length;)r=101*r+e.charCodeAt(t++)>>>0;return\"go\"+r})(u));if(!c[d]){let t=u!==e?e:(e=>{let t,r,o=[{}];for(;t=l.exec(e.replace(a,\"\"));)t[4]?o.shift():t[3]?(r=t[3].replace(n,\" \").trim(),o.unshift(o[0][r]=o[0][r]||{})):o[0][t[1]]=t[2].replace(n,\" \").trim();return o[0]})(e);c[d]=o(p?{[\"@keyframes \"+d]:t}:t,r?\"\":\".\"+d)}let f=r&&c.g?c.g:null;return r&&(c.g=c[d]),((e,t,r,l)=>{l?t.data=t.data.replace(l,e):-1===t.data.indexOf(e)&&(t.data=r?e+t.data:t.data+e)})(c[d],t,i,f),d},p=(e,t,r)=>e.reduce((e,l,a)=>{let n=t[a];if(n&&n.call){let e=n(r),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;n=t?\".\"+t:e&&\"object\"==typeof e?e.props?\"\":o(e,\"\"):!1===e?\"\":e}return e+l+(null==n?\"\":n)},\"\");function u(e){let r=this||{},l=e.call?e(r.p):e;return i(l.unshift?l.raw?p(l,[].slice.call(arguments,1),r.p):l.reduce((e,t)=>Object.assign(e,t&&t.call?t(r.p):t),{}):l,t(r.target),r.g,r.o,r.k)}let d,f,g,b=u.bind({g:1}),h=u.bind({k:1});function m(e,t,r,l){o.p=t,d=e,f=r,g=l}function j(e,t){let r=this||{};return function(){let l=arguments;function a(n,o){let c=Object.assign({},n),s=c.className||a.className;r.p=Object.assign({theme:f&&f()},c),r.o=/ *go\\d+/.test(s),c.className=u.apply(r,l)+(s?\" \"+s:\"\"),t&&(c.ref=o);let i=e;return e[0]&&(i=c.as||e,delete c.as),g&&i[0]&&g(c),d(i,c)}return t?t(a):a}}export{u as css,r as extractCss,b as glob,h as keyframes,m as setup,j as styled};\n","\"use client\";\nvar W=e=>typeof e==\"function\",f=(e,t)=>W(e)?e(t):e;var F=(()=>{let e=0;return()=>(++e).toString()})(),A=(()=>{let e;return()=>{if(e===void 0&&typeof window<\"u\"){let t=matchMedia(\"(prefers-reduced-motion: reduce)\");e=!t||t.matches}return e}})();import{useEffect as H,useState as j,useRef as Q}from\"react\";var Y=20;var U=(e,t)=>{switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,Y)};case 1:return{...e,toasts:e.toasts.map(o=>o.id===t.toast.id?{...o,...t.toast}:o)};case 2:let{toast:r}=t;return U(e,{type:e.toasts.find(o=>o.id===r.id)?1:0,toast:r});case 3:let{toastId:s}=t;return{...e,toasts:e.toasts.map(o=>o.id===s||s===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(o=>o.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let a=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+a}))}}},P=[],y={toasts:[],pausedAt:void 0},u=e=>{y=U(y,e),P.forEach(t=>{t(y)})},q={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},D=(e={})=>{let[t,r]=j(y),s=Q(y);H(()=>(s.current!==y&&r(y),P.push(r),()=>{let o=P.indexOf(r);o>-1&&P.splice(o,1)}),[]);let a=t.toasts.map(o=>{var n,i,p;return{...e,...e[o.type],...o,removeDelay:o.removeDelay||((n=e[o.type])==null?void 0:n.removeDelay)||(e==null?void 0:e.removeDelay),duration:o.duration||((i=e[o.type])==null?void 0:i.duration)||(e==null?void 0:e.duration)||q[o.type],style:{...e.style,...(p=e[o.type])==null?void 0:p.style,...o.style}}});return{...t,toasts:a}};var J=(e,t=\"blank\",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:\"status\",\"aria-live\":\"polite\"},message:e,pauseDuration:0,...r,id:(r==null?void 0:r.id)||F()}),x=e=>(t,r)=>{let s=J(t,e,r);return u({type:2,toast:s}),s.id},c=(e,t)=>x(\"blank\")(e,t);c.error=x(\"error\");c.success=x(\"success\");c.loading=x(\"loading\");c.custom=x(\"custom\");c.dismiss=e=>{u({type:3,toastId:e})};c.remove=e=>u({type:4,toastId:e});c.promise=(e,t,r)=>{let s=c.loading(t.loading,{...r,...r==null?void 0:r.loading});return typeof e==\"function\"&&(e=e()),e.then(a=>{let o=t.success?f(t.success,a):void 0;return o?c.success(o,{id:s,...r,...r==null?void 0:r.success}):c.dismiss(s),a}).catch(a=>{let o=t.error?f(t.error,a):void 0;o?c.error(o,{id:s,...r,...r==null?void 0:r.error}):c.dismiss(s)}),e};import{useEffect as $,useCallback as L}from\"react\";var K=(e,t)=>{u({type:1,toast:{id:e,height:t}})},X=()=>{u({type:5,time:Date.now()})},b=new Map,Z=1e3,ee=(e,t=Z)=>{if(b.has(e))return;let r=setTimeout(()=>{b.delete(e),u({type:4,toastId:e})},t);b.set(e,r)},O=e=>{let{toasts:t,pausedAt:r}=D(e);$(()=>{if(r)return;let o=Date.now(),n=t.map(i=>{if(i.duration===1/0)return;let p=(i.duration||0)+i.pauseDuration-(o-i.createdAt);if(p<0){i.visible&&c.dismiss(i.id);return}return setTimeout(()=>c.dismiss(i.id),p)});return()=>{n.forEach(i=>i&&clearTimeout(i))}},[t,r]);let s=L(()=>{r&&u({type:6,time:Date.now()})},[r]),a=L((o,n)=>{let{reverseOrder:i=!1,gutter:p=8,defaultPosition:d}=n||{},h=t.filter(m=>(m.position||d)===(o.position||d)&&m.height),v=h.findIndex(m=>m.id===o.id),S=h.filter((m,E)=>E<v&&m.visible).length;return h.filter(m=>m.visible).slice(...i?[S+1]:[0,S]).reduce((m,E)=>m+(E.height||0)+p,0)},[t]);return $(()=>{t.forEach(o=>{if(o.dismissed)ee(o.id,o.removeDelay);else{let n=b.get(o.id);n&&(clearTimeout(n),b.delete(o.id))}})},[t]),{toasts:t,handlers:{updateHeight:K,startPause:X,endPause:s,calculateOffset:a}}};import*as l from\"react\";import{styled as B,keyframes as z}from\"goober\";import*as g from\"react\";import{styled as w,keyframes as me}from\"goober\";import{styled as te,keyframes as I}from\"goober\";var oe=I`\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n transform: scale(1) rotate(45deg);\n  opacity: 1;\n}`,re=I`\nfrom {\n  transform: scale(0);\n  opacity: 0;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}`,se=I`\nfrom {\n  transform: scale(0) rotate(90deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(90deg);\n\topacity: 1;\n}`,k=te(\"div\")`\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ${e=>e.primary||\"#ff4b4b\"};\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: ${oe} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n\n  &:after,\n  &:before {\n    content: '';\n    animation: ${re} 0.15s ease-out forwards;\n    animation-delay: 150ms;\n    position: absolute;\n    border-radius: 3px;\n    opacity: 0;\n    background: ${e=>e.secondary||\"#fff\"};\n    bottom: 9px;\n    left: 4px;\n    height: 2px;\n    width: 12px;\n  }\n\n  &:before {\n    animation: ${se} 0.15s ease-out forwards;\n    animation-delay: 180ms;\n    transform: rotate(90deg);\n  }\n`;import{styled as ae,keyframes as ie}from\"goober\";var ne=ie`\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n`,V=ae(\"div\")`\n  width: 12px;\n  height: 12px;\n  box-sizing: border-box;\n  border: 2px solid;\n  border-radius: 100%;\n  border-color: ${e=>e.secondary||\"#e0e0e0\"};\n  border-right-color: ${e=>e.primary||\"#616161\"};\n  animation: ${ne} 1s linear infinite;\n`;import{styled as ce,keyframes as N}from\"goober\";var pe=N`\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(45deg);\n\topacity: 1;\n}`,de=N`\n0% {\n\theight: 0;\n\twidth: 0;\n\topacity: 0;\n}\n40% {\n  height: 0;\n\twidth: 6px;\n\topacity: 1;\n}\n100% {\n  opacity: 1;\n  height: 10px;\n}`,_=ce(\"div\")`\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ${e=>e.primary||\"#61d345\"};\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: ${pe} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n  &:after {\n    content: '';\n    box-sizing: border-box;\n    animation: ${de} 0.2s ease-out forwards;\n    opacity: 0;\n    animation-delay: 200ms;\n    position: absolute;\n    border-right: 2px solid;\n    border-bottom: 2px solid;\n    border-color: ${e=>e.secondary||\"#fff\"};\n    bottom: 6px;\n    left: 6px;\n    height: 10px;\n    width: 6px;\n  }\n`;var ue=w(\"div\")`\n  position: absolute;\n`,le=w(\"div\")`\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-width: 20px;\n  min-height: 20px;\n`,fe=me`\nfrom {\n  transform: scale(0.6);\n  opacity: 0.4;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}`,Te=w(\"div\")`\n  position: relative;\n  transform: scale(0.6);\n  opacity: 0.4;\n  min-width: 20px;\n  animation: ${fe} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n`,M=({toast:e})=>{let{icon:t,type:r,iconTheme:s}=e;return t!==void 0?typeof t==\"string\"?g.createElement(Te,null,t):t:r===\"blank\"?null:g.createElement(le,null,g.createElement(V,{...s}),r!==\"loading\"&&g.createElement(ue,null,r===\"error\"?g.createElement(k,{...s}):g.createElement(_,{...s})))};var ye=e=>`\n0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n`,ge=e=>`\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}\n`,he=\"0%{opacity:0;} 100%{opacity:1;}\",xe=\"0%{opacity:1;} 100%{opacity:0;}\",be=B(\"div\")`\n  display: flex;\n  align-items: center;\n  background: #fff;\n  color: #363636;\n  line-height: 1.3;\n  will-change: transform;\n  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);\n  max-width: 350px;\n  pointer-events: auto;\n  padding: 8px 10px;\n  border-radius: 8px;\n`,Se=B(\"div\")`\n  display: flex;\n  justify-content: center;\n  margin: 4px 10px;\n  color: inherit;\n  flex: 1 1 auto;\n  white-space: pre-line;\n`,Ae=(e,t)=>{let s=e.includes(\"top\")?1:-1,[a,o]=A()?[he,xe]:[ye(s),ge(s)];return{animation:t?`${z(a)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${z(o)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},C=l.memo(({toast:e,position:t,style:r,children:s})=>{let a=e.height?Ae(e.position||t||\"top-center\",e.visible):{opacity:0},o=l.createElement(M,{toast:e}),n=l.createElement(Se,{...e.ariaProps},f(e.message,e));return l.createElement(be,{className:e.className,style:{...a,...r,...e.style}},typeof s==\"function\"?s({icon:o,message:n}):l.createElement(l.Fragment,null,o,n))});import{css as Pe,setup as Re}from\"goober\";import*as T from\"react\";Re(T.createElement);var ve=({id:e,className:t,style:r,onHeightUpdate:s,children:a})=>{let o=T.useCallback(n=>{if(n){let i=()=>{let p=n.getBoundingClientRect().height;s(e,p)};i(),new MutationObserver(i).observe(n,{subtree:!0,childList:!0,characterData:!0})}},[e,s]);return T.createElement(\"div\",{ref:o,className:t,style:r},a)},Ee=(e,t)=>{let r=e.includes(\"top\"),s=r?{top:0}:{bottom:0},a=e.includes(\"center\")?{justifyContent:\"center\"}:e.includes(\"right\")?{justifyContent:\"flex-end\"}:{};return{left:0,right:0,display:\"flex\",position:\"absolute\",transition:A()?void 0:\"all 230ms cubic-bezier(.21,1.02,.73,1)\",transform:`translateY(${t*(r?1:-1)}px)`,...s,...a}},De=Pe`\n  z-index: 9999;\n  > * {\n    pointer-events: auto;\n  }\n`,R=16,Oe=({reverseOrder:e,position:t=\"top-center\",toastOptions:r,gutter:s,children:a,containerStyle:o,containerClassName:n})=>{let{toasts:i,handlers:p}=O(r);return T.createElement(\"div\",{id:\"_rht_toaster\",style:{position:\"fixed\",zIndex:9999,top:R,left:R,right:R,bottom:R,pointerEvents:\"none\",...o},className:n,onMouseEnter:p.startPause,onMouseLeave:p.endPause},i.map(d=>{let h=d.position||t,v=p.calculateOffset(d,{reverseOrder:e,gutter:s,defaultPosition:t}),S=Ee(h,v);return T.createElement(ve,{id:d.id,key:d.id,onHeightUpdate:p.updateHeight,className:d.visible?De:\"\",style:S},d.type===\"custom\"?f(d.message,d):a?a(d):T.createElement(C,{toast:d,position:h}))}))};var Vt=c;export{_ as CheckmarkIcon,k as ErrorIcon,V as LoaderIcon,C as ToastBar,M as ToastIcon,Oe as Toaster,Vt as default,f as resolveValue,c as toast,O as useToaster,D as useToasterStore};\n//# sourceMappingURL=index.mjs.map","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nvar defaultAttributes = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: 24,\n  height: 24,\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: 2,\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\"\n};\n\nexport { defaultAttributes as default };\n//# sourceMappingURL=defaultAttributes.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport { forwardRef, createElement } from 'react';\nimport defaultAttributes from './defaultAttributes.js';\n\nconst toKebabCase = (string) => string.replace(/([a-z0-9])([A-Z])/g, \"$1-$2\").toLowerCase().trim();\nconst createLucideIcon = (iconName, iconNode) => {\n  const Component = forwardRef(\n    ({ color = \"currentColor\", size = 24, strokeWidth = 2, absoluteStrokeWidth, className = \"\", children, ...rest }, ref) => createElement(\n      \"svg\",\n      {\n        ref,\n        ...defaultAttributes,\n        width: size,\n        height: size,\n        stroke: color,\n        strokeWidth: absoluteStrokeWidth ? Number(strokeWidth) * 24 / Number(size) : strokeWidth,\n        className: [\"lucide\", `lucide-${toKebabCase(iconName)}`, className].join(\" \"),\n        ...rest\n      },\n      [\n        ...iconNode.map(([tag, attrs]) => createElement(tag, attrs)),\n        ...Array.isArray(children) ? children : [children]\n      ]\n    )\n  );\n  Component.displayName = `${iconName}`;\n  return Component;\n};\n\nexport { createLucideIcon as default, toKebabCase };\n//# sourceMappingURL=createLucideIcon.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst AlertTriangle = createLucideIcon(\"AlertTriangle\", [\n  [\n    \"path\",\n    {\n      d: \"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z\",\n      key: \"c3ski4\"\n    }\n  ],\n  [\"path\", { d: \"M12 9v4\", key: \"juzpu7\" }],\n  [\"path\", { d: \"M12 17h.01\", key: \"p32p05\" }]\n]);\n\nexport { AlertTriangle as default };\n//# sourceMappingURL=alert-triangle.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ArrowLeft = createLucideIcon(\"ArrowLeft\", [\n  [\"path\", { d: \"m12 19-7-7 7-7\", key: \"1l729n\" }],\n  [\"path\", { d: \"M19 12H5\", key: \"x3x0zl\" }]\n]);\n\nexport { ArrowLeft as default };\n//# sourceMappingURL=arrow-left.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Award = createLucideIcon(\"Award\", [\n  [\"circle\", { cx: \"12\", cy: \"8\", r: \"6\", key: \"1vp47v\" }],\n  [\"path\", { d: \"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11\", key: \"em7aur\" }]\n]);\n\nexport { Award as default };\n//# sourceMappingURL=award.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst BarChart3 = createLucideIcon(\"BarChart3\", [\n  [\"path\", { d: \"M3 3v18h18\", key: \"1s2lah\" }],\n  [\"path\", { d: \"M18 17V9\", key: \"2bz60n\" }],\n  [\"path\", { d: \"M13 17V5\", key: \"1frdt8\" }],\n  [\"path\", { d: \"M8 17v-3\", key: \"17ska0\" }]\n]);\n\nexport { BarChart3 as default };\n//# sourceMappingURL=bar-chart-3.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst BookOpen = createLucideIcon(\"BookOpen\", [\n  [\"path\", { d: \"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z\", key: \"vv98re\" }],\n  [\"path\", { d: \"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z\", key: \"1cyq3y\" }]\n]);\n\nexport { BookOpen as default };\n//# sourceMappingURL=book-open.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Brain = createLucideIcon(\"Brain\", [\n  [\n    \"path\",\n    {\n      d: \"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z\",\n      key: \"1mhkh5\"\n    }\n  ],\n  [\n    \"path\",\n    {\n      d: \"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z\",\n      key: \"1d6s00\"\n    }\n  ]\n]);\n\nexport { Brain as default };\n//# sourceMappingURL=brain.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst CheckCircle = createLucideIcon(\"CheckCircle\", [\n  [\"path\", { d: \"M22 11.08V12a10 10 0 1 1-5.93-9.14\", key: \"g774vq\" }],\n  [\"path\", { d: \"m9 11 3 3L22 4\", key: \"1pflzl\" }]\n]);\n\nexport { CheckCircle as default };\n//# sourceMappingURL=check-circle.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Clock = createLucideIcon(\"Clock\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"polyline\", { points: \"12 6 12 12 16 14\", key: \"68esgv\" }]\n]);\n\nexport { Clock as default };\n//# sourceMappingURL=clock.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Gamepad2 = createLucideIcon(\"Gamepad2\", [\n  [\"line\", { x1: \"6\", x2: \"10\", y1: \"11\", y2: \"11\", key: \"1gktln\" }],\n  [\"line\", { x1: \"8\", x2: \"8\", y1: \"9\", y2: \"13\", key: \"qnk9ow\" }],\n  [\"line\", { x1: \"15\", x2: \"15.01\", y1: \"12\", y2: \"12\", key: \"krot7o\" }],\n  [\"line\", { x1: \"18\", x2: \"18.01\", y1: \"10\", y2: \"10\", key: \"1lcuu1\" }],\n  [\n    \"path\",\n    {\n      d: \"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z\",\n      key: \"mfqc10\"\n    }\n  ]\n]);\n\nexport { Gamepad2 as default };\n//# sourceMappingURL=gamepad-2.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst HelpCircle = createLucideIcon(\"HelpCircle\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"path\", { d: \"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3\", key: \"1u773s\" }],\n  [\"path\", { d: \"M12 17h.01\", key: \"p32p05\" }]\n]);\n\nexport { HelpCircle as default };\n//# sourceMappingURL=help-circle.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Home = createLucideIcon(\"Home\", [\n  [\"path\", { d: \"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z\", key: \"y5dka4\" }],\n  [\"polyline\", { points: \"9 22 9 12 15 12 15 22\", key: \"e2us08\" }]\n]);\n\nexport { Home as default };\n//# sourceMappingURL=home.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Lightbulb = createLucideIcon(\"Lightbulb\", [\n  [\n    \"path\",\n    {\n      d: \"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5\",\n      key: \"1gvzjb\"\n    }\n  ],\n  [\"path\", { d: \"M9 18h6\", key: \"x1upvd\" }],\n  [\"path\", { d: \"M10 22h4\", key: \"ceow96\" }]\n]);\n\nexport { Lightbulb as default };\n//# sourceMappingURL=lightbulb.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Play = createLucideIcon(\"Play\", [\n  [\"polygon\", { points: \"5 3 19 12 5 21 5 3\", key: \"191637\" }]\n]);\n\nexport { Play as default };\n//# sourceMappingURL=play.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst RefreshCw = createLucideIcon(\"RefreshCw\", [\n  [\"path\", { d: \"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8\", key: \"v9h5vc\" }],\n  [\"path\", { d: \"M21 3v5h-5\", key: \"1q7to0\" }],\n  [\"path\", { d: \"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16\", key: \"3uifl3\" }],\n  [\"path\", { d: \"M8 16H3v5\", key: \"1cv678\" }]\n]);\n\nexport { RefreshCw as default };\n//# sourceMappingURL=refresh-cw.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Shield = createLucideIcon(\"Shield\", [\n  [\"path\", { d: \"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10\", key: \"1irkt0\" }]\n]);\n\nexport { Shield as default };\n//# sourceMappingURL=shield.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Star = createLucideIcon(\"Star\", [\n  [\n    \"polygon\",\n    {\n      points: \"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2\",\n      key: \"8f66p6\"\n    }\n  ]\n]);\n\nexport { Star as default };\n//# sourceMappingURL=star.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Target = createLucideIcon(\"Target\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"6\", key: \"1vlfrh\" }],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"2\", key: \"1c9p78\" }]\n]);\n\nexport { Target as default };\n//# sourceMappingURL=target.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Trophy = createLucideIcon(\"Trophy\", [\n  [\"path\", { d: \"M6 9H4.5a2.5 2.5 0 0 1 0-5H6\", key: \"17hqa7\" }],\n  [\"path\", { d: \"M18 9h1.5a2.5 2.5 0 0 0 0-5H18\", key: \"lmptdp\" }],\n  [\"path\", { d: \"M4 22h16\", key: \"57wxv0\" }],\n  [\"path\", { d: \"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22\", key: \"1nw9bq\" }],\n  [\"path\", { d: \"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22\", key: \"1np0yb\" }],\n  [\"path\", { d: \"M18 2H6v7a6 6 0 0 0 12 0V2Z\", key: \"u46fv3\" }]\n]);\n\nexport { Trophy as default };\n//# sourceMappingURL=trophy.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst XCircle = createLucideIcon(\"XCircle\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"path\", { d: \"m15 9-6 6\", key: \"1uzhvr\" }],\n  [\"path\", { d: \"m9 9 6 6\", key: \"z0biqf\" }]\n]);\n\nexport { XCircle as default };\n//# sourceMappingURL=x-circle.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst X = createLucideIcon(\"X\", [\n  [\"path\", { d: \"M18 6 6 18\", key: \"1bl5f8\" }],\n  [\"path\", { d: \"m6 6 12 12\", key: \"d8bk6v\" }]\n]);\n\nexport { X as default };\n//# sourceMappingURL=x.js.map\n","/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Zap = createLucideIcon(\"Zap\", [\n  [\"polygon\", { points: \"13 2 3 14 12 14 11 22 21 10 12 10 13 2\", key: \"45s27k\" }]\n]);\n\nexport { Zap as default };\n//# sourceMappingURL=zap.js.map\n","import { createContext } from 'react';\n\n/**\n * @public\n */\nconst MotionConfigContext = createContext({\n    transformPagePoint: (p) => p,\n    isStatic: false,\n    reducedMotion: \"never\",\n});\n\nexport { MotionConfigContext };\n","import { createContext } from 'react';\n\nconst MotionContext = createContext({});\n\nexport { MotionContext };\n","import { createContext } from 'react';\n\n/**\n * @public\n */\nconst PresenceContext = createContext(null);\n\nexport { PresenceContext };\n","const isBrowser = typeof document !== \"undefined\";\n\nexport { isBrowser };\n","import { useLayoutEffect, useEffect } from 'react';\nimport { isBrowser } from './is-browser.mjs';\n\nconst useIsomorphicLayoutEffect = isBrowser ? useLayoutEffect : useEffect;\n\nexport { useIsomorphicLayoutEffect };\n","import { createContext } from 'react';\n\nconst LazyContext = createContext({ strict: false });\n\nexport { LazyContext };\n","/**\n * Convert camelCase to dash-case properties.\n */\nconst camelToDash = (str) => str.replace(/([a-z])([A-Z])/g, \"$1-$2\").toLowerCase();\n\nexport { camelToDash };\n","import { camelToDash } from '../../render/dom/utils/camel-to-dash.mjs';\n\nconst optimizedAppearDataId = \"framerAppearId\";\nconst optimizedAppearDataAttribute = \"data-\" + camelToDash(optimizedAppearDataId);\n\nexport { optimizedAppearDataAttribute, optimizedAppearDataId };\n","import { useContext, useRef, useInsertionEffect, useEffect } from 'react';\nimport { PresenceContext } from '../../context/PresenceContext.mjs';\nimport { MotionContext } from '../../context/MotionContext/index.mjs';\nimport { useIsomorphicLayoutEffect } from '../../utils/use-isomorphic-effect.mjs';\nimport { LazyContext } from '../../context/LazyContext.mjs';\nimport { MotionConfigContext } from '../../context/MotionConfigContext.mjs';\nimport { optimizedAppearDataAttribute } from '../../animation/optimized-appear/data-id.mjs';\n\nfunction useVisualElement(Component, visualState, props, createVisualElement) {\n    const { visualElement: parent } = useContext(MotionContext);\n    const lazyContext = useContext(LazyContext);\n    const presenceContext = useContext(PresenceContext);\n    const reducedMotionConfig = useContext(MotionConfigContext).reducedMotion;\n    const visualElementRef = useRef();\n    /**\n     * If we haven't preloaded a renderer, check to see if we have one lazy-loaded\n     */\n    createVisualElement = createVisualElement || lazyContext.renderer;\n    if (!visualElementRef.current && createVisualElement) {\n        visualElementRef.current = createVisualElement(Component, {\n            visualState,\n            parent,\n            props,\n            presenceContext,\n            blockInitialAnimation: presenceContext\n                ? presenceContext.initial === false\n                : false,\n            reducedMotionConfig,\n        });\n    }\n    const visualElement = visualElementRef.current;\n    useInsertionEffect(() => {\n        visualElement && visualElement.update(props, presenceContext);\n    });\n    /**\n     * Cache this value as we want to know whether HandoffAppearAnimations\n     * was present on initial render - it will be deleted after this.\n     */\n    const wantsHandoff = useRef(Boolean(props[optimizedAppearDataAttribute] && !window.HandoffComplete));\n    useIsomorphicLayoutEffect(() => {\n        if (!visualElement)\n            return;\n        visualElement.render();\n        /**\n         * Ideally this function would always run in a useEffect.\n         *\n         * However, if we have optimised appear animations to handoff from,\n         * it needs to happen synchronously to ensure there's no flash of\n         * incorrect styles in the event of a hydration error.\n         *\n         * So if we detect a situtation where optimised appear animations\n         * are running, we use useLayoutEffect to trigger animations.\n         */\n        if (wantsHandoff.current && visualElement.animationState) {\n            visualElement.animationState.animateChanges();\n        }\n    });\n    useEffect(() => {\n        if (!visualElement)\n            return;\n        visualElement.updateFeatures();\n        if (!wantsHandoff.current && visualElement.animationState) {\n            visualElement.animationState.animateChanges();\n        }\n        if (wantsHandoff.current) {\n            wantsHandoff.current = false;\n            // This ensures all future calls to animateChanges() will run in useEffect\n            window.HandoffComplete = true;\n        }\n    });\n    return visualElement;\n}\n\nexport { useVisualElement };\n","function isRefObject(ref) {\n    return (ref &&\n        typeof ref === \"object\" &&\n        Object.prototype.hasOwnProperty.call(ref, \"current\"));\n}\n\nexport { isRefObject };\n","import { useCallback } from 'react';\nimport { isRefObject } from '../../utils/is-ref-object.mjs';\n\n/**\n * Creates a ref function that, when called, hydrates the provided\n * external ref and VisualElement.\n */\nfunction useMotionRef(visualState, visualElement, externalRef) {\n    return useCallback((instance) => {\n        instance && visualState.mount && visualState.mount(instance);\n        if (visualElement) {\n            instance\n                ? visualElement.mount(instance)\n                : visualElement.unmount();\n        }\n        if (externalRef) {\n            if (typeof externalRef === \"function\") {\n                externalRef(instance);\n            }\n            else if (isRefObject(externalRef)) {\n                externalRef.current = instance;\n            }\n        }\n    }, \n    /**\n     * Only pass a new ref callback to React if we've received a visual element\n     * factory. Otherwise we'll be mounting/remounting every time externalRef\n     * or other dependencies change.\n     */\n    [visualElement]);\n}\n\nexport { useMotionRef };\n","/**\n * Decides if the supplied variable is variant label\n */\nfunction isVariantLabel(v) {\n    return typeof v === \"string\" || Array.isArray(v);\n}\n\nexport { isVariantLabel };\n","function isAnimationControls(v) {\n    return (v !== null &&\n        typeof v === \"object\" &&\n        typeof v.start === \"function\");\n}\n\nexport { isAnimationControls };\n","const variantPriorityOrder = [\n    \"animate\",\n    \"whileInView\",\n    \"whileFocus\",\n    \"whileHover\",\n    \"whileTap\",\n    \"whileDrag\",\n    \"exit\",\n];\nconst variantProps = [\"initial\", ...variantPriorityOrder];\n\nexport { variantPriorityOrder, variantProps };\n","import { isAnimationControls } from '../../animation/utils/is-animation-controls.mjs';\nimport { isVariantLabel } from './is-variant-label.mjs';\nimport { variantProps } from './variant-props.mjs';\n\nfunction isControllingVariants(props) {\n    return (isAnimationControls(props.animate) ||\n        variantProps.some((name) => isVariantLabel(props[name])));\n}\nfunction isVariantNode(props) {\n    return Boolean(isControllingVariants(props) || props.variants);\n}\n\nexport { isControllingVariants, isVariantNode };\n","import { isVariantLabel } from '../../render/utils/is-variant-label.mjs';\nimport { isControllingVariants } from '../../render/utils/is-controlling-variants.mjs';\n\nfunction getCurrentTreeVariants(props, context) {\n    if (isControllingVariants(props)) {\n        const { initial, animate } = props;\n        return {\n            initial: initial === false || isVariantLabel(initial)\n                ? initial\n                : undefined,\n            animate: isVariantLabel(animate) ? animate : undefined,\n        };\n    }\n    return props.inherit !== false ? context : {};\n}\n\nexport { getCurrentTreeVariants };\n","import { useContext, useMemo } from 'react';\nimport { MotionContext } from './index.mjs';\nimport { getCurrentTreeVariants } from './utils.mjs';\n\nfunction useCreateMotionContext(props) {\n    const { initial, animate } = getCurrentTreeVariants(props, useContext(MotionContext));\n    return useMemo(() => ({ initial, animate }), [variantLabelsAsDependency(initial), variantLabelsAsDependency(animate)]);\n}\nfunction variantLabelsAsDependency(prop) {\n    return Array.isArray(prop) ? prop.join(\" \") : prop;\n}\n\nexport { useCreateMotionContext };\n","const featureProps = {\n    animation: [\n        \"animate\",\n        \"variants\",\n        \"whileHover\",\n        \"whileTap\",\n        \"exit\",\n        \"whileInView\",\n        \"whileFocus\",\n        \"whileDrag\",\n    ],\n    exit: [\"exit\"],\n    drag: [\"drag\", \"dragControls\"],\n    focus: [\"whileFocus\"],\n    hover: [\"whileHover\", \"onHoverStart\", \"onHoverEnd\"],\n    tap: [\"whileTap\", \"onTap\", \"onTapStart\", \"onTapCancel\"],\n    pan: [\"onPan\", \"onPanStart\", \"onPanSessionStart\", \"onPanEnd\"],\n    inView: [\"whileInView\", \"onViewportEnter\", \"onViewportLeave\"],\n    layout: [\"layout\", \"layoutId\"],\n};\nconst featureDefinitions = {};\nfor (const key in featureProps) {\n    featureDefinitions[key] = {\n        isEnabled: (props) => featureProps[key].some((name) => !!props[name]),\n    };\n}\n\nexport { featureDefinitions };\n","import { featureDefinitions } from './definitions.mjs';\n\nfunction loadFeatures(features) {\n    for (const key in features) {\n        featureDefinitions[key] = {\n            ...featureDefinitions[key],\n            ...features[key],\n        };\n    }\n}\n\nexport { loadFeatures };\n","import { createContext } from 'react';\n\nconst LayoutGroupContext = createContext({});\n\nexport { LayoutGroupContext };\n","import { createContext } from 'react';\n\n/**\n * Internal, exported only for usage in Framer\n */\nconst SwitchLayoutGroupContext = createContext({});\n\nexport { SwitchLayoutGroupContext };\n","const motionComponentSymbol = Symbol.for(\"motionComponentSymbol\");\n\nexport { motionComponentSymbol };\n","import * as React from 'react';\nimport { forwardRef, useContext } from 'react';\nimport { MotionConfigContext } from '../context/MotionConfigContext.mjs';\nimport { MotionContext } from '../context/MotionContext/index.mjs';\nimport { useVisualElement } from './utils/use-visual-element.mjs';\nimport { useMotionRef } from './utils/use-motion-ref.mjs';\nimport { useCreateMotionContext } from '../context/MotionContext/create.mjs';\nimport { loadFeatures } from './features/load-features.mjs';\nimport { isBrowser } from '../utils/is-browser.mjs';\nimport { LayoutGroupContext } from '../context/LayoutGroupContext.mjs';\nimport { LazyContext } from '../context/LazyContext.mjs';\nimport { SwitchLayoutGroupContext } from '../context/SwitchLayoutGroupContext.mjs';\nimport { motionComponentSymbol } from './utils/symbol.mjs';\n\n/**\n * Create a `motion` component.\n *\n * This function accepts a Component argument, which can be either a string (ie \"div\"\n * for `motion.div`), or an actual React component.\n *\n * Alongside this is a config option which provides a way of rendering the provided\n * component \"offline\", or outside the React render cycle.\n */\nfunction createMotionComponent({ preloadedFeatures, createVisualElement, useRender, useVisualState, Component, }) {\n    preloadedFeatures && loadFeatures(preloadedFeatures);\n    function MotionComponent(props, externalRef) {\n        /**\n         * If we need to measure the element we load this functionality in a\n         * separate class component in order to gain access to getSnapshotBeforeUpdate.\n         */\n        let MeasureLayout;\n        const configAndProps = {\n            ...useContext(MotionConfigContext),\n            ...props,\n            layoutId: useLayoutId(props),\n        };\n        const { isStatic } = configAndProps;\n        const context = useCreateMotionContext(props);\n        const visualState = useVisualState(props, isStatic);\n        if (!isStatic && isBrowser) {\n            /**\n             * Create a VisualElement for this component. A VisualElement provides a common\n             * interface to renderer-specific APIs (ie DOM/Three.js etc) as well as\n             * providing a way of rendering to these APIs outside of the React render loop\n             * for more performant animations and interactions\n             */\n            context.visualElement = useVisualElement(Component, visualState, configAndProps, createVisualElement);\n            /**\n             * Load Motion gesture and animation features. These are rendered as renderless\n             * components so each feature can optionally make use of React lifecycle methods.\n             */\n            const initialLayoutGroupConfig = useContext(SwitchLayoutGroupContext);\n            const isStrict = useContext(LazyContext).strict;\n            if (context.visualElement) {\n                MeasureLayout = context.visualElement.loadFeatures(\n                // Note: Pass the full new combined props to correctly re-render dynamic feature components.\n                configAndProps, isStrict, preloadedFeatures, initialLayoutGroupConfig);\n            }\n        }\n        /**\n         * The mount order and hierarchy is specific to ensure our element ref\n         * is hydrated by the time features fire their effects.\n         */\n        return (React.createElement(MotionContext.Provider, { value: context },\n            MeasureLayout && context.visualElement ? (React.createElement(MeasureLayout, { visualElement: context.visualElement, ...configAndProps })) : null,\n            useRender(Component, props, useMotionRef(visualState, context.visualElement, externalRef), visualState, isStatic, context.visualElement)));\n    }\n    const ForwardRefComponent = forwardRef(MotionComponent);\n    ForwardRefComponent[motionComponentSymbol] = Component;\n    return ForwardRefComponent;\n}\nfunction useLayoutId({ layoutId }) {\n    const layoutGroupId = useContext(LayoutGroupContext).id;\n    return layoutGroupId && layoutId !== undefined\n        ? layoutGroupId + \"-\" + layoutId\n        : layoutId;\n}\n\nexport { createMotionComponent };\n","import { createMotionComponent } from '../../motion/index.mjs';\n\n/**\n * Convert any React component into a `motion` component. The provided component\n * **must** use `React.forwardRef` to the underlying DOM component you want to animate.\n *\n * ```jsx\n * const Component = React.forwardRef((props, ref) => {\n *   return <div ref={ref} />\n * })\n *\n * const MotionComponent = motion(Component)\n * ```\n *\n * @public\n */\nfunction createMotionProxy(createConfig) {\n    function custom(Component, customMotionComponentConfig = {}) {\n        return createMotionComponent(createConfig(Component, customMotionComponentConfig));\n    }\n    if (typeof Proxy === \"undefined\") {\n        return custom;\n    }\n    /**\n     * A cache of generated `motion` components, e.g `motion.div`, `motion.input` etc.\n     * Rather than generating them anew every render.\n     */\n    const componentCache = new Map();\n    return new Proxy(custom, {\n        /**\n         * Called when `motion` is referenced with a prop: `motion.div`, `motion.input` etc.\n         * The prop name is passed through as `key` and we can use that to generate a `motion`\n         * DOM component with that name.\n         */\n        get: (_target, key) => {\n            /**\n             * If this element doesn't exist in the component cache, create it and cache.\n             */\n            if (!componentCache.has(key)) {\n                componentCache.set(key, custom(key));\n            }\n            return componentCache.get(key);\n        },\n    });\n}\n\nexport { createMotionProxy };\n","/**\n * We keep these listed seperately as we use the lowercase tag names as part\n * of the runtime bundle to detect SVG components\n */\nconst lowercaseSVGElements = [\n    \"animate\",\n    \"circle\",\n    \"defs\",\n    \"desc\",\n    \"ellipse\",\n    \"g\",\n    \"image\",\n    \"line\",\n    \"filter\",\n    \"marker\",\n    \"mask\",\n    \"metadata\",\n    \"path\",\n    \"pattern\",\n    \"polygon\",\n    \"polyline\",\n    \"rect\",\n    \"stop\",\n    \"switch\",\n    \"symbol\",\n    \"svg\",\n    \"text\",\n    \"tspan\",\n    \"use\",\n    \"view\",\n];\n\nexport { lowercaseSVGElements };\n","import { lowercaseSVGElements } from '../../svg/lowercase-elements.mjs';\n\nfunction isSVGComponent(Component) {\n    if (\n    /**\n     * If it's not a string, it's a custom React component. Currently we only support\n     * HTML custom React components.\n     */\n    typeof Component !== \"string\" ||\n        /**\n         * If it contains a dash, the element is a custom HTML webcomponent.\n         */\n        Component.includes(\"-\")) {\n        return false;\n    }\n    else if (\n    /**\n     * If it's in our list of lowercase SVG tags, it's an SVG component\n     */\n    lowercaseSVGElements.indexOf(Component) > -1 ||\n        /**\n         * If it contains a capital letter, it's an SVG component\n         */\n        /[A-Z]/.test(Component)) {\n        return true;\n    }\n    return false;\n}\n\nexport { isSVGComponent };\n","const scaleCorrectors = {};\nfunction addScaleCorrector(correctors) {\n    Object.assign(scaleCorrectors, correctors);\n}\n\nexport { addScaleCorrector, scaleCorrectors };\n","/**\n * Generate a list of every possible transform key.\n */\nconst transformPropOrder = [\n    \"transformPerspective\",\n    \"x\",\n    \"y\",\n    \"z\",\n    \"translateX\",\n    \"translateY\",\n    \"translateZ\",\n    \"scale\",\n    \"scaleX\",\n    \"scaleY\",\n    \"rotate\",\n    \"rotateX\",\n    \"rotateY\",\n    \"rotateZ\",\n    \"skew\",\n    \"skewX\",\n    \"skewY\",\n];\n/**\n * A quick lookup for transform props.\n */\nconst transformProps = new Set(transformPropOrder);\n\nexport { transformPropOrder, transformProps };\n","import { scaleCorrectors } from '../../projection/styles/scale-correction.mjs';\nimport { transformProps } from '../../render/html/utils/transform.mjs';\n\nfunction isForcedMotionValue(key, { layout, layoutId }) {\n    return (transformProps.has(key) ||\n        key.startsWith(\"origin\") ||\n        ((layout || layoutId !== undefined) &&\n            (!!scaleCorrectors[key] || key === \"opacity\")));\n}\n\nexport { isForcedMotionValue };\n","const isMotionValue = (value) => Boolean(value && value.getVelocity);\n\nexport { isMotionValue };\n","import { transformPropOrder } from './transform.mjs';\n\nconst translateAlias = {\n    x: \"translateX\",\n    y: \"translateY\",\n    z: \"translateZ\",\n    transformPerspective: \"perspective\",\n};\nconst numTransforms = transformPropOrder.length;\n/**\n * Build a CSS transform style from individual x/y/scale etc properties.\n *\n * This outputs with a default order of transforms/scales/rotations, this can be customised by\n * providing a transformTemplate function.\n */\nfunction buildTransform(transform, { enableHardwareAcceleration = true, allowTransformNone = true, }, transformIsDefault, transformTemplate) {\n    // The transform string we're going to build into.\n    let transformString = \"\";\n    /**\n     * Loop over all possible transforms in order, adding the ones that\n     * are present to the transform string.\n     */\n    for (let i = 0; i < numTransforms; i++) {\n        const key = transformPropOrder[i];\n        if (transform[key] !== undefined) {\n            const transformName = translateAlias[key] || key;\n            transformString += `${transformName}(${transform[key]}) `;\n        }\n    }\n    if (enableHardwareAcceleration && !transform.z) {\n        transformString += \"translateZ(0)\";\n    }\n    transformString = transformString.trim();\n    // If we have a custom `transform` template, pass our transform values and\n    // generated transformString to that before returning\n    if (transformTemplate) {\n        transformString = transformTemplate(transform, transformIsDefault ? \"\" : transformString);\n    }\n    else if (allowTransformNone && transformIsDefault) {\n        transformString = \"none\";\n    }\n    return transformString;\n}\n\nexport { buildTransform };\n","const checkStringStartsWith = (token) => (key) => typeof key === \"string\" && key.startsWith(token);\nconst isCSSVariableName = checkStringStartsWith(\"--\");\nconst isCSSVariableToken = checkStringStartsWith(\"var(--\");\nconst cssVariableRegex = /var\\s*\\(\\s*--[\\w-]+(\\s*,\\s*(?:(?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)+)?\\s*\\)/g;\n\nexport { cssVariableRegex, isCSSVariableName, isCSSVariableToken };\n","/**\n * Provided a value and a ValueType, returns the value as that value type.\n */\nconst getValueAsType = (value, type) => {\n    return type && typeof value === \"number\"\n        ? type.transform(value)\n        : value;\n};\n\nexport { getValueAsType };\n","const clamp = (min, max, v) => Math.min(Math.max(v, min), max);\n\nexport { clamp };\n","import { clamp } from '../../../utils/clamp.mjs';\n\nconst number = {\n    test: (v) => typeof v === \"number\",\n    parse: parseFloat,\n    transform: (v) => v,\n};\nconst alpha = {\n    ...number,\n    transform: (v) => clamp(0, 1, v),\n};\nconst scale = {\n    ...number,\n    default: 1,\n};\n\nexport { alpha, number, scale };\n","/**\n * TODO: When we move from string as a source of truth to data models\n * everything in this folder should probably be referred to as models vs types\n */\n// If this number is a decimal, make it just five decimal places\n// to avoid exponents\nconst sanitize = (v) => Math.round(v * 100000) / 100000;\nconst floatRegex = /(-)?([\\d]*\\.?[\\d])+/g;\nconst colorRegex = /(#[0-9a-f]{3,8}|(rgb|hsl)a?\\((-?[\\d\\.]+%?[,\\s]+){2}(-?[\\d\\.]+%?)\\s*[\\,\\/]?\\s*[\\d\\.]*%?\\))/gi;\nconst singleColorRegex = /^(#[0-9a-f]{3,8}|(rgb|hsl)a?\\((-?[\\d\\.]+%?[,\\s]+){2}(-?[\\d\\.]+%?)\\s*[\\,\\/]?\\s*[\\d\\.]*%?\\))$/i;\nfunction isString(v) {\n    return typeof v === \"string\";\n}\n\nexport { colorRegex, floatRegex, isString, sanitize, singleColorRegex };\n","import { isString } from '../utils.mjs';\n\nconst createUnitType = (unit) => ({\n    test: (v) => isString(v) && v.endsWith(unit) && v.split(\" \").length === 1,\n    parse: parseFloat,\n    transform: (v) => `${v}${unit}`,\n});\nconst degrees = createUnitType(\"deg\");\nconst percent = createUnitType(\"%\");\nconst px = createUnitType(\"px\");\nconst vh = createUnitType(\"vh\");\nconst vw = createUnitType(\"vw\");\nconst progressPercentage = {\n    ...percent,\n    parse: (v) => percent.parse(v) / 100,\n    transform: (v) => percent.transform(v * 100),\n};\n\nexport { degrees, percent, progressPercentage, px, vh, vw };\n","import { number } from '../../../value/types/numbers/index.mjs';\n\nconst int = {\n    ...number,\n    transform: Math.round,\n};\n\nexport { int };\n","import { scale, alpha } from '../../../value/types/numbers/index.mjs';\nimport { px, degrees, progressPercentage } from '../../../value/types/numbers/units.mjs';\nimport { int } from './type-int.mjs';\n\nconst numberValueTypes = {\n    // Border props\n    borderWidth: px,\n    borderTopWidth: px,\n    borderRightWidth: px,\n    borderBottomWidth: px,\n    borderLeftWidth: px,\n    borderRadius: px,\n    radius: px,\n    borderTopLeftRadius: px,\n    borderTopRightRadius: px,\n    borderBottomRightRadius: px,\n    borderBottomLeftRadius: px,\n    // Positioning props\n    width: px,\n    maxWidth: px,\n    height: px,\n    maxHeight: px,\n    size: px,\n    top: px,\n    right: px,\n    bottom: px,\n    left: px,\n    // Spacing props\n    padding: px,\n    paddingTop: px,\n    paddingRight: px,\n    paddingBottom: px,\n    paddingLeft: px,\n    margin: px,\n    marginTop: px,\n    marginRight: px,\n    marginBottom: px,\n    marginLeft: px,\n    // Transform props\n    rotate: degrees,\n    rotateX: degrees,\n    rotateY: degrees,\n    rotateZ: degrees,\n    scale,\n    scaleX: scale,\n    scaleY: scale,\n    scaleZ: scale,\n    skew: degrees,\n    skewX: degrees,\n    skewY: degrees,\n    distance: px,\n    translateX: px,\n    translateY: px,\n    translateZ: px,\n    x: px,\n    y: px,\n    z: px,\n    perspective: px,\n    transformPerspective: px,\n    opacity: alpha,\n    originX: progressPercentage,\n    originY: progressPercentage,\n    originZ: px,\n    // Misc\n    zIndex: int,\n    // SVG\n    fillOpacity: alpha,\n    strokeOpacity: alpha,\n    numOctaves: int,\n};\n\nexport { numberValueTypes };\n","import { buildTransform } from './build-transform.mjs';\nimport { isCSSVariableName } from '../../dom/utils/is-css-variable.mjs';\nimport { transformProps } from './transform.mjs';\nimport { getValueAsType } from '../../dom/value-types/get-as-type.mjs';\nimport { numberValueTypes } from '../../dom/value-types/number.mjs';\n\nfunction buildHTMLStyles(state, latestValues, options, transformTemplate) {\n    const { style, vars, transform, transformOrigin } = state;\n    // Track whether we encounter any transform or transformOrigin values.\n    let hasTransform = false;\n    let hasTransformOrigin = false;\n    // Does the calculated transform essentially equal \"none\"?\n    let transformIsNone = true;\n    /**\n     * Loop over all our latest animated values and decide whether to handle them\n     * as a style or CSS variable.\n     *\n     * Transforms and transform origins are kept seperately for further processing.\n     */\n    for (const key in latestValues) {\n        const value = latestValues[key];\n        /**\n         * If this is a CSS variable we don't do any further processing.\n         */\n        if (isCSSVariableName(key)) {\n            vars[key] = value;\n            continue;\n        }\n        // Convert the value to its default value type, ie 0 -> \"0px\"\n        const valueType = numberValueTypes[key];\n        const valueAsType = getValueAsType(value, valueType);\n        if (transformProps.has(key)) {\n            // If this is a transform, flag to enable further transform processing\n            hasTransform = true;\n            transform[key] = valueAsType;\n            // If we already know we have a non-default transform, early return\n            if (!transformIsNone)\n                continue;\n            // Otherwise check to see if this is a default transform\n            if (value !== (valueType.default || 0))\n                transformIsNone = false;\n        }\n        else if (key.startsWith(\"origin\")) {\n            // If this is a transform origin, flag and enable further transform-origin processing\n            hasTransformOrigin = true;\n            transformOrigin[key] = valueAsType;\n        }\n        else {\n            style[key] = valueAsType;\n        }\n    }\n    if (!latestValues.transform) {\n        if (hasTransform || transformTemplate) {\n            style.transform = buildTransform(state.transform, options, transformIsNone, transformTemplate);\n        }\n        else if (style.transform) {\n            /**\n             * If we have previously created a transform but currently don't have any,\n             * reset transform style to none.\n             */\n            style.transform = \"none\";\n        }\n    }\n    /**\n     * Build a transformOrigin style. Uses the same defaults as the browser for\n     * undefined origins.\n     */\n    if (hasTransformOrigin) {\n        const { originX = \"50%\", originY = \"50%\", originZ = 0, } = transformOrigin;\n        style.transformOrigin = `${originX} ${originY} ${originZ}`;\n    }\n}\n\nexport { buildHTMLStyles };\n","const createHtmlRenderState = () => ({\n    style: {},\n    transform: {},\n    transformOrigin: {},\n    vars: {},\n});\n\nexport { createHtmlRenderState };\n","import { useMemo } from 'react';\nimport { isForcedMotionValue } from '../../motion/utils/is-forced-motion-value.mjs';\nimport { isMotionValue } from '../../value/utils/is-motion-value.mjs';\nimport { buildHTMLStyles } from './utils/build-styles.mjs';\nimport { createHtmlRenderState } from './utils/create-render-state.mjs';\n\nfunction copyRawValuesOnly(target, source, props) {\n    for (const key in source) {\n        if (!isMotionValue(source[key]) && !isForcedMotionValue(key, props)) {\n            target[key] = source[key];\n        }\n    }\n}\nfunction useInitialMotionValues({ transformTemplate }, visualState, isStatic) {\n    return useMemo(() => {\n        const state = createHtmlRenderState();\n        buildHTMLStyles(state, visualState, { enableHardwareAcceleration: !isStatic }, transformTemplate);\n        return Object.assign({}, state.vars, state.style);\n    }, [visualState]);\n}\nfunction useStyle(props, visualState, isStatic) {\n    const styleProp = props.style || {};\n    const style = {};\n    /**\n     * Copy non-Motion Values straight into style\n     */\n    copyRawValuesOnly(style, styleProp, props);\n    Object.assign(style, useInitialMotionValues(props, visualState, isStatic));\n    return props.transformValues ? props.transformValues(style) : style;\n}\nfunction useHTMLProps(props, visualState, isStatic) {\n    // The `any` isn't ideal but it is the type of createElement props argument\n    const htmlProps = {};\n    const style = useStyle(props, visualState, isStatic);\n    if (props.drag && props.dragListener !== false) {\n        // Disable the ghost element when a user drags\n        htmlProps.draggable = false;\n        // Disable text selection\n        style.userSelect =\n            style.WebkitUserSelect =\n                style.WebkitTouchCallout =\n                    \"none\";\n        // Disable scrolling on the draggable direction\n        style.touchAction =\n            props.drag === true\n                ? \"none\"\n                : `pan-${props.drag === \"x\" ? \"y\" : \"x\"}`;\n    }\n    if (props.tabIndex === undefined &&\n        (props.onTap || props.onTapStart || props.whileTap)) {\n        htmlProps.tabIndex = 0;\n    }\n    htmlProps.style = style;\n    return htmlProps;\n}\n\nexport { copyRawValuesOnly, useHTMLProps };\n","/**\n * A list of all valid MotionProps.\n *\n * @privateRemarks\n * This doesn't throw if a `MotionProp` name is missing - it should.\n */\nconst validMotionProps = new Set([\n    \"animate\",\n    \"exit\",\n    \"variants\",\n    \"initial\",\n    \"style\",\n    \"values\",\n    \"variants\",\n    \"transition\",\n    \"transformTemplate\",\n    \"transformValues\",\n    \"custom\",\n    \"inherit\",\n    \"onBeforeLayoutMeasure\",\n    \"onAnimationStart\",\n    \"onAnimationComplete\",\n    \"onUpdate\",\n    \"onDragStart\",\n    \"onDrag\",\n    \"onDragEnd\",\n    \"onMeasureDragConstraints\",\n    \"onDirectionLock\",\n    \"onDragTransitionEnd\",\n    \"_dragX\",\n    \"_dragY\",\n    \"onHoverStart\",\n    \"onHoverEnd\",\n    \"onViewportEnter\",\n    \"onViewportLeave\",\n    \"globalTapTarget\",\n    \"ignoreStrict\",\n    \"viewport\",\n]);\n/**\n * Check whether a prop name is a valid `MotionProp` key.\n *\n * @param key - Name of the property to check\n * @returns `true` is key is a valid `MotionProp`.\n *\n * @public\n */\nfunction isValidMotionProp(key) {\n    return (key.startsWith(\"while\") ||\n        (key.startsWith(\"drag\") && key !== \"draggable\") ||\n        key.startsWith(\"layout\") ||\n        key.startsWith(\"onTap\") ||\n        key.startsWith(\"onPan\") ||\n        key.startsWith(\"onLayout\") ||\n        validMotionProps.has(key));\n}\n\nexport { isValidMotionProp };\n","import { isValidMotionProp } from '../../../motion/utils/valid-prop.mjs';\n\nlet shouldForward = (key) => !isValidMotionProp(key);\nfunction loadExternalIsValidProp(isValidProp) {\n    if (!isValidProp)\n        return;\n    // Explicitly filter our events\n    shouldForward = (key) => key.startsWith(\"on\") ? !isValidMotionProp(key) : isValidProp(key);\n}\n/**\n * Emotion and Styled Components both allow users to pass through arbitrary props to their components\n * to dynamically generate CSS. They both use the `@emotion/is-prop-valid` package to determine which\n * of these should be passed to the underlying DOM node.\n *\n * However, when styling a Motion component `styled(motion.div)`, both packages pass through *all* props\n * as it's seen as an arbitrary component rather than a DOM node. Motion only allows arbitrary props\n * passed through the `custom` prop so it doesn't *need* the payload or computational overhead of\n * `@emotion/is-prop-valid`, however to fix this problem we need to use it.\n *\n * By making it an optionalDependency we can offer this functionality only in the situations where it's\n * actually required.\n */\ntry {\n    /**\n     * We attempt to import this package but require won't be defined in esm environments, in that case\n     * isPropValid will have to be provided via `MotionContext`. In a 6.0.0 this should probably be removed\n     * in favour of explicit injection.\n     */\n    loadExternalIsValidProp(require(\"@emotion/is-prop-valid\").default);\n}\ncatch (_a) {\n    // We don't need to actually do anything here - the fallback is the existing `isPropValid`.\n}\nfunction filterProps(props, isDom, forwardMotionProps) {\n    const filteredProps = {};\n    for (const key in props) {\n        /**\n         * values is considered a valid prop by Emotion, so if it's present\n         * this will be rendered out to the DOM unless explicitly filtered.\n         *\n         * We check the type as it could be used with the `feColorMatrix`\n         * element, which we support.\n         */\n        if (key === \"values\" && typeof props.values === \"object\")\n            continue;\n        if (shouldForward(key) ||\n            (forwardMotionProps === true && isValidMotionProp(key)) ||\n            (!isDom && !isValidMotionProp(key)) ||\n            // If trying to use native HTML drag events, forward drag listeners\n            (props[\"draggable\"] && key.startsWith(\"onDrag\"))) {\n            filteredProps[key] = props[key];\n        }\n    }\n    return filteredProps;\n}\n\nexport { filterProps, loadExternalIsValidProp };\n","import { px } from '../../../value/types/numbers/units.mjs';\n\nfunction calcOrigin(origin, offset, size) {\n    return typeof origin === \"string\"\n        ? origin\n        : px.transform(offset + size * origin);\n}\n/**\n * The SVG transform origin defaults are different to CSS and is less intuitive,\n * so we use the measured dimensions of the SVG to reconcile these.\n */\nfunction calcSVGTransformOrigin(dimensions, originX, originY) {\n    const pxOriginX = calcOrigin(originX, dimensions.x, dimensions.width);\n    const pxOriginY = calcOrigin(originY, dimensions.y, dimensions.height);\n    return `${pxOriginX} ${pxOriginY}`;\n}\n\nexport { calcSVGTransformOrigin };\n","import { px } from '../../../value/types/numbers/units.mjs';\n\nconst dashKeys = {\n    offset: \"stroke-dashoffset\",\n    array: \"stroke-dasharray\",\n};\nconst camelKeys = {\n    offset: \"strokeDashoffset\",\n    array: \"strokeDasharray\",\n};\n/**\n * Build SVG path properties. Uses the path's measured length to convert\n * our custom pathLength, pathSpacing and pathOffset into stroke-dashoffset\n * and stroke-dasharray attributes.\n *\n * This function is mutative to reduce per-frame GC.\n */\nfunction buildSVGPath(attrs, length, spacing = 1, offset = 0, useDashCase = true) {\n    // Normalise path length by setting SVG attribute pathLength to 1\n    attrs.pathLength = 1;\n    // We use dash case when setting attributes directly to the DOM node and camel case\n    // when defining props on a React component.\n    const keys = useDashCase ? dashKeys : camelKeys;\n    // Build the dash offset\n    attrs[keys.offset] = px.transform(-offset);\n    // Build the dash array\n    const pathLength = px.transform(length);\n    const pathSpacing = px.transform(spacing);\n    attrs[keys.array] = `${pathLength} ${pathSpacing}`;\n}\n\nexport { buildSVGPath };\n","import { buildHTMLStyles } from '../../html/utils/build-styles.mjs';\nimport { calcSVGTransformOrigin } from './transform-origin.mjs';\nimport { buildSVGPath } from './path.mjs';\n\n/**\n * Build SVG visual attrbutes, like cx and style.transform\n */\nfunction buildSVGAttrs(state, { attrX, attrY, attrScale, originX, originY, pathLength, pathSpacing = 1, pathOffset = 0, \n// This is object creation, which we try to avoid per-frame.\n...latest }, options, isSVGTag, transformTemplate) {\n    buildHTMLStyles(state, latest, options, transformTemplate);\n    /**\n     * For svg tags we just want to make sure viewBox is animatable and treat all the styles\n     * as normal HTML tags.\n     */\n    if (isSVGTag) {\n        if (state.style.viewBox) {\n            state.attrs.viewBox = state.style.viewBox;\n        }\n        return;\n    }\n    state.attrs = state.style;\n    state.style = {};\n    const { attrs, style, dimensions } = state;\n    /**\n     * However, we apply transforms as CSS transforms. So if we detect a transform we take it from attrs\n     * and copy it into style.\n     */\n    if (attrs.transform) {\n        if (dimensions)\n            style.transform = attrs.transform;\n        delete attrs.transform;\n    }\n    // Parse transformOrigin\n    if (dimensions &&\n        (originX !== undefined || originY !== undefined || style.transform)) {\n        style.transformOrigin = calcSVGTransformOrigin(dimensions, originX !== undefined ? originX : 0.5, originY !== undefined ? originY : 0.5);\n    }\n    // Render attrX/attrY/attrScale as attributes\n    if (attrX !== undefined)\n        attrs.x = attrX;\n    if (attrY !== undefined)\n        attrs.y = attrY;\n    if (attrScale !== undefined)\n        attrs.scale = attrScale;\n    // Build SVG path if one has been defined\n    if (pathLength !== undefined) {\n        buildSVGPath(attrs, pathLength, pathSpacing, pathOffset, false);\n    }\n}\n\nexport { buildSVGAttrs };\n","import { createHtmlRenderState } from '../../html/utils/create-render-state.mjs';\n\nconst createSvgRenderState = () => ({\n    ...createHtmlRenderState(),\n    attrs: {},\n});\n\nexport { createSvgRenderState };\n","const isSVGTag = (tag) => typeof tag === \"string\" && tag.toLowerCase() === \"svg\";\n\nexport { isSVGTag };\n","import { useMemo } from 'react';\nimport { copyRawValuesOnly } from '../html/use-props.mjs';\nimport { buildSVGAttrs } from './utils/build-attrs.mjs';\nimport { createSvgRenderState } from './utils/create-render-state.mjs';\nimport { isSVGTag } from './utils/is-svg-tag.mjs';\n\nfunction useSVGProps(props, visualState, _isStatic, Component) {\n    const visualProps = useMemo(() => {\n        const state = createSvgRenderState();\n        buildSVGAttrs(state, visualState, { enableHardwareAcceleration: false }, isSVGTag(Component), props.transformTemplate);\n        return {\n            ...state.attrs,\n            style: { ...state.style },\n        };\n    }, [visualState]);\n    if (props.style) {\n        const rawStyles = {};\n        copyRawValuesOnly(rawStyles, props.style, props);\n        visualProps.style = { ...rawStyles, ...visualProps.style };\n    }\n    return visualProps;\n}\n\nexport { useSVGProps };\n","import { useMemo, createElement } from 'react';\nimport { useHTMLProps } from '../html/use-props.mjs';\nimport { filterProps } from './utils/filter-props.mjs';\nimport { isSVGComponent } from './utils/is-svg-component.mjs';\nimport { useSVGProps } from '../svg/use-props.mjs';\nimport { isMotionValue } from '../../value/utils/is-motion-value.mjs';\n\nfunction createUseRender(forwardMotionProps = false) {\n    const useRender = (Component, props, ref, { latestValues }, isStatic) => {\n        const useVisualProps = isSVGComponent(Component)\n            ? useSVGProps\n            : useHTMLProps;\n        const visualProps = useVisualProps(props, latestValues, isStatic, Component);\n        const filteredProps = filterProps(props, typeof Component === \"string\", forwardMotionProps);\n        const elementProps = {\n            ...filteredProps,\n            ...visualProps,\n            ref,\n        };\n        /**\n         * If component has been handed a motion value as its child,\n         * memoise its initial value and render that. Subsequent updates\n         * will be handled by the onChange handler\n         */\n        const { children } = props;\n        const renderedChildren = useMemo(() => (isMotionValue(children) ? children.get() : children), [children]);\n        return createElement(Component, {\n            ...elementProps,\n            children: renderedChildren,\n        });\n    };\n    return useRender;\n}\n\nexport { createUseRender };\n","function renderHTML(element, { style, vars }, styleProp, projection) {\n    Object.assign(element.style, style, projection && projection.getProjectionStyles(styleProp));\n    // Loop over any CSS variables and assign those.\n    for (const key in vars) {\n        element.style.setProperty(key, vars[key]);\n    }\n}\n\nexport { renderHTML };\n","/**\n * A set of attribute names that are always read/written as camel case.\n */\nconst camelCaseAttributes = new Set([\n    \"baseFrequency\",\n    \"diffuseConstant\",\n    \"kernelMatrix\",\n    \"kernelUnitLength\",\n    \"keySplines\",\n    \"keyTimes\",\n    \"limitingConeAngle\",\n    \"markerHeight\",\n    \"markerWidth\",\n    \"numOctaves\",\n    \"targetX\",\n    \"targetY\",\n    \"surfaceScale\",\n    \"specularConstant\",\n    \"specularExponent\",\n    \"stdDeviation\",\n    \"tableValues\",\n    \"viewBox\",\n    \"gradientTransform\",\n    \"pathLength\",\n    \"startOffset\",\n    \"textLength\",\n    \"lengthAdjust\",\n]);\n\nexport { camelCaseAttributes };\n","import { camelToDash } from '../../dom/utils/camel-to-dash.mjs';\nimport { renderHTML } from '../../html/utils/render.mjs';\nimport { camelCaseAttributes } from './camel-case-attrs.mjs';\n\nfunction renderSVG(element, renderState, _styleProp, projection) {\n    renderHTML(element, renderState, undefined, projection);\n    for (const key in renderState.attrs) {\n        element.setAttribute(!camelCaseAttributes.has(key) ? camelToDash(key) : key, renderState.attrs[key]);\n    }\n}\n\nexport { renderSVG };\n","import { isForcedMotionValue } from '../../../motion/utils/is-forced-motion-value.mjs';\nimport { isMotionValue } from '../../../value/utils/is-motion-value.mjs';\n\nfunction scrapeMotionValuesFromProps(props, prevProps) {\n    const { style } = props;\n    const newValues = {};\n    for (const key in style) {\n        if (isMotionValue(style[key]) ||\n            (prevProps.style && isMotionValue(prevProps.style[key])) ||\n            isForcedMotionValue(key, props)) {\n            newValues[key] = style[key];\n        }\n    }\n    return newValues;\n}\n\nexport { scrapeMotionValuesFromProps };\n","import { isMotionValue } from '../../../value/utils/is-motion-value.mjs';\nimport { scrapeMotionValuesFromProps as scrapeMotionValuesFromProps$1 } from '../../html/utils/scrape-motion-values.mjs';\nimport { transformPropOrder } from '../../html/utils/transform.mjs';\n\nfunction scrapeMotionValuesFromProps(props, prevProps) {\n    const newValues = scrapeMotionValuesFromProps$1(props, prevProps);\n    for (const key in props) {\n        if (isMotionValue(props[key]) || isMotionValue(prevProps[key])) {\n            const targetKey = transformPropOrder.indexOf(key) !== -1\n                ? \"attr\" + key.charAt(0).toUpperCase() + key.substring(1)\n                : key;\n            newValues[targetKey] = props[key];\n        }\n    }\n    return newValues;\n}\n\nexport { scrapeMotionValuesFromProps };\n","function resolveVariantFromProps(props, definition, custom, currentValues = {}, currentVelocity = {}) {\n    /**\n     * If the variant definition is a function, resolve.\n     */\n    if (typeof definition === \"function\") {\n        definition = definition(custom !== undefined ? custom : props.custom, currentValues, currentVelocity);\n    }\n    /**\n     * If the variant definition is a variant label, or\n     * the function returned a variant label, resolve.\n     */\n    if (typeof definition === \"string\") {\n        definition = props.variants && props.variants[definition];\n    }\n    /**\n     * At this point we've resolved both functions and variant labels,\n     * but the resolved variant label might itself have been a function.\n     * If so, resolve. This can only have returned a valid target object.\n     */\n    if (typeof definition === \"function\") {\n        definition = definition(custom !== undefined ? custom : props.custom, currentValues, currentVelocity);\n    }\n    return definition;\n}\n\nexport { resolveVariantFromProps };\n","import { useRef } from 'react';\n\n/**\n * Creates a constant value over the lifecycle of a component.\n *\n * Even if `useMemo` is provided an empty array as its final argument, it doesn't offer\n * a guarantee that it won't re-run for performance reasons later on. By using `useConstant`\n * you can ensure that initialisers don't execute twice or more.\n */\nfunction useConstant(init) {\n    const ref = useRef(null);\n    if (ref.current === null) {\n        ref.current = init();\n    }\n    return ref.current;\n}\n\nexport { useConstant };\n","const isKeyframesTarget = (v) => {\n    return Array.isArray(v);\n};\n\nexport { isKeyframesTarget };\n","import { isKeyframesTarget } from '../animation/utils/is-keyframes-target.mjs';\n\nconst isCustomValue = (v) => {\n    return Boolean(v && typeof v === \"object\" && v.mix && v.toValue);\n};\nconst resolveFinalValueInKeyframes = (v) => {\n    // TODO maybe throw if v.length - 1 is placeholder token?\n    return isKeyframesTarget(v) ? v[v.length - 1] || 0 : v;\n};\n\nexport { isCustomValue, resolveFinalValueInKeyframes };\n","import { isCustomValue } from '../../utils/resolve-value.mjs';\nimport { isMotionValue } from './is-motion-value.mjs';\n\n/**\n * If the provided value is a MotionValue, this returns the actual value, otherwise just the value itself\n *\n * TODO: Remove and move to library\n */\nfunction resolveMotionValue(value) {\n    const unwrappedValue = isMotionValue(value) ? value.get() : value;\n    return isCustomValue(unwrappedValue)\n        ? unwrappedValue.toValue()\n        : unwrappedValue;\n}\n\nexport { resolveMotionValue };\n","import { useContext } from 'react';\nimport { isAnimationControls } from '../../animation/utils/is-animation-controls.mjs';\nimport { PresenceContext } from '../../context/PresenceContext.mjs';\nimport { resolveVariantFromProps } from '../../render/utils/resolve-variants.mjs';\nimport { useConstant } from '../../utils/use-constant.mjs';\nimport { resolveMotionValue } from '../../value/utils/resolve-motion-value.mjs';\nimport { MotionContext } from '../../context/MotionContext/index.mjs';\nimport { isControllingVariants, isVariantNode } from '../../render/utils/is-controlling-variants.mjs';\n\nfunction makeState({ scrapeMotionValuesFromProps, createRenderState, onMount, }, props, context, presenceContext) {\n    const state = {\n        latestValues: makeLatestValues(props, context, presenceContext, scrapeMotionValuesFromProps),\n        renderState: createRenderState(),\n    };\n    if (onMount) {\n        state.mount = (instance) => onMount(props, instance, state);\n    }\n    return state;\n}\nconst makeUseVisualState = (config) => (props, isStatic) => {\n    const context = useContext(MotionContext);\n    const presenceContext = useContext(PresenceContext);\n    const make = () => makeState(config, props, context, presenceContext);\n    return isStatic ? make() : useConstant(make);\n};\nfunction makeLatestValues(props, context, presenceContext, scrapeMotionValues) {\n    const values = {};\n    const motionValues = scrapeMotionValues(props, {});\n    for (const key in motionValues) {\n        values[key] = resolveMotionValue(motionValues[key]);\n    }\n    let { initial, animate } = props;\n    const isControllingVariants$1 = isControllingVariants(props);\n    const isVariantNode$1 = isVariantNode(props);\n    if (context &&\n        isVariantNode$1 &&\n        !isControllingVariants$1 &&\n        props.inherit !== false) {\n        if (initial === undefined)\n            initial = context.initial;\n        if (animate === undefined)\n            animate = context.animate;\n    }\n    let isInitialAnimationBlocked = presenceContext\n        ? presenceContext.initial === false\n        : false;\n    isInitialAnimationBlocked = isInitialAnimationBlocked || initial === false;\n    const variantToSet = isInitialAnimationBlocked ? animate : initial;\n    if (variantToSet &&\n        typeof variantToSet !== \"boolean\" &&\n        !isAnimationControls(variantToSet)) {\n        const list = Array.isArray(variantToSet) ? variantToSet : [variantToSet];\n        list.forEach((definition) => {\n            const resolved = resolveVariantFromProps(props, definition);\n            if (!resolved)\n                return;\n            const { transitionEnd, transition, ...target } = resolved;\n            for (const key in target) {\n                let valueTarget = target[key];\n                if (Array.isArray(valueTarget)) {\n                    /**\n                     * Take final keyframe if the initial animation is blocked because\n                     * we want to initialise at the end of that blocked animation.\n                     */\n                    const index = isInitialAnimationBlocked\n                        ? valueTarget.length - 1\n                        : 0;\n                    valueTarget = valueTarget[index];\n                }\n                if (valueTarget !== null) {\n                    values[key] = valueTarget;\n                }\n            }\n            for (const key in transitionEnd)\n                values[key] = transitionEnd[key];\n        });\n    }\n    return values;\n}\n\nexport { makeUseVisualState };\n","const noop = (any) => any;\n\nexport { noop };\n","class Queue {\n    constructor() {\n        this.order = [];\n        this.scheduled = new Set();\n    }\n    add(process) {\n        if (!this.scheduled.has(process)) {\n            this.scheduled.add(process);\n            this.order.push(process);\n            return true;\n        }\n    }\n    remove(process) {\n        const index = this.order.indexOf(process);\n        if (index !== -1) {\n            this.order.splice(index, 1);\n            this.scheduled.delete(process);\n        }\n    }\n    clear() {\n        this.order.length = 0;\n        this.scheduled.clear();\n    }\n}\nfunction createRenderStep(runNextFrame) {\n    /**\n     * We create and reuse two queues, one to queue jobs for the current frame\n     * and one for the next. We reuse to avoid triggering GC after x frames.\n     */\n    let thisFrame = new Queue();\n    let nextFrame = new Queue();\n    let numToRun = 0;\n    /**\n     * Track whether we're currently processing jobs in this step. This way\n     * we can decide whether to schedule new jobs for this frame or next.\n     */\n    let isProcessing = false;\n    let flushNextFrame = false;\n    /**\n     * A set of processes which were marked keepAlive when scheduled.\n     */\n    const toKeepAlive = new WeakSet();\n    const step = {\n        /**\n         * Schedule a process to run on the next frame.\n         */\n        schedule: (callback, keepAlive = false, immediate = false) => {\n            const addToCurrentFrame = immediate && isProcessing;\n            const queue = addToCurrentFrame ? thisFrame : nextFrame;\n            if (keepAlive)\n                toKeepAlive.add(callback);\n            if (queue.add(callback) && addToCurrentFrame && isProcessing) {\n                // If we're adding it to the currently running queue, update its measured size\n                numToRun = thisFrame.order.length;\n            }\n            return callback;\n        },\n        /**\n         * Cancel the provided callback from running on the next frame.\n         */\n        cancel: (callback) => {\n            nextFrame.remove(callback);\n            toKeepAlive.delete(callback);\n        },\n        /**\n         * Execute all schedule callbacks.\n         */\n        process: (frameData) => {\n            /**\n             * If we're already processing we've probably been triggered by a flushSync\n             * inside an existing process. Instead of executing, mark flushNextFrame\n             * as true and ensure we flush the following frame at the end of this one.\n             */\n            if (isProcessing) {\n                flushNextFrame = true;\n                return;\n            }\n            isProcessing = true;\n            [thisFrame, nextFrame] = [nextFrame, thisFrame];\n            // Clear the next frame queue\n            nextFrame.clear();\n            // Execute this frame\n            numToRun = thisFrame.order.length;\n            if (numToRun) {\n                for (let i = 0; i < numToRun; i++) {\n                    const callback = thisFrame.order[i];\n                    callback(frameData);\n                    if (toKeepAlive.has(callback)) {\n                        step.schedule(callback);\n                        runNextFrame();\n                    }\n                }\n            }\n            isProcessing = false;\n            if (flushNextFrame) {\n                flushNextFrame = false;\n                step.process(frameData);\n            }\n        },\n    };\n    return step;\n}\n\nexport { createRenderStep };\n","import { createRenderStep } from './render-step.mjs';\n\nconst stepsOrder = [\n    \"prepare\",\n    \"read\",\n    \"update\",\n    \"preRender\",\n    \"render\",\n    \"postRender\",\n];\nconst maxElapsed = 40;\nfunction createRenderBatcher(scheduleNextBatch, allowKeepAlive) {\n    let runNextFrame = false;\n    let useDefaultElapsed = true;\n    const state = {\n        delta: 0,\n        timestamp: 0,\n        isProcessing: false,\n    };\n    const steps = stepsOrder.reduce((acc, key) => {\n        acc[key] = createRenderStep(() => (runNextFrame = true));\n        return acc;\n    }, {});\n    const processStep = (stepId) => steps[stepId].process(state);\n    const processBatch = () => {\n        const timestamp = performance.now();\n        runNextFrame = false;\n        state.delta = useDefaultElapsed\n            ? 1000 / 60\n            : Math.max(Math.min(timestamp - state.timestamp, maxElapsed), 1);\n        state.timestamp = timestamp;\n        state.isProcessing = true;\n        stepsOrder.forEach(processStep);\n        state.isProcessing = false;\n        if (runNextFrame && allowKeepAlive) {\n            useDefaultElapsed = false;\n            scheduleNextBatch(processBatch);\n        }\n    };\n    const wake = () => {\n        runNextFrame = true;\n        useDefaultElapsed = true;\n        if (!state.isProcessing) {\n            scheduleNextBatch(processBatch);\n        }\n    };\n    const schedule = stepsOrder.reduce((acc, key) => {\n        const step = steps[key];\n        acc[key] = (process, keepAlive = false, immediate = false) => {\n            if (!runNextFrame)\n                wake();\n            return step.schedule(process, keepAlive, immediate);\n        };\n        return acc;\n    }, {});\n    const cancel = (process) => stepsOrder.forEach((key) => steps[key].cancel(process));\n    return { schedule, cancel, state, steps };\n}\n\nexport { createRenderBatcher, stepsOrder };\n","import { noop } from '../utils/noop.mjs';\nimport { createRenderBatcher } from './batcher.mjs';\n\nconst { schedule: frame, cancel: cancelFrame, state: frameData, steps, } = createRenderBatcher(typeof requestAnimationFrame !== \"undefined\" ? requestAnimationFrame : noop, true);\n\nexport { cancelFrame, frame, frameData, steps };\n","import { renderSVG } from './utils/render.mjs';\nimport { scrapeMotionValuesFromProps } from './utils/scrape-motion-values.mjs';\nimport { makeUseVisualState } from '../../motion/utils/use-visual-state.mjs';\nimport { createSvgRenderState } from './utils/create-render-state.mjs';\nimport { buildSVGAttrs } from './utils/build-attrs.mjs';\nimport { isSVGTag } from './utils/is-svg-tag.mjs';\nimport { frame } from '../../frameloop/frame.mjs';\n\nconst svgMotionConfig = {\n    useVisualState: makeUseVisualState({\n        scrapeMotionValuesFromProps: scrapeMotionValuesFromProps,\n        createRenderState: createSvgRenderState,\n        onMount: (props, instance, { renderState, latestValues }) => {\n            frame.read(() => {\n                try {\n                    renderState.dimensions =\n                        typeof instance.getBBox ===\n                            \"function\"\n                            ? instance.getBBox()\n                            : instance.getBoundingClientRect();\n                }\n                catch (e) {\n                    // Most likely trying to measure an unrendered element under Firefox\n                    renderState.dimensions = {\n                        x: 0,\n                        y: 0,\n                        width: 0,\n                        height: 0,\n                    };\n                }\n            });\n            frame.render(() => {\n                buildSVGAttrs(renderState, latestValues, { enableHardwareAcceleration: false }, isSVGTag(instance.tagName), props.transformTemplate);\n                renderSVG(instance, renderState);\n            });\n        },\n    }),\n};\n\nexport { svgMotionConfig };\n","import { makeUseVisualState } from '../../motion/utils/use-visual-state.mjs';\nimport { scrapeMotionValuesFromProps } from './utils/scrape-motion-values.mjs';\nimport { createHtmlRenderState } from './utils/create-render-state.mjs';\n\nconst htmlMotionConfig = {\n    useVisualState: makeUseVisualState({\n        scrapeMotionValuesFromProps,\n        createRenderState: createHtmlRenderState,\n    }),\n};\n\nexport { htmlMotionConfig };\n","import { isSVGComponent } from './is-svg-component.mjs';\nimport { createUseRender } from '../use-render.mjs';\nimport { svgMotionConfig } from '../../svg/config-motion.mjs';\nimport { htmlMotionConfig } from '../../html/config-motion.mjs';\n\nfunction createDomMotionConfig(Component, { forwardMotionProps = false }, preloadedFeatures, createVisualElement) {\n    const baseConfig = isSVGComponent(Component)\n        ? svgMotionConfig\n        : htmlMotionConfig;\n    return {\n        ...baseConfig,\n        preloadedFeatures,\n        useRender: createUseRender(forwardMotionProps),\n        createVisualElement,\n        Component,\n    };\n}\n\nexport { createDomMotionConfig };\n","function addDomEvent(target, eventName, handler, options = { passive: true }) {\n    target.addEventListener(eventName, handler, options);\n    return () => target.removeEventListener(eventName, handler);\n}\n\nexport { addDomEvent };\n","const isPrimaryPointer = (event) => {\n    if (event.pointerType === \"mouse\") {\n        return typeof event.button !== \"number\" || event.button <= 0;\n    }\n    else {\n        /**\n         * isPrimary is true for all mice buttons, whereas every touch point\n         * is regarded as its own input. So subsequent concurrent touch points\n         * will be false.\n         *\n         * Specifically match against false here as incomplete versions of\n         * PointerEvents in very old browser might have it set as undefined.\n         */\n        return event.isPrimary !== false;\n    }\n};\n\nexport { isPrimaryPointer };\n","import { isPrimaryPointer } from './utils/is-primary-pointer.mjs';\n\nfunction extractEventInfo(event, pointType = \"page\") {\n    return {\n        point: {\n            x: event[pointType + \"X\"],\n            y: event[pointType + \"Y\"],\n        },\n    };\n}\nconst addPointerInfo = (handler) => {\n    return (event) => isPrimaryPointer(event) && handler(event, extractEventInfo(event));\n};\n\nexport { addPointerInfo, extractEventInfo };\n","import { addDomEvent } from './add-dom-event.mjs';\nimport { addPointerInfo } from './event-info.mjs';\n\nfunction addPointerEvent(target, eventName, handler, options) {\n    return addDomEvent(target, eventName, addPointerInfo(handler), options);\n}\n\nexport { addPointerEvent };\n","/**\n * Pipe\n * Compose other transformers to run linearily\n * pipe(min(20), max(40))\n * @param  {...functions} transformers\n * @return {function}\n */\nconst combineFunctions = (a, b) => (v) => b(a(v));\nconst pipe = (...transformers) => transformers.reduce(combineFunctions);\n\nexport { pipe };\n","function createLock(name) {\n    let lock = null;\n    return () => {\n        const openLock = () => {\n            lock = null;\n        };\n        if (lock === null) {\n            lock = name;\n            return openLock;\n        }\n        return false;\n    };\n}\nconst globalHorizontalLock = createLock(\"dragHorizontal\");\nconst globalVerticalLock = createLock(\"dragVertical\");\nfunction getGlobalLock(drag) {\n    let lock = false;\n    if (drag === \"y\") {\n        lock = globalVerticalLock();\n    }\n    else if (drag === \"x\") {\n        lock = globalHorizontalLock();\n    }\n    else {\n        const openHorizontal = globalHorizontalLock();\n        const openVertical = globalVerticalLock();\n        if (openHorizontal && openVertical) {\n            lock = () => {\n                openHorizontal();\n                openVertical();\n            };\n        }\n        else {\n            // Release the locks because we don't use them\n            if (openHorizontal)\n                openHorizontal();\n            if (openVertical)\n                openVertical();\n        }\n    }\n    return lock;\n}\nfunction isDragActive() {\n    // Check the gesture lock - if we get it, it means no drag gesture is active\n    // and we can safely fire the tap gesture.\n    const openGestureLock = getGlobalLock(true);\n    if (!openGestureLock)\n        return true;\n    openGestureLock();\n    return false;\n}\n\nexport { createLock, getGlobalLock, isDragActive };\n","class Feature {\n    constructor(node) {\n        this.isMounted = false;\n        this.node = node;\n    }\n    update() { }\n}\n\nexport { Feature };\n","import { addPointerEvent } from '../events/add-pointer-event.mjs';\nimport { pipe } from '../utils/pipe.mjs';\nimport { isDragActive } from './drag/utils/lock.mjs';\nimport { Feature } from '../motion/features/Feature.mjs';\nimport { frame } from '../frameloop/frame.mjs';\n\nfunction addHoverEvent(node, isActive) {\n    const eventName = \"pointer\" + (isActive ? \"enter\" : \"leave\");\n    const callbackName = \"onHover\" + (isActive ? \"Start\" : \"End\");\n    const handleEvent = (event, info) => {\n        if (event.pointerType === \"touch\" || isDragActive())\n            return;\n        const props = node.getProps();\n        if (node.animationState && props.whileHover) {\n            node.animationState.setActive(\"whileHover\", isActive);\n        }\n        if (props[callbackName]) {\n            frame.update(() => props[callbackName](event, info));\n        }\n    };\n    return addPointerEvent(node.current, eventName, handleEvent, {\n        passive: !node.getProps()[callbackName],\n    });\n}\nclass HoverGesture extends Feature {\n    mount() {\n        this.unmount = pipe(addHoverEvent(this.node, true), addHoverEvent(this.node, false));\n    }\n    unmount() { }\n}\n\nexport { HoverGesture };\n","import { addDomEvent } from '../events/add-dom-event.mjs';\nimport { Feature } from '../motion/features/Feature.mjs';\nimport { pipe } from '../utils/pipe.mjs';\n\nclass FocusGesture extends Feature {\n    constructor() {\n        super(...arguments);\n        this.isActive = false;\n    }\n    onFocus() {\n        let isFocusVisible = false;\n        /**\n         * If this element doesn't match focus-visible then don't\n         * apply whileHover. But, if matches throws that focus-visible\n         * is not a valid selector then in that browser outline styles will be applied\n         * to the element by default and we want to match that behaviour with whileFocus.\n         */\n        try {\n            isFocusVisible = this.node.current.matches(\":focus-visible\");\n        }\n        catch (e) {\n            isFocusVisible = true;\n        }\n        if (!isFocusVisible || !this.node.animationState)\n            return;\n        this.node.animationState.setActive(\"whileFocus\", true);\n        this.isActive = true;\n    }\n    onBlur() {\n        if (!this.isActive || !this.node.animationState)\n            return;\n        this.node.animationState.setActive(\"whileFocus\", false);\n        this.isActive = false;\n    }\n    mount() {\n        this.unmount = pipe(addDomEvent(this.node.current, \"focus\", () => this.onFocus()), addDomEvent(this.node.current, \"blur\", () => this.onBlur()));\n    }\n    unmount() { }\n}\n\nexport { FocusGesture };\n","/**\n * Recursively traverse up the tree to check whether the provided child node\n * is the parent or a descendant of it.\n *\n * @param parent - Element to find\n * @param child - Element to test against parent\n */\nconst isNodeOrChild = (parent, child) => {\n    if (!child) {\n        return false;\n    }\n    else if (parent === child) {\n        return true;\n    }\n    else {\n        return isNodeOrChild(parent, child.parentElement);\n    }\n};\n\nexport { isNodeOrChild };\n","import { extractEventInfo } from '../events/event-info.mjs';\nimport { addDomEvent } from '../events/add-dom-event.mjs';\nimport { addPointerEvent } from '../events/add-pointer-event.mjs';\nimport { Feature } from '../motion/features/Feature.mjs';\nimport { pipe } from '../utils/pipe.mjs';\nimport { isDragActive } from './drag/utils/lock.mjs';\nimport { isNodeOrChild } from './utils/is-node-or-child.mjs';\nimport { noop } from '../utils/noop.mjs';\nimport { frame } from '../frameloop/frame.mjs';\n\nfunction fireSyntheticPointerEvent(name, handler) {\n    if (!handler)\n        return;\n    const syntheticPointerEvent = new PointerEvent(\"pointer\" + name);\n    handler(syntheticPointerEvent, extractEventInfo(syntheticPointerEvent));\n}\nclass PressGesture extends Feature {\n    constructor() {\n        super(...arguments);\n        this.removeStartListeners = noop;\n        this.removeEndListeners = noop;\n        this.removeAccessibleListeners = noop;\n        this.startPointerPress = (startEvent, startInfo) => {\n            if (this.isPressing)\n                return;\n            this.removeEndListeners();\n            const props = this.node.getProps();\n            const endPointerPress = (endEvent, endInfo) => {\n                if (!this.checkPressEnd())\n                    return;\n                const { onTap, onTapCancel, globalTapTarget } = this.node.getProps();\n                frame.update(() => {\n                    /**\n                     * We only count this as a tap gesture if the event.target is the same\n                     * as, or a child of, this component's element\n                     */\n                    !globalTapTarget &&\n                        !isNodeOrChild(this.node.current, endEvent.target)\n                        ? onTapCancel && onTapCancel(endEvent, endInfo)\n                        : onTap && onTap(endEvent, endInfo);\n                });\n            };\n            const removePointerUpListener = addPointerEvent(window, \"pointerup\", endPointerPress, { passive: !(props.onTap || props[\"onPointerUp\"]) });\n            const removePointerCancelListener = addPointerEvent(window, \"pointercancel\", (cancelEvent, cancelInfo) => this.cancelPress(cancelEvent, cancelInfo), { passive: !(props.onTapCancel || props[\"onPointerCancel\"]) });\n            this.removeEndListeners = pipe(removePointerUpListener, removePointerCancelListener);\n            this.startPress(startEvent, startInfo);\n        };\n        this.startAccessiblePress = () => {\n            const handleKeydown = (keydownEvent) => {\n                if (keydownEvent.key !== \"Enter\" || this.isPressing)\n                    return;\n                const handleKeyup = (keyupEvent) => {\n                    if (keyupEvent.key !== \"Enter\" || !this.checkPressEnd())\n                        return;\n                    fireSyntheticPointerEvent(\"up\", (event, info) => {\n                        const { onTap } = this.node.getProps();\n                        if (onTap) {\n                            frame.update(() => onTap(event, info));\n                        }\n                    });\n                };\n                this.removeEndListeners();\n                this.removeEndListeners = addDomEvent(this.node.current, \"keyup\", handleKeyup);\n                fireSyntheticPointerEvent(\"down\", (event, info) => {\n                    this.startPress(event, info);\n                });\n            };\n            const removeKeydownListener = addDomEvent(this.node.current, \"keydown\", handleKeydown);\n            const handleBlur = () => {\n                if (!this.isPressing)\n                    return;\n                fireSyntheticPointerEvent(\"cancel\", (cancelEvent, cancelInfo) => this.cancelPress(cancelEvent, cancelInfo));\n            };\n            const removeBlurListener = addDomEvent(this.node.current, \"blur\", handleBlur);\n            this.removeAccessibleListeners = pipe(removeKeydownListener, removeBlurListener);\n        };\n    }\n    startPress(event, info) {\n        this.isPressing = true;\n        const { onTapStart, whileTap } = this.node.getProps();\n        /**\n         * Ensure we trigger animations before firing event callback\n         */\n        if (whileTap && this.node.animationState) {\n            this.node.animationState.setActive(\"whileTap\", true);\n        }\n        if (onTapStart) {\n            frame.update(() => onTapStart(event, info));\n        }\n    }\n    checkPressEnd() {\n        this.removeEndListeners();\n        this.isPressing = false;\n        const props = this.node.getProps();\n        if (props.whileTap && this.node.animationState) {\n            this.node.animationState.setActive(\"whileTap\", false);\n        }\n        return !isDragActive();\n    }\n    cancelPress(event, info) {\n        if (!this.checkPressEnd())\n            return;\n        const { onTapCancel } = this.node.getProps();\n        if (onTapCancel) {\n            frame.update(() => onTapCancel(event, info));\n        }\n    }\n    mount() {\n        const props = this.node.getProps();\n        const removePointerListener = addPointerEvent(props.globalTapTarget ? window : this.node.current, \"pointerdown\", this.startPointerPress, { passive: !(props.onTapStart || props[\"onPointerStart\"]) });\n        const removeFocusListener = addDomEvent(this.node.current, \"focus\", this.startAccessiblePress);\n        this.removeStartListeners = pipe(removePointerListener, removeFocusListener);\n    }\n    unmount() {\n        this.removeStartListeners();\n        this.removeEndListeners();\n        this.removeAccessibleListeners();\n    }\n}\n\nexport { PressGesture };\n","/**\n * Map an IntersectionHandler callback to an element. We only ever make one handler for one\n * element, so even though these handlers might all be triggered by different\n * observers, we can keep them in the same map.\n */\nconst observerCallbacks = new WeakMap();\n/**\n * Multiple observers can be created for multiple element/document roots. Each with\n * different settings. So here we store dictionaries of observers to each root,\n * using serialised settings (threshold/margin) as lookup keys.\n */\nconst observers = new WeakMap();\nconst fireObserverCallback = (entry) => {\n    const callback = observerCallbacks.get(entry.target);\n    callback && callback(entry);\n};\nconst fireAllObserverCallbacks = (entries) => {\n    entries.forEach(fireObserverCallback);\n};\nfunction initIntersectionObserver({ root, ...options }) {\n    const lookupRoot = root || document;\n    /**\n     * If we don't have an observer lookup map for this root, create one.\n     */\n    if (!observers.has(lookupRoot)) {\n        observers.set(lookupRoot, {});\n    }\n    const rootObservers = observers.get(lookupRoot);\n    const key = JSON.stringify(options);\n    /**\n     * If we don't have an observer for this combination of root and settings,\n     * create one.\n     */\n    if (!rootObservers[key]) {\n        rootObservers[key] = new IntersectionObserver(fireAllObserverCallbacks, { root, ...options });\n    }\n    return rootObservers[key];\n}\nfunction observeIntersection(element, options, callback) {\n    const rootInteresectionObserver = initIntersectionObserver(options);\n    observerCallbacks.set(element, callback);\n    rootInteresectionObserver.observe(element);\n    return () => {\n        observerCallbacks.delete(element);\n        rootInteresectionObserver.unobserve(element);\n    };\n}\n\nexport { observeIntersection };\n","import { Feature } from '../Feature.mjs';\nimport { observeIntersection } from './observers.mjs';\n\nconst thresholdNames = {\n    some: 0,\n    all: 1,\n};\nclass InViewFeature extends Feature {\n    constructor() {\n        super(...arguments);\n        this.hasEnteredView = false;\n        this.isInView = false;\n    }\n    startObserver() {\n        this.unmount();\n        const { viewport = {} } = this.node.getProps();\n        const { root, margin: rootMargin, amount = \"some\", once } = viewport;\n        const options = {\n            root: root ? root.current : undefined,\n            rootMargin,\n            threshold: typeof amount === \"number\" ? amount : thresholdNames[amount],\n        };\n        const onIntersectionUpdate = (entry) => {\n            const { isIntersecting } = entry;\n            /**\n             * If there's been no change in the viewport state, early return.\n             */\n            if (this.isInView === isIntersecting)\n                return;\n            this.isInView = isIntersecting;\n            /**\n             * Handle hasEnteredView. If this is only meant to run once, and\n             * element isn't visible, early return. Otherwise set hasEnteredView to true.\n             */\n            if (once && !isIntersecting && this.hasEnteredView) {\n                return;\n            }\n            else if (isIntersecting) {\n                this.hasEnteredView = true;\n            }\n            if (this.node.animationState) {\n                this.node.animationState.setActive(\"whileInView\", isIntersecting);\n            }\n            /**\n             * Use the latest committed props rather than the ones in scope\n             * when this observer is created\n             */\n            const { onViewportEnter, onViewportLeave } = this.node.getProps();\n            const callback = isIntersecting ? onViewportEnter : onViewportLeave;\n            callback && callback(entry);\n        };\n        return observeIntersection(this.node.current, options, onIntersectionUpdate);\n    }\n    mount() {\n        this.startObserver();\n    }\n    update() {\n        if (typeof IntersectionObserver === \"undefined\")\n            return;\n        const { props, prevProps } = this.node;\n        const hasOptionsChanged = [\"amount\", \"margin\", \"root\"].some(hasViewportOptionChanged(props, prevProps));\n        if (hasOptionsChanged) {\n            this.startObserver();\n        }\n    }\n    unmount() { }\n}\nfunction hasViewportOptionChanged({ viewport = {} }, { viewport: prevViewport = {} } = {}) {\n    return (name) => viewport[name] !== prevViewport[name];\n}\n\nexport { InViewFeature };\n","import { HoverGesture } from '../../gestures/hover.mjs';\nimport { FocusGesture } from '../../gestures/focus.mjs';\nimport { PressGesture } from '../../gestures/press.mjs';\nimport { InViewFeature } from './viewport/index.mjs';\n\nconst gestureAnimations = {\n    inView: {\n        Feature: InViewFeature,\n    },\n    tap: {\n        Feature: PressGesture,\n    },\n    focus: {\n        Feature: FocusGesture,\n    },\n    hover: {\n        Feature: HoverGesture,\n    },\n};\n\nexport { gestureAnimations };\n","function shallowCompare(next, prev) {\n    if (!Array.isArray(prev))\n        return false;\n    const prevLength = prev.length;\n    if (prevLength !== next.length)\n        return false;\n    for (let i = 0; i < prevLength; i++) {\n        if (prev[i] !== next[i])\n            return false;\n    }\n    return true;\n}\n\nexport { shallowCompare };\n","import { resolveVariantFromProps } from './resolve-variants.mjs';\n\n/**\n * Creates an object containing the latest state of every MotionValue on a VisualElement\n */\nfunction getCurrent(visualElement) {\n    const current = {};\n    visualElement.values.forEach((value, key) => (current[key] = value.get()));\n    return current;\n}\n/**\n * Creates an object containing the latest velocity of every MotionValue on a VisualElement\n */\nfunction getVelocity(visualElement) {\n    const velocity = {};\n    visualElement.values.forEach((value, key) => (velocity[key] = value.getVelocity()));\n    return velocity;\n}\nfunction resolveVariant(visualElement, definition, custom) {\n    const props = visualElement.getProps();\n    return resolveVariantFromProps(props, definition, custom !== undefined ? custom : props.custom, getCurrent(visualElement), getVelocity(visualElement));\n}\n\nexport { resolveVariant };\n","import { noop } from './noop.mjs';\n\nlet warning = noop;\nlet invariant = noop;\nif (process.env.NODE_ENV !== \"production\") {\n    warning = (check, message) => {\n        if (!check && typeof console !== \"undefined\") {\n            console.warn(message);\n        }\n    };\n    invariant = (check, message) => {\n        if (!check) {\n            throw new Error(message);\n        }\n    };\n}\n\nexport { invariant, warning };\n","/**\n * Converts seconds to milliseconds\n *\n * @param seconds - Time in seconds.\n * @return milliseconds - Converted time in milliseconds.\n */\nconst secondsToMilliseconds = (seconds) => seconds * 1000;\nconst millisecondsToSeconds = (milliseconds) => milliseconds / 1000;\n\nexport { millisecondsToSeconds, secondsToMilliseconds };\n","const instantAnimationState = {\n    current: false,\n};\n\nexport { instantAnimationState };\n","const isBezierDefinition = (easing) => Array.isArray(easing) && typeof easing[0] === \"number\";\n\nexport { isBezierDefinition };\n","import { isBezierDefinition } from '../../../easing/utils/is-bezier-definition.mjs';\n\nfunction isWaapiSupportedEasing(easing) {\n    return Boolean(!easing ||\n        (typeof easing === \"string\" && supportedWaapiEasing[easing]) ||\n        isBezierDefinition(easing) ||\n        (Array.isArray(easing) && easing.every(isWaapiSupportedEasing)));\n}\nconst cubicBezierAsString = ([a, b, c, d]) => `cubic-bezier(${a}, ${b}, ${c}, ${d})`;\nconst supportedWaapiEasing = {\n    linear: \"linear\",\n    ease: \"ease\",\n    easeIn: \"ease-in\",\n    easeOut: \"ease-out\",\n    easeInOut: \"ease-in-out\",\n    circIn: cubicBezierAsString([0, 0.65, 0.55, 1]),\n    circOut: cubicBezierAsString([0.55, 0, 1, 0.45]),\n    backIn: cubicBezierAsString([0.31, 0.01, 0.66, -0.59]),\n    backOut: cubicBezierAsString([0.33, 1.53, 0.69, 0.99]),\n};\nfunction mapEasingToNativeEasing(easing) {\n    if (!easing)\n        return undefined;\n    return isBezierDefinition(easing)\n        ? cubicBezierAsString(easing)\n        : Array.isArray(easing)\n            ? easing.map(mapEasingToNativeEasing)\n            : supportedWaapiEasing[easing];\n}\n\nexport { cubicBezierAsString, isWaapiSupportedEasing, mapEasingToNativeEasing, supportedWaapiEasing };\n","import { mapEasingToNativeEasing } from './easing.mjs';\n\nfunction animateStyle(element, valueName, keyframes, { delay = 0, duration, repeat = 0, repeatType = \"loop\", ease, times, } = {}) {\n    const keyframeOptions = { [valueName]: keyframes };\n    if (times)\n        keyframeOptions.offset = times;\n    const easing = mapEasingToNativeEasing(ease);\n    /**\n     * If this is an easing array, apply to keyframes, not animation as a whole\n     */\n    if (Array.isArray(easing))\n        keyframeOptions.easing = easing;\n    return element.animate(keyframeOptions, {\n        delay,\n        duration,\n        easing: !Array.isArray(easing) ? easing : \"linear\",\n        fill: \"both\",\n        iterations: repeat + 1,\n        direction: repeatType === \"reverse\" ? \"alternate\" : \"normal\",\n    });\n}\n\nexport { animateStyle };\n","function getFinalKeyframe(keyframes, { repeat, repeatType = \"loop\" }) {\n    const index = repeat && repeatType !== \"loop\" && repeat % 2 === 1\n        ? 0\n        : keyframes.length - 1;\n    return keyframes[index];\n}\n\nexport { getFinalKeyframe };\n","import { noop } from '../utils/noop.mjs';\n\n/*\n  Bezier function generator\n  This has been modified from Gaëtan Renaudeau's BezierEasing\n  https://github.com/gre/bezier-easing/blob/master/src/index.js\n  https://github.com/gre/bezier-easing/blob/master/LICENSE\n  \n  I've removed the newtonRaphsonIterate algo because in benchmarking it\n  wasn't noticiably faster than binarySubdivision, indeed removing it\n  usually improved times, depending on the curve.\n  I also removed the lookup table, as for the added bundle size and loop we're\n  only cutting ~4 or so subdivision iterations. I bumped the max iterations up\n  to 12 to compensate and this still tended to be faster for no perceivable\n  loss in accuracy.\n  Usage\n    const easeOut = cubicBezier(.17,.67,.83,.67);\n    const x = easeOut(0.5); // returns 0.627...\n*/\n// Returns x(t) given t, x1, and x2, or y(t) given t, y1, and y2.\nconst calcBezier = (t, a1, a2) => (((1.0 - 3.0 * a2 + 3.0 * a1) * t + (3.0 * a2 - 6.0 * a1)) * t + 3.0 * a1) *\n    t;\nconst subdivisionPrecision = 0.0000001;\nconst subdivisionMaxIterations = 12;\nfunction binarySubdivide(x, lowerBound, upperBound, mX1, mX2) {\n    let currentX;\n    let currentT;\n    let i = 0;\n    do {\n        currentT = lowerBound + (upperBound - lowerBound) / 2.0;\n        currentX = calcBezier(currentT, mX1, mX2) - x;\n        if (currentX > 0.0) {\n            upperBound = currentT;\n        }\n        else {\n            lowerBound = currentT;\n        }\n    } while (Math.abs(currentX) > subdivisionPrecision &&\n        ++i < subdivisionMaxIterations);\n    return currentT;\n}\nfunction cubicBezier(mX1, mY1, mX2, mY2) {\n    // If this is a linear gradient, return linear easing\n    if (mX1 === mY1 && mX2 === mY2)\n        return noop;\n    const getTForX = (aX) => binarySubdivide(aX, 0, 1, mX1, mX2);\n    // If animation is at start/end, return t without easing\n    return (t) => t === 0 || t === 1 ? t : calcBezier(getTForX(t), mY1, mY2);\n}\n\nexport { cubicBezier };\n","import { cubicBezier } from './cubic-bezier.mjs';\n\nconst easeIn = cubicBezier(0.42, 0, 1, 1);\nconst easeOut = cubicBezier(0, 0, 0.58, 1);\nconst easeInOut = cubicBezier(0.42, 0, 0.58, 1);\n\nexport { easeIn, easeInOut, easeOut };\n","const isEasingArray = (ease) => {\n    return Array.isArray(ease) && typeof ease[0] !== \"number\";\n};\n\nexport { isEasingArray };\n","// Accepts an easing function and returns a new one that outputs mirrored values for\n// the second half of the animation. Turns easeIn into easeInOut.\nconst mirrorEasing = (easing) => (p) => p <= 0.5 ? easing(2 * p) / 2 : (2 - easing(2 * (1 - p))) / 2;\n\nexport { mirrorEasing };\n","// Accepts an easing function and returns a new one that outputs reversed values.\n// Turns easeIn into easeOut.\nconst reverseEasing = (easing) => (p) => 1 - easing(1 - p);\n\nexport { reverseEasing };\n","import { mirrorEasing } from './modifiers/mirror.mjs';\nimport { reverseEasing } from './modifiers/reverse.mjs';\n\nconst circIn = (p) => 1 - Math.sin(Math.acos(p));\nconst circOut = reverseEasing(circIn);\nconst circInOut = mirrorEasing(circIn);\n\nexport { circIn, circInOut, circOut };\n","import { cubicBezier } from './cubic-bezier.mjs';\nimport { mirrorEasing } from './modifiers/mirror.mjs';\nimport { reverseEasing } from './modifiers/reverse.mjs';\n\nconst backOut = cubicBezier(0.33, 1.53, 0.69, 0.99);\nconst backIn = reverseEasing(backOut);\nconst backInOut = mirrorEasing(backIn);\n\nexport { backIn, backInOut, backOut };\n","import { backIn } from './back.mjs';\n\nconst anticipate = (p) => (p *= 2) < 1 ? 0.5 * backIn(p) : 0.5 * (2 - Math.pow(2, -10 * (p - 1)));\n\nexport { anticipate };\n","import { invariant } from '../../utils/errors.mjs';\nimport { cubicBezier } from '../cubic-bezier.mjs';\nimport { noop } from '../../utils/noop.mjs';\nimport { easeIn, easeInOut, easeOut } from '../ease.mjs';\nimport { circIn, circInOut, circOut } from '../circ.mjs';\nimport { backIn, backInOut, backOut } from '../back.mjs';\nimport { anticipate } from '../anticipate.mjs';\n\nconst easingLookup = {\n    linear: noop,\n    easeIn,\n    easeInOut,\n    easeOut,\n    circIn,\n    circInOut,\n    circOut,\n    backIn,\n    backInOut,\n    backOut,\n    anticipate,\n};\nconst easingDefinitionToFunction = (definition) => {\n    if (Array.isArray(definition)) {\n        // If cubic bezier definition, create bezier curve\n        invariant(definition.length === 4, `Cubic bezier arrays must contain four numerical values.`);\n        const [x1, y1, x2, y2] = definition;\n        return cubicBezier(x1, y1, x2, y2);\n    }\n    else if (typeof definition === \"string\") {\n        // Else lookup from table\n        invariant(easingLookup[definition] !== undefined, `Invalid easing type '${definition}'`);\n        return easingLookup[definition];\n    }\n    return definition;\n};\n\nexport { easingDefinitionToFunction };\n","import { isString, singleColorRegex, floatRegex } from '../utils.mjs';\n\n/**\n * Returns true if the provided string is a color, ie rgba(0,0,0,0) or #000,\n * but false if a number or multiple colors\n */\nconst isColorString = (type, testProp) => (v) => {\n    return Boolean((isString(v) && singleColorRegex.test(v) && v.startsWith(type)) ||\n        (testProp && Object.prototype.hasOwnProperty.call(v, testProp)));\n};\nconst splitColor = (aName, bName, cName) => (v) => {\n    if (!isString(v))\n        return v;\n    const [a, b, c, alpha] = v.match(floatRegex);\n    return {\n        [aName]: parseFloat(a),\n        [bName]: parseFloat(b),\n        [cName]: parseFloat(c),\n        alpha: alpha !== undefined ? parseFloat(alpha) : 1,\n    };\n};\n\nexport { isColorString, splitColor };\n","import { clamp } from '../../../utils/clamp.mjs';\nimport { number, alpha } from '../numbers/index.mjs';\nimport { sanitize } from '../utils.mjs';\nimport { isColorString, splitColor } from './utils.mjs';\n\nconst clampRgbUnit = (v) => clamp(0, 255, v);\nconst rgbUnit = {\n    ...number,\n    transform: (v) => Math.round(clampRgbUnit(v)),\n};\nconst rgba = {\n    test: isColorString(\"rgb\", \"red\"),\n    parse: splitColor(\"red\", \"green\", \"blue\"),\n    transform: ({ red, green, blue, alpha: alpha$1 = 1 }) => \"rgba(\" +\n        rgbUnit.transform(red) +\n        \", \" +\n        rgbUnit.transform(green) +\n        \", \" +\n        rgbUnit.transform(blue) +\n        \", \" +\n        sanitize(alpha.transform(alpha$1)) +\n        \")\",\n};\n\nexport { rgbUnit, rgba };\n","import { rgba } from './rgba.mjs';\nimport { isColorString } from './utils.mjs';\n\nfunction parseHex(v) {\n    let r = \"\";\n    let g = \"\";\n    let b = \"\";\n    let a = \"\";\n    // If we have 6 characters, ie #FF0000\n    if (v.length > 5) {\n        r = v.substring(1, 3);\n        g = v.substring(3, 5);\n        b = v.substring(5, 7);\n        a = v.substring(7, 9);\n        // Or we have 3 characters, ie #F00\n    }\n    else {\n        r = v.substring(1, 2);\n        g = v.substring(2, 3);\n        b = v.substring(3, 4);\n        a = v.substring(4, 5);\n        r += r;\n        g += g;\n        b += b;\n        a += a;\n    }\n    return {\n        red: parseInt(r, 16),\n        green: parseInt(g, 16),\n        blue: parseInt(b, 16),\n        alpha: a ? parseInt(a, 16) / 255 : 1,\n    };\n}\nconst hex = {\n    test: isColorString(\"#\"),\n    parse: parseHex,\n    transform: rgba.transform,\n};\n\nexport { hex };\n","import { alpha } from '../numbers/index.mjs';\nimport { percent } from '../numbers/units.mjs';\nimport { sanitize } from '../utils.mjs';\nimport { isColorString, splitColor } from './utils.mjs';\n\nconst hsla = {\n    test: isColorString(\"hsl\", \"hue\"),\n    parse: splitColor(\"hue\", \"saturation\", \"lightness\"),\n    transform: ({ hue, saturation, lightness, alpha: alpha$1 = 1 }) => {\n        return (\"hsla(\" +\n            Math.round(hue) +\n            \", \" +\n            percent.transform(sanitize(saturation)) +\n            \", \" +\n            percent.transform(sanitize(lightness)) +\n            \", \" +\n            sanitize(alpha.transform(alpha$1)) +\n            \")\");\n    },\n};\n\nexport { hsla };\n","import { isString } from '../utils.mjs';\nimport { hex } from './hex.mjs';\nimport { hsla } from './hsla.mjs';\nimport { rgba } from './rgba.mjs';\n\nconst color = {\n    test: (v) => rgba.test(v) || hex.test(v) || hsla.test(v),\n    parse: (v) => {\n        if (rgba.test(v)) {\n            return rgba.parse(v);\n        }\n        else if (hsla.test(v)) {\n            return hsla.parse(v);\n        }\n        else {\n            return hex.parse(v);\n        }\n    },\n    transform: (v) => {\n        return isString(v)\n            ? v\n            : v.hasOwnProperty(\"red\")\n                ? rgba.transform(v)\n                : hsla.transform(v);\n    },\n};\n\nexport { color };\n","/*\n  Value in range from progress\n\n  Given a lower limit and an upper limit, we return the value within\n  that range as expressed by progress (usually a number from 0 to 1)\n\n  So progress = 0.5 would change\n\n  from -------- to\n\n  to\n\n  from ---- to\n\n  E.g. from = 10, to = 20, progress = 0.5 => 15\n\n  @param [number]: Lower limit of range\n  @param [number]: Upper limit of range\n  @param [number]: The progress between lower and upper limits expressed 0-1\n  @return [number]: Value as calculated from progress within range (not limited within range)\n*/\nconst mix = (from, to, progress) => -progress * from + progress * to + from;\n\nexport { mix };\n","// Adapted from https://gist.github.com/mjackson/5311256\nfunction hueToRgb(p, q, t) {\n    if (t < 0)\n        t += 1;\n    if (t > 1)\n        t -= 1;\n    if (t < 1 / 6)\n        return p + (q - p) * 6 * t;\n    if (t < 1 / 2)\n        return q;\n    if (t < 2 / 3)\n        return p + (q - p) * (2 / 3 - t) * 6;\n    return p;\n}\nfunction hslaToRgba({ hue, saturation, lightness, alpha }) {\n    hue /= 360;\n    saturation /= 100;\n    lightness /= 100;\n    let red = 0;\n    let green = 0;\n    let blue = 0;\n    if (!saturation) {\n        red = green = blue = lightness;\n    }\n    else {\n        const q = lightness < 0.5\n            ? lightness * (1 + saturation)\n            : lightness + saturation - lightness * saturation;\n        const p = 2 * lightness - q;\n        red = hueToRgb(p, q, hue + 1 / 3);\n        green = hueToRgb(p, q, hue);\n        blue = hueToRgb(p, q, hue - 1 / 3);\n    }\n    return {\n        red: Math.round(red * 255),\n        green: Math.round(green * 255),\n        blue: Math.round(blue * 255),\n        alpha,\n    };\n}\n\nexport { hslaToRgba };\n","import { mix } from './mix.mjs';\nimport { invariant } from './errors.mjs';\nimport { hslaToRgba } from './hsla-to-rgba.mjs';\nimport { hex } from '../value/types/color/hex.mjs';\nimport { rgba } from '../value/types/color/rgba.mjs';\nimport { hsla } from '../value/types/color/hsla.mjs';\n\n// Linear color space blending\n// Explained https://www.youtube.com/watch?v=LKnqECcg6Gw\n// Demonstrated http://codepen.io/osublake/pen/xGVVaN\nconst mixLinearColor = (from, to, v) => {\n    const fromExpo = from * from;\n    return Math.sqrt(Math.max(0, v * (to * to - fromExpo) + fromExpo));\n};\nconst colorTypes = [hex, rgba, hsla];\nconst getColorType = (v) => colorTypes.find((type) => type.test(v));\nfunction asRGBA(color) {\n    const type = getColorType(color);\n    invariant(Boolean(type), `'${color}' is not an animatable color. Use the equivalent color code instead.`);\n    let model = type.parse(color);\n    if (type === hsla) {\n        // TODO Remove this cast - needed since Framer Motion's stricter typing\n        model = hslaToRgba(model);\n    }\n    return model;\n}\nconst mixColor = (from, to) => {\n    const fromRGBA = asRGBA(from);\n    const toRGBA = asRGBA(to);\n    const blended = { ...fromRGBA };\n    return (v) => {\n        blended.red = mixLinearColor(fromRGBA.red, toRGBA.red, v);\n        blended.green = mixLinearColor(fromRGBA.green, toRGBA.green, v);\n        blended.blue = mixLinearColor(fromRGBA.blue, toRGBA.blue, v);\n        blended.alpha = mix(fromRGBA.alpha, toRGBA.alpha, v);\n        return rgba.transform(blended);\n    };\n};\n\nexport { mixColor, mixLinearColor };\n","import { cssVariableRegex } from '../../../render/dom/utils/is-css-variable.mjs';\nimport { noop } from '../../../utils/noop.mjs';\nimport { color } from '../color/index.mjs';\nimport { number } from '../numbers/index.mjs';\nimport { colorRegex, floatRegex, isString, sanitize } from '../utils.mjs';\n\nfunction test(v) {\n    var _a, _b;\n    return (isNaN(v) &&\n        isString(v) &&\n        (((_a = v.match(floatRegex)) === null || _a === void 0 ? void 0 : _a.length) || 0) +\n            (((_b = v.match(colorRegex)) === null || _b === void 0 ? void 0 : _b.length) || 0) >\n            0);\n}\nconst cssVarTokeniser = {\n    regex: cssVariableRegex,\n    countKey: \"Vars\",\n    token: \"${v}\",\n    parse: noop,\n};\nconst colorTokeniser = {\n    regex: colorRegex,\n    countKey: \"Colors\",\n    token: \"${c}\",\n    parse: color.parse,\n};\nconst numberTokeniser = {\n    regex: floatRegex,\n    countKey: \"Numbers\",\n    token: \"${n}\",\n    parse: number.parse,\n};\nfunction tokenise(info, { regex, countKey, token, parse }) {\n    const matches = info.tokenised.match(regex);\n    if (!matches)\n        return;\n    info[\"num\" + countKey] = matches.length;\n    info.tokenised = info.tokenised.replace(regex, token);\n    info.values.push(...matches.map(parse));\n}\nfunction analyseComplexValue(value) {\n    const originalValue = value.toString();\n    const info = {\n        value: originalValue,\n        tokenised: originalValue,\n        values: [],\n        numVars: 0,\n        numColors: 0,\n        numNumbers: 0,\n    };\n    if (info.value.includes(\"var(--\"))\n        tokenise(info, cssVarTokeniser);\n    tokenise(info, colorTokeniser);\n    tokenise(info, numberTokeniser);\n    return info;\n}\nfunction parseComplexValue(v) {\n    return analyseComplexValue(v).values;\n}\nfunction createTransformer(source) {\n    const { values, numColors, numVars, tokenised } = analyseComplexValue(source);\n    const numValues = values.length;\n    return (v) => {\n        let output = tokenised;\n        for (let i = 0; i < numValues; i++) {\n            if (i < numVars) {\n                output = output.replace(cssVarTokeniser.token, v[i]);\n            }\n            else if (i < numVars + numColors) {\n                output = output.replace(colorTokeniser.token, color.transform(v[i]));\n            }\n            else {\n                output = output.replace(numberTokeniser.token, sanitize(v[i]));\n            }\n        }\n        return output;\n    };\n}\nconst convertNumbersToZero = (v) => typeof v === \"number\" ? 0 : v;\nfunction getAnimatableNone(v) {\n    const parsed = parseComplexValue(v);\n    const transformer = createTransformer(v);\n    return transformer(parsed.map(convertNumbersToZero));\n}\nconst complex = {\n    test,\n    parse: parseComplexValue,\n    createTransformer,\n    getAnimatableNone,\n};\n\nexport { analyseComplexValue, complex };\n","import { mix } from './mix.mjs';\nimport { mixColor } from './mix-color.mjs';\nimport { pipe } from './pipe.mjs';\nimport { warning } from './errors.mjs';\nimport { color } from '../value/types/color/index.mjs';\nimport { complex, analyseComplexValue } from '../value/types/complex/index.mjs';\n\nconst mixImmediate = (origin, target) => (p) => `${p > 0 ? target : origin}`;\nfunction getMixer(origin, target) {\n    if (typeof origin === \"number\") {\n        return (v) => mix(origin, target, v);\n    }\n    else if (color.test(origin)) {\n        return mixColor(origin, target);\n    }\n    else {\n        return origin.startsWith(\"var(\")\n            ? mixImmediate(origin, target)\n            : mixComplex(origin, target);\n    }\n}\nconst mixArray = (from, to) => {\n    const output = [...from];\n    const numValues = output.length;\n    const blendValue = from.map((fromThis, i) => getMixer(fromThis, to[i]));\n    return (v) => {\n        for (let i = 0; i < numValues; i++) {\n            output[i] = blendValue[i](v);\n        }\n        return output;\n    };\n};\nconst mixObject = (origin, target) => {\n    const output = { ...origin, ...target };\n    const blendValue = {};\n    for (const key in output) {\n        if (origin[key] !== undefined && target[key] !== undefined) {\n            blendValue[key] = getMixer(origin[key], target[key]);\n        }\n    }\n    return (v) => {\n        for (const key in blendValue) {\n            output[key] = blendValue[key](v);\n        }\n        return output;\n    };\n};\nconst mixComplex = (origin, target) => {\n    const template = complex.createTransformer(target);\n    const originStats = analyseComplexValue(origin);\n    const targetStats = analyseComplexValue(target);\n    const canInterpolate = originStats.numVars === targetStats.numVars &&\n        originStats.numColors === targetStats.numColors &&\n        originStats.numNumbers >= targetStats.numNumbers;\n    if (canInterpolate) {\n        return pipe(mixArray(originStats.values, targetStats.values), template);\n    }\n    else {\n        warning(true, `Complex values '${origin}' and '${target}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`);\n        return mixImmediate(origin, target);\n    }\n};\n\nexport { mixArray, mixComplex, mixObject };\n","/*\n  Progress within given range\n\n  Given a lower limit and an upper limit, we return the progress\n  (expressed as a number 0-1) represented by the given value, and\n  limit that progress to within 0-1.\n\n  @param [number]: Lower limit\n  @param [number]: Upper limit\n  @param [number]: Value to find progress within given range\n  @return [number]: Progress of value within range as expressed 0-1\n*/\nconst progress = (from, to, value) => {\n    const toFromDifference = to - from;\n    return toFromDifference === 0 ? 1 : (value - from) / toFromDifference;\n};\n\nexport { progress };\n","import { invariant } from './errors.mjs';\nimport { color } from '../value/types/color/index.mjs';\nimport { clamp } from './clamp.mjs';\nimport { mix } from './mix.mjs';\nimport { mixColor } from './mix-color.mjs';\nimport { mixComplex, mixArray, mixObject } from './mix-complex.mjs';\nimport { pipe } from './pipe.mjs';\nimport { progress } from './progress.mjs';\nimport { noop } from './noop.mjs';\n\nconst mixNumber = (from, to) => (p) => mix(from, to, p);\nfunction detectMixerFactory(v) {\n    if (typeof v === \"number\") {\n        return mixNumber;\n    }\n    else if (typeof v === \"string\") {\n        return color.test(v) ? mixColor : mixComplex;\n    }\n    else if (Array.isArray(v)) {\n        return mixArray;\n    }\n    else if (typeof v === \"object\") {\n        return mixObject;\n    }\n    return mixNumber;\n}\nfunction createMixers(output, ease, customMixer) {\n    const mixers = [];\n    const mixerFactory = customMixer || detectMixerFactory(output[0]);\n    const numMixers = output.length - 1;\n    for (let i = 0; i < numMixers; i++) {\n        let mixer = mixerFactory(output[i], output[i + 1]);\n        if (ease) {\n            const easingFunction = Array.isArray(ease) ? ease[i] || noop : ease;\n            mixer = pipe(easingFunction, mixer);\n        }\n        mixers.push(mixer);\n    }\n    return mixers;\n}\n/**\n * Create a function that maps from a numerical input array to a generic output array.\n *\n * Accepts:\n *   - Numbers\n *   - Colors (hex, hsl, hsla, rgb, rgba)\n *   - Complex (combinations of one or more numbers or strings)\n *\n * ```jsx\n * const mixColor = interpolate([0, 1], ['#fff', '#000'])\n *\n * mixColor(0.5) // 'rgba(128, 128, 128, 1)'\n * ```\n *\n * TODO Revist this approach once we've moved to data models for values,\n * probably not needed to pregenerate mixer functions.\n *\n * @public\n */\nfunction interpolate(input, output, { clamp: isClamp = true, ease, mixer } = {}) {\n    const inputLength = input.length;\n    invariant(inputLength === output.length, \"Both input and output ranges must be the same length\");\n    /**\n     * If we're only provided a single input, we can just make a function\n     * that returns the output.\n     */\n    if (inputLength === 1)\n        return () => output[0];\n    // If input runs highest -> lowest, reverse both arrays\n    if (input[0] > input[inputLength - 1]) {\n        input = [...input].reverse();\n        output = [...output].reverse();\n    }\n    const mixers = createMixers(output, ease, mixer);\n    const numMixers = mixers.length;\n    const interpolator = (v) => {\n        let i = 0;\n        if (numMixers > 1) {\n            for (; i < input.length - 2; i++) {\n                if (v < input[i + 1])\n                    break;\n            }\n        }\n        const progressInRange = progress(input[i], input[i + 1], v);\n        return mixers[i](progressInRange);\n    };\n    return isClamp\n        ? (v) => interpolator(clamp(input[0], input[inputLength - 1], v))\n        : interpolator;\n}\n\nexport { interpolate };\n","import { mix } from '../mix.mjs';\nimport { progress } from '../progress.mjs';\n\nfunction fillOffset(offset, remaining) {\n    const min = offset[offset.length - 1];\n    for (let i = 1; i <= remaining; i++) {\n        const offsetProgress = progress(0, remaining, i);\n        offset.push(mix(min, 1, offsetProgress));\n    }\n}\n\nexport { fillOffset };\n","import { fillOffset } from './fill.mjs';\n\nfunction defaultOffset(arr) {\n    const offset = [0];\n    fillOffset(offset, arr.length - 1);\n    return offset;\n}\n\nexport { defaultOffset };\n","function convertOffsetToTimes(offset, duration) {\n    return offset.map((o) => o * duration);\n}\n\nexport { convertOffsetToTimes };\n","import { easeInOut } from '../../easing/ease.mjs';\nimport { isEasingArray } from '../../easing/utils/is-easing-array.mjs';\nimport { easingDefinitionToFunction } from '../../easing/utils/map.mjs';\nimport { interpolate } from '../../utils/interpolate.mjs';\nimport { defaultOffset } from '../../utils/offsets/default.mjs';\nimport { convertOffsetToTimes } from '../../utils/offsets/time.mjs';\n\nfunction defaultEasing(values, easing) {\n    return values.map(() => easing || easeInOut).splice(0, values.length - 1);\n}\nfunction keyframes({ duration = 300, keyframes: keyframeValues, times, ease = \"easeInOut\", }) {\n    /**\n     * Easing functions can be externally defined as strings. Here we convert them\n     * into actual functions.\n     */\n    const easingFunctions = isEasingArray(ease)\n        ? ease.map(easingDefinitionToFunction)\n        : easingDefinitionToFunction(ease);\n    /**\n     * This is the Iterator-spec return value. We ensure it's mutable rather than using a generator\n     * to reduce GC during animation.\n     */\n    const state = {\n        done: false,\n        value: keyframeValues[0],\n    };\n    /**\n     * Create a times array based on the provided 0-1 offsets\n     */\n    const absoluteTimes = convertOffsetToTimes(\n    // Only use the provided offsets if they're the correct length\n    // TODO Maybe we should warn here if there's a length mismatch\n    times && times.length === keyframeValues.length\n        ? times\n        : defaultOffset(keyframeValues), duration);\n    const mapTimeToKeyframe = interpolate(absoluteTimes, keyframeValues, {\n        ease: Array.isArray(easingFunctions)\n            ? easingFunctions\n            : defaultEasing(keyframeValues, easingFunctions),\n    });\n    return {\n        calculatedDuration: duration,\n        next: (t) => {\n            state.value = mapTimeToKeyframe(t);\n            state.done = t >= duration;\n            return state;\n        },\n    };\n}\n\nexport { defaultEasing, keyframes };\n","/*\n  Convert velocity into velocity per second\n\n  @param [number]: Unit per frame\n  @param [number]: Frame duration in ms\n*/\nfunction velocityPerSecond(velocity, frameDuration) {\n    return frameDuration ? velocity * (1000 / frameDuration) : 0;\n}\n\nexport { velocityPerSecond };\n","import { velocityPerSecond } from '../../../utils/velocity-per-second.mjs';\n\nconst velocitySampleDuration = 5; // ms\nfunction calcGeneratorVelocity(resolveValue, t, current) {\n    const prevT = Math.max(t - velocitySampleDuration, 0);\n    return velocityPerSecond(current - resolveValue(prevT), t - prevT);\n}\n\nexport { calcGeneratorVelocity };\n","import { warning } from '../../../utils/errors.mjs';\nimport { clamp } from '../../../utils/clamp.mjs';\nimport { secondsToMilliseconds, millisecondsToSeconds } from '../../../utils/time-conversion.mjs';\n\nconst safeMin = 0.001;\nconst minDuration = 0.01;\nconst maxDuration = 10.0;\nconst minDamping = 0.05;\nconst maxDamping = 1;\nfunction findSpring({ duration = 800, bounce = 0.25, velocity = 0, mass = 1, }) {\n    let envelope;\n    let derivative;\n    warning(duration <= secondsToMilliseconds(maxDuration), \"Spring duration must be 10 seconds or less\");\n    let dampingRatio = 1 - bounce;\n    /**\n     * Restrict dampingRatio and duration to within acceptable ranges.\n     */\n    dampingRatio = clamp(minDamping, maxDamping, dampingRatio);\n    duration = clamp(minDuration, maxDuration, millisecondsToSeconds(duration));\n    if (dampingRatio < 1) {\n        /**\n         * Underdamped spring\n         */\n        envelope = (undampedFreq) => {\n            const exponentialDecay = undampedFreq * dampingRatio;\n            const delta = exponentialDecay * duration;\n            const a = exponentialDecay - velocity;\n            const b = calcAngularFreq(undampedFreq, dampingRatio);\n            const c = Math.exp(-delta);\n            return safeMin - (a / b) * c;\n        };\n        derivative = (undampedFreq) => {\n            const exponentialDecay = undampedFreq * dampingRatio;\n            const delta = exponentialDecay * duration;\n            const d = delta * velocity + velocity;\n            const e = Math.pow(dampingRatio, 2) * Math.pow(undampedFreq, 2) * duration;\n            const f = Math.exp(-delta);\n            const g = calcAngularFreq(Math.pow(undampedFreq, 2), dampingRatio);\n            const factor = -envelope(undampedFreq) + safeMin > 0 ? -1 : 1;\n            return (factor * ((d - e) * f)) / g;\n        };\n    }\n    else {\n        /**\n         * Critically-damped spring\n         */\n        envelope = (undampedFreq) => {\n            const a = Math.exp(-undampedFreq * duration);\n            const b = (undampedFreq - velocity) * duration + 1;\n            return -safeMin + a * b;\n        };\n        derivative = (undampedFreq) => {\n            const a = Math.exp(-undampedFreq * duration);\n            const b = (velocity - undampedFreq) * (duration * duration);\n            return a * b;\n        };\n    }\n    const initialGuess = 5 / duration;\n    const undampedFreq = approximateRoot(envelope, derivative, initialGuess);\n    duration = secondsToMilliseconds(duration);\n    if (isNaN(undampedFreq)) {\n        return {\n            stiffness: 100,\n            damping: 10,\n            duration,\n        };\n    }\n    else {\n        const stiffness = Math.pow(undampedFreq, 2) * mass;\n        return {\n            stiffness,\n            damping: dampingRatio * 2 * Math.sqrt(mass * stiffness),\n            duration,\n        };\n    }\n}\nconst rootIterations = 12;\nfunction approximateRoot(envelope, derivative, initialGuess) {\n    let result = initialGuess;\n    for (let i = 1; i < rootIterations; i++) {\n        result = result - envelope(result) / derivative(result);\n    }\n    return result;\n}\nfunction calcAngularFreq(undampedFreq, dampingRatio) {\n    return undampedFreq * Math.sqrt(1 - dampingRatio * dampingRatio);\n}\n\nexport { calcAngularFreq, findSpring, maxDamping, maxDuration, minDamping, minDuration };\n","import { millisecondsToSeconds } from '../../../utils/time-conversion.mjs';\nimport { calcGeneratorVelocity } from '../utils/velocity.mjs';\nimport { findSpring, calcAngularFreq } from './find.mjs';\n\nconst durationKeys = [\"duration\", \"bounce\"];\nconst physicsKeys = [\"stiffness\", \"damping\", \"mass\"];\nfunction isSpringType(options, keys) {\n    return keys.some((key) => options[key] !== undefined);\n}\nfunction getSpringOptions(options) {\n    let springOptions = {\n        velocity: 0.0,\n        stiffness: 100,\n        damping: 10,\n        mass: 1.0,\n        isResolvedFromDuration: false,\n        ...options,\n    };\n    // stiffness/damping/mass overrides duration/bounce\n    if (!isSpringType(options, physicsKeys) &&\n        isSpringType(options, durationKeys)) {\n        const derived = findSpring(options);\n        springOptions = {\n            ...springOptions,\n            ...derived,\n            mass: 1.0,\n        };\n        springOptions.isResolvedFromDuration = true;\n    }\n    return springOptions;\n}\nfunction spring({ keyframes, restDelta, restSpeed, ...options }) {\n    const origin = keyframes[0];\n    const target = keyframes[keyframes.length - 1];\n    /**\n     * This is the Iterator-spec return value. We ensure it's mutable rather than using a generator\n     * to reduce GC during animation.\n     */\n    const state = { done: false, value: origin };\n    const { stiffness, damping, mass, duration, velocity, isResolvedFromDuration, } = getSpringOptions({\n        ...options,\n        velocity: -millisecondsToSeconds(options.velocity || 0),\n    });\n    const initialVelocity = velocity || 0.0;\n    const dampingRatio = damping / (2 * Math.sqrt(stiffness * mass));\n    const initialDelta = target - origin;\n    const undampedAngularFreq = millisecondsToSeconds(Math.sqrt(stiffness / mass));\n    /**\n     * If we're working on a granular scale, use smaller defaults for determining\n     * when the spring is finished.\n     *\n     * These defaults have been selected emprically based on what strikes a good\n     * ratio between feeling good and finishing as soon as changes are imperceptible.\n     */\n    const isGranularScale = Math.abs(initialDelta) < 5;\n    restSpeed || (restSpeed = isGranularScale ? 0.01 : 2);\n    restDelta || (restDelta = isGranularScale ? 0.005 : 0.5);\n    let resolveSpring;\n    if (dampingRatio < 1) {\n        const angularFreq = calcAngularFreq(undampedAngularFreq, dampingRatio);\n        // Underdamped spring\n        resolveSpring = (t) => {\n            const envelope = Math.exp(-dampingRatio * undampedAngularFreq * t);\n            return (target -\n                envelope *\n                    (((initialVelocity +\n                        dampingRatio * undampedAngularFreq * initialDelta) /\n                        angularFreq) *\n                        Math.sin(angularFreq * t) +\n                        initialDelta * Math.cos(angularFreq * t)));\n        };\n    }\n    else if (dampingRatio === 1) {\n        // Critically damped spring\n        resolveSpring = (t) => target -\n            Math.exp(-undampedAngularFreq * t) *\n                (initialDelta +\n                    (initialVelocity + undampedAngularFreq * initialDelta) * t);\n    }\n    else {\n        // Overdamped spring\n        const dampedAngularFreq = undampedAngularFreq * Math.sqrt(dampingRatio * dampingRatio - 1);\n        resolveSpring = (t) => {\n            const envelope = Math.exp(-dampingRatio * undampedAngularFreq * t);\n            // When performing sinh or cosh values can hit Infinity so we cap them here\n            const freqForT = Math.min(dampedAngularFreq * t, 300);\n            return (target -\n                (envelope *\n                    ((initialVelocity +\n                        dampingRatio * undampedAngularFreq * initialDelta) *\n                        Math.sinh(freqForT) +\n                        dampedAngularFreq *\n                            initialDelta *\n                            Math.cosh(freqForT))) /\n                    dampedAngularFreq);\n        };\n    }\n    return {\n        calculatedDuration: isResolvedFromDuration ? duration || null : null,\n        next: (t) => {\n            const current = resolveSpring(t);\n            if (!isResolvedFromDuration) {\n                let currentVelocity = initialVelocity;\n                if (t !== 0) {\n                    /**\n                     * We only need to calculate velocity for under-damped springs\n                     * as over- and critically-damped springs can't overshoot, so\n                     * checking only for displacement is enough.\n                     */\n                    if (dampingRatio < 1) {\n                        currentVelocity = calcGeneratorVelocity(resolveSpring, t, current);\n                    }\n                    else {\n                        currentVelocity = 0;\n                    }\n                }\n                const isBelowVelocityThreshold = Math.abs(currentVelocity) <= restSpeed;\n                const isBelowDisplacementThreshold = Math.abs(target - current) <= restDelta;\n                state.done =\n                    isBelowVelocityThreshold && isBelowDisplacementThreshold;\n            }\n            else {\n                state.done = t >= duration;\n            }\n            state.value = state.done ? target : current;\n            return state;\n        },\n    };\n}\n\nexport { spring };\n","import { spring } from './spring/index.mjs';\nimport { calcGeneratorVelocity } from './utils/velocity.mjs';\n\nfunction inertia({ keyframes, velocity = 0.0, power = 0.8, timeConstant = 325, bounceDamping = 10, bounceStiffness = 500, modifyTarget, min, max, restDelta = 0.5, restSpeed, }) {\n    const origin = keyframes[0];\n    const state = {\n        done: false,\n        value: origin,\n    };\n    const isOutOfBounds = (v) => (min !== undefined && v < min) || (max !== undefined && v > max);\n    const nearestBoundary = (v) => {\n        if (min === undefined)\n            return max;\n        if (max === undefined)\n            return min;\n        return Math.abs(min - v) < Math.abs(max - v) ? min : max;\n    };\n    let amplitude = power * velocity;\n    const ideal = origin + amplitude;\n    const target = modifyTarget === undefined ? ideal : modifyTarget(ideal);\n    /**\n     * If the target has changed we need to re-calculate the amplitude, otherwise\n     * the animation will start from the wrong position.\n     */\n    if (target !== ideal)\n        amplitude = target - origin;\n    const calcDelta = (t) => -amplitude * Math.exp(-t / timeConstant);\n    const calcLatest = (t) => target + calcDelta(t);\n    const applyFriction = (t) => {\n        const delta = calcDelta(t);\n        const latest = calcLatest(t);\n        state.done = Math.abs(delta) <= restDelta;\n        state.value = state.done ? target : latest;\n    };\n    /**\n     * Ideally this would resolve for t in a stateless way, we could\n     * do that by always precalculating the animation but as we know\n     * this will be done anyway we can assume that spring will\n     * be discovered during that.\n     */\n    let timeReachedBoundary;\n    let spring$1;\n    const checkCatchBoundary = (t) => {\n        if (!isOutOfBounds(state.value))\n            return;\n        timeReachedBoundary = t;\n        spring$1 = spring({\n            keyframes: [state.value, nearestBoundary(state.value)],\n            velocity: calcGeneratorVelocity(calcLatest, t, state.value),\n            damping: bounceDamping,\n            stiffness: bounceStiffness,\n            restDelta,\n            restSpeed,\n        });\n    };\n    checkCatchBoundary(0);\n    return {\n        calculatedDuration: null,\n        next: (t) => {\n            /**\n             * We need to resolve the friction to figure out if we need a\n             * spring but we don't want to do this twice per frame. So here\n             * we flag if we updated for this frame and later if we did\n             * we can skip doing it again.\n             */\n            let hasUpdatedFrame = false;\n            if (!spring$1 && timeReachedBoundary === undefined) {\n                hasUpdatedFrame = true;\n                applyFriction(t);\n                checkCatchBoundary(t);\n            }\n            /**\n             * If we have a spring and the provided t is beyond the moment the friction\n             * animation crossed the min/max boundary, use the spring.\n             */\n            if (timeReachedBoundary !== undefined && t > timeReachedBoundary) {\n                return spring$1.next(t - timeReachedBoundary);\n            }\n            else {\n                !hasUpdatedFrame && applyFriction(t);\n                return state;\n            }\n        },\n    };\n}\n\nexport { inertia };\n","import { frame, cancelFrame, frameData } from '../../../frameloop/frame.mjs';\n\nconst frameloopDriver = (update) => {\n    const passTimestamp = ({ timestamp }) => update(timestamp);\n    return {\n        start: () => frame.update(passTimestamp, true),\n        stop: () => cancelFrame(passTimestamp),\n        /**\n         * If we're processing this frame we can use the\n         * framelocked timestamp to keep things in sync.\n         */\n        now: () => frameData.isProcessing ? frameData.timestamp : performance.now(),\n    };\n};\n\nexport { frameloopDriver };\n","/**\n * Implement a practical max duration for keyframe generation\n * to prevent infinite loops\n */\nconst maxGeneratorDuration = 20000;\nfunction calcGeneratorDuration(generator) {\n    let duration = 0;\n    const timeStep = 50;\n    let state = generator.next(duration);\n    while (!state.done && duration < maxGeneratorDuration) {\n        duration += timeStep;\n        state = generator.next(duration);\n    }\n    return duration >= maxGeneratorDuration ? Infinity : duration;\n}\n\nexport { calcGeneratorDuration, maxGeneratorDuration };\n","import { keyframes } from '../../generators/keyframes.mjs';\nimport { spring } from '../../generators/spring/index.mjs';\nimport { inertia } from '../../generators/inertia.mjs';\nimport { frameloopDriver } from './driver-frameloop.mjs';\nimport { interpolate } from '../../../utils/interpolate.mjs';\nimport { clamp } from '../../../utils/clamp.mjs';\nimport { millisecondsToSeconds, secondsToMilliseconds } from '../../../utils/time-conversion.mjs';\nimport { calcGeneratorDuration } from '../../generators/utils/calc-duration.mjs';\nimport { invariant } from '../../../utils/errors.mjs';\n\nconst types = {\n    decay: inertia,\n    inertia,\n    tween: keyframes,\n    keyframes: keyframes,\n    spring,\n};\n/**\n * Animate a single value on the main thread.\n *\n * This function is written, where functionality overlaps,\n * to be largely spec-compliant with WAAPI to allow fungibility\n * between the two.\n */\nfunction animateValue({ autoplay = true, delay = 0, driver = frameloopDriver, keyframes: keyframes$1, type = \"keyframes\", repeat = 0, repeatDelay = 0, repeatType = \"loop\", onPlay, onStop, onComplete, onUpdate, ...options }) {\n    let speed = 1;\n    let hasStopped = false;\n    let resolveFinishedPromise;\n    let currentFinishedPromise;\n    /**\n     * Resolve the current Promise every time we enter the\n     * finished state. This is WAAPI-compatible behaviour.\n     */\n    const updateFinishedPromise = () => {\n        currentFinishedPromise = new Promise((resolve) => {\n            resolveFinishedPromise = resolve;\n        });\n    };\n    // Create the first finished promise\n    updateFinishedPromise();\n    let animationDriver;\n    const generatorFactory = types[type] || keyframes;\n    /**\n     * If this isn't the keyframes generator and we've been provided\n     * strings as keyframes, we need to interpolate these.\n     */\n    let mapNumbersToKeyframes;\n    if (generatorFactory !== keyframes &&\n        typeof keyframes$1[0] !== \"number\") {\n        if (process.env.NODE_ENV !== \"production\") {\n            invariant(keyframes$1.length === 2, `Only two keyframes currently supported with spring and inertia animations. Trying to animate ${keyframes$1}`);\n        }\n        mapNumbersToKeyframes = interpolate([0, 100], keyframes$1, {\n            clamp: false,\n        });\n        keyframes$1 = [0, 100];\n    }\n    const generator = generatorFactory({ ...options, keyframes: keyframes$1 });\n    let mirroredGenerator;\n    if (repeatType === \"mirror\") {\n        mirroredGenerator = generatorFactory({\n            ...options,\n            keyframes: [...keyframes$1].reverse(),\n            velocity: -(options.velocity || 0),\n        });\n    }\n    let playState = \"idle\";\n    let holdTime = null;\n    let startTime = null;\n    let cancelTime = null;\n    /**\n     * If duration is undefined and we have repeat options,\n     * we need to calculate a duration from the generator.\n     *\n     * We set it to the generator itself to cache the duration.\n     * Any timeline resolver will need to have already precalculated\n     * the duration by this step.\n     */\n    if (generator.calculatedDuration === null && repeat) {\n        generator.calculatedDuration = calcGeneratorDuration(generator);\n    }\n    const { calculatedDuration } = generator;\n    let resolvedDuration = Infinity;\n    let totalDuration = Infinity;\n    if (calculatedDuration !== null) {\n        resolvedDuration = calculatedDuration + repeatDelay;\n        totalDuration = resolvedDuration * (repeat + 1) - repeatDelay;\n    }\n    let currentTime = 0;\n    const tick = (timestamp) => {\n        if (startTime === null)\n            return;\n        /**\n         * requestAnimationFrame timestamps can come through as lower than\n         * the startTime as set by performance.now(). Here we prevent this,\n         * though in the future it could be possible to make setting startTime\n         * a pending operation that gets resolved here.\n         */\n        if (speed > 0)\n            startTime = Math.min(startTime, timestamp);\n        if (speed < 0)\n            startTime = Math.min(timestamp - totalDuration / speed, startTime);\n        if (holdTime !== null) {\n            currentTime = holdTime;\n        }\n        else {\n            // Rounding the time because floating point arithmetic is not always accurate, e.g. 3000.367 - 1000.367 =\n            // 2000.0000000000002. This is a problem when we are comparing the currentTime with the duration, for\n            // example.\n            currentTime = Math.round(timestamp - startTime) * speed;\n        }\n        // Rebase on delay\n        const timeWithoutDelay = currentTime - delay * (speed >= 0 ? 1 : -1);\n        const isInDelayPhase = speed >= 0 ? timeWithoutDelay < 0 : timeWithoutDelay > totalDuration;\n        currentTime = Math.max(timeWithoutDelay, 0);\n        /**\n         * If this animation has finished, set the current time\n         * to the total duration.\n         */\n        if (playState === \"finished\" && holdTime === null) {\n            currentTime = totalDuration;\n        }\n        let elapsed = currentTime;\n        let frameGenerator = generator;\n        if (repeat) {\n            /**\n             * Get the current progress (0-1) of the animation. If t is >\n             * than duration we'll get values like 2.5 (midway through the\n             * third iteration)\n             */\n            const progress = Math.min(currentTime, totalDuration) / resolvedDuration;\n            /**\n             * Get the current iteration (0 indexed). For instance the floor of\n             * 2.5 is 2.\n             */\n            let currentIteration = Math.floor(progress);\n            /**\n             * Get the current progress of the iteration by taking the remainder\n             * so 2.5 is 0.5 through iteration 2\n             */\n            let iterationProgress = progress % 1.0;\n            /**\n             * If iteration progress is 1 we count that as the end\n             * of the previous iteration.\n             */\n            if (!iterationProgress && progress >= 1) {\n                iterationProgress = 1;\n            }\n            iterationProgress === 1 && currentIteration--;\n            currentIteration = Math.min(currentIteration, repeat + 1);\n            /**\n             * Reverse progress if we're not running in \"normal\" direction\n             */\n            const isOddIteration = Boolean(currentIteration % 2);\n            if (isOddIteration) {\n                if (repeatType === \"reverse\") {\n                    iterationProgress = 1 - iterationProgress;\n                    if (repeatDelay) {\n                        iterationProgress -= repeatDelay / resolvedDuration;\n                    }\n                }\n                else if (repeatType === \"mirror\") {\n                    frameGenerator = mirroredGenerator;\n                }\n            }\n            elapsed = clamp(0, 1, iterationProgress) * resolvedDuration;\n        }\n        /**\n         * If we're in negative time, set state as the initial keyframe.\n         * This prevents delay: x, duration: 0 animations from finishing\n         * instantly.\n         */\n        const state = isInDelayPhase\n            ? { done: false, value: keyframes$1[0] }\n            : frameGenerator.next(elapsed);\n        if (mapNumbersToKeyframes) {\n            state.value = mapNumbersToKeyframes(state.value);\n        }\n        let { done } = state;\n        if (!isInDelayPhase && calculatedDuration !== null) {\n            done = speed >= 0 ? currentTime >= totalDuration : currentTime <= 0;\n        }\n        const isAnimationFinished = holdTime === null &&\n            (playState === \"finished\" || (playState === \"running\" && done));\n        if (onUpdate) {\n            onUpdate(state.value);\n        }\n        if (isAnimationFinished) {\n            finish();\n        }\n        return state;\n    };\n    const stopAnimationDriver = () => {\n        animationDriver && animationDriver.stop();\n        animationDriver = undefined;\n    };\n    const cancel = () => {\n        playState = \"idle\";\n        stopAnimationDriver();\n        resolveFinishedPromise();\n        updateFinishedPromise();\n        startTime = cancelTime = null;\n    };\n    const finish = () => {\n        playState = \"finished\";\n        onComplete && onComplete();\n        stopAnimationDriver();\n        resolveFinishedPromise();\n    };\n    const play = () => {\n        if (hasStopped)\n            return;\n        if (!animationDriver)\n            animationDriver = driver(tick);\n        const now = animationDriver.now();\n        onPlay && onPlay();\n        if (holdTime !== null) {\n            startTime = now - holdTime;\n        }\n        else if (!startTime || playState === \"finished\") {\n            startTime = now;\n        }\n        if (playState === \"finished\") {\n            updateFinishedPromise();\n        }\n        cancelTime = startTime;\n        holdTime = null;\n        /**\n         * Set playState to running only after we've used it in\n         * the previous logic.\n         */\n        playState = \"running\";\n        animationDriver.start();\n    };\n    if (autoplay) {\n        play();\n    }\n    const controls = {\n        then(resolve, reject) {\n            return currentFinishedPromise.then(resolve, reject);\n        },\n        get time() {\n            return millisecondsToSeconds(currentTime);\n        },\n        set time(newTime) {\n            newTime = secondsToMilliseconds(newTime);\n            currentTime = newTime;\n            if (holdTime !== null || !animationDriver || speed === 0) {\n                holdTime = newTime;\n            }\n            else {\n                startTime = animationDriver.now() - newTime / speed;\n            }\n        },\n        get duration() {\n            const duration = generator.calculatedDuration === null\n                ? calcGeneratorDuration(generator)\n                : generator.calculatedDuration;\n            return millisecondsToSeconds(duration);\n        },\n        get speed() {\n            return speed;\n        },\n        set speed(newSpeed) {\n            if (newSpeed === speed || !animationDriver)\n                return;\n            speed = newSpeed;\n            controls.time = millisecondsToSeconds(currentTime);\n        },\n        get state() {\n            return playState;\n        },\n        play,\n        pause: () => {\n            playState = \"paused\";\n            holdTime = currentTime;\n        },\n        stop: () => {\n            hasStopped = true;\n            if (playState === \"idle\")\n                return;\n            playState = \"idle\";\n            onStop && onStop();\n            cancel();\n        },\n        cancel: () => {\n            if (cancelTime !== null)\n                tick(cancelTime);\n            cancel();\n        },\n        complete: () => {\n            playState = \"finished\";\n        },\n        sample: (elapsed) => {\n            startTime = 0;\n            return tick(elapsed);\n        },\n    };\n    return controls;\n}\n\nexport { animateValue };\n","function memo(callback) {\n    let result;\n    return () => {\n        if (result === undefined)\n            result = callback();\n        return result;\n    };\n}\n\nexport { memo };\n","import { animateStyle } from './index.mjs';\nimport { isWaapiSupportedEasing } from './easing.mjs';\nimport { getFinalKeyframe } from './utils/get-final-keyframe.mjs';\nimport { animateValue } from '../js/index.mjs';\nimport { millisecondsToSeconds, secondsToMilliseconds } from '../../../utils/time-conversion.mjs';\nimport { memo } from '../../../utils/memo.mjs';\nimport { noop } from '../../../utils/noop.mjs';\nimport { frame, cancelFrame } from '../../../frameloop/frame.mjs';\n\nconst supportsWaapi = memo(() => Object.hasOwnProperty.call(Element.prototype, \"animate\"));\n/**\n * A list of values that can be hardware-accelerated.\n */\nconst acceleratedValues = new Set([\n    \"opacity\",\n    \"clipPath\",\n    \"filter\",\n    \"transform\",\n    \"backgroundColor\",\n]);\n/**\n * 10ms is chosen here as it strikes a balance between smooth\n * results (more than one keyframe per frame at 60fps) and\n * keyframe quantity.\n */\nconst sampleDelta = 10; //ms\n/**\n * Implement a practical max duration for keyframe generation\n * to prevent infinite loops\n */\nconst maxDuration = 20000;\nconst requiresPregeneratedKeyframes = (valueName, options) => options.type === \"spring\" ||\n    valueName === \"backgroundColor\" ||\n    !isWaapiSupportedEasing(options.ease);\nfunction createAcceleratedAnimation(value, valueName, { onUpdate, onComplete, ...options }) {\n    const canAccelerateAnimation = supportsWaapi() &&\n        acceleratedValues.has(valueName) &&\n        !options.repeatDelay &&\n        options.repeatType !== \"mirror\" &&\n        options.damping !== 0 &&\n        options.type !== \"inertia\";\n    if (!canAccelerateAnimation)\n        return false;\n    /**\n     * TODO: Unify with js/index\n     */\n    let hasStopped = false;\n    let resolveFinishedPromise;\n    let currentFinishedPromise;\n    /**\n     * Cancelling an animation will write to the DOM. For safety we want to defer\n     * this until the next `update` frame lifecycle. This flag tracks whether we\n     * have a pending cancel, if so we shouldn't allow animations to finish.\n     */\n    let pendingCancel = false;\n    /**\n     * Resolve the current Promise every time we enter the\n     * finished state. This is WAAPI-compatible behaviour.\n     */\n    const updateFinishedPromise = () => {\n        currentFinishedPromise = new Promise((resolve) => {\n            resolveFinishedPromise = resolve;\n        });\n    };\n    // Create the first finished promise\n    updateFinishedPromise();\n    let { keyframes, duration = 300, ease, times } = options;\n    /**\n     * If this animation needs pre-generated keyframes then generate.\n     */\n    if (requiresPregeneratedKeyframes(valueName, options)) {\n        const sampleAnimation = animateValue({\n            ...options,\n            repeat: 0,\n            delay: 0,\n        });\n        let state = { done: false, value: keyframes[0] };\n        const pregeneratedKeyframes = [];\n        /**\n         * Bail after 20 seconds of pre-generated keyframes as it's likely\n         * we're heading for an infinite loop.\n         */\n        let t = 0;\n        while (!state.done && t < maxDuration) {\n            state = sampleAnimation.sample(t);\n            pregeneratedKeyframes.push(state.value);\n            t += sampleDelta;\n        }\n        times = undefined;\n        keyframes = pregeneratedKeyframes;\n        duration = t - sampleDelta;\n        ease = \"linear\";\n    }\n    const animation = animateStyle(value.owner.current, valueName, keyframes, {\n        ...options,\n        duration,\n        /**\n         * This function is currently not called if ease is provided\n         * as a function so the cast is safe.\n         *\n         * However it would be possible for a future refinement to port\n         * in easing pregeneration from Motion One for browsers that\n         * support the upcoming `linear()` easing function.\n         */\n        ease: ease,\n        times,\n    });\n    const cancelAnimation = () => {\n        pendingCancel = false;\n        animation.cancel();\n    };\n    const safeCancel = () => {\n        pendingCancel = true;\n        frame.update(cancelAnimation);\n        resolveFinishedPromise();\n        updateFinishedPromise();\n    };\n    /**\n     * Prefer the `onfinish` prop as it's more widely supported than\n     * the `finished` promise.\n     *\n     * Here, we synchronously set the provided MotionValue to the end\n     * keyframe. If we didn't, when the WAAPI animation is finished it would\n     * be removed from the element which would then revert to its old styles.\n     */\n    animation.onfinish = () => {\n        if (pendingCancel)\n            return;\n        value.set(getFinalKeyframe(keyframes, options));\n        onComplete && onComplete();\n        safeCancel();\n    };\n    /**\n     * Animation interrupt callback.\n     */\n    const controls = {\n        then(resolve, reject) {\n            return currentFinishedPromise.then(resolve, reject);\n        },\n        attachTimeline(timeline) {\n            animation.timeline = timeline;\n            animation.onfinish = null;\n            return noop;\n        },\n        get time() {\n            return millisecondsToSeconds(animation.currentTime || 0);\n        },\n        set time(newTime) {\n            animation.currentTime = secondsToMilliseconds(newTime);\n        },\n        get speed() {\n            return animation.playbackRate;\n        },\n        set speed(newSpeed) {\n            animation.playbackRate = newSpeed;\n        },\n        get duration() {\n            return millisecondsToSeconds(duration);\n        },\n        play: () => {\n            if (hasStopped)\n                return;\n            animation.play();\n            /**\n             * Cancel any pending cancel tasks\n             */\n            cancelFrame(cancelAnimation);\n        },\n        pause: () => animation.pause(),\n        stop: () => {\n            hasStopped = true;\n            if (animation.playState === \"idle\")\n                return;\n            /**\n             * WAAPI doesn't natively have any interruption capabilities.\n             *\n             * Rather than read commited styles back out of the DOM, we can\n             * create a renderless JS animation and sample it twice to calculate\n             * its current value, \"previous\" value, and therefore allow\n             * Motion to calculate velocity for any subsequent animation.\n             */\n            const { currentTime } = animation;\n            if (currentTime) {\n                const sampleAnimation = animateValue({\n                    ...options,\n                    autoplay: false,\n                });\n                value.setWithVelocity(sampleAnimation.sample(currentTime - sampleDelta).value, sampleAnimation.sample(currentTime).value, sampleDelta);\n            }\n            safeCancel();\n        },\n        complete: () => {\n            if (pendingCancel)\n                return;\n            animation.finish();\n        },\n        cancel: safeCancel,\n    };\n    return controls;\n}\n\nexport { createAcceleratedAnimation };\n","import { animateValue } from './js/index.mjs';\nimport { noop } from '../../utils/noop.mjs';\n\nfunction createInstantAnimation({ keyframes, delay, onUpdate, onComplete, }) {\n    const setValue = () => {\n        onUpdate && onUpdate(keyframes[keyframes.length - 1]);\n        onComplete && onComplete();\n        /**\n         * TODO: As this API grows it could make sense to always return\n         * animateValue. This will be a bigger project as animateValue\n         * is frame-locked whereas this function resolves instantly.\n         * This is a behavioural change and also has ramifications regarding\n         * assumptions within tests.\n         */\n        return {\n            time: 0,\n            speed: 1,\n            duration: 0,\n            play: (noop),\n            pause: (noop),\n            stop: (noop),\n            then: (resolve) => {\n                resolve();\n                return Promise.resolve();\n            },\n            cancel: (noop),\n            complete: (noop),\n        };\n    };\n    return delay\n        ? animateValue({\n            keyframes: [0, 1],\n            duration: 0,\n            delay,\n            onComplete: setValue,\n        })\n        : setValue();\n}\n\nexport { createInstantAnimation };\n","import { transformProps } from '../../render/html/utils/transform.mjs';\n\nconst underDampedSpring = {\n    type: \"spring\",\n    stiffness: 500,\n    damping: 25,\n    restSpeed: 10,\n};\nconst criticallyDampedSpring = (target) => ({\n    type: \"spring\",\n    stiffness: 550,\n    damping: target === 0 ? 2 * Math.sqrt(550) : 30,\n    restSpeed: 10,\n});\nconst keyframesTransition = {\n    type: \"keyframes\",\n    duration: 0.8,\n};\n/**\n * Default easing curve is a slightly shallower version of\n * the default browser easing curve.\n */\nconst ease = {\n    type: \"keyframes\",\n    ease: [0.25, 0.1, 0.35, 1],\n    duration: 0.3,\n};\nconst getDefaultTransition = (valueKey, { keyframes }) => {\n    if (keyframes.length > 2) {\n        return keyframesTransition;\n    }\n    else if (transformProps.has(valueKey)) {\n        return valueKey.startsWith(\"scale\")\n            ? criticallyDampedSpring(keyframes[1])\n            : underDampedSpring;\n    }\n    return ease;\n};\n\nexport { getDefaultTransition };\n","import { complex } from '../../value/types/complex/index.mjs';\n\n/**\n * Check if a value is animatable. Examples:\n *\n * ✅: 100, \"100px\", \"#fff\"\n * ❌: \"block\", \"url(2.jpg)\"\n * @param value\n *\n * @internal\n */\nconst isAnimatable = (key, value) => {\n    // If the list of keys tat might be non-animatable grows, replace with Set\n    if (key === \"zIndex\")\n        return false;\n    // If it's a number or a keyframes array, we can animate it. We might at some point\n    // need to do a deep isAnimatable check of keyframes, or let Popmotion handle this,\n    // but for now lets leave it like this for performance reasons\n    if (typeof value === \"number\" || Array.isArray(value))\n        return true;\n    if (typeof value === \"string\" && // It's animatable if we have a string\n        (complex.test(value) || value === \"0\") && // And it contains numbers and/or colors\n        !value.startsWith(\"url(\") // Unless it starts with \"url(\"\n    ) {\n        return true;\n    }\n    return false;\n};\n\nexport { isAnimatable };\n","import { complex } from './index.mjs';\nimport { floatRegex } from '../utils.mjs';\n\n/**\n * Properties that should default to 1 or 100%\n */\nconst maxDefaults = new Set([\"brightness\", \"contrast\", \"saturate\", \"opacity\"]);\nfunction applyDefaultFilter(v) {\n    const [name, value] = v.slice(0, -1).split(\"(\");\n    if (name === \"drop-shadow\")\n        return v;\n    const [number] = value.match(floatRegex) || [];\n    if (!number)\n        return v;\n    const unit = value.replace(number, \"\");\n    let defaultValue = maxDefaults.has(name) ? 1 : 0;\n    if (number !== value)\n        defaultValue *= 100;\n    return name + \"(\" + defaultValue + unit + \")\";\n}\nconst functionRegex = /([a-z-]*)\\(.*?\\)/g;\nconst filter = {\n    ...complex,\n    getAnimatableNone: (v) => {\n        const functions = v.match(functionRegex);\n        return functions ? functions.map(applyDefaultFilter).join(\" \") : v;\n    },\n};\n\nexport { filter };\n","import { color } from '../../../value/types/color/index.mjs';\nimport { filter } from '../../../value/types/complex/filter.mjs';\nimport { numberValueTypes } from './number.mjs';\n\n/**\n * A map of default value types for common values\n */\nconst defaultValueTypes = {\n    ...numberValueTypes,\n    // Color props\n    color,\n    backgroundColor: color,\n    outlineColor: color,\n    fill: color,\n    stroke: color,\n    // Border props\n    borderColor: color,\n    borderTopColor: color,\n    borderRightColor: color,\n    borderBottomColor: color,\n    borderLeftColor: color,\n    filter,\n    WebkitFilter: filter,\n};\n/**\n * Gets the default ValueType for the provided value key\n */\nconst getDefaultValueType = (key) => defaultValueTypes[key];\n\nexport { defaultValueTypes, getDefaultValueType };\n","import { complex } from '../../../value/types/complex/index.mjs';\nimport { filter } from '../../../value/types/complex/filter.mjs';\nimport { getDefaultValueType } from './defaults.mjs';\n\nfunction getAnimatableNone(key, value) {\n    let defaultValueType = getDefaultValueType(key);\n    if (defaultValueType !== filter)\n        defaultValueType = complex;\n    // If value is not recognised as animatable, ie \"none\", create an animatable version origin based on the target\n    return defaultValueType.getAnimatableNone\n        ? defaultValueType.getAnimatableNone(value)\n        : undefined;\n}\n\nexport { getAnimatableNone };\n","/**\n * Check if the value is a zero value string like \"0px\" or \"0%\"\n */\nconst isZeroValueString = (v) => /^0[^.\\s]+$/.test(v);\n\nexport { isZeroValueString };\n","import { isZeroValueString } from '../../utils/is-zero-value-string.mjs';\n\nfunction isNone(value) {\n    if (typeof value === \"number\") {\n        return value === 0;\n    }\n    else if (value !== null) {\n        return value === \"none\" || value === \"0\" || isZeroValueString(value);\n    }\n}\n\nexport { isNone };\n","import { getAnimatableNone } from '../../render/dom/value-types/animatable-none.mjs';\nimport { isAnimatable } from './is-animatable.mjs';\nimport { isNone } from './is-none.mjs';\n\nfunction getKeyframes(value, valueName, target, transition) {\n    const isTargetAnimatable = isAnimatable(valueName, target);\n    let keyframes;\n    if (Array.isArray(target)) {\n        keyframes = [...target];\n    }\n    else {\n        keyframes = [null, target];\n    }\n    const defaultOrigin = transition.from !== undefined ? transition.from : value.get();\n    let animatableTemplateValue = undefined;\n    const noneKeyframeIndexes = [];\n    for (let i = 0; i < keyframes.length; i++) {\n        /**\n         * Fill null/wildcard keyframes\n         */\n        if (keyframes[i] === null) {\n            keyframes[i] = i === 0 ? defaultOrigin : keyframes[i - 1];\n        }\n        if (isNone(keyframes[i])) {\n            noneKeyframeIndexes.push(i);\n        }\n        // TODO: Clean this conditional, it works for now\n        if (typeof keyframes[i] === \"string\" &&\n            keyframes[i] !== \"none\" &&\n            keyframes[i] !== \"0\") {\n            animatableTemplateValue = keyframes[i];\n        }\n    }\n    if (isTargetAnimatable &&\n        noneKeyframeIndexes.length &&\n        animatableTemplateValue) {\n        for (let i = 0; i < noneKeyframeIndexes.length; i++) {\n            const index = noneKeyframeIndexes[i];\n            keyframes[index] = getAnimatableNone(valueName, animatableTemplateValue);\n        }\n    }\n    return keyframes;\n}\n\nexport { getKeyframes };\n","/**\n * Decide whether a transition is defined on a given Transition.\n * This filters out orchestration options and returns true\n * if any options are left.\n */\nfunction isTransitionDefined({ when, delay: _delay, delayChildren, staggerChildren, staggerDirection, repeat, repeatType, repeatDelay, from, elapsed, ...transition }) {\n    return !!Object.keys(transition).length;\n}\nfunction getValueTransition(transition, key) {\n    return transition[key] || transition[\"default\"] || transition;\n}\n\nexport { getValueTransition, isTransitionDefined };\n","const MotionGlobalConfig = {\n    skipAnimations: false,\n};\n\nexport { MotionGlobalConfig };\n","import { warning } from '../../utils/errors.mjs';\nimport { secondsToMilliseconds } from '../../utils/time-conversion.mjs';\nimport { instantAnimationState } from '../../utils/use-instant-transition-state.mjs';\nimport { createAcceleratedAnimation } from '../animators/waapi/create-accelerated-animation.mjs';\nimport { createInstantAnimation } from '../animators/instant.mjs';\nimport { getDefaultTransition } from '../utils/default-transitions.mjs';\nimport { isAnimatable } from '../utils/is-animatable.mjs';\nimport { getKeyframes } from '../utils/keyframes.mjs';\nimport { getValueTransition, isTransitionDefined } from '../utils/transitions.mjs';\nimport { animateValue } from '../animators/js/index.mjs';\nimport { MotionGlobalConfig } from '../../utils/GlobalConfig.mjs';\n\nconst animateMotionValue = (valueName, value, target, transition = {}) => {\n    return (onComplete) => {\n        const valueTransition = getValueTransition(transition, valueName) || {};\n        /**\n         * Most transition values are currently completely overwritten by value-specific\n         * transitions. In the future it'd be nicer to blend these transitions. But for now\n         * delay actually does inherit from the root transition if not value-specific.\n         */\n        const delay = valueTransition.delay || transition.delay || 0;\n        /**\n         * Elapsed isn't a public transition option but can be passed through from\n         * optimized appear effects in milliseconds.\n         */\n        let { elapsed = 0 } = transition;\n        elapsed = elapsed - secondsToMilliseconds(delay);\n        const keyframes = getKeyframes(value, valueName, target, valueTransition);\n        /**\n         * Check if we're able to animate between the start and end keyframes,\n         * and throw a warning if we're attempting to animate between one that's\n         * animatable and another that isn't.\n         */\n        const originKeyframe = keyframes[0];\n        const targetKeyframe = keyframes[keyframes.length - 1];\n        const isOriginAnimatable = isAnimatable(valueName, originKeyframe);\n        const isTargetAnimatable = isAnimatable(valueName, targetKeyframe);\n        warning(isOriginAnimatable === isTargetAnimatable, `You are trying to animate ${valueName} from \"${originKeyframe}\" to \"${targetKeyframe}\". ${originKeyframe} is not an animatable value - to enable this animation set ${originKeyframe} to a value animatable to ${targetKeyframe} via the \\`style\\` property.`);\n        let options = {\n            keyframes,\n            velocity: value.getVelocity(),\n            ease: \"easeOut\",\n            ...valueTransition,\n            delay: -elapsed,\n            onUpdate: (v) => {\n                value.set(v);\n                valueTransition.onUpdate && valueTransition.onUpdate(v);\n            },\n            onComplete: () => {\n                onComplete();\n                valueTransition.onComplete && valueTransition.onComplete();\n            },\n        };\n        /**\n         * If there's no transition defined for this value, we can generate\n         * unqiue transition settings for this value.\n         */\n        if (!isTransitionDefined(valueTransition)) {\n            options = {\n                ...options,\n                ...getDefaultTransition(valueName, options),\n            };\n        }\n        /**\n         * Both WAAPI and our internal animation functions use durations\n         * as defined by milliseconds, while our external API defines them\n         * as seconds.\n         */\n        if (options.duration) {\n            options.duration = secondsToMilliseconds(options.duration);\n        }\n        if (options.repeatDelay) {\n            options.repeatDelay = secondsToMilliseconds(options.repeatDelay);\n        }\n        if (!isOriginAnimatable ||\n            !isTargetAnimatable ||\n            instantAnimationState.current ||\n            valueTransition.type === false ||\n            MotionGlobalConfig.skipAnimations) {\n            /**\n             * If we can't animate this value, or the global instant animation flag is set,\n             * or this is simply defined as an instant transition, return an instant transition.\n             */\n            return createInstantAnimation(instantAnimationState.current\n                ? { ...options, delay: 0 }\n                : options);\n        }\n        /**\n         * Animate via WAAPI if possible.\n         */\n        if (\n        /**\n         * If this is a handoff animation, the optimised animation will be running via\n         * WAAPI. Therefore, this animation must be JS to ensure it runs \"under\" the\n         * optimised animation.\n         */\n        !transition.isHandoff &&\n            value.owner &&\n            value.owner.current instanceof HTMLElement &&\n            /**\n             * If we're outputting values to onUpdate then we can't use WAAPI as there's\n             * no way to read the value from WAAPI every frame.\n             */\n            !value.owner.getProps().onUpdate) {\n            const acceleratedAnimation = createAcceleratedAnimation(value, valueName, options);\n            if (acceleratedAnimation)\n                return acceleratedAnimation;\n        }\n        /**\n         * If we didn't create an accelerated animation, create a JS animation\n         */\n        return animateValue(options);\n    };\n};\n\nexport { animateMotionValue };\n","import { isMotionValue } from '../utils/is-motion-value.mjs';\n\nfunction isWillChangeMotionValue(value) {\n    return Boolean(isMotionValue(value) && value.add);\n}\n\nexport { isWillChangeMotionValue };\n","/**\n * Check if value is a numerical string, ie a string that is purely a number eg \"100\" or \"-100.1\"\n */\nconst isNumericalString = (v) => /^\\-?\\d*\\.?\\d+$/.test(v);\n\nexport { isNumericalString };\n","function addUniqueItem(arr, item) {\n    if (arr.indexOf(item) === -1)\n        arr.push(item);\n}\nfunction removeItem(arr, item) {\n    const index = arr.indexOf(item);\n    if (index > -1)\n        arr.splice(index, 1);\n}\n// Adapted from array-move\nfunction moveItem([...arr], fromIndex, toIndex) {\n    const startIndex = fromIndex < 0 ? arr.length + fromIndex : fromIndex;\n    if (startIndex >= 0 && startIndex < arr.length) {\n        const endIndex = toIndex < 0 ? arr.length + toIndex : toIndex;\n        const [item] = arr.splice(fromIndex, 1);\n        arr.splice(endIndex, 0, item);\n    }\n    return arr;\n}\n\nexport { addUniqueItem, moveItem, removeItem };\n","import { addUniqueItem, removeItem } from './array.mjs';\n\nclass SubscriptionManager {\n    constructor() {\n        this.subscriptions = [];\n    }\n    add(handler) {\n        addUniqueItem(this.subscriptions, handler);\n        return () => removeItem(this.subscriptions, handler);\n    }\n    notify(a, b, c) {\n        const numSubscriptions = this.subscriptions.length;\n        if (!numSubscriptions)\n            return;\n        if (numSubscriptions === 1) {\n            /**\n             * If there's only a single handler we can just call it without invoking a loop.\n             */\n            this.subscriptions[0](a, b, c);\n        }\n        else {\n            for (let i = 0; i < numSubscriptions; i++) {\n                /**\n                 * Check whether the handler exists before firing as it's possible\n                 * the subscriptions were modified during this loop running.\n                 */\n                const handler = this.subscriptions[i];\n                handler && handler(a, b, c);\n            }\n        }\n    }\n    getSize() {\n        return this.subscriptions.length;\n    }\n    clear() {\n        this.subscriptions.length = 0;\n    }\n}\n\nexport { SubscriptionManager };\n","import { SubscriptionManager } from '../utils/subscription-manager.mjs';\nimport { velocityPerSecond } from '../utils/velocity-per-second.mjs';\nimport { warnOnce } from '../utils/warn-once.mjs';\nimport { frame, frameData } from '../frameloop/frame.mjs';\n\nconst isFloat = (value) => {\n    return !isNaN(parseFloat(value));\n};\nconst collectMotionValues = {\n    current: undefined,\n};\n/**\n * `MotionValue` is used to track the state and velocity of motion values.\n *\n * @public\n */\nclass MotionValue {\n    /**\n     * @param init - The initiating value\n     * @param config - Optional configuration options\n     *\n     * -  `transformer`: A function to transform incoming values with.\n     *\n     * @internal\n     */\n    constructor(init, options = {}) {\n        /**\n         * This will be replaced by the build step with the latest version number.\n         * When MotionValues are provided to motion components, warn if versions are mixed.\n         */\n        this.version = \"10.18.0\";\n        /**\n         * Duration, in milliseconds, since last updating frame.\n         *\n         * @internal\n         */\n        this.timeDelta = 0;\n        /**\n         * Timestamp of the last time this `MotionValue` was updated.\n         *\n         * @internal\n         */\n        this.lastUpdated = 0;\n        /**\n         * Tracks whether this value can output a velocity. Currently this is only true\n         * if the value is numerical, but we might be able to widen the scope here and support\n         * other value types.\n         *\n         * @internal\n         */\n        this.canTrackVelocity = false;\n        /**\n         * An object containing a SubscriptionManager for each active event.\n         */\n        this.events = {};\n        this.updateAndNotify = (v, render = true) => {\n            this.prev = this.current;\n            this.current = v;\n            // Update timestamp\n            const { delta, timestamp } = frameData;\n            if (this.lastUpdated !== timestamp) {\n                this.timeDelta = delta;\n                this.lastUpdated = timestamp;\n                frame.postRender(this.scheduleVelocityCheck);\n            }\n            // Update update subscribers\n            if (this.prev !== this.current && this.events.change) {\n                this.events.change.notify(this.current);\n            }\n            // Update velocity subscribers\n            if (this.events.velocityChange) {\n                this.events.velocityChange.notify(this.getVelocity());\n            }\n            // Update render subscribers\n            if (render && this.events.renderRequest) {\n                this.events.renderRequest.notify(this.current);\n            }\n        };\n        /**\n         * Schedule a velocity check for the next frame.\n         *\n         * This is an instanced and bound function to prevent generating a new\n         * function once per frame.\n         *\n         * @internal\n         */\n        this.scheduleVelocityCheck = () => frame.postRender(this.velocityCheck);\n        /**\n         * Updates `prev` with `current` if the value hasn't been updated this frame.\n         * This ensures velocity calculations return `0`.\n         *\n         * This is an instanced and bound function to prevent generating a new\n         * function once per frame.\n         *\n         * @internal\n         */\n        this.velocityCheck = ({ timestamp }) => {\n            if (timestamp !== this.lastUpdated) {\n                this.prev = this.current;\n                if (this.events.velocityChange) {\n                    this.events.velocityChange.notify(this.getVelocity());\n                }\n            }\n        };\n        this.hasAnimated = false;\n        this.prev = this.current = init;\n        this.canTrackVelocity = isFloat(this.current);\n        this.owner = options.owner;\n    }\n    /**\n     * Adds a function that will be notified when the `MotionValue` is updated.\n     *\n     * It returns a function that, when called, will cancel the subscription.\n     *\n     * When calling `onChange` inside a React component, it should be wrapped with the\n     * `useEffect` hook. As it returns an unsubscribe function, this should be returned\n     * from the `useEffect` function to ensure you don't add duplicate subscribers..\n     *\n     * ```jsx\n     * export const MyComponent = () => {\n     *   const x = useMotionValue(0)\n     *   const y = useMotionValue(0)\n     *   const opacity = useMotionValue(1)\n     *\n     *   useEffect(() => {\n     *     function updateOpacity() {\n     *       const maxXY = Math.max(x.get(), y.get())\n     *       const newOpacity = transform(maxXY, [0, 100], [1, 0])\n     *       opacity.set(newOpacity)\n     *     }\n     *\n     *     const unsubscribeX = x.on(\"change\", updateOpacity)\n     *     const unsubscribeY = y.on(\"change\", updateOpacity)\n     *\n     *     return () => {\n     *       unsubscribeX()\n     *       unsubscribeY()\n     *     }\n     *   }, [])\n     *\n     *   return <motion.div style={{ x }} />\n     * }\n     * ```\n     *\n     * @param subscriber - A function that receives the latest value.\n     * @returns A function that, when called, will cancel this subscription.\n     *\n     * @deprecated\n     */\n    onChange(subscription) {\n        if (process.env.NODE_ENV !== \"production\") {\n            warnOnce(false, `value.onChange(callback) is deprecated. Switch to value.on(\"change\", callback).`);\n        }\n        return this.on(\"change\", subscription);\n    }\n    on(eventName, callback) {\n        if (!this.events[eventName]) {\n            this.events[eventName] = new SubscriptionManager();\n        }\n        const unsubscribe = this.events[eventName].add(callback);\n        if (eventName === \"change\") {\n            return () => {\n                unsubscribe();\n                /**\n                 * If we have no more change listeners by the start\n                 * of the next frame, stop active animations.\n                 */\n                frame.read(() => {\n                    if (!this.events.change.getSize()) {\n                        this.stop();\n                    }\n                });\n            };\n        }\n        return unsubscribe;\n    }\n    clearListeners() {\n        for (const eventManagers in this.events) {\n            this.events[eventManagers].clear();\n        }\n    }\n    /**\n     * Attaches a passive effect to the `MotionValue`.\n     *\n     * @internal\n     */\n    attach(passiveEffect, stopPassiveEffect) {\n        this.passiveEffect = passiveEffect;\n        this.stopPassiveEffect = stopPassiveEffect;\n    }\n    /**\n     * Sets the state of the `MotionValue`.\n     *\n     * @remarks\n     *\n     * ```jsx\n     * const x = useMotionValue(0)\n     * x.set(10)\n     * ```\n     *\n     * @param latest - Latest value to set.\n     * @param render - Whether to notify render subscribers. Defaults to `true`\n     *\n     * @public\n     */\n    set(v, render = true) {\n        if (!render || !this.passiveEffect) {\n            this.updateAndNotify(v, render);\n        }\n        else {\n            this.passiveEffect(v, this.updateAndNotify);\n        }\n    }\n    setWithVelocity(prev, current, delta) {\n        this.set(current);\n        this.prev = prev;\n        this.timeDelta = delta;\n    }\n    /**\n     * Set the state of the `MotionValue`, stopping any active animations,\n     * effects, and resets velocity to `0`.\n     */\n    jump(v) {\n        this.updateAndNotify(v);\n        this.prev = v;\n        this.stop();\n        if (this.stopPassiveEffect)\n            this.stopPassiveEffect();\n    }\n    /**\n     * Returns the latest state of `MotionValue`\n     *\n     * @returns - The latest state of `MotionValue`\n     *\n     * @public\n     */\n    get() {\n        if (collectMotionValues.current) {\n            collectMotionValues.current.push(this);\n        }\n        return this.current;\n    }\n    /**\n     * @public\n     */\n    getPrevious() {\n        return this.prev;\n    }\n    /**\n     * Returns the latest velocity of `MotionValue`\n     *\n     * @returns - The latest velocity of `MotionValue`. Returns `0` if the state is non-numerical.\n     *\n     * @public\n     */\n    getVelocity() {\n        // This could be isFloat(this.prev) && isFloat(this.current), but that would be wasteful\n        return this.canTrackVelocity\n            ? // These casts could be avoided if parseFloat would be typed better\n                velocityPerSecond(parseFloat(this.current) -\n                    parseFloat(this.prev), this.timeDelta)\n            : 0;\n    }\n    /**\n     * Registers a new animation to control this `MotionValue`. Only one\n     * animation can drive a `MotionValue` at one time.\n     *\n     * ```jsx\n     * value.start()\n     * ```\n     *\n     * @param animation - A function that starts the provided animation\n     *\n     * @internal\n     */\n    start(startAnimation) {\n        this.stop();\n        return new Promise((resolve) => {\n            this.hasAnimated = true;\n            this.animation = startAnimation(resolve);\n            if (this.events.animationStart) {\n                this.events.animationStart.notify();\n            }\n        }).then(() => {\n            if (this.events.animationComplete) {\n                this.events.animationComplete.notify();\n            }\n            this.clearAnimation();\n        });\n    }\n    /**\n     * Stop the currently active animation.\n     *\n     * @public\n     */\n    stop() {\n        if (this.animation) {\n            this.animation.stop();\n            if (this.events.animationCancel) {\n                this.events.animationCancel.notify();\n            }\n        }\n        this.clearAnimation();\n    }\n    /**\n     * Returns `true` if this value is currently animating.\n     *\n     * @public\n     */\n    isAnimating() {\n        return !!this.animation;\n    }\n    clearAnimation() {\n        delete this.animation;\n    }\n    /**\n     * Destroy and clean up subscribers to this `MotionValue`.\n     *\n     * The `MotionValue` hooks like `useMotionValue` and `useTransform` automatically\n     * handle the lifecycle of the returned `MotionValue`, so this method is only necessary if you've manually\n     * created a `MotionValue` via the `motionValue` function.\n     *\n     * @public\n     */\n    destroy() {\n        this.clearListeners();\n        this.stop();\n        if (this.stopPassiveEffect) {\n            this.stopPassiveEffect();\n        }\n    }\n}\nfunction motionValue(init, options) {\n    return new MotionValue(init, options);\n}\n\nexport { MotionValue, collectMotionValues, motionValue };\n","/**\n * Tests a provided value against a ValueType\n */\nconst testValueType = (v) => (type) => type.test(v);\n\nexport { testValueType };\n","/**\n * ValueType for \"auto\"\n */\nconst auto = {\n    test: (v) => v === \"auto\",\n    parse: (v) => v,\n};\n\nexport { auto };\n","import { number } from '../../../value/types/numbers/index.mjs';\nimport { px, percent, degrees, vw, vh } from '../../../value/types/numbers/units.mjs';\nimport { testValueType } from './test.mjs';\nimport { auto } from './type-auto.mjs';\n\n/**\n * A list of value types commonly used for dimensions\n */\nconst dimensionValueTypes = [number, px, percent, degrees, vw, vh, auto];\n/**\n * Tests a dimensional value against the list of dimension ValueTypes\n */\nconst findDimensionValueType = (v) => dimensionValueTypes.find(testValueType(v));\n\nexport { dimensionValueTypes, findDimensionValueType };\n","import { color } from '../../../value/types/color/index.mjs';\nimport { complex } from '../../../value/types/complex/index.mjs';\nimport { dimensionValueTypes } from './dimensions.mjs';\nimport { testValueType } from './test.mjs';\n\n/**\n * A list of all ValueTypes\n */\nconst valueTypes = [...dimensionValueTypes, color, complex];\n/**\n * Tests a value against the list of ValueTypes\n */\nconst findValueType = (v) => valueTypes.find(testValueType(v));\n\nexport { findValueType };\n","import { isNumericalString } from '../../utils/is-numerical-string.mjs';\nimport { isZeroValueString } from '../../utils/is-zero-value-string.mjs';\nimport { resolveFinalValueInKeyframes } from '../../utils/resolve-value.mjs';\nimport { motionValue } from '../../value/index.mjs';\nimport { complex } from '../../value/types/complex/index.mjs';\nimport { getAnimatableNone } from '../dom/value-types/animatable-none.mjs';\nimport { findValueType } from '../dom/value-types/find.mjs';\nimport { resolveVariant } from './resolve-dynamic-variants.mjs';\n\n/**\n * Set VisualElement's MotionValue, creating a new MotionValue for it if\n * it doesn't exist.\n */\nfunction setMotionValue(visualElement, key, value) {\n    if (visualElement.hasValue(key)) {\n        visualElement.getValue(key).set(value);\n    }\n    else {\n        visualElement.addValue(key, motionValue(value));\n    }\n}\nfunction setTarget(visualElement, definition) {\n    const resolved = resolveVariant(visualElement, definition);\n    let { transitionEnd = {}, transition = {}, ...target } = resolved ? visualElement.makeTargetAnimatable(resolved, false) : {};\n    target = { ...target, ...transitionEnd };\n    for (const key in target) {\n        const value = resolveFinalValueInKeyframes(target[key]);\n        setMotionValue(visualElement, key, value);\n    }\n}\nfunction setVariants(visualElement, variantLabels) {\n    const reversedLabels = [...variantLabels].reverse();\n    reversedLabels.forEach((key) => {\n        const variant = visualElement.getVariant(key);\n        variant && setTarget(visualElement, variant);\n        if (visualElement.variantChildren) {\n            visualElement.variantChildren.forEach((child) => {\n                setVariants(child, variantLabels);\n            });\n        }\n    });\n}\nfunction setValues(visualElement, definition) {\n    if (Array.isArray(definition)) {\n        return setVariants(visualElement, definition);\n    }\n    else if (typeof definition === \"string\") {\n        return setVariants(visualElement, [definition]);\n    }\n    else {\n        setTarget(visualElement, definition);\n    }\n}\nfunction checkTargetForNewValues(visualElement, target, origin) {\n    var _a, _b;\n    const newValueKeys = Object.keys(target).filter((key) => !visualElement.hasValue(key));\n    const numNewValues = newValueKeys.length;\n    if (!numNewValues)\n        return;\n    for (let i = 0; i < numNewValues; i++) {\n        const key = newValueKeys[i];\n        const targetValue = target[key];\n        let value = null;\n        /**\n         * If the target is a series of keyframes, we can use the first value\n         * in the array. If this first value is null, we'll still need to read from the DOM.\n         */\n        if (Array.isArray(targetValue)) {\n            value = targetValue[0];\n        }\n        /**\n         * If the target isn't keyframes, or the first keyframe was null, we need to\n         * first check if an origin value was explicitly defined in the transition as \"from\",\n         * if not read the value from the DOM. As an absolute fallback, take the defined target value.\n         */\n        if (value === null) {\n            value = (_b = (_a = origin[key]) !== null && _a !== void 0 ? _a : visualElement.readValue(key)) !== null && _b !== void 0 ? _b : target[key];\n        }\n        /**\n         * If value is still undefined or null, ignore it. Preferably this would throw,\n         * but this was causing issues in Framer.\n         */\n        if (value === undefined || value === null)\n            continue;\n        if (typeof value === \"string\" &&\n            (isNumericalString(value) || isZeroValueString(value))) {\n            // If this is a number read as a string, ie \"0\" or \"200\", convert it to a number\n            value = parseFloat(value);\n        }\n        else if (!findValueType(value) && complex.test(targetValue)) {\n            value = getAnimatableNone(key, targetValue);\n        }\n        visualElement.addValue(key, motionValue(value, { owner: visualElement }));\n        if (origin[key] === undefined) {\n            origin[key] = value;\n        }\n        if (value !== null)\n            visualElement.setBaseTarget(key, value);\n    }\n}\nfunction getOriginFromTransition(key, transition) {\n    if (!transition)\n        return;\n    const valueTransition = transition[key] || transition[\"default\"] || transition;\n    return valueTransition.from;\n}\nfunction getOrigin(target, transition, visualElement) {\n    const origin = {};\n    for (const key in target) {\n        const transitionOrigin = getOriginFromTransition(key, transition);\n        if (transitionOrigin !== undefined) {\n            origin[key] = transitionOrigin;\n        }\n        else {\n            const value = visualElement.getValue(key);\n            if (value) {\n                origin[key] = value.get();\n            }\n        }\n    }\n    return origin;\n}\n\nexport { checkTargetForNewValues, getOrigin, getOriginFromTransition, setTarget, setValues };\n","import { transformProps } from '../../render/html/utils/transform.mjs';\nimport { optimizedAppearDataAttribute } from '../optimized-appear/data-id.mjs';\nimport { animateMotionValue } from './motion-value.mjs';\nimport { isWillChangeMotionValue } from '../../value/use-will-change/is.mjs';\nimport { setTarget } from '../../render/utils/setters.mjs';\nimport { getValueTransition } from '../utils/transitions.mjs';\nimport { frame } from '../../frameloop/frame.mjs';\n\n/**\n * Decide whether we should block this animation. Previously, we achieved this\n * just by checking whether the key was listed in protectedKeys, but this\n * posed problems if an animation was triggered by afterChildren and protectedKeys\n * had been set to true in the meantime.\n */\nfunction shouldBlockAnimation({ protectedKeys, needsAnimating }, key) {\n    const shouldBlock = protectedKeys.hasOwnProperty(key) && needsAnimating[key] !== true;\n    needsAnimating[key] = false;\n    return shouldBlock;\n}\nfunction hasKeyframesChanged(value, target) {\n    const current = value.get();\n    if (Array.isArray(target)) {\n        for (let i = 0; i < target.length; i++) {\n            if (target[i] !== current)\n                return true;\n        }\n    }\n    else {\n        return current !== target;\n    }\n}\nfunction animateTarget(visualElement, definition, { delay = 0, transitionOverride, type } = {}) {\n    let { transition = visualElement.getDefaultTransition(), transitionEnd, ...target } = visualElement.makeTargetAnimatable(definition);\n    const willChange = visualElement.getValue(\"willChange\");\n    if (transitionOverride)\n        transition = transitionOverride;\n    const animations = [];\n    const animationTypeState = type &&\n        visualElement.animationState &&\n        visualElement.animationState.getState()[type];\n    for (const key in target) {\n        const value = visualElement.getValue(key);\n        const valueTarget = target[key];\n        if (!value ||\n            valueTarget === undefined ||\n            (animationTypeState &&\n                shouldBlockAnimation(animationTypeState, key))) {\n            continue;\n        }\n        const valueTransition = {\n            delay,\n            elapsed: 0,\n            ...getValueTransition(transition || {}, key),\n        };\n        /**\n         * If this is the first time a value is being animated, check\n         * to see if we're handling off from an existing animation.\n         */\n        if (window.HandoffAppearAnimations) {\n            const appearId = visualElement.getProps()[optimizedAppearDataAttribute];\n            if (appearId) {\n                const elapsed = window.HandoffAppearAnimations(appearId, key, value, frame);\n                if (elapsed !== null) {\n                    valueTransition.elapsed = elapsed;\n                    valueTransition.isHandoff = true;\n                }\n            }\n        }\n        let canSkip = !valueTransition.isHandoff &&\n            !hasKeyframesChanged(value, valueTarget);\n        if (valueTransition.type === \"spring\" &&\n            (value.getVelocity() || valueTransition.velocity)) {\n            canSkip = false;\n        }\n        /**\n         * Temporarily disable skipping animations if there's an animation in\n         * progress. Better would be to track the current target of a value\n         * and compare that against valueTarget.\n         */\n        if (value.animation) {\n            canSkip = false;\n        }\n        if (canSkip)\n            continue;\n        value.start(animateMotionValue(key, value, valueTarget, visualElement.shouldReduceMotion && transformProps.has(key)\n            ? { type: false }\n            : valueTransition));\n        const animation = value.animation;\n        if (isWillChangeMotionValue(willChange)) {\n            willChange.add(key);\n            animation.then(() => willChange.remove(key));\n        }\n        animations.push(animation);\n    }\n    if (transitionEnd) {\n        Promise.all(animations).then(() => {\n            transitionEnd && setTarget(visualElement, transitionEnd);\n        });\n    }\n    return animations;\n}\n\nexport { animateTarget };\n","import { resolveVariant } from '../../render/utils/resolve-dynamic-variants.mjs';\nimport { animateTarget } from './visual-element-target.mjs';\n\nfunction animateVariant(visualElement, variant, options = {}) {\n    const resolved = resolveVariant(visualElement, variant, options.custom);\n    let { transition = visualElement.getDefaultTransition() || {} } = resolved || {};\n    if (options.transitionOverride) {\n        transition = options.transitionOverride;\n    }\n    /**\n     * If we have a variant, create a callback that runs it as an animation.\n     * Otherwise, we resolve a Promise immediately for a composable no-op.\n     */\n    const getAnimation = resolved\n        ? () => Promise.all(animateTarget(visualElement, resolved, options))\n        : () => Promise.resolve();\n    /**\n     * If we have children, create a callback that runs all their animations.\n     * Otherwise, we resolve a Promise immediately for a composable no-op.\n     */\n    const getChildAnimations = visualElement.variantChildren && visualElement.variantChildren.size\n        ? (forwardDelay = 0) => {\n            const { delayChildren = 0, staggerChildren, staggerDirection, } = transition;\n            return animateChildren(visualElement, variant, delayChildren + forwardDelay, staggerChildren, staggerDirection, options);\n        }\n        : () => Promise.resolve();\n    /**\n     * If the transition explicitly defines a \"when\" option, we need to resolve either\n     * this animation or all children animations before playing the other.\n     */\n    const { when } = transition;\n    if (when) {\n        const [first, last] = when === \"beforeChildren\"\n            ? [getAnimation, getChildAnimations]\n            : [getChildAnimations, getAnimation];\n        return first().then(() => last());\n    }\n    else {\n        return Promise.all([getAnimation(), getChildAnimations(options.delay)]);\n    }\n}\nfunction animateChildren(visualElement, variant, delayChildren = 0, staggerChildren = 0, staggerDirection = 1, options) {\n    const animations = [];\n    const maxStaggerDuration = (visualElement.variantChildren.size - 1) * staggerChildren;\n    const generateStaggerDuration = staggerDirection === 1\n        ? (i = 0) => i * staggerChildren\n        : (i = 0) => maxStaggerDuration - i * staggerChildren;\n    Array.from(visualElement.variantChildren)\n        .sort(sortByTreeOrder)\n        .forEach((child, i) => {\n        child.notify(\"AnimationStart\", variant);\n        animations.push(animateVariant(child, variant, {\n            ...options,\n            delay: delayChildren + generateStaggerDuration(i),\n        }).then(() => child.notify(\"AnimationComplete\", variant)));\n    });\n    return Promise.all(animations);\n}\nfunction sortByTreeOrder(a, b) {\n    return a.sortNodePosition(b);\n}\n\nexport { animateVariant, sortByTreeOrder };\n","import { resolveVariant } from '../../render/utils/resolve-dynamic-variants.mjs';\nimport { animateTarget } from './visual-element-target.mjs';\nimport { animateVariant } from './visual-element-variant.mjs';\n\nfunction animateVisualElement(visualElement, definition, options = {}) {\n    visualElement.notify(\"AnimationStart\", definition);\n    let animation;\n    if (Array.isArray(definition)) {\n        const animations = definition.map((variant) => animateVariant(visualElement, variant, options));\n        animation = Promise.all(animations);\n    }\n    else if (typeof definition === \"string\") {\n        animation = animateVariant(visualElement, definition, options);\n    }\n    else {\n        const resolvedDefinition = typeof definition === \"function\"\n            ? resolveVariant(visualElement, definition, options.custom)\n            : definition;\n        animation = Promise.all(animateTarget(visualElement, resolvedDefinition, options));\n    }\n    return animation.then(() => visualElement.notify(\"AnimationComplete\", definition));\n}\n\nexport { animateVisualElement };\n","import { isAnimationControls } from '../../animation/utils/is-animation-controls.mjs';\nimport { isKeyframesTarget } from '../../animation/utils/is-keyframes-target.mjs';\nimport { shallowCompare } from '../../utils/shallow-compare.mjs';\nimport { isVariantLabel } from './is-variant-label.mjs';\nimport { resolveVariant } from './resolve-dynamic-variants.mjs';\nimport { variantPriorityOrder } from './variant-props.mjs';\nimport { animateVisualElement } from '../../animation/interfaces/visual-element.mjs';\n\nconst reversePriorityOrder = [...variantPriorityOrder].reverse();\nconst numAnimationTypes = variantPriorityOrder.length;\nfunction animateList(visualElement) {\n    return (animations) => Promise.all(animations.map(({ animation, options }) => animateVisualElement(visualElement, animation, options)));\n}\nfunction createAnimationState(visualElement) {\n    let animate = animateList(visualElement);\n    const state = createState();\n    let isInitialRender = true;\n    /**\n     * This function will be used to reduce the animation definitions for\n     * each active animation type into an object of resolved values for it.\n     */\n    const buildResolvedTypeValues = (acc, definition) => {\n        const resolved = resolveVariant(visualElement, definition);\n        if (resolved) {\n            const { transition, transitionEnd, ...target } = resolved;\n            acc = { ...acc, ...target, ...transitionEnd };\n        }\n        return acc;\n    };\n    /**\n     * This just allows us to inject mocked animation functions\n     * @internal\n     */\n    function setAnimateFunction(makeAnimator) {\n        animate = makeAnimator(visualElement);\n    }\n    /**\n     * When we receive new props, we need to:\n     * 1. Create a list of protected keys for each type. This is a directory of\n     *    value keys that are currently being \"handled\" by types of a higher priority\n     *    so that whenever an animation is played of a given type, these values are\n     *    protected from being animated.\n     * 2. Determine if an animation type needs animating.\n     * 3. Determine if any values have been removed from a type and figure out\n     *    what to animate those to.\n     */\n    function animateChanges(options, changedActiveType) {\n        const props = visualElement.getProps();\n        const context = visualElement.getVariantContext(true) || {};\n        /**\n         * A list of animations that we'll build into as we iterate through the animation\n         * types. This will get executed at the end of the function.\n         */\n        const animations = [];\n        /**\n         * Keep track of which values have been removed. Then, as we hit lower priority\n         * animation types, we can check if they contain removed values and animate to that.\n         */\n        const removedKeys = new Set();\n        /**\n         * A dictionary of all encountered keys. This is an object to let us build into and\n         * copy it without iteration. Each time we hit an animation type we set its protected\n         * keys - the keys its not allowed to animate - to the latest version of this object.\n         */\n        let encounteredKeys = {};\n        /**\n         * If a variant has been removed at a given index, and this component is controlling\n         * variant animations, we want to ensure lower-priority variants are forced to animate.\n         */\n        let removedVariantIndex = Infinity;\n        /**\n         * Iterate through all animation types in reverse priority order. For each, we want to\n         * detect which values it's handling and whether or not they've changed (and therefore\n         * need to be animated). If any values have been removed, we want to detect those in\n         * lower priority props and flag for animation.\n         */\n        for (let i = 0; i < numAnimationTypes; i++) {\n            const type = reversePriorityOrder[i];\n            const typeState = state[type];\n            const prop = props[type] !== undefined ? props[type] : context[type];\n            const propIsVariant = isVariantLabel(prop);\n            /**\n             * If this type has *just* changed isActive status, set activeDelta\n             * to that status. Otherwise set to null.\n             */\n            const activeDelta = type === changedActiveType ? typeState.isActive : null;\n            if (activeDelta === false)\n                removedVariantIndex = i;\n            /**\n             * If this prop is an inherited variant, rather than been set directly on the\n             * component itself, we want to make sure we allow the parent to trigger animations.\n             *\n             * TODO: Can probably change this to a !isControllingVariants check\n             */\n            let isInherited = prop === context[type] && prop !== props[type] && propIsVariant;\n            /**\n             *\n             */\n            if (isInherited &&\n                isInitialRender &&\n                visualElement.manuallyAnimateOnMount) {\n                isInherited = false;\n            }\n            /**\n             * Set all encountered keys so far as the protected keys for this type. This will\n             * be any key that has been animated or otherwise handled by active, higher-priortiy types.\n             */\n            typeState.protectedKeys = { ...encounteredKeys };\n            // Check if we can skip analysing this prop early\n            if (\n            // If it isn't active and hasn't *just* been set as inactive\n            (!typeState.isActive && activeDelta === null) ||\n                // If we didn't and don't have any defined prop for this animation type\n                (!prop && !typeState.prevProp) ||\n                // Or if the prop doesn't define an animation\n                isAnimationControls(prop) ||\n                typeof prop === \"boolean\") {\n                continue;\n            }\n            /**\n             * As we go look through the values defined on this type, if we detect\n             * a changed value or a value that was removed in a higher priority, we set\n             * this to true and add this prop to the animation list.\n             */\n            const variantDidChange = checkVariantsDidChange(typeState.prevProp, prop);\n            let shouldAnimateType = variantDidChange ||\n                // If we're making this variant active, we want to always make it active\n                (type === changedActiveType &&\n                    typeState.isActive &&\n                    !isInherited &&\n                    propIsVariant) ||\n                // If we removed a higher-priority variant (i is in reverse order)\n                (i > removedVariantIndex && propIsVariant);\n            let handledRemovedValues = false;\n            /**\n             * As animations can be set as variant lists, variants or target objects, we\n             * coerce everything to an array if it isn't one already\n             */\n            const definitionList = Array.isArray(prop) ? prop : [prop];\n            /**\n             * Build an object of all the resolved values. We'll use this in the subsequent\n             * animateChanges calls to determine whether a value has changed.\n             */\n            let resolvedValues = definitionList.reduce(buildResolvedTypeValues, {});\n            if (activeDelta === false)\n                resolvedValues = {};\n            /**\n             * Now we need to loop through all the keys in the prev prop and this prop,\n             * and decide:\n             * 1. If the value has changed, and needs animating\n             * 2. If it has been removed, and needs adding to the removedKeys set\n             * 3. If it has been removed in a higher priority type and needs animating\n             * 4. If it hasn't been removed in a higher priority but hasn't changed, and\n             *    needs adding to the type's protectedKeys list.\n             */\n            const { prevResolvedValues = {} } = typeState;\n            const allKeys = {\n                ...prevResolvedValues,\n                ...resolvedValues,\n            };\n            const markToAnimate = (key) => {\n                shouldAnimateType = true;\n                if (removedKeys.has(key)) {\n                    handledRemovedValues = true;\n                    removedKeys.delete(key);\n                }\n                typeState.needsAnimating[key] = true;\n            };\n            for (const key in allKeys) {\n                const next = resolvedValues[key];\n                const prev = prevResolvedValues[key];\n                // If we've already handled this we can just skip ahead\n                if (encounteredKeys.hasOwnProperty(key))\n                    continue;\n                /**\n                 * If the value has changed, we probably want to animate it.\n                 */\n                let valueHasChanged = false;\n                if (isKeyframesTarget(next) && isKeyframesTarget(prev)) {\n                    valueHasChanged = !shallowCompare(next, prev);\n                }\n                else {\n                    valueHasChanged = next !== prev;\n                }\n                if (valueHasChanged) {\n                    if (next !== undefined) {\n                        // If next is defined and doesn't equal prev, it needs animating\n                        markToAnimate(key);\n                    }\n                    else {\n                        // If it's undefined, it's been removed.\n                        removedKeys.add(key);\n                    }\n                }\n                else if (next !== undefined && removedKeys.has(key)) {\n                    /**\n                     * If next hasn't changed and it isn't undefined, we want to check if it's\n                     * been removed by a higher priority\n                     */\n                    markToAnimate(key);\n                }\n                else {\n                    /**\n                     * If it hasn't changed, we add it to the list of protected values\n                     * to ensure it doesn't get animated.\n                     */\n                    typeState.protectedKeys[key] = true;\n                }\n            }\n            /**\n             * Update the typeState so next time animateChanges is called we can compare the\n             * latest prop and resolvedValues to these.\n             */\n            typeState.prevProp = prop;\n            typeState.prevResolvedValues = resolvedValues;\n            /**\n             *\n             */\n            if (typeState.isActive) {\n                encounteredKeys = { ...encounteredKeys, ...resolvedValues };\n            }\n            if (isInitialRender && visualElement.blockInitialAnimation) {\n                shouldAnimateType = false;\n            }\n            /**\n             * If this is an inherited prop we want to hard-block animations\n             */\n            if (shouldAnimateType && (!isInherited || handledRemovedValues)) {\n                animations.push(...definitionList.map((animation) => ({\n                    animation: animation,\n                    options: { type, ...options },\n                })));\n            }\n        }\n        /**\n         * If there are some removed value that haven't been dealt with,\n         * we need to create a new animation that falls back either to the value\n         * defined in the style prop, or the last read value.\n         */\n        if (removedKeys.size) {\n            const fallbackAnimation = {};\n            removedKeys.forEach((key) => {\n                const fallbackTarget = visualElement.getBaseTarget(key);\n                if (fallbackTarget !== undefined) {\n                    fallbackAnimation[key] = fallbackTarget;\n                }\n            });\n            animations.push({ animation: fallbackAnimation });\n        }\n        let shouldAnimate = Boolean(animations.length);\n        if (isInitialRender &&\n            (props.initial === false || props.initial === props.animate) &&\n            !visualElement.manuallyAnimateOnMount) {\n            shouldAnimate = false;\n        }\n        isInitialRender = false;\n        return shouldAnimate ? animate(animations) : Promise.resolve();\n    }\n    /**\n     * Change whether a certain animation type is active.\n     */\n    function setActive(type, isActive, options) {\n        var _a;\n        // If the active state hasn't changed, we can safely do nothing here\n        if (state[type].isActive === isActive)\n            return Promise.resolve();\n        // Propagate active change to children\n        (_a = visualElement.variantChildren) === null || _a === void 0 ? void 0 : _a.forEach((child) => { var _a; return (_a = child.animationState) === null || _a === void 0 ? void 0 : _a.setActive(type, isActive); });\n        state[type].isActive = isActive;\n        const animations = animateChanges(options, type);\n        for (const key in state) {\n            state[key].protectedKeys = {};\n        }\n        return animations;\n    }\n    return {\n        animateChanges,\n        setActive,\n        setAnimateFunction,\n        getState: () => state,\n    };\n}\nfunction checkVariantsDidChange(prev, next) {\n    if (typeof next === \"string\") {\n        return next !== prev;\n    }\n    else if (Array.isArray(next)) {\n        return !shallowCompare(next, prev);\n    }\n    return false;\n}\nfunction createTypeState(isActive = false) {\n    return {\n        isActive,\n        protectedKeys: {},\n        needsAnimating: {},\n        prevResolvedValues: {},\n    };\n}\nfunction createState() {\n    return {\n        animate: createTypeState(true),\n        whileInView: createTypeState(),\n        whileHover: createTypeState(),\n        whileTap: createTypeState(),\n        whileDrag: createTypeState(),\n        whileFocus: createTypeState(),\n        exit: createTypeState(),\n    };\n}\n\nexport { checkVariantsDidChange, createAnimationState };\n","import { isAnimationControls } from '../../../animation/utils/is-animation-controls.mjs';\nimport { createAnimationState } from '../../../render/utils/animation-state.mjs';\nimport { Feature } from '../Feature.mjs';\n\nclass AnimationFeature extends Feature {\n    /**\n     * We dynamically generate the AnimationState manager as it contains a reference\n     * to the underlying animation library. We only want to load that if we load this,\n     * so people can optionally code split it out using the `m` component.\n     */\n    constructor(node) {\n        super(node);\n        node.animationState || (node.animationState = createAnimationState(node));\n    }\n    updateAnimationControlsSubscription() {\n        const { animate } = this.node.getProps();\n        this.unmount();\n        if (isAnimationControls(animate)) {\n            this.unmount = animate.subscribe(this.node);\n        }\n    }\n    /**\n     * Subscribe any provided AnimationControls to the component's VisualElement\n     */\n    mount() {\n        this.updateAnimationControlsSubscription();\n    }\n    update() {\n        const { animate } = this.node.getProps();\n        const { animate: prevAnimate } = this.node.prevProps || {};\n        if (animate !== prevAnimate) {\n            this.updateAnimationControlsSubscription();\n        }\n    }\n    unmount() { }\n}\n\nexport { AnimationFeature };\n","import { Feature } from '../Feature.mjs';\n\nlet id = 0;\nclass ExitAnimationFeature extends Feature {\n    constructor() {\n        super(...arguments);\n        this.id = id++;\n    }\n    update() {\n        if (!this.node.presenceContext)\n            return;\n        const { isPresent, onExitComplete, custom } = this.node.presenceContext;\n        const { isPresent: prevIsPresent } = this.node.prevPresenceContext || {};\n        if (!this.node.animationState || isPresent === prevIsPresent) {\n            return;\n        }\n        const exitAnimation = this.node.animationState.setActive(\"exit\", !isPresent, { custom: custom !== null && custom !== void 0 ? custom : this.node.getProps().custom });\n        if (onExitComplete && !isPresent) {\n            exitAnimation.then(() => onExitComplete(this.id));\n        }\n    }\n    mount() {\n        const { register } = this.node.presenceContext || {};\n        if (register) {\n            this.unmount = register(this.id);\n        }\n    }\n    unmount() { }\n}\n\nexport { ExitAnimationFeature };\n","import { AnimationFeature } from './animation/index.mjs';\nimport { ExitAnimationFeature } from './animation/exit.mjs';\n\nconst animations = {\n    animation: {\n        Feature: AnimationFeature,\n    },\n    exit: {\n        Feature: ExitAnimationFeature,\n    },\n};\n\nexport { animations };\n","const distance = (a, b) => Math.abs(a - b);\nfunction distance2D(a, b) {\n    // Multi-dimensional\n    const xDelta = distance(a.x, b.x);\n    const yDelta = distance(a.y, b.y);\n    return Math.sqrt(xDelta ** 2 + yDelta ** 2);\n}\n\nexport { distance, distance2D };\n","import { extractEventInfo } from '../../events/event-info.mjs';\nimport { secondsToMilliseconds, millisecondsToSeconds } from '../../utils/time-conversion.mjs';\nimport { addPointerEvent } from '../../events/add-pointer-event.mjs';\nimport { pipe } from '../../utils/pipe.mjs';\nimport { distance2D } from '../../utils/distance.mjs';\nimport { isPrimaryPointer } from '../../events/utils/is-primary-pointer.mjs';\nimport { frame, cancelFrame, frameData } from '../../frameloop/frame.mjs';\n\n/**\n * @internal\n */\nclass PanSession {\n    constructor(event, handlers, { transformPagePoint, contextWindow, dragSnapToOrigin = false } = {}) {\n        /**\n         * @internal\n         */\n        this.startEvent = null;\n        /**\n         * @internal\n         */\n        this.lastMoveEvent = null;\n        /**\n         * @internal\n         */\n        this.lastMoveEventInfo = null;\n        /**\n         * @internal\n         */\n        this.handlers = {};\n        /**\n         * @internal\n         */\n        this.contextWindow = window;\n        this.updatePoint = () => {\n            if (!(this.lastMoveEvent && this.lastMoveEventInfo))\n                return;\n            const info = getPanInfo(this.lastMoveEventInfo, this.history);\n            const isPanStarted = this.startEvent !== null;\n            // Only start panning if the offset is larger than 3 pixels. If we make it\n            // any larger than this we'll want to reset the pointer history\n            // on the first update to avoid visual snapping to the cursoe.\n            const isDistancePastThreshold = distance2D(info.offset, { x: 0, y: 0 }) >= 3;\n            if (!isPanStarted && !isDistancePastThreshold)\n                return;\n            const { point } = info;\n            const { timestamp } = frameData;\n            this.history.push({ ...point, timestamp });\n            const { onStart, onMove } = this.handlers;\n            if (!isPanStarted) {\n                onStart && onStart(this.lastMoveEvent, info);\n                this.startEvent = this.lastMoveEvent;\n            }\n            onMove && onMove(this.lastMoveEvent, info);\n        };\n        this.handlePointerMove = (event, info) => {\n            this.lastMoveEvent = event;\n            this.lastMoveEventInfo = transformPoint(info, this.transformPagePoint);\n            // Throttle mouse move event to once per frame\n            frame.update(this.updatePoint, true);\n        };\n        this.handlePointerUp = (event, info) => {\n            this.end();\n            const { onEnd, onSessionEnd, resumeAnimation } = this.handlers;\n            if (this.dragSnapToOrigin)\n                resumeAnimation && resumeAnimation();\n            if (!(this.lastMoveEvent && this.lastMoveEventInfo))\n                return;\n            const panInfo = getPanInfo(event.type === \"pointercancel\"\n                ? this.lastMoveEventInfo\n                : transformPoint(info, this.transformPagePoint), this.history);\n            if (this.startEvent && onEnd) {\n                onEnd(event, panInfo);\n            }\n            onSessionEnd && onSessionEnd(event, panInfo);\n        };\n        // If we have more than one touch, don't start detecting this gesture\n        if (!isPrimaryPointer(event))\n            return;\n        this.dragSnapToOrigin = dragSnapToOrigin;\n        this.handlers = handlers;\n        this.transformPagePoint = transformPagePoint;\n        this.contextWindow = contextWindow || window;\n        const info = extractEventInfo(event);\n        const initialInfo = transformPoint(info, this.transformPagePoint);\n        const { point } = initialInfo;\n        const { timestamp } = frameData;\n        this.history = [{ ...point, timestamp }];\n        const { onSessionStart } = handlers;\n        onSessionStart &&\n            onSessionStart(event, getPanInfo(initialInfo, this.history));\n        this.removeListeners = pipe(addPointerEvent(this.contextWindow, \"pointermove\", this.handlePointerMove), addPointerEvent(this.contextWindow, \"pointerup\", this.handlePointerUp), addPointerEvent(this.contextWindow, \"pointercancel\", this.handlePointerUp));\n    }\n    updateHandlers(handlers) {\n        this.handlers = handlers;\n    }\n    end() {\n        this.removeListeners && this.removeListeners();\n        cancelFrame(this.updatePoint);\n    }\n}\nfunction transformPoint(info, transformPagePoint) {\n    return transformPagePoint ? { point: transformPagePoint(info.point) } : info;\n}\nfunction subtractPoint(a, b) {\n    return { x: a.x - b.x, y: a.y - b.y };\n}\nfunction getPanInfo({ point }, history) {\n    return {\n        point,\n        delta: subtractPoint(point, lastDevicePoint(history)),\n        offset: subtractPoint(point, startDevicePoint(history)),\n        velocity: getVelocity(history, 0.1),\n    };\n}\nfunction startDevicePoint(history) {\n    return history[0];\n}\nfunction lastDevicePoint(history) {\n    return history[history.length - 1];\n}\nfunction getVelocity(history, timeDelta) {\n    if (history.length < 2) {\n        return { x: 0, y: 0 };\n    }\n    let i = history.length - 1;\n    let timestampedPoint = null;\n    const lastPoint = lastDevicePoint(history);\n    while (i >= 0) {\n        timestampedPoint = history[i];\n        if (lastPoint.timestamp - timestampedPoint.timestamp >\n            secondsToMilliseconds(timeDelta)) {\n            break;\n        }\n        i--;\n    }\n    if (!timestampedPoint) {\n        return { x: 0, y: 0 };\n    }\n    const time = millisecondsToSeconds(lastPoint.timestamp - timestampedPoint.timestamp);\n    if (time === 0) {\n        return { x: 0, y: 0 };\n    }\n    const currentVelocity = {\n        x: (lastPoint.x - timestampedPoint.x) / time,\n        y: (lastPoint.y - timestampedPoint.y) / time,\n    };\n    if (currentVelocity.x === Infinity) {\n        currentVelocity.x = 0;\n    }\n    if (currentVelocity.y === Infinity) {\n        currentVelocity.y = 0;\n    }\n    return currentVelocity;\n}\n\nexport { PanSession };\n","import { mix } from '../../utils/mix.mjs';\n\nfunction calcLength(axis) {\n    return axis.max - axis.min;\n}\nfunction isNear(value, target = 0, maxDistance = 0.01) {\n    return Math.abs(value - target) <= maxDistance;\n}\nfunction calcAxisDelta(delta, source, target, origin = 0.5) {\n    delta.origin = origin;\n    delta.originPoint = mix(source.min, source.max, delta.origin);\n    delta.scale = calcLength(target) / calcLength(source);\n    if (isNear(delta.scale, 1, 0.0001) || isNaN(delta.scale))\n        delta.scale = 1;\n    delta.translate =\n        mix(target.min, target.max, delta.origin) - delta.originPoint;\n    if (isNear(delta.translate) || isNaN(delta.translate))\n        delta.translate = 0;\n}\nfunction calcBoxDelta(delta, source, target, origin) {\n    calcAxisDelta(delta.x, source.x, target.x, origin ? origin.originX : undefined);\n    calcAxisDelta(delta.y, source.y, target.y, origin ? origin.originY : undefined);\n}\nfunction calcRelativeAxis(target, relative, parent) {\n    target.min = parent.min + relative.min;\n    target.max = target.min + calcLength(relative);\n}\nfunction calcRelativeBox(target, relative, parent) {\n    calcRelativeAxis(target.x, relative.x, parent.x);\n    calcRelativeAxis(target.y, relative.y, parent.y);\n}\nfunction calcRelativeAxisPosition(target, layout, parent) {\n    target.min = layout.min - parent.min;\n    target.max = target.min + calcLength(layout);\n}\nfunction calcRelativePosition(target, layout, parent) {\n    calcRelativeAxisPosition(target.x, layout.x, parent.x);\n    calcRelativeAxisPosition(target.y, layout.y, parent.y);\n}\n\nexport { calcAxisDelta, calcBoxDelta, calcLength, calcRelativeAxis, calcRelativeAxisPosition, calcRelativeBox, calcRelativePosition, isNear };\n","import { progress } from '../../../utils/progress.mjs';\nimport { calcLength } from '../../../projection/geometry/delta-calc.mjs';\nimport { clamp } from '../../../utils/clamp.mjs';\nimport { mix } from '../../../utils/mix.mjs';\n\n/**\n * Apply constraints to a point. These constraints are both physical along an\n * axis, and an elastic factor that determines how much to constrain the point\n * by if it does lie outside the defined parameters.\n */\nfunction applyConstraints(point, { min, max }, elastic) {\n    if (min !== undefined && point < min) {\n        // If we have a min point defined, and this is outside of that, constrain\n        point = elastic ? mix(min, point, elastic.min) : Math.max(point, min);\n    }\n    else if (max !== undefined && point > max) {\n        // If we have a max point defined, and this is outside of that, constrain\n        point = elastic ? mix(max, point, elastic.max) : Math.min(point, max);\n    }\n    return point;\n}\n/**\n * Calculate constraints in terms of the viewport when defined relatively to the\n * measured axis. This is measured from the nearest edge, so a max constraint of 200\n * on an axis with a max value of 300 would return a constraint of 500 - axis length\n */\nfunction calcRelativeAxisConstraints(axis, min, max) {\n    return {\n        min: min !== undefined ? axis.min + min : undefined,\n        max: max !== undefined\n            ? axis.max + max - (axis.max - axis.min)\n            : undefined,\n    };\n}\n/**\n * Calculate constraints in terms of the viewport when\n * defined relatively to the measured bounding box.\n */\nfunction calcRelativeConstraints(layoutBox, { top, left, bottom, right }) {\n    return {\n        x: calcRelativeAxisConstraints(layoutBox.x, left, right),\n        y: calcRelativeAxisConstraints(layoutBox.y, top, bottom),\n    };\n}\n/**\n * Calculate viewport constraints when defined as another viewport-relative axis\n */\nfunction calcViewportAxisConstraints(layoutAxis, constraintsAxis) {\n    let min = constraintsAxis.min - layoutAxis.min;\n    let max = constraintsAxis.max - layoutAxis.max;\n    // If the constraints axis is actually smaller than the layout axis then we can\n    // flip the constraints\n    if (constraintsAxis.max - constraintsAxis.min <\n        layoutAxis.max - layoutAxis.min) {\n        [min, max] = [max, min];\n    }\n    return { min, max };\n}\n/**\n * Calculate viewport constraints when defined as another viewport-relative box\n */\nfunction calcViewportConstraints(layoutBox, constraintsBox) {\n    return {\n        x: calcViewportAxisConstraints(layoutBox.x, constraintsBox.x),\n        y: calcViewportAxisConstraints(layoutBox.y, constraintsBox.y),\n    };\n}\n/**\n * Calculate a transform origin relative to the source axis, between 0-1, that results\n * in an asthetically pleasing scale/transform needed to project from source to target.\n */\nfunction calcOrigin(source, target) {\n    let origin = 0.5;\n    const sourceLength = calcLength(source);\n    const targetLength = calcLength(target);\n    if (targetLength > sourceLength) {\n        origin = progress(target.min, target.max - sourceLength, source.min);\n    }\n    else if (sourceLength > targetLength) {\n        origin = progress(source.min, source.max - targetLength, target.min);\n    }\n    return clamp(0, 1, origin);\n}\n/**\n * Rebase the calculated viewport constraints relative to the layout.min point.\n */\nfunction rebaseAxisConstraints(layout, constraints) {\n    const relativeConstraints = {};\n    if (constraints.min !== undefined) {\n        relativeConstraints.min = constraints.min - layout.min;\n    }\n    if (constraints.max !== undefined) {\n        relativeConstraints.max = constraints.max - layout.min;\n    }\n    return relativeConstraints;\n}\nconst defaultElastic = 0.35;\n/**\n * Accepts a dragElastic prop and returns resolved elastic values for each axis.\n */\nfunction resolveDragElastic(dragElastic = defaultElastic) {\n    if (dragElastic === false) {\n        dragElastic = 0;\n    }\n    else if (dragElastic === true) {\n        dragElastic = defaultElastic;\n    }\n    return {\n        x: resolveAxisElastic(dragElastic, \"left\", \"right\"),\n        y: resolveAxisElastic(dragElastic, \"top\", \"bottom\"),\n    };\n}\nfunction resolveAxisElastic(dragElastic, minLabel, maxLabel) {\n    return {\n        min: resolvePointElastic(dragElastic, minLabel),\n        max: resolvePointElastic(dragElastic, maxLabel),\n    };\n}\nfunction resolvePointElastic(dragElastic, label) {\n    return typeof dragElastic === \"number\"\n        ? dragElastic\n        : dragElastic[label] || 0;\n}\n\nexport { applyConstraints, calcOrigin, calcRelativeAxisConstraints, calcRelativeConstraints, calcViewportAxisConstraints, calcViewportConstraints, defaultElastic, rebaseAxisConstraints, resolveAxisElastic, resolveDragElastic, resolvePointElastic };\n","const createAxisDelta = () => ({\n    translate: 0,\n    scale: 1,\n    origin: 0,\n    originPoint: 0,\n});\nconst createDelta = () => ({\n    x: createAxisDelta(),\n    y: createAxisDelta(),\n});\nconst createAxis = () => ({ min: 0, max: 0 });\nconst createBox = () => ({\n    x: createAxis(),\n    y: createAxis(),\n});\n\nexport { createAxis, createAxisDelta, createBox, createDelta };\n","function eachAxis(callback) {\n    return [callback(\"x\"), callback(\"y\")];\n}\n\nexport { eachAxis };\n","/**\n * Bounding boxes tend to be defined as top, left, right, bottom. For various operations\n * it's easier to consider each axis individually. This function returns a bounding box\n * as a map of single-axis min/max values.\n */\nfunction convertBoundingBoxToBox({ top, left, right, bottom, }) {\n    return {\n        x: { min: left, max: right },\n        y: { min: top, max: bottom },\n    };\n}\nfunction convertBoxToBoundingBox({ x, y }) {\n    return { top: y.min, right: x.max, bottom: y.max, left: x.min };\n}\n/**\n * Applies a TransformPoint function to a bounding box. TransformPoint is usually a function\n * provided by Framer to allow measured points to be corrected for device scaling. This is used\n * when measuring DOM elements and DOM event points.\n */\nfunction transformBoxPoints(point, transformPoint) {\n    if (!transformPoint)\n        return point;\n    const topLeft = transformPoint({ x: point.left, y: point.top });\n    const bottomRight = transformPoint({ x: point.right, y: point.bottom });\n    return {\n        top: topLeft.y,\n        left: topLeft.x,\n        bottom: bottomRight.y,\n        right: bottomRight.x,\n    };\n}\n\nexport { convertBoundingBoxToBox, convertBoxToBoundingBox, transformBoxPoints };\n","function isIdentityScale(scale) {\n    return scale === undefined || scale === 1;\n}\nfunction hasScale({ scale, scaleX, scaleY }) {\n    return (!isIdentityScale(scale) ||\n        !isIdentityScale(scaleX) ||\n        !isIdentityScale(scaleY));\n}\nfunction hasTransform(values) {\n    return (hasScale(values) ||\n        has2DTranslate(values) ||\n        values.z ||\n        values.rotate ||\n        values.rotateX ||\n        values.rotateY);\n}\nfunction has2DTranslate(values) {\n    return is2DTranslate(values.x) || is2DTranslate(values.y);\n}\nfunction is2DTranslate(value) {\n    return value && value !== \"0%\";\n}\n\nexport { has2DTranslate, hasScale, hasTransform };\n","import { mix } from '../../utils/mix.mjs';\nimport { hasTransform } from '../utils/has-transform.mjs';\n\n/**\n * Scales a point based on a factor and an originPoint\n */\nfunction scalePoint(point, scale, originPoint) {\n    const distanceFromOrigin = point - originPoint;\n    const scaled = scale * distanceFromOrigin;\n    return originPoint + scaled;\n}\n/**\n * Applies a translate/scale delta to a point\n */\nfunction applyPointDelta(point, translate, scale, originPoint, boxScale) {\n    if (boxScale !== undefined) {\n        point = scalePoint(point, boxScale, originPoint);\n    }\n    return scalePoint(point, scale, originPoint) + translate;\n}\n/**\n * Applies a translate/scale delta to an axis\n */\nfunction applyAxisDelta(axis, translate = 0, scale = 1, originPoint, boxScale) {\n    axis.min = applyPointDelta(axis.min, translate, scale, originPoint, boxScale);\n    axis.max = applyPointDelta(axis.max, translate, scale, originPoint, boxScale);\n}\n/**\n * Applies a translate/scale delta to a box\n */\nfunction applyBoxDelta(box, { x, y }) {\n    applyAxisDelta(box.x, x.translate, x.scale, x.originPoint);\n    applyAxisDelta(box.y, y.translate, y.scale, y.originPoint);\n}\n/**\n * Apply a tree of deltas to a box. We do this to calculate the effect of all the transforms\n * in a tree upon our box before then calculating how to project it into our desired viewport-relative box\n *\n * This is the final nested loop within updateLayoutDelta for future refactoring\n */\nfunction applyTreeDeltas(box, treeScale, treePath, isSharedTransition = false) {\n    const treeLength = treePath.length;\n    if (!treeLength)\n        return;\n    // Reset the treeScale\n    treeScale.x = treeScale.y = 1;\n    let node;\n    let delta;\n    for (let i = 0; i < treeLength; i++) {\n        node = treePath[i];\n        delta = node.projectionDelta;\n        /**\n         * TODO: Prefer to remove this, but currently we have motion components with\n         * display: contents in Framer.\n         */\n        const instance = node.instance;\n        if (instance &&\n            instance.style &&\n            instance.style.display === \"contents\") {\n            continue;\n        }\n        if (isSharedTransition &&\n            node.options.layoutScroll &&\n            node.scroll &&\n            node !== node.root) {\n            transformBox(box, {\n                x: -node.scroll.offset.x,\n                y: -node.scroll.offset.y,\n            });\n        }\n        if (delta) {\n            // Incoporate each ancestor's scale into a culmulative treeScale for this component\n            treeScale.x *= delta.x.scale;\n            treeScale.y *= delta.y.scale;\n            // Apply each ancestor's calculated delta into this component's recorded layout box\n            applyBoxDelta(box, delta);\n        }\n        if (isSharedTransition && hasTransform(node.latestValues)) {\n            transformBox(box, node.latestValues);\n        }\n    }\n    /**\n     * Snap tree scale back to 1 if it's within a non-perceivable threshold.\n     * This will help reduce useless scales getting rendered.\n     */\n    treeScale.x = snapToDefault(treeScale.x);\n    treeScale.y = snapToDefault(treeScale.y);\n}\nfunction snapToDefault(scale) {\n    if (Number.isInteger(scale))\n        return scale;\n    return scale > 1.0000000000001 || scale < 0.999999999999 ? scale : 1;\n}\nfunction translateAxis(axis, distance) {\n    axis.min = axis.min + distance;\n    axis.max = axis.max + distance;\n}\n/**\n * Apply a transform to an axis from the latest resolved motion values.\n * This function basically acts as a bridge between a flat motion value map\n * and applyAxisDelta\n */\nfunction transformAxis(axis, transforms, [key, scaleKey, originKey]) {\n    const axisOrigin = transforms[originKey] !== undefined ? transforms[originKey] : 0.5;\n    const originPoint = mix(axis.min, axis.max, axisOrigin);\n    // Apply the axis delta to the final axis\n    applyAxisDelta(axis, transforms[key], transforms[scaleKey], originPoint, transforms.scale);\n}\n/**\n * The names of the motion values we want to apply as translation, scale and origin.\n */\nconst xKeys = [\"x\", \"scaleX\", \"originX\"];\nconst yKeys = [\"y\", \"scaleY\", \"originY\"];\n/**\n * Apply a transform to a box from the latest resolved motion values.\n */\nfunction transformBox(box, transform) {\n    transformAxis(box.x, transform, xKeys);\n    transformAxis(box.y, transform, yKeys);\n}\n\nexport { applyAxisDelta, applyBoxDelta, applyPointDelta, applyTreeDeltas, scalePoint, transformAxis, transformBox, translateAxis };\n","import { convertBoundingBoxToBox, transformBoxPoints } from '../geometry/conversion.mjs';\nimport { translateAxis } from '../geometry/delta-apply.mjs';\n\nfunction measureViewportBox(instance, transformPoint) {\n    return convertBoundingBoxToBox(transformBoxPoints(instance.getBoundingClientRect(), transformPoint));\n}\nfunction measurePageBox(element, rootProjectionNode, transformPagePoint) {\n    const viewportBox = measureViewportBox(element, transformPagePoint);\n    const { scroll } = rootProjectionNode;\n    if (scroll) {\n        translateAxis(viewportBox.x, scroll.offset.x);\n        translateAxis(viewportBox.y, scroll.offset.y);\n    }\n    return viewportBox;\n}\n\nexport { measurePageBox, measureViewportBox };\n","// Fixes https://github.com/framer/motion/issues/2270\nconst getContextWindow = ({ current }) => {\n    return current ? current.ownerDocument.defaultView : null;\n};\n\nexport { getContextWindow };\n","import { invariant } from '../../utils/errors.mjs';\nimport { PanSession } from '../pan/PanSession.mjs';\nimport { getGlobalLock } from './utils/lock.mjs';\nimport { isRefObject } from '../../utils/is-ref-object.mjs';\nimport { addPointerEvent } from '../../events/add-pointer-event.mjs';\nimport { applyConstraints, calcRelativeConstraints, resolveDragElastic, calcViewportConstraints, defaultElastic, rebaseAxisConstraints, calcOrigin } from './utils/constraints.mjs';\nimport { createBox } from '../../projection/geometry/models.mjs';\nimport { eachAxis } from '../../projection/utils/each-axis.mjs';\nimport { measurePageBox } from '../../projection/utils/measure.mjs';\nimport { extractEventInfo } from '../../events/event-info.mjs';\nimport { convertBoxToBoundingBox, convertBoundingBoxToBox } from '../../projection/geometry/conversion.mjs';\nimport { addDomEvent } from '../../events/add-dom-event.mjs';\nimport { calcLength } from '../../projection/geometry/delta-calc.mjs';\nimport { mix } from '../../utils/mix.mjs';\nimport { percent } from '../../value/types/numbers/units.mjs';\nimport { animateMotionValue } from '../../animation/interfaces/motion-value.mjs';\nimport { getContextWindow } from '../../utils/get-context-window.mjs';\nimport { frame } from '../../frameloop/frame.mjs';\n\nconst elementDragControls = new WeakMap();\n/**\n *\n */\n// let latestPointerEvent: PointerEvent\nclass VisualElementDragControls {\n    constructor(visualElement) {\n        // This is a reference to the global drag gesture lock, ensuring only one component\n        // can \"capture\" the drag of one or both axes.\n        // TODO: Look into moving this into pansession?\n        this.openGlobalLock = null;\n        this.isDragging = false;\n        this.currentDirection = null;\n        this.originPoint = { x: 0, y: 0 };\n        /**\n         * The permitted boundaries of travel, in pixels.\n         */\n        this.constraints = false;\n        this.hasMutatedConstraints = false;\n        /**\n         * The per-axis resolved elastic values.\n         */\n        this.elastic = createBox();\n        this.visualElement = visualElement;\n    }\n    start(originEvent, { snapToCursor = false } = {}) {\n        /**\n         * Don't start dragging if this component is exiting\n         */\n        const { presenceContext } = this.visualElement;\n        if (presenceContext && presenceContext.isPresent === false)\n            return;\n        const onSessionStart = (event) => {\n            const { dragSnapToOrigin } = this.getProps();\n            // Stop or pause any animations on both axis values immediately. This allows the user to throw and catch\n            // the component.\n            dragSnapToOrigin ? this.pauseAnimation() : this.stopAnimation();\n            if (snapToCursor) {\n                this.snapToCursor(extractEventInfo(event, \"page\").point);\n            }\n        };\n        const onStart = (event, info) => {\n            // Attempt to grab the global drag gesture lock - maybe make this part of PanSession\n            const { drag, dragPropagation, onDragStart } = this.getProps();\n            if (drag && !dragPropagation) {\n                if (this.openGlobalLock)\n                    this.openGlobalLock();\n                this.openGlobalLock = getGlobalLock(drag);\n                // If we don 't have the lock, don't start dragging\n                if (!this.openGlobalLock)\n                    return;\n            }\n            this.isDragging = true;\n            this.currentDirection = null;\n            this.resolveConstraints();\n            if (this.visualElement.projection) {\n                this.visualElement.projection.isAnimationBlocked = true;\n                this.visualElement.projection.target = undefined;\n            }\n            /**\n             * Record gesture origin\n             */\n            eachAxis((axis) => {\n                let current = this.getAxisMotionValue(axis).get() || 0;\n                /**\n                 * If the MotionValue is a percentage value convert to px\n                 */\n                if (percent.test(current)) {\n                    const { projection } = this.visualElement;\n                    if (projection && projection.layout) {\n                        const measuredAxis = projection.layout.layoutBox[axis];\n                        if (measuredAxis) {\n                            const length = calcLength(measuredAxis);\n                            current = length * (parseFloat(current) / 100);\n                        }\n                    }\n                }\n                this.originPoint[axis] = current;\n            });\n            // Fire onDragStart event\n            if (onDragStart) {\n                frame.update(() => onDragStart(event, info), false, true);\n            }\n            const { animationState } = this.visualElement;\n            animationState && animationState.setActive(\"whileDrag\", true);\n        };\n        const onMove = (event, info) => {\n            // latestPointerEvent = event\n            const { dragPropagation, dragDirectionLock, onDirectionLock, onDrag, } = this.getProps();\n            // If we didn't successfully receive the gesture lock, early return.\n            if (!dragPropagation && !this.openGlobalLock)\n                return;\n            const { offset } = info;\n            // Attempt to detect drag direction if directionLock is true\n            if (dragDirectionLock && this.currentDirection === null) {\n                this.currentDirection = getCurrentDirection(offset);\n                // If we've successfully set a direction, notify listener\n                if (this.currentDirection !== null) {\n                    onDirectionLock && onDirectionLock(this.currentDirection);\n                }\n                return;\n            }\n            // Update each point with the latest position\n            this.updateAxis(\"x\", info.point, offset);\n            this.updateAxis(\"y\", info.point, offset);\n            /**\n             * Ideally we would leave the renderer to fire naturally at the end of\n             * this frame but if the element is about to change layout as the result\n             * of a re-render we want to ensure the browser can read the latest\n             * bounding box to ensure the pointer and element don't fall out of sync.\n             */\n            this.visualElement.render();\n            /**\n             * This must fire after the render call as it might trigger a state\n             * change which itself might trigger a layout update.\n             */\n            onDrag && onDrag(event, info);\n        };\n        const onSessionEnd = (event, info) => this.stop(event, info);\n        const resumeAnimation = () => eachAxis((axis) => {\n            var _a;\n            return this.getAnimationState(axis) === \"paused\" &&\n                ((_a = this.getAxisMotionValue(axis).animation) === null || _a === void 0 ? void 0 : _a.play());\n        });\n        const { dragSnapToOrigin } = this.getProps();\n        this.panSession = new PanSession(originEvent, {\n            onSessionStart,\n            onStart,\n            onMove,\n            onSessionEnd,\n            resumeAnimation,\n        }, {\n            transformPagePoint: this.visualElement.getTransformPagePoint(),\n            dragSnapToOrigin,\n            contextWindow: getContextWindow(this.visualElement),\n        });\n    }\n    stop(event, info) {\n        const isDragging = this.isDragging;\n        this.cancel();\n        if (!isDragging)\n            return;\n        const { velocity } = info;\n        this.startAnimation(velocity);\n        const { onDragEnd } = this.getProps();\n        if (onDragEnd) {\n            frame.update(() => onDragEnd(event, info));\n        }\n    }\n    cancel() {\n        this.isDragging = false;\n        const { projection, animationState } = this.visualElement;\n        if (projection) {\n            projection.isAnimationBlocked = false;\n        }\n        this.panSession && this.panSession.end();\n        this.panSession = undefined;\n        const { dragPropagation } = this.getProps();\n        if (!dragPropagation && this.openGlobalLock) {\n            this.openGlobalLock();\n            this.openGlobalLock = null;\n        }\n        animationState && animationState.setActive(\"whileDrag\", false);\n    }\n    updateAxis(axis, _point, offset) {\n        const { drag } = this.getProps();\n        // If we're not dragging this axis, do an early return.\n        if (!offset || !shouldDrag(axis, drag, this.currentDirection))\n            return;\n        const axisValue = this.getAxisMotionValue(axis);\n        let next = this.originPoint[axis] + offset[axis];\n        // Apply constraints\n        if (this.constraints && this.constraints[axis]) {\n            next = applyConstraints(next, this.constraints[axis], this.elastic[axis]);\n        }\n        axisValue.set(next);\n    }\n    resolveConstraints() {\n        var _a;\n        const { dragConstraints, dragElastic } = this.getProps();\n        const layout = this.visualElement.projection &&\n            !this.visualElement.projection.layout\n            ? this.visualElement.projection.measure(false)\n            : (_a = this.visualElement.projection) === null || _a === void 0 ? void 0 : _a.layout;\n        const prevConstraints = this.constraints;\n        if (dragConstraints && isRefObject(dragConstraints)) {\n            if (!this.constraints) {\n                this.constraints = this.resolveRefConstraints();\n            }\n        }\n        else {\n            if (dragConstraints && layout) {\n                this.constraints = calcRelativeConstraints(layout.layoutBox, dragConstraints);\n            }\n            else {\n                this.constraints = false;\n            }\n        }\n        this.elastic = resolveDragElastic(dragElastic);\n        /**\n         * If we're outputting to external MotionValues, we want to rebase the measured constraints\n         * from viewport-relative to component-relative.\n         */\n        if (prevConstraints !== this.constraints &&\n            layout &&\n            this.constraints &&\n            !this.hasMutatedConstraints) {\n            eachAxis((axis) => {\n                if (this.getAxisMotionValue(axis)) {\n                    this.constraints[axis] = rebaseAxisConstraints(layout.layoutBox[axis], this.constraints[axis]);\n                }\n            });\n        }\n    }\n    resolveRefConstraints() {\n        const { dragConstraints: constraints, onMeasureDragConstraints } = this.getProps();\n        if (!constraints || !isRefObject(constraints))\n            return false;\n        const constraintsElement = constraints.current;\n        invariant(constraintsElement !== null, \"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.\");\n        const { projection } = this.visualElement;\n        // TODO\n        if (!projection || !projection.layout)\n            return false;\n        const constraintsBox = measurePageBox(constraintsElement, projection.root, this.visualElement.getTransformPagePoint());\n        let measuredConstraints = calcViewportConstraints(projection.layout.layoutBox, constraintsBox);\n        /**\n         * If there's an onMeasureDragConstraints listener we call it and\n         * if different constraints are returned, set constraints to that\n         */\n        if (onMeasureDragConstraints) {\n            const userConstraints = onMeasureDragConstraints(convertBoxToBoundingBox(measuredConstraints));\n            this.hasMutatedConstraints = !!userConstraints;\n            if (userConstraints) {\n                measuredConstraints = convertBoundingBoxToBox(userConstraints);\n            }\n        }\n        return measuredConstraints;\n    }\n    startAnimation(velocity) {\n        const { drag, dragMomentum, dragElastic, dragTransition, dragSnapToOrigin, onDragTransitionEnd, } = this.getProps();\n        const constraints = this.constraints || {};\n        const momentumAnimations = eachAxis((axis) => {\n            if (!shouldDrag(axis, drag, this.currentDirection)) {\n                return;\n            }\n            let transition = (constraints && constraints[axis]) || {};\n            if (dragSnapToOrigin)\n                transition = { min: 0, max: 0 };\n            /**\n             * Overdamp the boundary spring if `dragElastic` is disabled. There's still a frame\n             * of spring animations so we should look into adding a disable spring option to `inertia`.\n             * We could do something here where we affect the `bounceStiffness` and `bounceDamping`\n             * using the value of `dragElastic`.\n             */\n            const bounceStiffness = dragElastic ? 200 : 1000000;\n            const bounceDamping = dragElastic ? 40 : 10000000;\n            const inertia = {\n                type: \"inertia\",\n                velocity: dragMomentum ? velocity[axis] : 0,\n                bounceStiffness,\n                bounceDamping,\n                timeConstant: 750,\n                restDelta: 1,\n                restSpeed: 10,\n                ...dragTransition,\n                ...transition,\n            };\n            // If we're not animating on an externally-provided `MotionValue` we can use the\n            // component's animation controls which will handle interactions with whileHover (etc),\n            // otherwise we just have to animate the `MotionValue` itself.\n            return this.startAxisValueAnimation(axis, inertia);\n        });\n        // Run all animations and then resolve the new drag constraints.\n        return Promise.all(momentumAnimations).then(onDragTransitionEnd);\n    }\n    startAxisValueAnimation(axis, transition) {\n        const axisValue = this.getAxisMotionValue(axis);\n        return axisValue.start(animateMotionValue(axis, axisValue, 0, transition));\n    }\n    stopAnimation() {\n        eachAxis((axis) => this.getAxisMotionValue(axis).stop());\n    }\n    pauseAnimation() {\n        eachAxis((axis) => { var _a; return (_a = this.getAxisMotionValue(axis).animation) === null || _a === void 0 ? void 0 : _a.pause(); });\n    }\n    getAnimationState(axis) {\n        var _a;\n        return (_a = this.getAxisMotionValue(axis).animation) === null || _a === void 0 ? void 0 : _a.state;\n    }\n    /**\n     * Drag works differently depending on which props are provided.\n     *\n     * - If _dragX and _dragY are provided, we output the gesture delta directly to those motion values.\n     * - Otherwise, we apply the delta to the x/y motion values.\n     */\n    getAxisMotionValue(axis) {\n        const dragKey = \"_drag\" + axis.toUpperCase();\n        const props = this.visualElement.getProps();\n        const externalMotionValue = props[dragKey];\n        return externalMotionValue\n            ? externalMotionValue\n            : this.visualElement.getValue(axis, (props.initial ? props.initial[axis] : undefined) || 0);\n    }\n    snapToCursor(point) {\n        eachAxis((axis) => {\n            const { drag } = this.getProps();\n            // If we're not dragging this axis, do an early return.\n            if (!shouldDrag(axis, drag, this.currentDirection))\n                return;\n            const { projection } = this.visualElement;\n            const axisValue = this.getAxisMotionValue(axis);\n            if (projection && projection.layout) {\n                const { min, max } = projection.layout.layoutBox[axis];\n                axisValue.set(point[axis] - mix(min, max, 0.5));\n            }\n        });\n    }\n    /**\n     * When the viewport resizes we want to check if the measured constraints\n     * have changed and, if so, reposition the element within those new constraints\n     * relative to where it was before the resize.\n     */\n    scalePositionWithinConstraints() {\n        if (!this.visualElement.current)\n            return;\n        const { drag, dragConstraints } = this.getProps();\n        const { projection } = this.visualElement;\n        if (!isRefObject(dragConstraints) || !projection || !this.constraints)\n            return;\n        /**\n         * Stop current animations as there can be visual glitching if we try to do\n         * this mid-animation\n         */\n        this.stopAnimation();\n        /**\n         * Record the relative position of the dragged element relative to the\n         * constraints box and save as a progress value.\n         */\n        const boxProgress = { x: 0, y: 0 };\n        eachAxis((axis) => {\n            const axisValue = this.getAxisMotionValue(axis);\n            if (axisValue) {\n                const latest = axisValue.get();\n                boxProgress[axis] = calcOrigin({ min: latest, max: latest }, this.constraints[axis]);\n            }\n        });\n        /**\n         * Update the layout of this element and resolve the latest drag constraints\n         */\n        const { transformTemplate } = this.visualElement.getProps();\n        this.visualElement.current.style.transform = transformTemplate\n            ? transformTemplate({}, \"\")\n            : \"none\";\n        projection.root && projection.root.updateScroll();\n        projection.updateLayout();\n        this.resolveConstraints();\n        /**\n         * For each axis, calculate the current progress of the layout axis\n         * within the new constraints.\n         */\n        eachAxis((axis) => {\n            if (!shouldDrag(axis, drag, null))\n                return;\n            /**\n             * Calculate a new transform based on the previous box progress\n             */\n            const axisValue = this.getAxisMotionValue(axis);\n            const { min, max } = this.constraints[axis];\n            axisValue.set(mix(min, max, boxProgress[axis]));\n        });\n    }\n    addListeners() {\n        if (!this.visualElement.current)\n            return;\n        elementDragControls.set(this.visualElement, this);\n        const element = this.visualElement.current;\n        /**\n         * Attach a pointerdown event listener on this DOM element to initiate drag tracking.\n         */\n        const stopPointerListener = addPointerEvent(element, \"pointerdown\", (event) => {\n            const { drag, dragListener = true } = this.getProps();\n            drag && dragListener && this.start(event);\n        });\n        const measureDragConstraints = () => {\n            const { dragConstraints } = this.getProps();\n            if (isRefObject(dragConstraints)) {\n                this.constraints = this.resolveRefConstraints();\n            }\n        };\n        const { projection } = this.visualElement;\n        const stopMeasureLayoutListener = projection.addEventListener(\"measure\", measureDragConstraints);\n        if (projection && !projection.layout) {\n            projection.root && projection.root.updateScroll();\n            projection.updateLayout();\n        }\n        measureDragConstraints();\n        /**\n         * Attach a window resize listener to scale the draggable target within its defined\n         * constraints as the window resizes.\n         */\n        const stopResizeListener = addDomEvent(window, \"resize\", () => this.scalePositionWithinConstraints());\n        /**\n         * If the element's layout changes, calculate the delta and apply that to\n         * the drag gesture's origin point.\n         */\n        const stopLayoutUpdateListener = projection.addEventListener(\"didUpdate\", (({ delta, hasLayoutChanged }) => {\n            if (this.isDragging && hasLayoutChanged) {\n                eachAxis((axis) => {\n                    const motionValue = this.getAxisMotionValue(axis);\n                    if (!motionValue)\n                        return;\n                    this.originPoint[axis] += delta[axis].translate;\n                    motionValue.set(motionValue.get() + delta[axis].translate);\n                });\n                this.visualElement.render();\n            }\n        }));\n        return () => {\n            stopResizeListener();\n            stopPointerListener();\n            stopMeasureLayoutListener();\n            stopLayoutUpdateListener && stopLayoutUpdateListener();\n        };\n    }\n    getProps() {\n        const props = this.visualElement.getProps();\n        const { drag = false, dragDirectionLock = false, dragPropagation = false, dragConstraints = false, dragElastic = defaultElastic, dragMomentum = true, } = props;\n        return {\n            ...props,\n            drag,\n            dragDirectionLock,\n            dragPropagation,\n            dragConstraints,\n            dragElastic,\n            dragMomentum,\n        };\n    }\n}\nfunction shouldDrag(direction, drag, currentDirection) {\n    return ((drag === true || drag === direction) &&\n        (currentDirection === null || currentDirection === direction));\n}\n/**\n * Based on an x/y offset determine the current drag direction. If both axis' offsets are lower\n * than the provided threshold, return `null`.\n *\n * @param offset - The x/y offset from origin.\n * @param lockThreshold - (Optional) - the minimum absolute offset before we can determine a drag direction.\n */\nfunction getCurrentDirection(offset, lockThreshold = 10) {\n    let direction = null;\n    if (Math.abs(offset.y) > lockThreshold) {\n        direction = \"y\";\n    }\n    else if (Math.abs(offset.x) > lockThreshold) {\n        direction = \"x\";\n    }\n    return direction;\n}\n\nexport { VisualElementDragControls, elementDragControls };\n","import { Feature } from '../../motion/features/Feature.mjs';\nimport { noop } from '../../utils/noop.mjs';\nimport { VisualElementDragControls } from './VisualElementDragControls.mjs';\n\nclass DragGesture extends Feature {\n    constructor(node) {\n        super(node);\n        this.removeGroupControls = noop;\n        this.removeListeners = noop;\n        this.controls = new VisualElementDragControls(node);\n    }\n    mount() {\n        // If we've been provided a DragControls for manual control over the drag gesture,\n        // subscribe this component to it on mount.\n        const { dragControls } = this.node.getProps();\n        if (dragControls) {\n            this.removeGroupControls = dragControls.subscribe(this.controls);\n        }\n        this.removeListeners = this.controls.addListeners() || noop;\n    }\n    unmount() {\n        this.removeGroupControls();\n        this.removeListeners();\n    }\n}\n\nexport { DragGesture };\n","import { PanSession } from './PanSession.mjs';\nimport { addPointerEvent } from '../../events/add-pointer-event.mjs';\nimport { Feature } from '../../motion/features/Feature.mjs';\nimport { noop } from '../../utils/noop.mjs';\nimport { getContextWindow } from '../../utils/get-context-window.mjs';\nimport { frame } from '../../frameloop/frame.mjs';\n\nconst asyncHandler = (handler) => (event, info) => {\n    if (handler) {\n        frame.update(() => handler(event, info));\n    }\n};\nclass PanGesture extends Feature {\n    constructor() {\n        super(...arguments);\n        this.removePointerDownListener = noop;\n    }\n    onPointerDown(pointerDownEvent) {\n        this.session = new PanSession(pointerDownEvent, this.createPanHandlers(), {\n            transformPagePoint: this.node.getTransformPagePoint(),\n            contextWindow: getContextWindow(this.node),\n        });\n    }\n    createPanHandlers() {\n        const { onPanSessionStart, onPanStart, onPan, onPanEnd } = this.node.getProps();\n        return {\n            onSessionStart: asyncHandler(onPanSessionStart),\n            onStart: asyncHandler(onPanStart),\n            onMove: onPan,\n            onEnd: (event, info) => {\n                delete this.session;\n                if (onPanEnd) {\n                    frame.update(() => onPanEnd(event, info));\n                }\n            },\n        };\n    }\n    mount() {\n        this.removePointerDownListener = addPointerEvent(this.node.current, \"pointerdown\", (event) => this.onPointerDown(event));\n    }\n    update() {\n        this.session && this.session.updateHandlers(this.createPanHandlers());\n    }\n    unmount() {\n        this.removePointerDownListener();\n        this.session && this.session.end();\n    }\n}\n\nexport { PanGesture };\n","import { useContext, useId, useEffect } from 'react';\nimport { PresenceContext } from '../../context/PresenceContext.mjs';\n\n/**\n * When a component is the child of `AnimatePresence`, it can use `usePresence`\n * to access information about whether it's still present in the React tree.\n *\n * ```jsx\n * import { usePresence } from \"framer-motion\"\n *\n * export const Component = () => {\n *   const [isPresent, safeToRemove] = usePresence()\n *\n *   useEffect(() => {\n *     !isPresent && setTimeout(safeToRemove, 1000)\n *   }, [isPresent])\n *\n *   return <div />\n * }\n * ```\n *\n * If `isPresent` is `false`, it means that a component has been removed the tree, but\n * `AnimatePresence` won't really remove it until `safeToRemove` has been called.\n *\n * @public\n */\nfunction usePresence() {\n    const context = useContext(PresenceContext);\n    if (context === null)\n        return [true, null];\n    const { isPresent, onExitComplete, register } = context;\n    // It's safe to call the following hooks conditionally (after an early return) because the context will always\n    // either be null or non-null for the lifespan of the component.\n    const id = useId();\n    useEffect(() => register(id), []);\n    const safeToRemove = () => onExitComplete && onExitComplete(id);\n    return !isPresent && onExitComplete ? [false, safeToRemove] : [true];\n}\n/**\n * Similar to `usePresence`, except `useIsPresent` simply returns whether or not the component is present.\n * There is no `safeToRemove` function.\n *\n * ```jsx\n * import { useIsPresent } from \"framer-motion\"\n *\n * export const Component = () => {\n *   const isPresent = useIsPresent()\n *\n *   useEffect(() => {\n *     !isPresent && console.log(\"I've been removed!\")\n *   }, [isPresent])\n *\n *   return <div />\n * }\n * ```\n *\n * @public\n */\nfunction useIsPresent() {\n    return isPresent(useContext(PresenceContext));\n}\nfunction isPresent(context) {\n    return context === null ? true : context.isPresent;\n}\n\nexport { isPresent, useIsPresent, usePresence };\n","/**\n * This should only ever be modified on the client otherwise it'll\n * persist through server requests. If we need instanced states we\n * could lazy-init via root.\n */\nconst globalProjectionState = {\n    /**\n     * Global flag as to whether the tree has animated since the last time\n     * we resized the window\n     */\n    hasAnimatedSinceResize: true,\n    /**\n     * We set this to true once, on the first update. Any nodes added to the tree beyond that\n     * update will be given a `data-projection-id` attribute.\n     */\n    hasEverUpdated: false,\n};\n\nexport { globalProjectionState };\n","import { px } from '../../value/types/numbers/units.mjs';\n\nfunction pixelsToPercent(pixels, axis) {\n    if (axis.max === axis.min)\n        return 0;\n    return (pixels / (axis.max - axis.min)) * 100;\n}\n/**\n * We always correct borderRadius as a percentage rather than pixels to reduce paints.\n * For example, if you are projecting a box that is 100px wide with a 10px borderRadius\n * into a box that is 200px wide with a 20px borderRadius, that is actually a 10%\n * borderRadius in both states. If we animate between the two in pixels that will trigger\n * a paint each time. If we animate between the two in percentage we'll avoid a paint.\n */\nconst correctBorderRadius = {\n    correct: (latest, node) => {\n        if (!node.target)\n            return latest;\n        /**\n         * If latest is a string, if it's a percentage we can return immediately as it's\n         * going to be stretched appropriately. Otherwise, if it's a pixel, convert it to a number.\n         */\n        if (typeof latest === \"string\") {\n            if (px.test(latest)) {\n                latest = parseFloat(latest);\n            }\n            else {\n                return latest;\n            }\n        }\n        /**\n         * If latest is a number, it's a pixel value. We use the current viewportBox to calculate that\n         * pixel value as a percentage of each axis\n         */\n        const x = pixelsToPercent(latest, node.target.x);\n        const y = pixelsToPercent(latest, node.target.y);\n        return `${x}% ${y}%`;\n    },\n};\n\nexport { correctBorderRadius, pixelsToPercent };\n","import { mix } from '../../utils/mix.mjs';\nimport { complex } from '../../value/types/complex/index.mjs';\n\nconst correctBoxShadow = {\n    correct: (latest, { treeScale, projectionDelta }) => {\n        const original = latest;\n        const shadow = complex.parse(latest);\n        // TODO: Doesn't support multiple shadows\n        if (shadow.length > 5)\n            return original;\n        const template = complex.createTransformer(latest);\n        const offset = typeof shadow[0] !== \"number\" ? 1 : 0;\n        // Calculate the overall context scale\n        const xScale = projectionDelta.x.scale * treeScale.x;\n        const yScale = projectionDelta.y.scale * treeScale.y;\n        shadow[0 + offset] /= xScale;\n        shadow[1 + offset] /= yScale;\n        /**\n         * Ideally we'd correct x and y scales individually, but because blur and\n         * spread apply to both we have to take a scale average and apply that instead.\n         * We could potentially improve the outcome of this by incorporating the ratio between\n         * the two scales.\n         */\n        const averageScale = mix(xScale, yScale, 0.5);\n        // Blur\n        if (typeof shadow[2 + offset] === \"number\")\n            shadow[2 + offset] /= averageScale;\n        // Spread\n        if (typeof shadow[3 + offset] === \"number\")\n            shadow[3 + offset] /= averageScale;\n        return template(shadow);\n    },\n};\n\nexport { correctBoxShadow };\n","import React__default, { useContext } from 'react';\nimport { usePresence } from '../../../components/AnimatePresence/use-presence.mjs';\nimport { LayoutGroupContext } from '../../../context/LayoutGroupContext.mjs';\nimport { SwitchLayoutGroupContext } from '../../../context/SwitchLayoutGroupContext.mjs';\nimport { globalProjectionState } from '../../../projection/node/state.mjs';\nimport { correctBorderRadius } from '../../../projection/styles/scale-border-radius.mjs';\nimport { correctBoxShadow } from '../../../projection/styles/scale-box-shadow.mjs';\nimport { addScaleCorrector } from '../../../projection/styles/scale-correction.mjs';\nimport { frame } from '../../../frameloop/frame.mjs';\n\nclass MeasureLayoutWithContext extends React__default.Component {\n    /**\n     * This only mounts projection nodes for components that\n     * need measuring, we might want to do it for all components\n     * in order to incorporate transforms\n     */\n    componentDidMount() {\n        const { visualElement, layoutGroup, switchLayoutGroup, layoutId } = this.props;\n        const { projection } = visualElement;\n        addScaleCorrector(defaultScaleCorrectors);\n        if (projection) {\n            if (layoutGroup.group)\n                layoutGroup.group.add(projection);\n            if (switchLayoutGroup && switchLayoutGroup.register && layoutId) {\n                switchLayoutGroup.register(projection);\n            }\n            projection.root.didUpdate();\n            projection.addEventListener(\"animationComplete\", () => {\n                this.safeToRemove();\n            });\n            projection.setOptions({\n                ...projection.options,\n                onExitComplete: () => this.safeToRemove(),\n            });\n        }\n        globalProjectionState.hasEverUpdated = true;\n    }\n    getSnapshotBeforeUpdate(prevProps) {\n        const { layoutDependency, visualElement, drag, isPresent } = this.props;\n        const projection = visualElement.projection;\n        if (!projection)\n            return null;\n        /**\n         * TODO: We use this data in relegate to determine whether to\n         * promote a previous element. There's no guarantee its presence data\n         * will have updated by this point - if a bug like this arises it will\n         * have to be that we markForRelegation and then find a new lead some other way,\n         * perhaps in didUpdate\n         */\n        projection.isPresent = isPresent;\n        if (drag ||\n            prevProps.layoutDependency !== layoutDependency ||\n            layoutDependency === undefined) {\n            projection.willUpdate();\n        }\n        else {\n            this.safeToRemove();\n        }\n        if (prevProps.isPresent !== isPresent) {\n            if (isPresent) {\n                projection.promote();\n            }\n            else if (!projection.relegate()) {\n                /**\n                 * If there's another stack member taking over from this one,\n                 * it's in charge of the exit animation and therefore should\n                 * be in charge of the safe to remove. Otherwise we call it here.\n                 */\n                frame.postRender(() => {\n                    const stack = projection.getStack();\n                    if (!stack || !stack.members.length) {\n                        this.safeToRemove();\n                    }\n                });\n            }\n        }\n        return null;\n    }\n    componentDidUpdate() {\n        const { projection } = this.props.visualElement;\n        if (projection) {\n            projection.root.didUpdate();\n            queueMicrotask(() => {\n                if (!projection.currentAnimation && projection.isLead()) {\n                    this.safeToRemove();\n                }\n            });\n        }\n    }\n    componentWillUnmount() {\n        const { visualElement, layoutGroup, switchLayoutGroup: promoteContext, } = this.props;\n        const { projection } = visualElement;\n        if (projection) {\n            projection.scheduleCheckAfterUnmount();\n            if (layoutGroup && layoutGroup.group)\n                layoutGroup.group.remove(projection);\n            if (promoteContext && promoteContext.deregister)\n                promoteContext.deregister(projection);\n        }\n    }\n    safeToRemove() {\n        const { safeToRemove } = this.props;\n        safeToRemove && safeToRemove();\n    }\n    render() {\n        return null;\n    }\n}\nfunction MeasureLayout(props) {\n    const [isPresent, safeToRemove] = usePresence();\n    const layoutGroup = useContext(LayoutGroupContext);\n    return (React__default.createElement(MeasureLayoutWithContext, { ...props, layoutGroup: layoutGroup, switchLayoutGroup: useContext(SwitchLayoutGroupContext), isPresent: isPresent, safeToRemove: safeToRemove }));\n}\nconst defaultScaleCorrectors = {\n    borderRadius: {\n        ...correctBorderRadius,\n        applyTo: [\n            \"borderTopLeftRadius\",\n            \"borderTopRightRadius\",\n            \"borderBottomLeftRadius\",\n            \"borderBottomRightRadius\",\n        ],\n    },\n    borderTopLeftRadius: correctBorderRadius,\n    borderTopRightRadius: correctBorderRadius,\n    borderBottomLeftRadius: correctBorderRadius,\n    borderBottomRightRadius: correctBorderRadius,\n    boxShadow: correctBoxShadow,\n};\n\nexport { MeasureLayout };\n","import { circOut } from '../../easing/circ.mjs';\nimport { progress } from '../../utils/progress.mjs';\nimport { mix } from '../../utils/mix.mjs';\nimport { noop } from '../../utils/noop.mjs';\nimport { percent, px } from '../../value/types/numbers/units.mjs';\n\nconst borders = [\"TopLeft\", \"TopRight\", \"BottomLeft\", \"BottomRight\"];\nconst numBorders = borders.length;\nconst asNumber = (value) => typeof value === \"string\" ? parseFloat(value) : value;\nconst isPx = (value) => typeof value === \"number\" || px.test(value);\nfunction mixValues(target, follow, lead, progress, shouldCrossfadeOpacity, isOnlyMember) {\n    if (shouldCrossfadeOpacity) {\n        target.opacity = mix(0, \n        // TODO Reinstate this if only child\n        lead.opacity !== undefined ? lead.opacity : 1, easeCrossfadeIn(progress));\n        target.opacityExit = mix(follow.opacity !== undefined ? follow.opacity : 1, 0, easeCrossfadeOut(progress));\n    }\n    else if (isOnlyMember) {\n        target.opacity = mix(follow.opacity !== undefined ? follow.opacity : 1, lead.opacity !== undefined ? lead.opacity : 1, progress);\n    }\n    /**\n     * Mix border radius\n     */\n    for (let i = 0; i < numBorders; i++) {\n        const borderLabel = `border${borders[i]}Radius`;\n        let followRadius = getRadius(follow, borderLabel);\n        let leadRadius = getRadius(lead, borderLabel);\n        if (followRadius === undefined && leadRadius === undefined)\n            continue;\n        followRadius || (followRadius = 0);\n        leadRadius || (leadRadius = 0);\n        const canMix = followRadius === 0 ||\n            leadRadius === 0 ||\n            isPx(followRadius) === isPx(leadRadius);\n        if (canMix) {\n            target[borderLabel] = Math.max(mix(asNumber(followRadius), asNumber(leadRadius), progress), 0);\n            if (percent.test(leadRadius) || percent.test(followRadius)) {\n                target[borderLabel] += \"%\";\n            }\n        }\n        else {\n            target[borderLabel] = leadRadius;\n        }\n    }\n    /**\n     * Mix rotation\n     */\n    if (follow.rotate || lead.rotate) {\n        target.rotate = mix(follow.rotate || 0, lead.rotate || 0, progress);\n    }\n}\nfunction getRadius(values, radiusName) {\n    return values[radiusName] !== undefined\n        ? values[radiusName]\n        : values.borderRadius;\n}\n// /**\n//  * We only want to mix the background color if there's a follow element\n//  * that we're not crossfading opacity between. For instance with switch\n//  * AnimateSharedLayout animations, this helps the illusion of a continuous\n//  * element being animated but also cuts down on the number of paints triggered\n//  * for elements where opacity is doing that work for us.\n//  */\n// if (\n//     !hasFollowElement &&\n//     latestLeadValues.backgroundColor &&\n//     latestFollowValues.backgroundColor\n// ) {\n//     /**\n//      * This isn't ideal performance-wise as mixColor is creating a new function every frame.\n//      * We could probably create a mixer that runs at the start of the animation but\n//      * the idea behind the crossfader is that it runs dynamically between two potentially\n//      * changing targets (ie opacity or borderRadius may be animating independently via variants)\n//      */\n//     leadState.backgroundColor = followState.backgroundColor = mixColor(\n//         latestFollowValues.backgroundColor as string,\n//         latestLeadValues.backgroundColor as string\n//     )(p)\n// }\nconst easeCrossfadeIn = compress(0, 0.5, circOut);\nconst easeCrossfadeOut = compress(0.5, 0.95, noop);\nfunction compress(min, max, easing) {\n    return (p) => {\n        // Could replace ifs with clamp\n        if (p < min)\n            return 0;\n        if (p > max)\n            return 1;\n        return easing(progress(min, max, p));\n    };\n}\n\nexport { mixValues };\n","/**\n * Reset an axis to the provided origin box.\n *\n * This is a mutative operation.\n */\nfunction copyAxisInto(axis, originAxis) {\n    axis.min = originAxis.min;\n    axis.max = originAxis.max;\n}\n/**\n * Reset a box to the provided origin box.\n *\n * This is a mutative operation.\n */\nfunction copyBoxInto(box, originBox) {\n    copyAxisInto(box.x, originBox.x);\n    copyAxisInto(box.y, originBox.y);\n}\n\nexport { copyAxisInto, copyBoxInto };\n","import { mix } from '../../utils/mix.mjs';\nimport { percent } from '../../value/types/numbers/units.mjs';\nimport { scalePoint } from './delta-apply.mjs';\n\n/**\n * Remove a delta from a point. This is essentially the steps of applyPointDelta in reverse\n */\nfunction removePointDelta(point, translate, scale, originPoint, boxScale) {\n    point -= translate;\n    point = scalePoint(point, 1 / scale, originPoint);\n    if (boxScale !== undefined) {\n        point = scalePoint(point, 1 / boxScale, originPoint);\n    }\n    return point;\n}\n/**\n * Remove a delta from an axis. This is essentially the steps of applyAxisDelta in reverse\n */\nfunction removeAxisDelta(axis, translate = 0, scale = 1, origin = 0.5, boxScale, originAxis = axis, sourceAxis = axis) {\n    if (percent.test(translate)) {\n        translate = parseFloat(translate);\n        const relativeProgress = mix(sourceAxis.min, sourceAxis.max, translate / 100);\n        translate = relativeProgress - sourceAxis.min;\n    }\n    if (typeof translate !== \"number\")\n        return;\n    let originPoint = mix(originAxis.min, originAxis.max, origin);\n    if (axis === originAxis)\n        originPoint -= translate;\n    axis.min = removePointDelta(axis.min, translate, scale, originPoint, boxScale);\n    axis.max = removePointDelta(axis.max, translate, scale, originPoint, boxScale);\n}\n/**\n * Remove a transforms from an axis. This is essentially the steps of applyAxisTransforms in reverse\n * and acts as a bridge between motion values and removeAxisDelta\n */\nfunction removeAxisTransforms(axis, transforms, [key, scaleKey, originKey], origin, sourceAxis) {\n    removeAxisDelta(axis, transforms[key], transforms[scaleKey], transforms[originKey], transforms.scale, origin, sourceAxis);\n}\n/**\n * The names of the motion values we want to apply as translation, scale and origin.\n */\nconst xKeys = [\"x\", \"scaleX\", \"originX\"];\nconst yKeys = [\"y\", \"scaleY\", \"originY\"];\n/**\n * Remove a transforms from an box. This is essentially the steps of applyAxisBox in reverse\n * and acts as a bridge between motion values and removeAxisDelta\n */\nfunction removeBoxTransforms(box, transforms, originBox, sourceBox) {\n    removeAxisTransforms(box.x, transforms, xKeys, originBox ? originBox.x : undefined, sourceBox ? sourceBox.x : undefined);\n    removeAxisTransforms(box.y, transforms, yKeys, originBox ? originBox.y : undefined, sourceBox ? sourceBox.y : undefined);\n}\n\nexport { removeAxisDelta, removeAxisTransforms, removeBoxTransforms, removePointDelta };\n","import { calcLength } from './delta-calc.mjs';\n\nfunction isAxisDeltaZero(delta) {\n    return delta.translate === 0 && delta.scale === 1;\n}\nfunction isDeltaZero(delta) {\n    return isAxisDeltaZero(delta.x) && isAxisDeltaZero(delta.y);\n}\nfunction boxEquals(a, b) {\n    return (a.x.min === b.x.min &&\n        a.x.max === b.x.max &&\n        a.y.min === b.y.min &&\n        a.y.max === b.y.max);\n}\nfunction boxEqualsRounded(a, b) {\n    return (Math.round(a.x.min) === Math.round(b.x.min) &&\n        Math.round(a.x.max) === Math.round(b.x.max) &&\n        Math.round(a.y.min) === Math.round(b.y.min) &&\n        Math.round(a.y.max) === Math.round(b.y.max));\n}\nfunction aspectRatio(box) {\n    return calcLength(box.x) / calcLength(box.y);\n}\n\nexport { aspectRatio, boxEquals, boxEqualsRounded, isDeltaZero };\n","import { addUniqueItem, removeItem } from '../../utils/array.mjs';\n\nclass NodeStack {\n    constructor() {\n        this.members = [];\n    }\n    add(node) {\n        addUniqueItem(this.members, node);\n        node.scheduleRender();\n    }\n    remove(node) {\n        removeItem(this.members, node);\n        if (node === this.prevLead) {\n            this.prevLead = undefined;\n        }\n        if (node === this.lead) {\n            const prevLead = this.members[this.members.length - 1];\n            if (prevLead) {\n                this.promote(prevLead);\n            }\n        }\n    }\n    relegate(node) {\n        const indexOfNode = this.members.findIndex((member) => node === member);\n        if (indexOfNode === 0)\n            return false;\n        /**\n         * Find the next projection node that is present\n         */\n        let prevLead;\n        for (let i = indexOfNode; i >= 0; i--) {\n            const member = this.members[i];\n            if (member.isPresent !== false) {\n                prevLead = member;\n                break;\n            }\n        }\n        if (prevLead) {\n            this.promote(prevLead);\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n    promote(node, preserveFollowOpacity) {\n        const prevLead = this.lead;\n        if (node === prevLead)\n            return;\n        this.prevLead = prevLead;\n        this.lead = node;\n        node.show();\n        if (prevLead) {\n            prevLead.instance && prevLead.scheduleRender();\n            node.scheduleRender();\n            node.resumeFrom = prevLead;\n            if (preserveFollowOpacity) {\n                node.resumeFrom.preserveOpacity = true;\n            }\n            if (prevLead.snapshot) {\n                node.snapshot = prevLead.snapshot;\n                node.snapshot.latestValues =\n                    prevLead.animationValues || prevLead.latestValues;\n            }\n            if (node.root && node.root.isUpdating) {\n                node.isLayoutDirty = true;\n            }\n            const { crossfade } = node.options;\n            if (crossfade === false) {\n                prevLead.hide();\n            }\n            /**\n             * TODO:\n             *   - Test border radius when previous node was deleted\n             *   - boxShadow mixing\n             *   - Shared between element A in scrolled container and element B (scroll stays the same or changes)\n             *   - Shared between element A in transformed container and element B (transform stays the same or changes)\n             *   - Shared between element A in scrolled page and element B (scroll stays the same or changes)\n             * ---\n             *   - Crossfade opacity of root nodes\n             *   - layoutId changes after animation\n             *   - layoutId changes mid animation\n             */\n        }\n    }\n    exitAnimationComplete() {\n        this.members.forEach((node) => {\n            const { options, resumingFrom } = node;\n            options.onExitComplete && options.onExitComplete();\n            if (resumingFrom) {\n                resumingFrom.options.onExitComplete &&\n                    resumingFrom.options.onExitComplete();\n            }\n        });\n    }\n    scheduleRender() {\n        this.members.forEach((node) => {\n            node.instance && node.scheduleRender(false);\n        });\n    }\n    /**\n     * Clear any leads that have been removed this render to prevent them from being\n     * used in future animations and to prevent memory leaks\n     */\n    removeLeadSnapshot() {\n        if (this.lead && this.lead.snapshot) {\n            this.lead.snapshot = undefined;\n        }\n    }\n}\n\nexport { NodeStack };\n","function buildProjectionTransform(delta, treeScale, latestTransform) {\n    let transform = \"\";\n    /**\n     * The translations we use to calculate are always relative to the viewport coordinate space.\n     * But when we apply scales, we also scale the coordinate space of an element and its children.\n     * For instance if we have a treeScale (the culmination of all parent scales) of 0.5 and we need\n     * to move an element 100 pixels, we actually need to move it 200 in within that scaled space.\n     */\n    const xTranslate = delta.x.translate / treeScale.x;\n    const yTranslate = delta.y.translate / treeScale.y;\n    if (xTranslate || yTranslate) {\n        transform = `translate3d(${xTranslate}px, ${yTranslate}px, 0) `;\n    }\n    /**\n     * Apply scale correction for the tree transform.\n     * This will apply scale to the screen-orientated axes.\n     */\n    if (treeScale.x !== 1 || treeScale.y !== 1) {\n        transform += `scale(${1 / treeScale.x}, ${1 / treeScale.y}) `;\n    }\n    if (latestTransform) {\n        const { rotate, rotateX, rotateY } = latestTransform;\n        if (rotate)\n            transform += `rotate(${rotate}deg) `;\n        if (rotateX)\n            transform += `rotateX(${rotateX}deg) `;\n        if (rotateY)\n            transform += `rotateY(${rotateY}deg) `;\n    }\n    /**\n     * Apply scale to match the size of the element to the size we want it.\n     * This will apply scale to the element-orientated axes.\n     */\n    const elementScaleX = delta.x.scale * treeScale.x;\n    const elementScaleY = delta.y.scale * treeScale.y;\n    if (elementScaleX !== 1 || elementScaleY !== 1) {\n        transform += `scale(${elementScaleX}, ${elementScaleY})`;\n    }\n    return transform || \"none\";\n}\n\nexport { buildProjectionTransform };\n","const compareByDepth = (a, b) => a.depth - b.depth;\n\nexport { compareByDepth };\n","import { addUniqueItem, removeItem } from '../../utils/array.mjs';\nimport { compareByDepth } from './compare-by-depth.mjs';\n\nclass FlatTree {\n    constructor() {\n        this.children = [];\n        this.isDirty = false;\n    }\n    add(child) {\n        addUniqueItem(this.children, child);\n        this.isDirty = true;\n    }\n    remove(child) {\n        removeItem(this.children, child);\n        this.isDirty = true;\n    }\n    forEach(callback) {\n        this.isDirty && this.children.sort(compareByDepth);\n        this.isDirty = false;\n        this.children.forEach(callback);\n    }\n}\n\nexport { FlatTree };\n","import { frame, cancelFrame } from '../frameloop/frame.mjs';\n\n/**\n * Timeout defined in ms\n */\nfunction delay(callback, timeout) {\n    const start = performance.now();\n    const checkElapsed = ({ timestamp }) => {\n        const elapsed = timestamp - start;\n        if (elapsed >= timeout) {\n            cancelFrame(checkElapsed);\n            callback(elapsed - timeout);\n        }\n    };\n    frame.read(checkElapsed, true);\n    return () => cancelFrame(checkElapsed);\n}\n\nexport { delay };\n","function record(data) {\n    if (window.MotionDebug) {\n        window.MotionDebug.record(data);\n    }\n}\n\nexport { record };\n","function isSVGElement(element) {\n    return element instanceof SVGElement && element.tagName !== \"svg\";\n}\n\nexport { isSVGElement };\n","import { animateMotionValue } from './motion-value.mjs';\nimport { motionValue } from '../../value/index.mjs';\nimport { isMotionValue } from '../../value/utils/is-motion-value.mjs';\n\nfunction animateSingleValue(value, keyframes, options) {\n    const motionValue$1 = isMotionValue(value) ? value : motionValue(value);\n    motionValue$1.start(animateMotionValue(\"\", motionValue$1, keyframes, options));\n    return motionValue$1.animation;\n}\n\nexport { animateSingleValue };\n","import { SubscriptionManager } from '../../utils/subscription-manager.mjs';\nimport { mixValues } from '../animation/mix-values.mjs';\nimport { copyBoxInto } from '../geometry/copy.mjs';\nimport { translateAxis, transformBox, applyBoxDelta, applyTreeDeltas } from '../geometry/delta-apply.mjs';\nimport { calcRelativePosition, calcRelativeBox, calcBoxDelta, calcLength, isNear } from '../geometry/delta-calc.mjs';\nimport { removeBoxTransforms } from '../geometry/delta-remove.mjs';\nimport { createBox, createDelta } from '../geometry/models.mjs';\nimport { getValueTransition } from '../../animation/utils/transitions.mjs';\nimport { boxEqualsRounded, isDeltaZero, aspectRatio, boxEquals } from '../geometry/utils.mjs';\nimport { NodeStack } from '../shared/stack.mjs';\nimport { scaleCorrectors } from '../styles/scale-correction.mjs';\nimport { buildProjectionTransform } from '../styles/transform.mjs';\nimport { eachAxis } from '../utils/each-axis.mjs';\nimport { hasTransform, hasScale, has2DTranslate } from '../utils/has-transform.mjs';\nimport { FlatTree } from '../../render/utils/flat-tree.mjs';\nimport { resolveMotionValue } from '../../value/utils/resolve-motion-value.mjs';\nimport { globalProjectionState } from './state.mjs';\nimport { delay } from '../../utils/delay.mjs';\nimport { mix } from '../../utils/mix.mjs';\nimport { record } from '../../debug/record.mjs';\nimport { isSVGElement } from '../../render/dom/utils/is-svg-element.mjs';\nimport { animateSingleValue } from '../../animation/interfaces/single-value.mjs';\nimport { clamp } from '../../utils/clamp.mjs';\nimport { cancelFrame, frameData, steps, frame } from '../../frameloop/frame.mjs';\nimport { noop } from '../../utils/noop.mjs';\n\nconst transformAxes = [\"\", \"X\", \"Y\", \"Z\"];\nconst hiddenVisibility = { visibility: \"hidden\" };\n/**\n * We use 1000 as the animation target as 0-1000 maps better to pixels than 0-1\n * which has a noticeable difference in spring animations\n */\nconst animationTarget = 1000;\nlet id = 0;\n/**\n * Use a mutable data object for debug data so as to not create a new\n * object every frame.\n */\nconst projectionFrameData = {\n    type: \"projectionFrame\",\n    totalNodes: 0,\n    resolvedTargetDeltas: 0,\n    recalculatedProjection: 0,\n};\nfunction createProjectionNode({ attachResizeListener, defaultParent, measureScroll, checkIsScrollRoot, resetTransform, }) {\n    return class ProjectionNode {\n        constructor(latestValues = {}, parent = defaultParent === null || defaultParent === void 0 ? void 0 : defaultParent()) {\n            /**\n             * A unique ID generated for every projection node.\n             */\n            this.id = id++;\n            /**\n             * An id that represents a unique session instigated by startUpdate.\n             */\n            this.animationId = 0;\n            /**\n             * A Set containing all this component's children. This is used to iterate\n             * through the children.\n             *\n             * TODO: This could be faster to iterate as a flat array stored on the root node.\n             */\n            this.children = new Set();\n            /**\n             * Options for the node. We use this to configure what kind of layout animations\n             * we should perform (if any).\n             */\n            this.options = {};\n            /**\n             * We use this to detect when its safe to shut down part of a projection tree.\n             * We have to keep projecting children for scale correction and relative projection\n             * until all their parents stop performing layout animations.\n             */\n            this.isTreeAnimating = false;\n            this.isAnimationBlocked = false;\n            /**\n             * Flag to true if we think this layout has been changed. We can't always know this,\n             * currently we set it to true every time a component renders, or if it has a layoutDependency\n             * if that has changed between renders. Additionally, components can be grouped by LayoutGroup\n             * and if one node is dirtied, they all are.\n             */\n            this.isLayoutDirty = false;\n            /**\n             * Flag to true if we think the projection calculations for this node needs\n             * recalculating as a result of an updated transform or layout animation.\n             */\n            this.isProjectionDirty = false;\n            /**\n             * Flag to true if the layout *or* transform has changed. This then gets propagated\n             * throughout the projection tree, forcing any element below to recalculate on the next frame.\n             */\n            this.isSharedProjectionDirty = false;\n            /**\n             * Flag transform dirty. This gets propagated throughout the whole tree but is only\n             * respected by shared nodes.\n             */\n            this.isTransformDirty = false;\n            /**\n             * Block layout updates for instant layout transitions throughout the tree.\n             */\n            this.updateManuallyBlocked = false;\n            this.updateBlockedByResize = false;\n            /**\n             * Set to true between the start of the first `willUpdate` call and the end of the `didUpdate`\n             * call.\n             */\n            this.isUpdating = false;\n            /**\n             * If this is an SVG element we currently disable projection transforms\n             */\n            this.isSVG = false;\n            /**\n             * Flag to true (during promotion) if a node doing an instant layout transition needs to reset\n             * its projection styles.\n             */\n            this.needsReset = false;\n            /**\n             * Flags whether this node should have its transform reset prior to measuring.\n             */\n            this.shouldResetTransform = false;\n            /**\n             * An object representing the calculated contextual/accumulated/tree scale.\n             * This will be used to scale calculcated projection transforms, as these are\n             * calculated in screen-space but need to be scaled for elements to layoutly\n             * make it to their calculated destinations.\n             *\n             * TODO: Lazy-init\n             */\n            this.treeScale = { x: 1, y: 1 };\n            /**\n             *\n             */\n            this.eventHandlers = new Map();\n            this.hasTreeAnimated = false;\n            // Note: Currently only running on root node\n            this.updateScheduled = false;\n            this.projectionUpdateScheduled = false;\n            this.checkUpdateFailed = () => {\n                if (this.isUpdating) {\n                    this.isUpdating = false;\n                    this.clearAllSnapshots();\n                }\n            };\n            /**\n             * This is a multi-step process as shared nodes might be of different depths. Nodes\n             * are sorted by depth order, so we need to resolve the entire tree before moving to\n             * the next step.\n             */\n            this.updateProjection = () => {\n                this.projectionUpdateScheduled = false;\n                /**\n                 * Reset debug counts. Manually resetting rather than creating a new\n                 * object each frame.\n                 */\n                projectionFrameData.totalNodes =\n                    projectionFrameData.resolvedTargetDeltas =\n                        projectionFrameData.recalculatedProjection =\n                            0;\n                this.nodes.forEach(propagateDirtyNodes);\n                this.nodes.forEach(resolveTargetDelta);\n                this.nodes.forEach(calcProjection);\n                this.nodes.forEach(cleanDirtyNodes);\n                record(projectionFrameData);\n            };\n            this.hasProjected = false;\n            this.isVisible = true;\n            this.animationProgress = 0;\n            /**\n             * Shared layout\n             */\n            // TODO Only running on root node\n            this.sharedNodes = new Map();\n            this.latestValues = latestValues;\n            this.root = parent ? parent.root || parent : this;\n            this.path = parent ? [...parent.path, parent] : [];\n            this.parent = parent;\n            this.depth = parent ? parent.depth + 1 : 0;\n            for (let i = 0; i < this.path.length; i++) {\n                this.path[i].shouldResetTransform = true;\n            }\n            if (this.root === this)\n                this.nodes = new FlatTree();\n        }\n        addEventListener(name, handler) {\n            if (!this.eventHandlers.has(name)) {\n                this.eventHandlers.set(name, new SubscriptionManager());\n            }\n            return this.eventHandlers.get(name).add(handler);\n        }\n        notifyListeners(name, ...args) {\n            const subscriptionManager = this.eventHandlers.get(name);\n            subscriptionManager && subscriptionManager.notify(...args);\n        }\n        hasListeners(name) {\n            return this.eventHandlers.has(name);\n        }\n        /**\n         * Lifecycles\n         */\n        mount(instance, isLayoutDirty = this.root.hasTreeAnimated) {\n            if (this.instance)\n                return;\n            this.isSVG = isSVGElement(instance);\n            this.instance = instance;\n            const { layoutId, layout, visualElement } = this.options;\n            if (visualElement && !visualElement.current) {\n                visualElement.mount(instance);\n            }\n            this.root.nodes.add(this);\n            this.parent && this.parent.children.add(this);\n            if (isLayoutDirty && (layout || layoutId)) {\n                this.isLayoutDirty = true;\n            }\n            if (attachResizeListener) {\n                let cancelDelay;\n                const resizeUnblockUpdate = () => (this.root.updateBlockedByResize = false);\n                attachResizeListener(instance, () => {\n                    this.root.updateBlockedByResize = true;\n                    cancelDelay && cancelDelay();\n                    cancelDelay = delay(resizeUnblockUpdate, 250);\n                    if (globalProjectionState.hasAnimatedSinceResize) {\n                        globalProjectionState.hasAnimatedSinceResize = false;\n                        this.nodes.forEach(finishAnimation);\n                    }\n                });\n            }\n            if (layoutId) {\n                this.root.registerSharedNode(layoutId, this);\n            }\n            // Only register the handler if it requires layout animation\n            if (this.options.animate !== false &&\n                visualElement &&\n                (layoutId || layout)) {\n                this.addEventListener(\"didUpdate\", ({ delta, hasLayoutChanged, hasRelativeTargetChanged, layout: newLayout, }) => {\n                    if (this.isTreeAnimationBlocked()) {\n                        this.target = undefined;\n                        this.relativeTarget = undefined;\n                        return;\n                    }\n                    // TODO: Check here if an animation exists\n                    const layoutTransition = this.options.transition ||\n                        visualElement.getDefaultTransition() ||\n                        defaultLayoutTransition;\n                    const { onLayoutAnimationStart, onLayoutAnimationComplete, } = visualElement.getProps();\n                    /**\n                     * The target layout of the element might stay the same,\n                     * but its position relative to its parent has changed.\n                     */\n                    const targetChanged = !this.targetLayout ||\n                        !boxEqualsRounded(this.targetLayout, newLayout) ||\n                        hasRelativeTargetChanged;\n                    /**\n                     * If the layout hasn't seemed to have changed, it might be that the\n                     * element is visually in the same place in the document but its position\n                     * relative to its parent has indeed changed. So here we check for that.\n                     */\n                    const hasOnlyRelativeTargetChanged = !hasLayoutChanged && hasRelativeTargetChanged;\n                    if (this.options.layoutRoot ||\n                        (this.resumeFrom && this.resumeFrom.instance) ||\n                        hasOnlyRelativeTargetChanged ||\n                        (hasLayoutChanged &&\n                            (targetChanged || !this.currentAnimation))) {\n                        if (this.resumeFrom) {\n                            this.resumingFrom = this.resumeFrom;\n                            this.resumingFrom.resumingFrom = undefined;\n                        }\n                        this.setAnimationOrigin(delta, hasOnlyRelativeTargetChanged);\n                        const animationOptions = {\n                            ...getValueTransition(layoutTransition, \"layout\"),\n                            onPlay: onLayoutAnimationStart,\n                            onComplete: onLayoutAnimationComplete,\n                        };\n                        if (visualElement.shouldReduceMotion ||\n                            this.options.layoutRoot) {\n                            animationOptions.delay = 0;\n                            animationOptions.type = false;\n                        }\n                        this.startAnimation(animationOptions);\n                    }\n                    else {\n                        /**\n                         * If the layout hasn't changed and we have an animation that hasn't started yet,\n                         * finish it immediately. Otherwise it will be animating from a location\n                         * that was probably never commited to screen and look like a jumpy box.\n                         */\n                        if (!hasLayoutChanged) {\n                            finishAnimation(this);\n                        }\n                        if (this.isLead() && this.options.onExitComplete) {\n                            this.options.onExitComplete();\n                        }\n                    }\n                    this.targetLayout = newLayout;\n                });\n            }\n        }\n        unmount() {\n            this.options.layoutId && this.willUpdate();\n            this.root.nodes.remove(this);\n            const stack = this.getStack();\n            stack && stack.remove(this);\n            this.parent && this.parent.children.delete(this);\n            this.instance = undefined;\n            cancelFrame(this.updateProjection);\n        }\n        // only on the root\n        blockUpdate() {\n            this.updateManuallyBlocked = true;\n        }\n        unblockUpdate() {\n            this.updateManuallyBlocked = false;\n        }\n        isUpdateBlocked() {\n            return this.updateManuallyBlocked || this.updateBlockedByResize;\n        }\n        isTreeAnimationBlocked() {\n            return (this.isAnimationBlocked ||\n                (this.parent && this.parent.isTreeAnimationBlocked()) ||\n                false);\n        }\n        // Note: currently only running on root node\n        startUpdate() {\n            if (this.isUpdateBlocked())\n                return;\n            this.isUpdating = true;\n            this.nodes && this.nodes.forEach(resetRotation);\n            this.animationId++;\n        }\n        getTransformTemplate() {\n            const { visualElement } = this.options;\n            return visualElement && visualElement.getProps().transformTemplate;\n        }\n        willUpdate(shouldNotifyListeners = true) {\n            this.root.hasTreeAnimated = true;\n            if (this.root.isUpdateBlocked()) {\n                this.options.onExitComplete && this.options.onExitComplete();\n                return;\n            }\n            !this.root.isUpdating && this.root.startUpdate();\n            if (this.isLayoutDirty)\n                return;\n            this.isLayoutDirty = true;\n            for (let i = 0; i < this.path.length; i++) {\n                const node = this.path[i];\n                node.shouldResetTransform = true;\n                node.updateScroll(\"snapshot\");\n                if (node.options.layoutRoot) {\n                    node.willUpdate(false);\n                }\n            }\n            const { layoutId, layout } = this.options;\n            if (layoutId === undefined && !layout)\n                return;\n            const transformTemplate = this.getTransformTemplate();\n            this.prevTransformTemplateValue = transformTemplate\n                ? transformTemplate(this.latestValues, \"\")\n                : undefined;\n            this.updateSnapshot();\n            shouldNotifyListeners && this.notifyListeners(\"willUpdate\");\n        }\n        update() {\n            this.updateScheduled = false;\n            const updateWasBlocked = this.isUpdateBlocked();\n            // When doing an instant transition, we skip the layout update,\n            // but should still clean up the measurements so that the next\n            // snapshot could be taken correctly.\n            if (updateWasBlocked) {\n                this.unblockUpdate();\n                this.clearAllSnapshots();\n                this.nodes.forEach(clearMeasurements);\n                return;\n            }\n            if (!this.isUpdating) {\n                this.nodes.forEach(clearIsLayoutDirty);\n            }\n            this.isUpdating = false;\n            /**\n             * Write\n             */\n            this.nodes.forEach(resetTransformStyle);\n            /**\n             * Read ==================\n             */\n            // Update layout measurements of updated children\n            this.nodes.forEach(updateLayout);\n            /**\n             * Write\n             */\n            // Notify listeners that the layout is updated\n            this.nodes.forEach(notifyLayoutUpdate);\n            this.clearAllSnapshots();\n            /**\n             * Manually flush any pending updates. Ideally\n             * we could leave this to the following requestAnimationFrame but this seems\n             * to leave a flash of incorrectly styled content.\n             */\n            const now = performance.now();\n            frameData.delta = clamp(0, 1000 / 60, now - frameData.timestamp);\n            frameData.timestamp = now;\n            frameData.isProcessing = true;\n            steps.update.process(frameData);\n            steps.preRender.process(frameData);\n            steps.render.process(frameData);\n            frameData.isProcessing = false;\n        }\n        didUpdate() {\n            if (!this.updateScheduled) {\n                this.updateScheduled = true;\n                queueMicrotask(() => this.update());\n            }\n        }\n        clearAllSnapshots() {\n            this.nodes.forEach(clearSnapshot);\n            this.sharedNodes.forEach(removeLeadSnapshots);\n        }\n        scheduleUpdateProjection() {\n            if (!this.projectionUpdateScheduled) {\n                this.projectionUpdateScheduled = true;\n                frame.preRender(this.updateProjection, false, true);\n            }\n        }\n        scheduleCheckAfterUnmount() {\n            /**\n             * If the unmounting node is in a layoutGroup and did trigger a willUpdate,\n             * we manually call didUpdate to give a chance to the siblings to animate.\n             * Otherwise, cleanup all snapshots to prevents future nodes from reusing them.\n             */\n            frame.postRender(() => {\n                if (this.isLayoutDirty) {\n                    this.root.didUpdate();\n                }\n                else {\n                    this.root.checkUpdateFailed();\n                }\n            });\n        }\n        /**\n         * Update measurements\n         */\n        updateSnapshot() {\n            if (this.snapshot || !this.instance)\n                return;\n            this.snapshot = this.measure();\n        }\n        updateLayout() {\n            if (!this.instance)\n                return;\n            // TODO: Incorporate into a forwarded scroll offset\n            this.updateScroll();\n            if (!(this.options.alwaysMeasureLayout && this.isLead()) &&\n                !this.isLayoutDirty) {\n                return;\n            }\n            /**\n             * When a node is mounted, it simply resumes from the prevLead's\n             * snapshot instead of taking a new one, but the ancestors scroll\n             * might have updated while the prevLead is unmounted. We need to\n             * update the scroll again to make sure the layout we measure is\n             * up to date.\n             */\n            if (this.resumeFrom && !this.resumeFrom.instance) {\n                for (let i = 0; i < this.path.length; i++) {\n                    const node = this.path[i];\n                    node.updateScroll();\n                }\n            }\n            const prevLayout = this.layout;\n            this.layout = this.measure(false);\n            this.layoutCorrected = createBox();\n            this.isLayoutDirty = false;\n            this.projectionDelta = undefined;\n            this.notifyListeners(\"measure\", this.layout.layoutBox);\n            const { visualElement } = this.options;\n            visualElement &&\n                visualElement.notify(\"LayoutMeasure\", this.layout.layoutBox, prevLayout ? prevLayout.layoutBox : undefined);\n        }\n        updateScroll(phase = \"measure\") {\n            let needsMeasurement = Boolean(this.options.layoutScroll && this.instance);\n            if (this.scroll &&\n                this.scroll.animationId === this.root.animationId &&\n                this.scroll.phase === phase) {\n                needsMeasurement = false;\n            }\n            if (needsMeasurement) {\n                this.scroll = {\n                    animationId: this.root.animationId,\n                    phase,\n                    isRoot: checkIsScrollRoot(this.instance),\n                    offset: measureScroll(this.instance),\n                };\n            }\n        }\n        resetTransform() {\n            if (!resetTransform)\n                return;\n            const isResetRequested = this.isLayoutDirty || this.shouldResetTransform;\n            const hasProjection = this.projectionDelta && !isDeltaZero(this.projectionDelta);\n            const transformTemplate = this.getTransformTemplate();\n            const transformTemplateValue = transformTemplate\n                ? transformTemplate(this.latestValues, \"\")\n                : undefined;\n            const transformTemplateHasChanged = transformTemplateValue !== this.prevTransformTemplateValue;\n            if (isResetRequested &&\n                (hasProjection ||\n                    hasTransform(this.latestValues) ||\n                    transformTemplateHasChanged)) {\n                resetTransform(this.instance, transformTemplateValue);\n                this.shouldResetTransform = false;\n                this.scheduleRender();\n            }\n        }\n        measure(removeTransform = true) {\n            const pageBox = this.measurePageBox();\n            let layoutBox = this.removeElementScroll(pageBox);\n            /**\n             * Measurements taken during the pre-render stage\n             * still have transforms applied so we remove them\n             * via calculation.\n             */\n            if (removeTransform) {\n                layoutBox = this.removeTransform(layoutBox);\n            }\n            roundBox(layoutBox);\n            return {\n                animationId: this.root.animationId,\n                measuredBox: pageBox,\n                layoutBox,\n                latestValues: {},\n                source: this.id,\n            };\n        }\n        measurePageBox() {\n            const { visualElement } = this.options;\n            if (!visualElement)\n                return createBox();\n            const box = visualElement.measureViewportBox();\n            // Remove viewport scroll to give page-relative coordinates\n            const { scroll } = this.root;\n            if (scroll) {\n                translateAxis(box.x, scroll.offset.x);\n                translateAxis(box.y, scroll.offset.y);\n            }\n            return box;\n        }\n        removeElementScroll(box) {\n            const boxWithoutScroll = createBox();\n            copyBoxInto(boxWithoutScroll, box);\n            /**\n             * Performance TODO: Keep a cumulative scroll offset down the tree\n             * rather than loop back up the path.\n             */\n            for (let i = 0; i < this.path.length; i++) {\n                const node = this.path[i];\n                const { scroll, options } = node;\n                if (node !== this.root && scroll && options.layoutScroll) {\n                    /**\n                     * If this is a new scroll root, we want to remove all previous scrolls\n                     * from the viewport box.\n                     */\n                    if (scroll.isRoot) {\n                        copyBoxInto(boxWithoutScroll, box);\n                        const { scroll: rootScroll } = this.root;\n                        /**\n                         * Undo the application of page scroll that was originally added\n                         * to the measured bounding box.\n                         */\n                        if (rootScroll) {\n                            translateAxis(boxWithoutScroll.x, -rootScroll.offset.x);\n                            translateAxis(boxWithoutScroll.y, -rootScroll.offset.y);\n                        }\n                    }\n                    translateAxis(boxWithoutScroll.x, scroll.offset.x);\n                    translateAxis(boxWithoutScroll.y, scroll.offset.y);\n                }\n            }\n            return boxWithoutScroll;\n        }\n        applyTransform(box, transformOnly = false) {\n            const withTransforms = createBox();\n            copyBoxInto(withTransforms, box);\n            for (let i = 0; i < this.path.length; i++) {\n                const node = this.path[i];\n                if (!transformOnly &&\n                    node.options.layoutScroll &&\n                    node.scroll &&\n                    node !== node.root) {\n                    transformBox(withTransforms, {\n                        x: -node.scroll.offset.x,\n                        y: -node.scroll.offset.y,\n                    });\n                }\n                if (!hasTransform(node.latestValues))\n                    continue;\n                transformBox(withTransforms, node.latestValues);\n            }\n            if (hasTransform(this.latestValues)) {\n                transformBox(withTransforms, this.latestValues);\n            }\n            return withTransforms;\n        }\n        removeTransform(box) {\n            const boxWithoutTransform = createBox();\n            copyBoxInto(boxWithoutTransform, box);\n            for (let i = 0; i < this.path.length; i++) {\n                const node = this.path[i];\n                if (!node.instance)\n                    continue;\n                if (!hasTransform(node.latestValues))\n                    continue;\n                hasScale(node.latestValues) && node.updateSnapshot();\n                const sourceBox = createBox();\n                const nodeBox = node.measurePageBox();\n                copyBoxInto(sourceBox, nodeBox);\n                removeBoxTransforms(boxWithoutTransform, node.latestValues, node.snapshot ? node.snapshot.layoutBox : undefined, sourceBox);\n            }\n            if (hasTransform(this.latestValues)) {\n                removeBoxTransforms(boxWithoutTransform, this.latestValues);\n            }\n            return boxWithoutTransform;\n        }\n        setTargetDelta(delta) {\n            this.targetDelta = delta;\n            this.root.scheduleUpdateProjection();\n            this.isProjectionDirty = true;\n        }\n        setOptions(options) {\n            this.options = {\n                ...this.options,\n                ...options,\n                crossfade: options.crossfade !== undefined ? options.crossfade : true,\n            };\n        }\n        clearMeasurements() {\n            this.scroll = undefined;\n            this.layout = undefined;\n            this.snapshot = undefined;\n            this.prevTransformTemplateValue = undefined;\n            this.targetDelta = undefined;\n            this.target = undefined;\n            this.isLayoutDirty = false;\n        }\n        forceRelativeParentToResolveTarget() {\n            if (!this.relativeParent)\n                return;\n            /**\n             * If the parent target isn't up-to-date, force it to update.\n             * This is an unfortunate de-optimisation as it means any updating relative\n             * projection will cause all the relative parents to recalculate back\n             * up the tree.\n             */\n            if (this.relativeParent.resolvedRelativeTargetAt !==\n                frameData.timestamp) {\n                this.relativeParent.resolveTargetDelta(true);\n            }\n        }\n        resolveTargetDelta(forceRecalculation = false) {\n            var _a;\n            /**\n             * Once the dirty status of nodes has been spread through the tree, we also\n             * need to check if we have a shared node of a different depth that has itself\n             * been dirtied.\n             */\n            const lead = this.getLead();\n            this.isProjectionDirty || (this.isProjectionDirty = lead.isProjectionDirty);\n            this.isTransformDirty || (this.isTransformDirty = lead.isTransformDirty);\n            this.isSharedProjectionDirty || (this.isSharedProjectionDirty = lead.isSharedProjectionDirty);\n            const isShared = Boolean(this.resumingFrom) || this !== lead;\n            /**\n             * We don't use transform for this step of processing so we don't\n             * need to check whether any nodes have changed transform.\n             */\n            const canSkip = !(forceRecalculation ||\n                (isShared && this.isSharedProjectionDirty) ||\n                this.isProjectionDirty ||\n                ((_a = this.parent) === null || _a === void 0 ? void 0 : _a.isProjectionDirty) ||\n                this.attemptToResolveRelativeTarget);\n            if (canSkip)\n                return;\n            const { layout, layoutId } = this.options;\n            /**\n             * If we have no layout, we can't perform projection, so early return\n             */\n            if (!this.layout || !(layout || layoutId))\n                return;\n            this.resolvedRelativeTargetAt = frameData.timestamp;\n            /**\n             * If we don't have a targetDelta but do have a layout, we can attempt to resolve\n             * a relativeParent. This will allow a component to perform scale correction\n             * even if no animation has started.\n             */\n            // TODO If this is unsuccessful this currently happens every frame\n            if (!this.targetDelta && !this.relativeTarget) {\n                // TODO: This is a semi-repetition of further down this function, make DRY\n                const relativeParent = this.getClosestProjectingParent();\n                if (relativeParent &&\n                    relativeParent.layout &&\n                    this.animationProgress !== 1) {\n                    this.relativeParent = relativeParent;\n                    this.forceRelativeParentToResolveTarget();\n                    this.relativeTarget = createBox();\n                    this.relativeTargetOrigin = createBox();\n                    calcRelativePosition(this.relativeTargetOrigin, this.layout.layoutBox, relativeParent.layout.layoutBox);\n                    copyBoxInto(this.relativeTarget, this.relativeTargetOrigin);\n                }\n                else {\n                    this.relativeParent = this.relativeTarget = undefined;\n                }\n            }\n            /**\n             * If we have no relative target or no target delta our target isn't valid\n             * for this frame.\n             */\n            if (!this.relativeTarget && !this.targetDelta)\n                return;\n            /**\n             * Lazy-init target data structure\n             */\n            if (!this.target) {\n                this.target = createBox();\n                this.targetWithTransforms = createBox();\n            }\n            /**\n             * If we've got a relative box for this component, resolve it into a target relative to the parent.\n             */\n            if (this.relativeTarget &&\n                this.relativeTargetOrigin &&\n                this.relativeParent &&\n                this.relativeParent.target) {\n                this.forceRelativeParentToResolveTarget();\n                calcRelativeBox(this.target, this.relativeTarget, this.relativeParent.target);\n                /**\n                 * If we've only got a targetDelta, resolve it into a target\n                 */\n            }\n            else if (this.targetDelta) {\n                if (Boolean(this.resumingFrom)) {\n                    // TODO: This is creating a new object every frame\n                    this.target = this.applyTransform(this.layout.layoutBox);\n                }\n                else {\n                    copyBoxInto(this.target, this.layout.layoutBox);\n                }\n                applyBoxDelta(this.target, this.targetDelta);\n            }\n            else {\n                /**\n                 * If no target, use own layout as target\n                 */\n                copyBoxInto(this.target, this.layout.layoutBox);\n            }\n            /**\n             * If we've been told to attempt to resolve a relative target, do so.\n             */\n            if (this.attemptToResolveRelativeTarget) {\n                this.attemptToResolveRelativeTarget = false;\n                const relativeParent = this.getClosestProjectingParent();\n                if (relativeParent &&\n                    Boolean(relativeParent.resumingFrom) ===\n                        Boolean(this.resumingFrom) &&\n                    !relativeParent.options.layoutScroll &&\n                    relativeParent.target &&\n                    this.animationProgress !== 1) {\n                    this.relativeParent = relativeParent;\n                    this.forceRelativeParentToResolveTarget();\n                    this.relativeTarget = createBox();\n                    this.relativeTargetOrigin = createBox();\n                    calcRelativePosition(this.relativeTargetOrigin, this.target, relativeParent.target);\n                    copyBoxInto(this.relativeTarget, this.relativeTargetOrigin);\n                }\n                else {\n                    this.relativeParent = this.relativeTarget = undefined;\n                }\n            }\n            /**\n             * Increase debug counter for resolved target deltas\n             */\n            projectionFrameData.resolvedTargetDeltas++;\n        }\n        getClosestProjectingParent() {\n            if (!this.parent ||\n                hasScale(this.parent.latestValues) ||\n                has2DTranslate(this.parent.latestValues)) {\n                return undefined;\n            }\n            if (this.parent.isProjecting()) {\n                return this.parent;\n            }\n            else {\n                return this.parent.getClosestProjectingParent();\n            }\n        }\n        isProjecting() {\n            return Boolean((this.relativeTarget ||\n                this.targetDelta ||\n                this.options.layoutRoot) &&\n                this.layout);\n        }\n        calcProjection() {\n            var _a;\n            const lead = this.getLead();\n            const isShared = Boolean(this.resumingFrom) || this !== lead;\n            let canSkip = true;\n            /**\n             * If this is a normal layout animation and neither this node nor its nearest projecting\n             * is dirty then we can't skip.\n             */\n            if (this.isProjectionDirty || ((_a = this.parent) === null || _a === void 0 ? void 0 : _a.isProjectionDirty)) {\n                canSkip = false;\n            }\n            /**\n             * If this is a shared layout animation and this node's shared projection is dirty then\n             * we can't skip.\n             */\n            if (isShared &&\n                (this.isSharedProjectionDirty || this.isTransformDirty)) {\n                canSkip = false;\n            }\n            /**\n             * If we have resolved the target this frame we must recalculate the\n             * projection to ensure it visually represents the internal calculations.\n             */\n            if (this.resolvedRelativeTargetAt === frameData.timestamp) {\n                canSkip = false;\n            }\n            if (canSkip)\n                return;\n            const { layout, layoutId } = this.options;\n            /**\n             * If this section of the tree isn't animating we can\n             * delete our target sources for the following frame.\n             */\n            this.isTreeAnimating = Boolean((this.parent && this.parent.isTreeAnimating) ||\n                this.currentAnimation ||\n                this.pendingAnimation);\n            if (!this.isTreeAnimating) {\n                this.targetDelta = this.relativeTarget = undefined;\n            }\n            if (!this.layout || !(layout || layoutId))\n                return;\n            /**\n             * Reset the corrected box with the latest values from box, as we're then going\n             * to perform mutative operations on it.\n             */\n            copyBoxInto(this.layoutCorrected, this.layout.layoutBox);\n            /**\n             * Record previous tree scales before updating.\n             */\n            const prevTreeScaleX = this.treeScale.x;\n            const prevTreeScaleY = this.treeScale.y;\n            /**\n             * Apply all the parent deltas to this box to produce the corrected box. This\n             * is the layout box, as it will appear on screen as a result of the transforms of its parents.\n             */\n            applyTreeDeltas(this.layoutCorrected, this.treeScale, this.path, isShared);\n            /**\n             * If this layer needs to perform scale correction but doesn't have a target,\n             * use the layout as the target.\n             */\n            if (lead.layout &&\n                !lead.target &&\n                (this.treeScale.x !== 1 || this.treeScale.y !== 1)) {\n                lead.target = lead.layout.layoutBox;\n            }\n            const { target } = lead;\n            if (!target) {\n                /**\n                 * If we don't have a target to project into, but we were previously\n                 * projecting, we want to remove the stored transform and schedule\n                 * a render to ensure the elements reflect the removed transform.\n                 */\n                if (this.projectionTransform) {\n                    this.projectionDelta = createDelta();\n                    this.projectionTransform = \"none\";\n                    this.scheduleRender();\n                }\n                return;\n            }\n            if (!this.projectionDelta) {\n                this.projectionDelta = createDelta();\n                this.projectionDeltaWithTransform = createDelta();\n            }\n            const prevProjectionTransform = this.projectionTransform;\n            /**\n             * Update the delta between the corrected box and the target box before user-set transforms were applied.\n             * This will allow us to calculate the corrected borderRadius and boxShadow to compensate\n             * for our layout reprojection, but still allow them to be scaled correctly by the user.\n             * It might be that to simplify this we may want to accept that user-set scale is also corrected\n             * and we wouldn't have to keep and calc both deltas, OR we could support a user setting\n             * to allow people to choose whether these styles are corrected based on just the\n             * layout reprojection or the final bounding box.\n             */\n            calcBoxDelta(this.projectionDelta, this.layoutCorrected, target, this.latestValues);\n            this.projectionTransform = buildProjectionTransform(this.projectionDelta, this.treeScale);\n            if (this.projectionTransform !== prevProjectionTransform ||\n                this.treeScale.x !== prevTreeScaleX ||\n                this.treeScale.y !== prevTreeScaleY) {\n                this.hasProjected = true;\n                this.scheduleRender();\n                this.notifyListeners(\"projectionUpdate\", target);\n            }\n            /**\n             * Increase debug counter for recalculated projections\n             */\n            projectionFrameData.recalculatedProjection++;\n        }\n        hide() {\n            this.isVisible = false;\n            // TODO: Schedule render\n        }\n        show() {\n            this.isVisible = true;\n            // TODO: Schedule render\n        }\n        scheduleRender(notifyAll = true) {\n            this.options.scheduleRender && this.options.scheduleRender();\n            if (notifyAll) {\n                const stack = this.getStack();\n                stack && stack.scheduleRender();\n            }\n            if (this.resumingFrom && !this.resumingFrom.instance) {\n                this.resumingFrom = undefined;\n            }\n        }\n        setAnimationOrigin(delta, hasOnlyRelativeTargetChanged = false) {\n            const snapshot = this.snapshot;\n            const snapshotLatestValues = snapshot\n                ? snapshot.latestValues\n                : {};\n            const mixedValues = { ...this.latestValues };\n            const targetDelta = createDelta();\n            if (!this.relativeParent ||\n                !this.relativeParent.options.layoutRoot) {\n                this.relativeTarget = this.relativeTargetOrigin = undefined;\n            }\n            this.attemptToResolveRelativeTarget = !hasOnlyRelativeTargetChanged;\n            const relativeLayout = createBox();\n            const snapshotSource = snapshot ? snapshot.source : undefined;\n            const layoutSource = this.layout ? this.layout.source : undefined;\n            const isSharedLayoutAnimation = snapshotSource !== layoutSource;\n            const stack = this.getStack();\n            const isOnlyMember = !stack || stack.members.length <= 1;\n            const shouldCrossfadeOpacity = Boolean(isSharedLayoutAnimation &&\n                !isOnlyMember &&\n                this.options.crossfade === true &&\n                !this.path.some(hasOpacityCrossfade));\n            this.animationProgress = 0;\n            let prevRelativeTarget;\n            this.mixTargetDelta = (latest) => {\n                const progress = latest / 1000;\n                mixAxisDelta(targetDelta.x, delta.x, progress);\n                mixAxisDelta(targetDelta.y, delta.y, progress);\n                this.setTargetDelta(targetDelta);\n                if (this.relativeTarget &&\n                    this.relativeTargetOrigin &&\n                    this.layout &&\n                    this.relativeParent &&\n                    this.relativeParent.layout) {\n                    calcRelativePosition(relativeLayout, this.layout.layoutBox, this.relativeParent.layout.layoutBox);\n                    mixBox(this.relativeTarget, this.relativeTargetOrigin, relativeLayout, progress);\n                    /**\n                     * If this is an unchanged relative target we can consider the\n                     * projection not dirty.\n                     */\n                    if (prevRelativeTarget &&\n                        boxEquals(this.relativeTarget, prevRelativeTarget)) {\n                        this.isProjectionDirty = false;\n                    }\n                    if (!prevRelativeTarget)\n                        prevRelativeTarget = createBox();\n                    copyBoxInto(prevRelativeTarget, this.relativeTarget);\n                }\n                if (isSharedLayoutAnimation) {\n                    this.animationValues = mixedValues;\n                    mixValues(mixedValues, snapshotLatestValues, this.latestValues, progress, shouldCrossfadeOpacity, isOnlyMember);\n                }\n                this.root.scheduleUpdateProjection();\n                this.scheduleRender();\n                this.animationProgress = progress;\n            };\n            this.mixTargetDelta(this.options.layoutRoot ? 1000 : 0);\n        }\n        startAnimation(options) {\n            this.notifyListeners(\"animationStart\");\n            this.currentAnimation && this.currentAnimation.stop();\n            if (this.resumingFrom && this.resumingFrom.currentAnimation) {\n                this.resumingFrom.currentAnimation.stop();\n            }\n            if (this.pendingAnimation) {\n                cancelFrame(this.pendingAnimation);\n                this.pendingAnimation = undefined;\n            }\n            /**\n             * Start the animation in the next frame to have a frame with progress 0,\n             * where the target is the same as when the animation started, so we can\n             * calculate the relative positions correctly for instant transitions.\n             */\n            this.pendingAnimation = frame.update(() => {\n                globalProjectionState.hasAnimatedSinceResize = true;\n                this.currentAnimation = animateSingleValue(0, animationTarget, {\n                    ...options,\n                    onUpdate: (latest) => {\n                        this.mixTargetDelta(latest);\n                        options.onUpdate && options.onUpdate(latest);\n                    },\n                    onComplete: () => {\n                        options.onComplete && options.onComplete();\n                        this.completeAnimation();\n                    },\n                });\n                if (this.resumingFrom) {\n                    this.resumingFrom.currentAnimation = this.currentAnimation;\n                }\n                this.pendingAnimation = undefined;\n            });\n        }\n        completeAnimation() {\n            if (this.resumingFrom) {\n                this.resumingFrom.currentAnimation = undefined;\n                this.resumingFrom.preserveOpacity = undefined;\n            }\n            const stack = this.getStack();\n            stack && stack.exitAnimationComplete();\n            this.resumingFrom =\n                this.currentAnimation =\n                    this.animationValues =\n                        undefined;\n            this.notifyListeners(\"animationComplete\");\n        }\n        finishAnimation() {\n            if (this.currentAnimation) {\n                this.mixTargetDelta && this.mixTargetDelta(animationTarget);\n                this.currentAnimation.stop();\n            }\n            this.completeAnimation();\n        }\n        applyTransformsToTarget() {\n            const lead = this.getLead();\n            let { targetWithTransforms, target, layout, latestValues } = lead;\n            if (!targetWithTransforms || !target || !layout)\n                return;\n            /**\n             * If we're only animating position, and this element isn't the lead element,\n             * then instead of projecting into the lead box we instead want to calculate\n             * a new target that aligns the two boxes but maintains the layout shape.\n             */\n            if (this !== lead &&\n                this.layout &&\n                layout &&\n                shouldAnimatePositionOnly(this.options.animationType, this.layout.layoutBox, layout.layoutBox)) {\n                target = this.target || createBox();\n                const xLength = calcLength(this.layout.layoutBox.x);\n                target.x.min = lead.target.x.min;\n                target.x.max = target.x.min + xLength;\n                const yLength = calcLength(this.layout.layoutBox.y);\n                target.y.min = lead.target.y.min;\n                target.y.max = target.y.min + yLength;\n            }\n            copyBoxInto(targetWithTransforms, target);\n            /**\n             * Apply the latest user-set transforms to the targetBox to produce the targetBoxFinal.\n             * This is the final box that we will then project into by calculating a transform delta and\n             * applying it to the corrected box.\n             */\n            transformBox(targetWithTransforms, latestValues);\n            /**\n             * Update the delta between the corrected box and the final target box, after\n             * user-set transforms are applied to it. This will be used by the renderer to\n             * create a transform style that will reproject the element from its layout layout\n             * into the desired bounding box.\n             */\n            calcBoxDelta(this.projectionDeltaWithTransform, this.layoutCorrected, targetWithTransforms, latestValues);\n        }\n        registerSharedNode(layoutId, node) {\n            if (!this.sharedNodes.has(layoutId)) {\n                this.sharedNodes.set(layoutId, new NodeStack());\n            }\n            const stack = this.sharedNodes.get(layoutId);\n            stack.add(node);\n            const config = node.options.initialPromotionConfig;\n            node.promote({\n                transition: config ? config.transition : undefined,\n                preserveFollowOpacity: config && config.shouldPreserveFollowOpacity\n                    ? config.shouldPreserveFollowOpacity(node)\n                    : undefined,\n            });\n        }\n        isLead() {\n            const stack = this.getStack();\n            return stack ? stack.lead === this : true;\n        }\n        getLead() {\n            var _a;\n            const { layoutId } = this.options;\n            return layoutId ? ((_a = this.getStack()) === null || _a === void 0 ? void 0 : _a.lead) || this : this;\n        }\n        getPrevLead() {\n            var _a;\n            const { layoutId } = this.options;\n            return layoutId ? (_a = this.getStack()) === null || _a === void 0 ? void 0 : _a.prevLead : undefined;\n        }\n        getStack() {\n            const { layoutId } = this.options;\n            if (layoutId)\n                return this.root.sharedNodes.get(layoutId);\n        }\n        promote({ needsReset, transition, preserveFollowOpacity, } = {}) {\n            const stack = this.getStack();\n            if (stack)\n                stack.promote(this, preserveFollowOpacity);\n            if (needsReset) {\n                this.projectionDelta = undefined;\n                this.needsReset = true;\n            }\n            if (transition)\n                this.setOptions({ transition });\n        }\n        relegate() {\n            const stack = this.getStack();\n            if (stack) {\n                return stack.relegate(this);\n            }\n            else {\n                return false;\n            }\n        }\n        resetRotation() {\n            const { visualElement } = this.options;\n            if (!visualElement)\n                return;\n            // If there's no detected rotation values, we can early return without a forced render.\n            let hasRotate = false;\n            /**\n             * An unrolled check for rotation values. Most elements don't have any rotation and\n             * skipping the nested loop and new object creation is 50% faster.\n             */\n            const { latestValues } = visualElement;\n            if (latestValues.rotate ||\n                latestValues.rotateX ||\n                latestValues.rotateY ||\n                latestValues.rotateZ) {\n                hasRotate = true;\n            }\n            // If there's no rotation values, we don't need to do any more.\n            if (!hasRotate)\n                return;\n            const resetValues = {};\n            // Check the rotate value of all axes and reset to 0\n            for (let i = 0; i < transformAxes.length; i++) {\n                const key = \"rotate\" + transformAxes[i];\n                // Record the rotation and then temporarily set it to 0\n                if (latestValues[key]) {\n                    resetValues[key] = latestValues[key];\n                    visualElement.setStaticValue(key, 0);\n                }\n            }\n            // Force a render of this element to apply the transform with all rotations\n            // set to 0.\n            visualElement.render();\n            // Put back all the values we reset\n            for (const key in resetValues) {\n                visualElement.setStaticValue(key, resetValues[key]);\n            }\n            // Schedule a render for the next frame. This ensures we won't visually\n            // see the element with the reset rotate value applied.\n            visualElement.scheduleRender();\n        }\n        getProjectionStyles(styleProp) {\n            var _a, _b;\n            if (!this.instance || this.isSVG)\n                return undefined;\n            if (!this.isVisible) {\n                return hiddenVisibility;\n            }\n            const styles = {\n                visibility: \"\",\n            };\n            const transformTemplate = this.getTransformTemplate();\n            if (this.needsReset) {\n                this.needsReset = false;\n                styles.opacity = \"\";\n                styles.pointerEvents =\n                    resolveMotionValue(styleProp === null || styleProp === void 0 ? void 0 : styleProp.pointerEvents) || \"\";\n                styles.transform = transformTemplate\n                    ? transformTemplate(this.latestValues, \"\")\n                    : \"none\";\n                return styles;\n            }\n            const lead = this.getLead();\n            if (!this.projectionDelta || !this.layout || !lead.target) {\n                const emptyStyles = {};\n                if (this.options.layoutId) {\n                    emptyStyles.opacity =\n                        this.latestValues.opacity !== undefined\n                            ? this.latestValues.opacity\n                            : 1;\n                    emptyStyles.pointerEvents =\n                        resolveMotionValue(styleProp === null || styleProp === void 0 ? void 0 : styleProp.pointerEvents) || \"\";\n                }\n                if (this.hasProjected && !hasTransform(this.latestValues)) {\n                    emptyStyles.transform = transformTemplate\n                        ? transformTemplate({}, \"\")\n                        : \"none\";\n                    this.hasProjected = false;\n                }\n                return emptyStyles;\n            }\n            const valuesToRender = lead.animationValues || lead.latestValues;\n            this.applyTransformsToTarget();\n            styles.transform = buildProjectionTransform(this.projectionDeltaWithTransform, this.treeScale, valuesToRender);\n            if (transformTemplate) {\n                styles.transform = transformTemplate(valuesToRender, styles.transform);\n            }\n            const { x, y } = this.projectionDelta;\n            styles.transformOrigin = `${x.origin * 100}% ${y.origin * 100}% 0`;\n            if (lead.animationValues) {\n                /**\n                 * If the lead component is animating, assign this either the entering/leaving\n                 * opacity\n                 */\n                styles.opacity =\n                    lead === this\n                        ? (_b = (_a = valuesToRender.opacity) !== null && _a !== void 0 ? _a : this.latestValues.opacity) !== null && _b !== void 0 ? _b : 1\n                        : this.preserveOpacity\n                            ? this.latestValues.opacity\n                            : valuesToRender.opacityExit;\n            }\n            else {\n                /**\n                 * Or we're not animating at all, set the lead component to its layout\n                 * opacity and other components to hidden.\n                 */\n                styles.opacity =\n                    lead === this\n                        ? valuesToRender.opacity !== undefined\n                            ? valuesToRender.opacity\n                            : \"\"\n                        : valuesToRender.opacityExit !== undefined\n                            ? valuesToRender.opacityExit\n                            : 0;\n            }\n            /**\n             * Apply scale correction\n             */\n            for (const key in scaleCorrectors) {\n                if (valuesToRender[key] === undefined)\n                    continue;\n                const { correct, applyTo } = scaleCorrectors[key];\n                /**\n                 * Only apply scale correction to the value if we have an\n                 * active projection transform. Otherwise these values become\n                 * vulnerable to distortion if the element changes size without\n                 * a corresponding layout animation.\n                 */\n                const corrected = styles.transform === \"none\"\n                    ? valuesToRender[key]\n                    : correct(valuesToRender[key], lead);\n                if (applyTo) {\n                    const num = applyTo.length;\n                    for (let i = 0; i < num; i++) {\n                        styles[applyTo[i]] = corrected;\n                    }\n                }\n                else {\n                    styles[key] = corrected;\n                }\n            }\n            /**\n             * Disable pointer events on follow components. This is to ensure\n             * that if a follow component covers a lead component it doesn't block\n             * pointer events on the lead.\n             */\n            if (this.options.layoutId) {\n                styles.pointerEvents =\n                    lead === this\n                        ? resolveMotionValue(styleProp === null || styleProp === void 0 ? void 0 : styleProp.pointerEvents) || \"\"\n                        : \"none\";\n            }\n            return styles;\n        }\n        clearSnapshot() {\n            this.resumeFrom = this.snapshot = undefined;\n        }\n        // Only run on root\n        resetTree() {\n            this.root.nodes.forEach((node) => { var _a; return (_a = node.currentAnimation) === null || _a === void 0 ? void 0 : _a.stop(); });\n            this.root.nodes.forEach(clearMeasurements);\n            this.root.sharedNodes.clear();\n        }\n    };\n}\nfunction updateLayout(node) {\n    node.updateLayout();\n}\nfunction notifyLayoutUpdate(node) {\n    var _a;\n    const snapshot = ((_a = node.resumeFrom) === null || _a === void 0 ? void 0 : _a.snapshot) || node.snapshot;\n    if (node.isLead() &&\n        node.layout &&\n        snapshot &&\n        node.hasListeners(\"didUpdate\")) {\n        const { layoutBox: layout, measuredBox: measuredLayout } = node.layout;\n        const { animationType } = node.options;\n        const isShared = snapshot.source !== node.layout.source;\n        // TODO Maybe we want to also resize the layout snapshot so we don't trigger\n        // animations for instance if layout=\"size\" and an element has only changed position\n        if (animationType === \"size\") {\n            eachAxis((axis) => {\n                const axisSnapshot = isShared\n                    ? snapshot.measuredBox[axis]\n                    : snapshot.layoutBox[axis];\n                const length = calcLength(axisSnapshot);\n                axisSnapshot.min = layout[axis].min;\n                axisSnapshot.max = axisSnapshot.min + length;\n            });\n        }\n        else if (shouldAnimatePositionOnly(animationType, snapshot.layoutBox, layout)) {\n            eachAxis((axis) => {\n                const axisSnapshot = isShared\n                    ? snapshot.measuredBox[axis]\n                    : snapshot.layoutBox[axis];\n                const length = calcLength(layout[axis]);\n                axisSnapshot.max = axisSnapshot.min + length;\n                /**\n                 * Ensure relative target gets resized and rerendererd\n                 */\n                if (node.relativeTarget && !node.currentAnimation) {\n                    node.isProjectionDirty = true;\n                    node.relativeTarget[axis].max =\n                        node.relativeTarget[axis].min + length;\n                }\n            });\n        }\n        const layoutDelta = createDelta();\n        calcBoxDelta(layoutDelta, layout, snapshot.layoutBox);\n        const visualDelta = createDelta();\n        if (isShared) {\n            calcBoxDelta(visualDelta, node.applyTransform(measuredLayout, true), snapshot.measuredBox);\n        }\n        else {\n            calcBoxDelta(visualDelta, layout, snapshot.layoutBox);\n        }\n        const hasLayoutChanged = !isDeltaZero(layoutDelta);\n        let hasRelativeTargetChanged = false;\n        if (!node.resumeFrom) {\n            const relativeParent = node.getClosestProjectingParent();\n            /**\n             * If the relativeParent is itself resuming from a different element then\n             * the relative snapshot is not relavent\n             */\n            if (relativeParent && !relativeParent.resumeFrom) {\n                const { snapshot: parentSnapshot, layout: parentLayout } = relativeParent;\n                if (parentSnapshot && parentLayout) {\n                    const relativeSnapshot = createBox();\n                    calcRelativePosition(relativeSnapshot, snapshot.layoutBox, parentSnapshot.layoutBox);\n                    const relativeLayout = createBox();\n                    calcRelativePosition(relativeLayout, layout, parentLayout.layoutBox);\n                    if (!boxEqualsRounded(relativeSnapshot, relativeLayout)) {\n                        hasRelativeTargetChanged = true;\n                    }\n                    if (relativeParent.options.layoutRoot) {\n                        node.relativeTarget = relativeLayout;\n                        node.relativeTargetOrigin = relativeSnapshot;\n                        node.relativeParent = relativeParent;\n                    }\n                }\n            }\n        }\n        node.notifyListeners(\"didUpdate\", {\n            layout,\n            snapshot,\n            delta: visualDelta,\n            layoutDelta,\n            hasLayoutChanged,\n            hasRelativeTargetChanged,\n        });\n    }\n    else if (node.isLead()) {\n        const { onExitComplete } = node.options;\n        onExitComplete && onExitComplete();\n    }\n    /**\n     * Clearing transition\n     * TODO: Investigate why this transition is being passed in as {type: false } from Framer\n     * and why we need it at all\n     */\n    node.options.transition = undefined;\n}\nfunction propagateDirtyNodes(node) {\n    /**\n     * Increase debug counter for nodes encountered this frame\n     */\n    projectionFrameData.totalNodes++;\n    if (!node.parent)\n        return;\n    /**\n     * If this node isn't projecting, propagate isProjectionDirty. It will have\n     * no performance impact but it will allow the next child that *is* projecting\n     * but *isn't* dirty to just check its parent to see if *any* ancestor needs\n     * correcting.\n     */\n    if (!node.isProjecting()) {\n        node.isProjectionDirty = node.parent.isProjectionDirty;\n    }\n    /**\n     * Propagate isSharedProjectionDirty and isTransformDirty\n     * throughout the whole tree. A future revision can take another look at\n     * this but for safety we still recalcualte shared nodes.\n     */\n    node.isSharedProjectionDirty || (node.isSharedProjectionDirty = Boolean(node.isProjectionDirty ||\n        node.parent.isProjectionDirty ||\n        node.parent.isSharedProjectionDirty));\n    node.isTransformDirty || (node.isTransformDirty = node.parent.isTransformDirty);\n}\nfunction cleanDirtyNodes(node) {\n    node.isProjectionDirty =\n        node.isSharedProjectionDirty =\n            node.isTransformDirty =\n                false;\n}\nfunction clearSnapshot(node) {\n    node.clearSnapshot();\n}\nfunction clearMeasurements(node) {\n    node.clearMeasurements();\n}\nfunction clearIsLayoutDirty(node) {\n    node.isLayoutDirty = false;\n}\nfunction resetTransformStyle(node) {\n    const { visualElement } = node.options;\n    if (visualElement && visualElement.getProps().onBeforeLayoutMeasure) {\n        visualElement.notify(\"BeforeLayoutMeasure\");\n    }\n    node.resetTransform();\n}\nfunction finishAnimation(node) {\n    node.finishAnimation();\n    node.targetDelta = node.relativeTarget = node.target = undefined;\n    node.isProjectionDirty = true;\n}\nfunction resolveTargetDelta(node) {\n    node.resolveTargetDelta();\n}\nfunction calcProjection(node) {\n    node.calcProjection();\n}\nfunction resetRotation(node) {\n    node.resetRotation();\n}\nfunction removeLeadSnapshots(stack) {\n    stack.removeLeadSnapshot();\n}\nfunction mixAxisDelta(output, delta, p) {\n    output.translate = mix(delta.translate, 0, p);\n    output.scale = mix(delta.scale, 1, p);\n    output.origin = delta.origin;\n    output.originPoint = delta.originPoint;\n}\nfunction mixAxis(output, from, to, p) {\n    output.min = mix(from.min, to.min, p);\n    output.max = mix(from.max, to.max, p);\n}\nfunction mixBox(output, from, to, p) {\n    mixAxis(output.x, from.x, to.x, p);\n    mixAxis(output.y, from.y, to.y, p);\n}\nfunction hasOpacityCrossfade(node) {\n    return (node.animationValues && node.animationValues.opacityExit !== undefined);\n}\nconst defaultLayoutTransition = {\n    duration: 0.45,\n    ease: [0.4, 0, 0.1, 1],\n};\nconst userAgentContains = (string) => typeof navigator !== \"undefined\" &&\n    navigator.userAgent.toLowerCase().includes(string);\n/**\n * Measured bounding boxes must be rounded in Safari and\n * left untouched in Chrome, otherwise non-integer layouts within scaled-up elements\n * can appear to jump.\n */\nconst roundPoint = userAgentContains(\"applewebkit/\") && !userAgentContains(\"chrome/\")\n    ? Math.round\n    : noop;\nfunction roundAxis(axis) {\n    // Round to the nearest .5 pixels to support subpixel layouts\n    axis.min = roundPoint(axis.min);\n    axis.max = roundPoint(axis.max);\n}\nfunction roundBox(box) {\n    roundAxis(box.x);\n    roundAxis(box.y);\n}\nfunction shouldAnimatePositionOnly(animationType, snapshot, layout) {\n    return (animationType === \"position\" ||\n        (animationType === \"preserve-aspect\" &&\n            !isNear(aspectRatio(snapshot), aspectRatio(layout), 0.2)));\n}\n\nexport { cleanDirtyNodes, createProjectionNode, mixAxis, mixAxisDelta, mixBox, propagateDirtyNodes };\n","import { createProjectionNode } from './create-projection-node.mjs';\nimport { addDomEvent } from '../../events/add-dom-event.mjs';\n\nconst DocumentProjectionNode = createProjectionNode({\n    attachResizeListener: (ref, notify) => addDomEvent(ref, \"resize\", notify),\n    measureScroll: () => ({\n        x: document.documentElement.scrollLeft || document.body.scrollLeft,\n        y: document.documentElement.scrollTop || document.body.scrollTop,\n    }),\n    checkIsScrollRoot: () => true,\n});\n\nexport { DocumentProjectionNode };\n","import { createProjectionNode } from './create-projection-node.mjs';\nimport { DocumentProjectionNode } from './DocumentProjectionNode.mjs';\n\nconst rootProjectionNode = {\n    current: undefined,\n};\nconst HTMLProjectionNode = createProjectionNode({\n    measureScroll: (instance) => ({\n        x: instance.scrollLeft,\n        y: instance.scrollTop,\n    }),\n    defaultParent: () => {\n        if (!rootProjectionNode.current) {\n            const documentNode = new DocumentProjectionNode({});\n            documentNode.mount(window);\n            documentNode.setOptions({ layoutScroll: true });\n            rootProjectionNode.current = documentNode;\n        }\n        return rootProjectionNode.current;\n    },\n    resetTransform: (instance, value) => {\n        instance.style.transform = value !== undefined ? value : \"none\";\n    },\n    checkIsScrollRoot: (instance) => Boolean(window.getComputedStyle(instance).position === \"fixed\"),\n});\n\nexport { HTMLProjectionNode, rootProjectionNode };\n","import { DragGesture } from '../../gestures/drag/index.mjs';\nimport { PanGesture } from '../../gestures/pan/index.mjs';\nimport { MeasureLayout } from './layout/MeasureLayout.mjs';\nimport { HTMLProjectionNode } from '../../projection/node/HTMLProjectionNode.mjs';\n\nconst drag = {\n    pan: {\n        Feature: PanGesture,\n    },\n    drag: {\n        Feature: DragGesture,\n        ProjectionNode: HTMLProjectionNode,\n        MeasureLayout,\n    },\n};\n\nexport { drag };\n","import { invariant } from '../../../utils/errors.mjs';\nimport { isNumericalString } from '../../../utils/is-numerical-string.mjs';\nimport { isCSSVariableToken } from './is-css-variable.mjs';\n\n/**\n * Parse Framer's special CSS variable format into a CSS token and a fallback.\n *\n * ```\n * `var(--foo, #fff)` => [`--foo`, '#fff']\n * ```\n *\n * @param current\n */\nconst splitCSSVariableRegex = /var\\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\\)/;\nfunction parseCSSVariable(current) {\n    const match = splitCSSVariableRegex.exec(current);\n    if (!match)\n        return [,];\n    const [, token, fallback] = match;\n    return [token, fallback];\n}\nconst maxDepth = 4;\nfunction getVariableValue(current, element, depth = 1) {\n    invariant(depth <= maxDepth, `Max CSS variable fallback depth detected in property \"${current}\". This may indicate a circular fallback dependency.`);\n    const [token, fallback] = parseCSSVariable(current);\n    // No CSS variable detected\n    if (!token)\n        return;\n    // Attempt to read this CSS variable off the element\n    const resolved = window.getComputedStyle(element).getPropertyValue(token);\n    if (resolved) {\n        const trimmed = resolved.trim();\n        return isNumericalString(trimmed) ? parseFloat(trimmed) : trimmed;\n    }\n    else if (isCSSVariableToken(fallback)) {\n        // The fallback might itself be a CSS variable, in which case we attempt to resolve it too.\n        return getVariableValue(fallback, element, depth + 1);\n    }\n    else {\n        return fallback;\n    }\n}\n/**\n * Resolve CSS variables from\n *\n * @internal\n */\nfunction resolveCSSVariables(visualElement, { ...target }, transitionEnd) {\n    const element = visualElement.current;\n    if (!(element instanceof Element))\n        return { target, transitionEnd };\n    // If `transitionEnd` isn't `undefined`, clone it. We could clone `target` and `transitionEnd`\n    // only if they change but I think this reads clearer and this isn't a performance-critical path.\n    if (transitionEnd) {\n        transitionEnd = { ...transitionEnd };\n    }\n    // Go through existing `MotionValue`s and ensure any existing CSS variables are resolved\n    visualElement.values.forEach((value) => {\n        const current = value.get();\n        if (!isCSSVariableToken(current))\n            return;\n        const resolved = getVariableValue(current, element);\n        if (resolved)\n            value.set(resolved);\n    });\n    // Cycle through every target property and resolve CSS variables. Currently\n    // we only read single-var properties like `var(--foo)`, not `calc(var(--foo) + 20px)`\n    for (const key in target) {\n        const current = target[key];\n        if (!isCSSVariableToken(current))\n            continue;\n        const resolved = getVariableValue(current, element);\n        if (!resolved)\n            continue;\n        // Clone target if it hasn't already been\n        target[key] = resolved;\n        if (!transitionEnd)\n            transitionEnd = {};\n        // If the user hasn't already set this key on `transitionEnd`, set it to the unresolved\n        // CSS variable. This will ensure that after the animation the component will reflect\n        // changes in the value of the CSS variable.\n        if (transitionEnd[key] === undefined) {\n            transitionEnd[key] = current;\n        }\n    }\n    return { target, transitionEnd };\n}\n\nexport { parseCSSVariable, resolveCSSVariables };\n","import { isKeyframesTarget } from '../../../animation/utils/is-keyframes-target.mjs';\nimport { invariant } from '../../../utils/errors.mjs';\nimport { transformPropOrder } from '../../html/utils/transform.mjs';\nimport { findDimensionValueType } from '../value-types/dimensions.mjs';\nimport { isBrowser } from '../../../utils/is-browser.mjs';\nimport { number } from '../../../value/types/numbers/index.mjs';\nimport { px } from '../../../value/types/numbers/units.mjs';\n\nconst positionalKeys = new Set([\n    \"width\",\n    \"height\",\n    \"top\",\n    \"left\",\n    \"right\",\n    \"bottom\",\n    \"x\",\n    \"y\",\n    \"translateX\",\n    \"translateY\",\n]);\nconst isPositionalKey = (key) => positionalKeys.has(key);\nconst hasPositionalKey = (target) => {\n    return Object.keys(target).some(isPositionalKey);\n};\nconst isNumOrPxType = (v) => v === number || v === px;\nconst getPosFromMatrix = (matrix, pos) => parseFloat(matrix.split(\", \")[pos]);\nconst getTranslateFromMatrix = (pos2, pos3) => (_bbox, { transform }) => {\n    if (transform === \"none\" || !transform)\n        return 0;\n    const matrix3d = transform.match(/^matrix3d\\((.+)\\)$/);\n    if (matrix3d) {\n        return getPosFromMatrix(matrix3d[1], pos3);\n    }\n    else {\n        const matrix = transform.match(/^matrix\\((.+)\\)$/);\n        if (matrix) {\n            return getPosFromMatrix(matrix[1], pos2);\n        }\n        else {\n            return 0;\n        }\n    }\n};\nconst transformKeys = new Set([\"x\", \"y\", \"z\"]);\nconst nonTranslationalTransformKeys = transformPropOrder.filter((key) => !transformKeys.has(key));\nfunction removeNonTranslationalTransform(visualElement) {\n    const removedTransforms = [];\n    nonTranslationalTransformKeys.forEach((key) => {\n        const value = visualElement.getValue(key);\n        if (value !== undefined) {\n            removedTransforms.push([key, value.get()]);\n            value.set(key.startsWith(\"scale\") ? 1 : 0);\n        }\n    });\n    // Apply changes to element before measurement\n    if (removedTransforms.length)\n        visualElement.render();\n    return removedTransforms;\n}\nconst positionalValues = {\n    // Dimensions\n    width: ({ x }, { paddingLeft = \"0\", paddingRight = \"0\" }) => x.max - x.min - parseFloat(paddingLeft) - parseFloat(paddingRight),\n    height: ({ y }, { paddingTop = \"0\", paddingBottom = \"0\" }) => y.max - y.min - parseFloat(paddingTop) - parseFloat(paddingBottom),\n    top: (_bbox, { top }) => parseFloat(top),\n    left: (_bbox, { left }) => parseFloat(left),\n    bottom: ({ y }, { top }) => parseFloat(top) + (y.max - y.min),\n    right: ({ x }, { left }) => parseFloat(left) + (x.max - x.min),\n    // Transform\n    x: getTranslateFromMatrix(4, 13),\n    y: getTranslateFromMatrix(5, 14),\n};\n// Alias translate longform names\npositionalValues.translateX = positionalValues.x;\npositionalValues.translateY = positionalValues.y;\nconst convertChangedValueTypes = (target, visualElement, changedKeys) => {\n    const originBbox = visualElement.measureViewportBox();\n    const element = visualElement.current;\n    const elementComputedStyle = getComputedStyle(element);\n    const { display } = elementComputedStyle;\n    const origin = {};\n    // If the element is currently set to display: \"none\", make it visible before\n    // measuring the target bounding box\n    if (display === \"none\") {\n        visualElement.setStaticValue(\"display\", target.display || \"block\");\n    }\n    /**\n     * Record origins before we render and update styles\n     */\n    changedKeys.forEach((key) => {\n        origin[key] = positionalValues[key](originBbox, elementComputedStyle);\n    });\n    // Apply the latest values (as set in checkAndConvertChangedValueTypes)\n    visualElement.render();\n    const targetBbox = visualElement.measureViewportBox();\n    changedKeys.forEach((key) => {\n        // Restore styles to their **calculated computed style**, not their actual\n        // originally set style. This allows us to animate between equivalent pixel units.\n        const value = visualElement.getValue(key);\n        value && value.jump(origin[key]);\n        target[key] = positionalValues[key](targetBbox, elementComputedStyle);\n    });\n    return target;\n};\nconst checkAndConvertChangedValueTypes = (visualElement, target, origin = {}, transitionEnd = {}) => {\n    target = { ...target };\n    transitionEnd = { ...transitionEnd };\n    const targetPositionalKeys = Object.keys(target).filter(isPositionalKey);\n    // We want to remove any transform values that could affect the element's bounding box before\n    // it's measured. We'll reapply these later.\n    let removedTransformValues = [];\n    let hasAttemptedToRemoveTransformValues = false;\n    const changedValueTypeKeys = [];\n    targetPositionalKeys.forEach((key) => {\n        const value = visualElement.getValue(key);\n        if (!visualElement.hasValue(key))\n            return;\n        let from = origin[key];\n        let fromType = findDimensionValueType(from);\n        const to = target[key];\n        let toType;\n        // TODO: The current implementation of this basically throws an error\n        // if you try and do value conversion via keyframes. There's probably\n        // a way of doing this but the performance implications would need greater scrutiny,\n        // as it'd be doing multiple resize-remeasure operations.\n        if (isKeyframesTarget(to)) {\n            const numKeyframes = to.length;\n            const fromIndex = to[0] === null ? 1 : 0;\n            from = to[fromIndex];\n            fromType = findDimensionValueType(from);\n            for (let i = fromIndex; i < numKeyframes; i++) {\n                /**\n                 * Don't allow wildcard keyframes to be used to detect\n                 * a difference in value types.\n                 */\n                if (to[i] === null)\n                    break;\n                if (!toType) {\n                    toType = findDimensionValueType(to[i]);\n                    invariant(toType === fromType ||\n                        (isNumOrPxType(fromType) && isNumOrPxType(toType)), \"Keyframes must be of the same dimension as the current value\");\n                }\n                else {\n                    invariant(findDimensionValueType(to[i]) === toType, \"All keyframes must be of the same type\");\n                }\n            }\n        }\n        else {\n            toType = findDimensionValueType(to);\n        }\n        if (fromType !== toType) {\n            // If they're both just number or px, convert them both to numbers rather than\n            // relying on resize/remeasure to convert (which is wasteful in this situation)\n            if (isNumOrPxType(fromType) && isNumOrPxType(toType)) {\n                const current = value.get();\n                if (typeof current === \"string\") {\n                    value.set(parseFloat(current));\n                }\n                if (typeof to === \"string\") {\n                    target[key] = parseFloat(to);\n                }\n                else if (Array.isArray(to) && toType === px) {\n                    target[key] = to.map(parseFloat);\n                }\n            }\n            else if ((fromType === null || fromType === void 0 ? void 0 : fromType.transform) &&\n                (toType === null || toType === void 0 ? void 0 : toType.transform) &&\n                (from === 0 || to === 0)) {\n                // If one or the other value is 0, it's safe to coerce it to the\n                // type of the other without measurement\n                if (from === 0) {\n                    value.set(toType.transform(from));\n                }\n                else {\n                    target[key] = fromType.transform(to);\n                }\n            }\n            else {\n                // If we're going to do value conversion via DOM measurements, we first\n                // need to remove non-positional transform values that could affect the bbox measurements.\n                if (!hasAttemptedToRemoveTransformValues) {\n                    removedTransformValues =\n                        removeNonTranslationalTransform(visualElement);\n                    hasAttemptedToRemoveTransformValues = true;\n                }\n                changedValueTypeKeys.push(key);\n                transitionEnd[key] =\n                    transitionEnd[key] !== undefined\n                        ? transitionEnd[key]\n                        : target[key];\n                value.jump(to);\n            }\n        }\n    });\n    if (changedValueTypeKeys.length) {\n        const scrollY = changedValueTypeKeys.indexOf(\"height\") >= 0\n            ? window.pageYOffset\n            : null;\n        const convertedTarget = convertChangedValueTypes(target, visualElement, changedValueTypeKeys);\n        // If we removed transform values, reapply them before the next render\n        if (removedTransformValues.length) {\n            removedTransformValues.forEach(([key, value]) => {\n                visualElement.getValue(key).set(value);\n            });\n        }\n        // Reapply original values\n        visualElement.render();\n        // Restore scroll position\n        if (isBrowser && scrollY !== null) {\n            window.scrollTo({ top: scrollY });\n        }\n        return { target: convertedTarget, transitionEnd };\n    }\n    else {\n        return { target, transitionEnd };\n    }\n};\n/**\n * Convert value types for x/y/width/height/top/left/bottom/right\n *\n * Allows animation between `'auto'` -> `'100%'` or `0` -> `'calc(50% - 10vw)'`\n *\n * @internal\n */\nfunction unitConversion(visualElement, target, origin, transitionEnd) {\n    return hasPositionalKey(target)\n        ? checkAndConvertChangedValueTypes(visualElement, target, origin, transitionEnd)\n        : { target, transitionEnd };\n}\n\nexport { positionalValues, unitConversion };\n","import { resolveCSSVariables } from './css-variables-conversion.mjs';\nimport { unitConversion } from './unit-conversion.mjs';\n\n/**\n * Parse a DOM variant to make it animatable. This involves resolving CSS variables\n * and ensuring animations like \"20%\" => \"calc(50vw)\" are performed in pixels.\n */\nconst parseDomVariant = (visualElement, target, origin, transitionEnd) => {\n    const resolved = resolveCSSVariables(visualElement, target, transitionEnd);\n    target = resolved.target;\n    transitionEnd = resolved.transitionEnd;\n    return unitConversion(visualElement, target, origin, transitionEnd);\n};\n\nexport { parseDomVariant };\n","// Does this device prefer reduced motion? Returns `null` server-side.\nconst prefersReducedMotion = { current: null };\nconst hasReducedMotionListener = { current: false };\n\nexport { hasReducedMotionListener, prefersReducedMotion };\n","import { isBrowser } from '../is-browser.mjs';\nimport { hasReducedMotionListener, prefersReducedMotion } from './state.mjs';\n\nfunction initPrefersReducedMotion() {\n    hasReducedMotionListener.current = true;\n    if (!isBrowser)\n        return;\n    if (window.matchMedia) {\n        const motionMediaQuery = window.matchMedia(\"(prefers-reduced-motion)\");\n        const setReducedMotionPreferences = () => (prefersReducedMotion.current = motionMediaQuery.matches);\n        motionMediaQuery.addListener(setReducedMotionPreferences);\n        setReducedMotionPreferences();\n    }\n    else {\n        prefersReducedMotion.current = false;\n    }\n}\n\nexport { initPrefersReducedMotion };\n","import { isWillChangeMotionValue } from '../../value/use-will-change/is.mjs';\nimport { warnOnce } from '../../utils/warn-once.mjs';\nimport { motionValue } from '../../value/index.mjs';\nimport { isMotionValue } from '../../value/utils/is-motion-value.mjs';\n\nfunction updateMotionValuesFromProps(element, next, prev) {\n    const { willChange } = next;\n    for (const key in next) {\n        const nextValue = next[key];\n        const prevValue = prev[key];\n        if (isMotionValue(nextValue)) {\n            /**\n             * If this is a motion value found in props or style, we want to add it\n             * to our visual element's motion value map.\n             */\n            element.addValue(key, nextValue);\n            if (isWillChangeMotionValue(willChange)) {\n                willChange.add(key);\n            }\n            /**\n             * Check the version of the incoming motion value with this version\n             * and warn against mismatches.\n             */\n            if (process.env.NODE_ENV === \"development\") {\n                warnOnce(nextValue.version === \"10.18.0\", `Attempting to mix Framer Motion versions ${nextValue.version} with 10.18.0 may not work as expected.`);\n            }\n        }\n        else if (isMotionValue(prevValue)) {\n            /**\n             * If we're swapping from a motion value to a static value,\n             * create a new motion value from that\n             */\n            element.addValue(key, motionValue(nextValue, { owner: element }));\n            if (isWillChangeMotionValue(willChange)) {\n                willChange.remove(key);\n            }\n        }\n        else if (prevValue !== nextValue) {\n            /**\n             * If this is a flat value that has changed, update the motion value\n             * or create one if it doesn't exist. We only want to do this if we're\n             * not handling the value with our animation state.\n             */\n            if (element.hasValue(key)) {\n                const existingValue = element.getValue(key);\n                // TODO: Only update values that aren't being animated or even looked at\n                !existingValue.hasAnimated && existingValue.set(nextValue);\n            }\n            else {\n                const latestValue = element.getStaticValue(key);\n                element.addValue(key, motionValue(latestValue !== undefined ? latestValue : nextValue, { owner: element }));\n            }\n        }\n    }\n    // Handle removed values\n    for (const key in prev) {\n        if (next[key] === undefined)\n            element.removeValue(key);\n    }\n    return next;\n}\n\nexport { updateMotionValuesFromProps };\n","const visualElementStore = new WeakMap();\n\nexport { visualElementStore };\n","import { warning, invariant } from '../utils/errors.mjs';\nimport { createBox } from '../projection/geometry/models.mjs';\nimport { isRefObject } from '../utils/is-ref-object.mjs';\nimport { initPrefersReducedMotion } from '../utils/reduced-motion/index.mjs';\nimport { hasReducedMotionListener, prefersReducedMotion } from '../utils/reduced-motion/state.mjs';\nimport { SubscriptionManager } from '../utils/subscription-manager.mjs';\nimport { motionValue } from '../value/index.mjs';\nimport { isWillChangeMotionValue } from '../value/use-will-change/is.mjs';\nimport { isMotionValue } from '../value/utils/is-motion-value.mjs';\nimport { transformProps } from './html/utils/transform.mjs';\nimport { isControllingVariants, isVariantNode } from './utils/is-controlling-variants.mjs';\nimport { isVariantLabel } from './utils/is-variant-label.mjs';\nimport { updateMotionValuesFromProps } from './utils/motion-values.mjs';\nimport { resolveVariantFromProps } from './utils/resolve-variants.mjs';\nimport { warnOnce } from '../utils/warn-once.mjs';\nimport { featureDefinitions } from '../motion/features/definitions.mjs';\nimport { variantProps } from './utils/variant-props.mjs';\nimport { visualElementStore } from './store.mjs';\nimport { frame, cancelFrame } from '../frameloop/frame.mjs';\n\nconst featureNames = Object.keys(featureDefinitions);\nconst numFeatures = featureNames.length;\nconst propEventHandlers = [\n    \"AnimationStart\",\n    \"AnimationComplete\",\n    \"Update\",\n    \"BeforeLayoutMeasure\",\n    \"LayoutMeasure\",\n    \"LayoutAnimationStart\",\n    \"LayoutAnimationComplete\",\n];\nconst numVariantProps = variantProps.length;\n/**\n * A VisualElement is an imperative abstraction around UI elements such as\n * HTMLElement, SVGElement, Three.Object3D etc.\n */\nclass VisualElement {\n    constructor({ parent, props, presenceContext, reducedMotionConfig, visualState, }, options = {}) {\n        /**\n         * A reference to the current underlying Instance, e.g. a HTMLElement\n         * or Three.Mesh etc.\n         */\n        this.current = null;\n        /**\n         * A set containing references to this VisualElement's children.\n         */\n        this.children = new Set();\n        /**\n         * Determine what role this visual element should take in the variant tree.\n         */\n        this.isVariantNode = false;\n        this.isControllingVariants = false;\n        /**\n         * Decides whether this VisualElement should animate in reduced motion\n         * mode.\n         *\n         * TODO: This is currently set on every individual VisualElement but feels\n         * like it could be set globally.\n         */\n        this.shouldReduceMotion = null;\n        /**\n         * A map of all motion values attached to this visual element. Motion\n         * values are source of truth for any given animated value. A motion\n         * value might be provided externally by the component via props.\n         */\n        this.values = new Map();\n        /**\n         * Cleanup functions for active features (hover/tap/exit etc)\n         */\n        this.features = {};\n        /**\n         * A map of every subscription that binds the provided or generated\n         * motion values onChange listeners to this visual element.\n         */\n        this.valueSubscriptions = new Map();\n        /**\n         * A reference to the previously-provided motion values as returned\n         * from scrapeMotionValuesFromProps. We use the keys in here to determine\n         * if any motion values need to be removed after props are updated.\n         */\n        this.prevMotionValues = {};\n        /**\n         * An object containing a SubscriptionManager for each active event.\n         */\n        this.events = {};\n        /**\n         * An object containing an unsubscribe function for each prop event subscription.\n         * For example, every \"Update\" event can have multiple subscribers via\n         * VisualElement.on(), but only one of those can be defined via the onUpdate prop.\n         */\n        this.propEventSubscriptions = {};\n        this.notifyUpdate = () => this.notify(\"Update\", this.latestValues);\n        this.render = () => {\n            if (!this.current)\n                return;\n            this.triggerBuild();\n            this.renderInstance(this.current, this.renderState, this.props.style, this.projection);\n        };\n        this.scheduleRender = () => frame.render(this.render, false, true);\n        const { latestValues, renderState } = visualState;\n        this.latestValues = latestValues;\n        this.baseTarget = { ...latestValues };\n        this.initialValues = props.initial ? { ...latestValues } : {};\n        this.renderState = renderState;\n        this.parent = parent;\n        this.props = props;\n        this.presenceContext = presenceContext;\n        this.depth = parent ? parent.depth + 1 : 0;\n        this.reducedMotionConfig = reducedMotionConfig;\n        this.options = options;\n        this.isControllingVariants = isControllingVariants(props);\n        this.isVariantNode = isVariantNode(props);\n        if (this.isVariantNode) {\n            this.variantChildren = new Set();\n        }\n        this.manuallyAnimateOnMount = Boolean(parent && parent.current);\n        /**\n         * Any motion values that are provided to the element when created\n         * aren't yet bound to the element, as this would technically be impure.\n         * However, we iterate through the motion values and set them to the\n         * initial values for this component.\n         *\n         * TODO: This is impure and we should look at changing this to run on mount.\n         * Doing so will break some tests but this isn't neccessarily a breaking change,\n         * more a reflection of the test.\n         */\n        const { willChange, ...initialMotionValues } = this.scrapeMotionValuesFromProps(props, {});\n        for (const key in initialMotionValues) {\n            const value = initialMotionValues[key];\n            if (latestValues[key] !== undefined && isMotionValue(value)) {\n                value.set(latestValues[key], false);\n                if (isWillChangeMotionValue(willChange)) {\n                    willChange.add(key);\n                }\n            }\n        }\n    }\n    /**\n     * This method takes React props and returns found MotionValues. For example, HTML\n     * MotionValues will be found within the style prop, whereas for Three.js within attribute arrays.\n     *\n     * This isn't an abstract method as it needs calling in the constructor, but it is\n     * intended to be one.\n     */\n    scrapeMotionValuesFromProps(_props, _prevProps) {\n        return {};\n    }\n    mount(instance) {\n        this.current = instance;\n        visualElementStore.set(instance, this);\n        if (this.projection && !this.projection.instance) {\n            this.projection.mount(instance);\n        }\n        if (this.parent && this.isVariantNode && !this.isControllingVariants) {\n            this.removeFromVariantTree = this.parent.addVariantChild(this);\n        }\n        this.values.forEach((value, key) => this.bindToMotionValue(key, value));\n        if (!hasReducedMotionListener.current) {\n            initPrefersReducedMotion();\n        }\n        this.shouldReduceMotion =\n            this.reducedMotionConfig === \"never\"\n                ? false\n                : this.reducedMotionConfig === \"always\"\n                    ? true\n                    : prefersReducedMotion.current;\n        if (process.env.NODE_ENV !== \"production\") {\n            warnOnce(this.shouldReduceMotion !== true, \"You have Reduced Motion enabled on your device. Animations may not appear as expected.\");\n        }\n        if (this.parent)\n            this.parent.children.add(this);\n        this.update(this.props, this.presenceContext);\n    }\n    unmount() {\n        visualElementStore.delete(this.current);\n        this.projection && this.projection.unmount();\n        cancelFrame(this.notifyUpdate);\n        cancelFrame(this.render);\n        this.valueSubscriptions.forEach((remove) => remove());\n        this.removeFromVariantTree && this.removeFromVariantTree();\n        this.parent && this.parent.children.delete(this);\n        for (const key in this.events) {\n            this.events[key].clear();\n        }\n        for (const key in this.features) {\n            this.features[key].unmount();\n        }\n        this.current = null;\n    }\n    bindToMotionValue(key, value) {\n        const valueIsTransform = transformProps.has(key);\n        const removeOnChange = value.on(\"change\", (latestValue) => {\n            this.latestValues[key] = latestValue;\n            this.props.onUpdate &&\n                frame.update(this.notifyUpdate, false, true);\n            if (valueIsTransform && this.projection) {\n                this.projection.isTransformDirty = true;\n            }\n        });\n        const removeOnRenderRequest = value.on(\"renderRequest\", this.scheduleRender);\n        this.valueSubscriptions.set(key, () => {\n            removeOnChange();\n            removeOnRenderRequest();\n        });\n    }\n    sortNodePosition(other) {\n        /**\n         * If these nodes aren't even of the same type we can't compare their depth.\n         */\n        if (!this.current ||\n            !this.sortInstanceNodePosition ||\n            this.type !== other.type) {\n            return 0;\n        }\n        return this.sortInstanceNodePosition(this.current, other.current);\n    }\n    loadFeatures({ children, ...renderedProps }, isStrict, preloadedFeatures, initialLayoutGroupConfig) {\n        let ProjectionNodeConstructor;\n        let MeasureLayout;\n        /**\n         * If we're in development mode, check to make sure we're not rendering a motion component\n         * as a child of LazyMotion, as this will break the file-size benefits of using it.\n         */\n        if (process.env.NODE_ENV !== \"production\" &&\n            preloadedFeatures &&\n            isStrict) {\n            const strictMessage = \"You have rendered a `motion` component within a `LazyMotion` component. This will break tree shaking. Import and render a `m` component instead.\";\n            renderedProps.ignoreStrict\n                ? warning(false, strictMessage)\n                : invariant(false, strictMessage);\n        }\n        for (let i = 0; i < numFeatures; i++) {\n            const name = featureNames[i];\n            const { isEnabled, Feature: FeatureConstructor, ProjectionNode, MeasureLayout: MeasureLayoutComponent, } = featureDefinitions[name];\n            if (ProjectionNode)\n                ProjectionNodeConstructor = ProjectionNode;\n            if (isEnabled(renderedProps)) {\n                if (!this.features[name] && FeatureConstructor) {\n                    this.features[name] = new FeatureConstructor(this);\n                }\n                if (MeasureLayoutComponent) {\n                    MeasureLayout = MeasureLayoutComponent;\n                }\n            }\n        }\n        if ((this.type === \"html\" || this.type === \"svg\") &&\n            !this.projection &&\n            ProjectionNodeConstructor) {\n            this.projection = new ProjectionNodeConstructor(this.latestValues, this.parent && this.parent.projection);\n            const { layoutId, layout, drag, dragConstraints, layoutScroll, layoutRoot, } = renderedProps;\n            this.projection.setOptions({\n                layoutId,\n                layout,\n                alwaysMeasureLayout: Boolean(drag) ||\n                    (dragConstraints && isRefObject(dragConstraints)),\n                visualElement: this,\n                scheduleRender: () => this.scheduleRender(),\n                /**\n                 * TODO: Update options in an effect. This could be tricky as it'll be too late\n                 * to update by the time layout animations run.\n                 * We also need to fix this safeToRemove by linking it up to the one returned by usePresence,\n                 * ensuring it gets called if there's no potential layout animations.\n                 *\n                 */\n                animationType: typeof layout === \"string\" ? layout : \"both\",\n                initialPromotionConfig: initialLayoutGroupConfig,\n                layoutScroll,\n                layoutRoot,\n            });\n        }\n        return MeasureLayout;\n    }\n    updateFeatures() {\n        for (const key in this.features) {\n            const feature = this.features[key];\n            if (feature.isMounted) {\n                feature.update();\n            }\n            else {\n                feature.mount();\n                feature.isMounted = true;\n            }\n        }\n    }\n    triggerBuild() {\n        this.build(this.renderState, this.latestValues, this.options, this.props);\n    }\n    /**\n     * Measure the current viewport box with or without transforms.\n     * Only measures axis-aligned boxes, rotate and skew must be manually\n     * removed with a re-render to work.\n     */\n    measureViewportBox() {\n        return this.current\n            ? this.measureInstanceViewportBox(this.current, this.props)\n            : createBox();\n    }\n    getStaticValue(key) {\n        return this.latestValues[key];\n    }\n    setStaticValue(key, value) {\n        this.latestValues[key] = value;\n    }\n    /**\n     * Make a target animatable by Popmotion. For instance, if we're\n     * trying to animate width from 100px to 100vw we need to measure 100vw\n     * in pixels to determine what we really need to animate to. This is also\n     * pluggable to support Framer's custom value types like Color,\n     * and CSS variables.\n     */\n    makeTargetAnimatable(target, canMutate = true) {\n        return this.makeTargetAnimatableFromInstance(target, this.props, canMutate);\n    }\n    /**\n     * Update the provided props. Ensure any newly-added motion values are\n     * added to our map, old ones removed, and listeners updated.\n     */\n    update(props, presenceContext) {\n        if (props.transformTemplate || this.props.transformTemplate) {\n            this.scheduleRender();\n        }\n        this.prevProps = this.props;\n        this.props = props;\n        this.prevPresenceContext = this.presenceContext;\n        this.presenceContext = presenceContext;\n        /**\n         * Update prop event handlers ie onAnimationStart, onAnimationComplete\n         */\n        for (let i = 0; i < propEventHandlers.length; i++) {\n            const key = propEventHandlers[i];\n            if (this.propEventSubscriptions[key]) {\n                this.propEventSubscriptions[key]();\n                delete this.propEventSubscriptions[key];\n            }\n            const listener = props[\"on\" + key];\n            if (listener) {\n                this.propEventSubscriptions[key] = this.on(key, listener);\n            }\n        }\n        this.prevMotionValues = updateMotionValuesFromProps(this, this.scrapeMotionValuesFromProps(props, this.prevProps), this.prevMotionValues);\n        if (this.handleChildMotionValue) {\n            this.handleChildMotionValue();\n        }\n    }\n    getProps() {\n        return this.props;\n    }\n    /**\n     * Returns the variant definition with a given name.\n     */\n    getVariant(name) {\n        return this.props.variants ? this.props.variants[name] : undefined;\n    }\n    /**\n     * Returns the defined default transition on this component.\n     */\n    getDefaultTransition() {\n        return this.props.transition;\n    }\n    getTransformPagePoint() {\n        return this.props.transformPagePoint;\n    }\n    getClosestVariantNode() {\n        return this.isVariantNode\n            ? this\n            : this.parent\n                ? this.parent.getClosestVariantNode()\n                : undefined;\n    }\n    getVariantContext(startAtParent = false) {\n        if (startAtParent) {\n            return this.parent ? this.parent.getVariantContext() : undefined;\n        }\n        if (!this.isControllingVariants) {\n            const context = this.parent\n                ? this.parent.getVariantContext() || {}\n                : {};\n            if (this.props.initial !== undefined) {\n                context.initial = this.props.initial;\n            }\n            return context;\n        }\n        const context = {};\n        for (let i = 0; i < numVariantProps; i++) {\n            const name = variantProps[i];\n            const prop = this.props[name];\n            if (isVariantLabel(prop) || prop === false) {\n                context[name] = prop;\n            }\n        }\n        return context;\n    }\n    /**\n     * Add a child visual element to our set of children.\n     */\n    addVariantChild(child) {\n        const closestVariantNode = this.getClosestVariantNode();\n        if (closestVariantNode) {\n            closestVariantNode.variantChildren &&\n                closestVariantNode.variantChildren.add(child);\n            return () => closestVariantNode.variantChildren.delete(child);\n        }\n    }\n    /**\n     * Add a motion value and bind it to this visual element.\n     */\n    addValue(key, value) {\n        // Remove existing value if it exists\n        if (value !== this.values.get(key)) {\n            this.removeValue(key);\n            this.bindToMotionValue(key, value);\n        }\n        this.values.set(key, value);\n        this.latestValues[key] = value.get();\n    }\n    /**\n     * Remove a motion value and unbind any active subscriptions.\n     */\n    removeValue(key) {\n        this.values.delete(key);\n        const unsubscribe = this.valueSubscriptions.get(key);\n        if (unsubscribe) {\n            unsubscribe();\n            this.valueSubscriptions.delete(key);\n        }\n        delete this.latestValues[key];\n        this.removeValueFromRenderState(key, this.renderState);\n    }\n    /**\n     * Check whether we have a motion value for this key\n     */\n    hasValue(key) {\n        return this.values.has(key);\n    }\n    getValue(key, defaultValue) {\n        if (this.props.values && this.props.values[key]) {\n            return this.props.values[key];\n        }\n        let value = this.values.get(key);\n        if (value === undefined && defaultValue !== undefined) {\n            value = motionValue(defaultValue, { owner: this });\n            this.addValue(key, value);\n        }\n        return value;\n    }\n    /**\n     * If we're trying to animate to a previously unencountered value,\n     * we need to check for it in our state and as a last resort read it\n     * directly from the instance (which might have performance implications).\n     */\n    readValue(key) {\n        var _a;\n        return this.latestValues[key] !== undefined || !this.current\n            ? this.latestValues[key]\n            : (_a = this.getBaseTargetFromProps(this.props, key)) !== null && _a !== void 0 ? _a : this.readValueFromInstance(this.current, key, this.options);\n    }\n    /**\n     * Set the base target to later animate back to. This is currently\n     * only hydrated on creation and when we first read a value.\n     */\n    setBaseTarget(key, value) {\n        this.baseTarget[key] = value;\n    }\n    /**\n     * Find the base target for a value thats been removed from all animation\n     * props.\n     */\n    getBaseTarget(key) {\n        var _a;\n        const { initial } = this.props;\n        const valueFromInitial = typeof initial === \"string\" || typeof initial === \"object\"\n            ? (_a = resolveVariantFromProps(this.props, initial)) === null || _a === void 0 ? void 0 : _a[key]\n            : undefined;\n        /**\n         * If this value still exists in the current initial variant, read that.\n         */\n        if (initial && valueFromInitial !== undefined) {\n            return valueFromInitial;\n        }\n        /**\n         * Alternatively, if this VisualElement config has defined a getBaseTarget\n         * so we can read the value from an alternative source, try that.\n         */\n        const target = this.getBaseTargetFromProps(this.props, key);\n        if (target !== undefined && !isMotionValue(target))\n            return target;\n        /**\n         * If the value was initially defined on initial, but it doesn't any more,\n         * return undefined. Otherwise return the value as initially read from the DOM.\n         */\n        return this.initialValues[key] !== undefined &&\n            valueFromInitial === undefined\n            ? undefined\n            : this.baseTarget[key];\n    }\n    on(eventName, callback) {\n        if (!this.events[eventName]) {\n            this.events[eventName] = new SubscriptionManager();\n        }\n        return this.events[eventName].add(callback);\n    }\n    notify(eventName, ...args) {\n        if (this.events[eventName]) {\n            this.events[eventName].notify(...args);\n        }\n    }\n}\n\nexport { VisualElement };\n","import { getOrigin, checkTargetForNewValues } from '../utils/setters.mjs';\nimport { parseDomVariant } from './utils/parse-dom-variant.mjs';\nimport { VisualElement } from '../VisualElement.mjs';\n\nclass DOMVisualElement extends VisualElement {\n    sortInstanceNodePosition(a, b) {\n        /**\n         * compareDocumentPosition returns a bitmask, by using the bitwise &\n         * we're returning true if 2 in that bitmask is set to true. 2 is set\n         * to true if b preceeds a.\n         */\n        return a.compareDocumentPosition(b) & 2 ? 1 : -1;\n    }\n    getBaseTargetFromProps(props, key) {\n        return props.style ? props.style[key] : undefined;\n    }\n    removeValueFromRenderState(key, { vars, style }) {\n        delete vars[key];\n        delete style[key];\n    }\n    makeTargetAnimatableFromInstance({ transition, transitionEnd, ...target }, { transformValues }, isMounted) {\n        let origin = getOrigin(target, transition || {}, this);\n        /**\n         * If Framer has provided a function to convert `Color` etc value types, convert them\n         */\n        if (transformValues) {\n            if (transitionEnd)\n                transitionEnd = transformValues(transitionEnd);\n            if (target)\n                target = transformValues(target);\n            if (origin)\n                origin = transformValues(origin);\n        }\n        if (isMounted) {\n            checkTargetForNewValues(this, target, origin);\n            const parsed = parseDomVariant(this, target, origin, transitionEnd);\n            transitionEnd = parsed.transitionEnd;\n            target = parsed.target;\n        }\n        return {\n            transition,\n            transitionEnd,\n            ...target,\n        };\n    }\n}\n\nexport { DOMVisualElement };\n","import { buildHTMLStyles } from './utils/build-styles.mjs';\nimport { isCSSVariableName } from '../dom/utils/is-css-variable.mjs';\nimport { transformProps } from './utils/transform.mjs';\nimport { scrapeMotionValuesFromProps } from './utils/scrape-motion-values.mjs';\nimport { renderHTML } from './utils/render.mjs';\nimport { getDefaultValueType } from '../dom/value-types/defaults.mjs';\nimport { measureViewportBox } from '../../projection/utils/measure.mjs';\nimport { DOMVisualElement } from '../dom/DOMVisualElement.mjs';\nimport { isMotionValue } from '../../value/utils/is-motion-value.mjs';\n\nfunction getComputedStyle(element) {\n    return window.getComputedStyle(element);\n}\nclass HTMLVisualElement extends DOMVisualElement {\n    constructor() {\n        super(...arguments);\n        this.type = \"html\";\n    }\n    readValueFromInstance(instance, key) {\n        if (transformProps.has(key)) {\n            const defaultType = getDefaultValueType(key);\n            return defaultType ? defaultType.default || 0 : 0;\n        }\n        else {\n            const computedStyle = getComputedStyle(instance);\n            const value = (isCSSVariableName(key)\n                ? computedStyle.getPropertyValue(key)\n                : computedStyle[key]) || 0;\n            return typeof value === \"string\" ? value.trim() : value;\n        }\n    }\n    measureInstanceViewportBox(instance, { transformPagePoint }) {\n        return measureViewportBox(instance, transformPagePoint);\n    }\n    build(renderState, latestValues, options, props) {\n        buildHTMLStyles(renderState, latestValues, options, props.transformTemplate);\n    }\n    scrapeMotionValuesFromProps(props, prevProps) {\n        return scrapeMotionValuesFromProps(props, prevProps);\n    }\n    handleChildMotionValue() {\n        if (this.childSubscription) {\n            this.childSubscription();\n            delete this.childSubscription;\n        }\n        const { children } = this.props;\n        if (isMotionValue(children)) {\n            this.childSubscription = children.on(\"change\", (latest) => {\n                if (this.current)\n                    this.current.textContent = `${latest}`;\n            });\n        }\n    }\n    renderInstance(instance, renderState, styleProp, projection) {\n        renderHTML(instance, renderState, styleProp, projection);\n    }\n}\n\nexport { HTMLVisualElement, getComputedStyle };\n","import { scrapeMotionValuesFromProps } from './utils/scrape-motion-values.mjs';\nimport { DOMVisualElement } from '../dom/DOMVisualElement.mjs';\nimport { buildSVGAttrs } from './utils/build-attrs.mjs';\nimport { camelToDash } from '../dom/utils/camel-to-dash.mjs';\nimport { camelCaseAttributes } from './utils/camel-case-attrs.mjs';\nimport { transformProps } from '../html/utils/transform.mjs';\nimport { renderSVG } from './utils/render.mjs';\nimport { getDefaultValueType } from '../dom/value-types/defaults.mjs';\nimport { createBox } from '../../projection/geometry/models.mjs';\nimport { isSVGTag } from './utils/is-svg-tag.mjs';\n\nclass SVGVisualElement extends DOMVisualElement {\n    constructor() {\n        super(...arguments);\n        this.type = \"svg\";\n        this.isSVGTag = false;\n    }\n    getBaseTargetFromProps(props, key) {\n        return props[key];\n    }\n    readValueFromInstance(instance, key) {\n        if (transformProps.has(key)) {\n            const defaultType = getDefaultValueType(key);\n            return defaultType ? defaultType.default || 0 : 0;\n        }\n        key = !camelCaseAttributes.has(key) ? camelToDash(key) : key;\n        return instance.getAttribute(key);\n    }\n    measureInstanceViewportBox() {\n        return createBox();\n    }\n    scrapeMotionValuesFromProps(props, prevProps) {\n        return scrapeMotionValuesFromProps(props, prevProps);\n    }\n    build(renderState, latestValues, options, props) {\n        buildSVGAttrs(renderState, latestValues, options, this.isSVGTag, props.transformTemplate);\n    }\n    renderInstance(instance, renderState, styleProp, projection) {\n        renderSVG(instance, renderState, styleProp, projection);\n    }\n    mount(instance) {\n        this.isSVGTag = isSVGTag(instance.tagName);\n        super.mount(instance);\n    }\n}\n\nexport { SVGVisualElement };\n","import { HTMLVisualElement } from '../html/HTMLVisualElement.mjs';\nimport { SVGVisualElement } from '../svg/SVGVisualElement.mjs';\nimport { isSVGComponent } from './utils/is-svg-component.mjs';\n\nconst createDomVisualElement = (Component, options) => {\n    return isSVGComponent(Component)\n        ? new SVGVisualElement(options, { enableHardwareAcceleration: false })\n        : new HTMLVisualElement(options, { enableHardwareAcceleration: true });\n};\n\nexport { createDomVisualElement };\n","import { HTMLProjectionNode } from '../../projection/node/HTMLProjectionNode.mjs';\nimport { MeasureLayout } from './layout/MeasureLayout.mjs';\n\nconst layout = {\n    layout: {\n        ProjectionNode: HTMLProjectionNode,\n        MeasureLayout,\n    },\n};\n\nexport { layout };\n","import { createMotionComponent } from '../../motion/index.mjs';\nimport { createMotionProxy } from './motion-proxy.mjs';\nimport { createDomMotionConfig } from './utils/create-config.mjs';\nimport { gestureAnimations } from '../../motion/features/gestures.mjs';\nimport { animations } from '../../motion/features/animations.mjs';\nimport { drag } from '../../motion/features/drag.mjs';\nimport { createDomVisualElement } from './create-visual-element.mjs';\nimport { layout } from '../../motion/features/layout.mjs';\n\nconst preloadedFeatures = {\n    ...animations,\n    ...gestureAnimations,\n    ...drag,\n    ...layout,\n};\n/**\n * HTML & SVG components, optimised for use with gestures and animation. These can be used as\n * drop-in replacements for any HTML & SVG component, all CSS & SVG properties are supported.\n *\n * @public\n */\nconst motion = /*@__PURE__*/ createMotionProxy((Component, config) => createDomMotionConfig(Component, config, preloadedFeatures, createDomVisualElement));\n/**\n * Create a DOM `motion` component with the provided string. This is primarily intended\n * as a full alternative to `motion` for consumers who have to support environments that don't\n * support `Proxy`.\n *\n * ```javascript\n * import { createDomMotionComponent } from \"framer-motion\"\n *\n * const motion = {\n *   div: createDomMotionComponent('div')\n * }\n * ```\n *\n * @public\n */\nfunction createDomMotionComponent(key) {\n    return createMotionComponent(createDomMotionConfig(key, { forwardMotionProps: false }, preloadedFeatures, createDomVisualElement));\n}\n\nexport { createDomMotionComponent, motion };\n","import { useRef } from 'react';\nimport { useIsomorphicLayoutEffect } from './use-isomorphic-effect.mjs';\n\nfunction useIsMounted() {\n    const isMounted = useRef(false);\n    useIsomorphicLayoutEffect(() => {\n        isMounted.current = true;\n        return () => {\n            isMounted.current = false;\n        };\n    }, []);\n    return isMounted;\n}\n\nexport { useIsMounted };\n","import { useState, useCallback } from 'react';\nimport { useIsMounted } from './use-is-mounted.mjs';\nimport { frame } from '../frameloop/frame.mjs';\n\nfunction useForceUpdate() {\n    const isMounted = useIsMounted();\n    const [forcedRenderCount, setForcedRenderCount] = useState(0);\n    const forceRender = useCallback(() => {\n        isMounted.current && setForcedRenderCount(forcedRenderCount + 1);\n    }, [forcedRenderCount]);\n    /**\n     * Defer this to the end of the next animation frame in case there are multiple\n     * synchronous calls.\n     */\n    const deferredForceRender = useCallback(() => frame.postRender(forceRender), [forceRender]);\n    return [deferredForceRender, forcedRenderCount];\n}\n\nexport { useForceUpdate };\n","import * as React from 'react';\nimport { useId, useRef, useInsertionEffect } from 'react';\n\n/**\n * Measurement functionality has to be within a separate component\n * to leverage snapshot lifecycle.\n */\nclass PopChildMeasure extends React.Component {\n    getSnapshotBeforeUpdate(prevProps) {\n        const element = this.props.childRef.current;\n        if (element && prevProps.isPresent && !this.props.isPresent) {\n            const size = this.props.sizeRef.current;\n            size.height = element.offsetHeight || 0;\n            size.width = element.offsetWidth || 0;\n            size.top = element.offsetTop;\n            size.left = element.offsetLeft;\n        }\n        return null;\n    }\n    /**\n     * Required with getSnapshotBeforeUpdate to stop React complaining.\n     */\n    componentDidUpdate() { }\n    render() {\n        return this.props.children;\n    }\n}\nfunction PopChild({ children, isPresent }) {\n    const id = useId();\n    const ref = useRef(null);\n    const size = useRef({\n        width: 0,\n        height: 0,\n        top: 0,\n        left: 0,\n    });\n    /**\n     * We create and inject a style block so we can apply this explicit\n     * sizing in a non-destructive manner by just deleting the style block.\n     *\n     * We can't apply size via render as the measurement happens\n     * in getSnapshotBeforeUpdate (post-render), likewise if we apply the\n     * styles directly on the DOM node, we might be overwriting\n     * styles set via the style prop.\n     */\n    useInsertionEffect(() => {\n        const { width, height, top, left } = size.current;\n        if (isPresent || !ref.current || !width || !height)\n            return;\n        ref.current.dataset.motionPopId = id;\n        const style = document.createElement(\"style\");\n        document.head.appendChild(style);\n        if (style.sheet) {\n            style.sheet.insertRule(`\n          [data-motion-pop-id=\"${id}\"] {\n            position: absolute !important;\n            width: ${width}px !important;\n            height: ${height}px !important;\n            top: ${top}px !important;\n            left: ${left}px !important;\n          }\n        `);\n        }\n        return () => {\n            document.head.removeChild(style);\n        };\n    }, [isPresent]);\n    return (React.createElement(PopChildMeasure, { isPresent: isPresent, childRef: ref, sizeRef: size }, React.cloneElement(children, { ref })));\n}\n\nexport { PopChild };\n","import * as React from 'react';\nimport { useId, useMemo } from 'react';\nimport { PresenceContext } from '../../context/PresenceContext.mjs';\nimport { useConstant } from '../../utils/use-constant.mjs';\nimport { PopChild } from './PopChild.mjs';\n\nconst PresenceChild = ({ children, initial, isPresent, onExitComplete, custom, presenceAffectsLayout, mode, }) => {\n    const presenceChildren = useConstant(newChildrenMap);\n    const id = useId();\n    const context = useMemo(() => ({\n        id,\n        initial,\n        isPresent,\n        custom,\n        onExitComplete: (childId) => {\n            presenceChildren.set(childId, true);\n            for (const isComplete of presenceChildren.values()) {\n                if (!isComplete)\n                    return; // can stop searching when any is incomplete\n            }\n            onExitComplete && onExitComplete();\n        },\n        register: (childId) => {\n            presenceChildren.set(childId, false);\n            return () => presenceChildren.delete(childId);\n        },\n    }), \n    /**\n     * If the presence of a child affects the layout of the components around it,\n     * we want to make a new context value to ensure they get re-rendered\n     * so they can detect that layout change.\n     */\n    presenceAffectsLayout ? undefined : [isPresent]);\n    useMemo(() => {\n        presenceChildren.forEach((_, key) => presenceChildren.set(key, false));\n    }, [isPresent]);\n    /**\n     * If there's no `motion` components to fire exit animations, we want to remove this\n     * component immediately.\n     */\n    React.useEffect(() => {\n        !isPresent &&\n            !presenceChildren.size &&\n            onExitComplete &&\n            onExitComplete();\n    }, [isPresent]);\n    if (mode === \"popLayout\") {\n        children = React.createElement(PopChild, { isPresent: isPresent }, children);\n    }\n    return (React.createElement(PresenceContext.Provider, { value: context }, children));\n};\nfunction newChildrenMap() {\n    return new Map();\n}\n\nexport { PresenceChild };\n","import { useEffect } from 'react';\n\nfunction useUnmountEffect(callback) {\n    return useEffect(() => () => callback(), []);\n}\n\nexport { useUnmountEffect };\n","import * as React from 'react';\nimport { useContext, useRef, cloneElement, Children, isValidElement } from 'react';\nimport { useForceUpdate } from '../../utils/use-force-update.mjs';\nimport { useIsMounted } from '../../utils/use-is-mounted.mjs';\nimport { PresenceChild } from './PresenceChild.mjs';\nimport { LayoutGroupContext } from '../../context/LayoutGroupContext.mjs';\nimport { useIsomorphicLayoutEffect } from '../../utils/use-isomorphic-effect.mjs';\nimport { useUnmountEffect } from '../../utils/use-unmount-effect.mjs';\nimport { invariant } from '../../utils/errors.mjs';\n\nconst getChildKey = (child) => child.key || \"\";\nfunction updateChildLookup(children, allChildren) {\n    children.forEach((child) => {\n        const key = getChildKey(child);\n        allChildren.set(key, child);\n    });\n}\nfunction onlyElements(children) {\n    const filtered = [];\n    // We use forEach here instead of map as map mutates the component key by preprending `.$`\n    Children.forEach(children, (child) => {\n        if (isValidElement(child))\n            filtered.push(child);\n    });\n    return filtered;\n}\n/**\n * `AnimatePresence` enables the animation of components that have been removed from the tree.\n *\n * When adding/removing more than a single child, every child **must** be given a unique `key` prop.\n *\n * Any `motion` components that have an `exit` property defined will animate out when removed from\n * the tree.\n *\n * ```jsx\n * import { motion, AnimatePresence } from 'framer-motion'\n *\n * export const Items = ({ items }) => (\n *   <AnimatePresence>\n *     {items.map(item => (\n *       <motion.div\n *         key={item.id}\n *         initial={{ opacity: 0 }}\n *         animate={{ opacity: 1 }}\n *         exit={{ opacity: 0 }}\n *       />\n *     ))}\n *   </AnimatePresence>\n * )\n * ```\n *\n * You can sequence exit animations throughout a tree using variants.\n *\n * If a child contains multiple `motion` components with `exit` props, it will only unmount the child\n * once all `motion` components have finished animating out. Likewise, any components using\n * `usePresence` all need to call `safeToRemove`.\n *\n * @public\n */\nconst AnimatePresence = ({ children, custom, initial = true, onExitComplete, exitBeforeEnter, presenceAffectsLayout = true, mode = \"sync\", }) => {\n    invariant(!exitBeforeEnter, \"Replace exitBeforeEnter with mode='wait'\");\n    // We want to force a re-render once all exiting animations have finished. We\n    // either use a local forceRender function, or one from a parent context if it exists.\n    const forceRender = useContext(LayoutGroupContext).forceRender || useForceUpdate()[0];\n    const isMounted = useIsMounted();\n    // Filter out any children that aren't ReactElements. We can only track ReactElements with a props.key\n    const filteredChildren = onlyElements(children);\n    let childrenToRender = filteredChildren;\n    const exitingChildren = useRef(new Map()).current;\n    // Keep a living record of the children we're actually rendering so we\n    // can diff to figure out which are entering and exiting\n    const presentChildren = useRef(childrenToRender);\n    // A lookup table to quickly reference components by key\n    const allChildren = useRef(new Map()).current;\n    // If this is the initial component render, just deal with logic surrounding whether\n    // we play onMount animations or not.\n    const isInitialRender = useRef(true);\n    useIsomorphicLayoutEffect(() => {\n        isInitialRender.current = false;\n        updateChildLookup(filteredChildren, allChildren);\n        presentChildren.current = childrenToRender;\n    });\n    useUnmountEffect(() => {\n        isInitialRender.current = true;\n        allChildren.clear();\n        exitingChildren.clear();\n    });\n    if (isInitialRender.current) {\n        return (React.createElement(React.Fragment, null, childrenToRender.map((child) => (React.createElement(PresenceChild, { key: getChildKey(child), isPresent: true, initial: initial ? undefined : false, presenceAffectsLayout: presenceAffectsLayout, mode: mode }, child)))));\n    }\n    // If this is a subsequent render, deal with entering and exiting children\n    childrenToRender = [...childrenToRender];\n    // Diff the keys of the currently-present and target children to update our\n    // exiting list.\n    const presentKeys = presentChildren.current.map(getChildKey);\n    const targetKeys = filteredChildren.map(getChildKey);\n    // Diff the present children with our target children and mark those that are exiting\n    const numPresent = presentKeys.length;\n    for (let i = 0; i < numPresent; i++) {\n        const key = presentKeys[i];\n        if (targetKeys.indexOf(key) === -1 && !exitingChildren.has(key)) {\n            exitingChildren.set(key, undefined);\n        }\n    }\n    // If we currently have exiting children, and we're deferring rendering incoming children\n    // until after all current children have exiting, empty the childrenToRender array\n    if (mode === \"wait\" && exitingChildren.size) {\n        childrenToRender = [];\n    }\n    // Loop through all currently exiting components and clone them to overwrite `animate`\n    // with any `exit` prop they might have defined.\n    exitingChildren.forEach((component, key) => {\n        // If this component is actually entering again, early return\n        if (targetKeys.indexOf(key) !== -1)\n            return;\n        const child = allChildren.get(key);\n        if (!child)\n            return;\n        const insertionIndex = presentKeys.indexOf(key);\n        let exitingComponent = component;\n        if (!exitingComponent) {\n            const onExit = () => {\n                // clean up the exiting children map\n                exitingChildren.delete(key);\n                // compute the keys of children that were rendered once but are no longer present\n                // this could happen in case of too many fast consequent renderings\n                // @link https://github.com/framer/motion/issues/2023\n                const leftOverKeys = Array.from(allChildren.keys()).filter((childKey) => !targetKeys.includes(childKey));\n                // clean up the all children map\n                leftOverKeys.forEach((leftOverKey) => allChildren.delete(leftOverKey));\n                // make sure to render only the children that are actually visible\n                presentChildren.current = filteredChildren.filter((presentChild) => {\n                    const presentChildKey = getChildKey(presentChild);\n                    return (\n                    // filter out the node exiting\n                    presentChildKey === key ||\n                        // filter out the leftover children\n                        leftOverKeys.includes(presentChildKey));\n                });\n                // Defer re-rendering until all exiting children have indeed left\n                if (!exitingChildren.size) {\n                    if (isMounted.current === false)\n                        return;\n                    forceRender();\n                    onExitComplete && onExitComplete();\n                }\n            };\n            exitingComponent = (React.createElement(PresenceChild, { key: getChildKey(child), isPresent: false, onExitComplete: onExit, custom: custom, presenceAffectsLayout: presenceAffectsLayout, mode: mode }, child));\n            exitingChildren.set(key, exitingComponent);\n        }\n        childrenToRender.splice(insertionIndex, 0, exitingComponent);\n    });\n    // Add `MotionContext` even to children that don't need it to ensure we're rendering\n    // the same tree between renders\n    childrenToRender = childrenToRender.map((child) => {\n        const key = child.key;\n        return exitingChildren.has(key) ? (child) : (React.createElement(PresenceChild, { key: getChildKey(child), isPresent: true, presenceAffectsLayout: presenceAffectsLayout, mode: mode }, child));\n    });\n    if (process.env.NODE_ENV !== \"production\" &&\n        mode === \"wait\" &&\n        childrenToRender.length > 1) {\n        console.warn(`You're attempting to animate multiple children within AnimatePresence, but its mode is set to \"wait\". This will lead to odd visual behaviour.`);\n    }\n    return (React.createElement(React.Fragment, null, exitingChildren.size\n        ? childrenToRender\n        : childrenToRender.map((child) => cloneElement(child))));\n};\n\nexport { AnimatePresence };\n","import React from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { X, Brain } from 'lucide-react';\r\nimport { GameTutorialProps } from '../types';\r\n\r\nconst GameTutorial: React.FC<GameTutorialProps> = ({ isOpen, onClose, onStartTutorial, onStartGame }) => {\r\n  if (!isOpen) return null;\r\n  \r\n  return (\r\n    <motion.div\r\n      initial={{ opacity: 0 }}\r\n      animate={{ opacity: 1 }}\r\n      exit={{ opacity: 0 }}\r\n      className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4\"\r\n    >\r\n      <motion.div\r\n        initial={{ scale: 0.9, opacity: 0 }}\r\n        animate={{ scale: 1, opacity: 1 }}\r\n        exit={{ scale: 0.9, opacity: 0 }}\r\n        className=\"bitsacco-modal max-w-4xl w-full max-h-[90vh] overflow-y-auto\"\r\n      >\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between mb-6\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <Brain className=\"w-8 h-8 text-teal-400\" />\r\n            <h2 className=\"text-2xl font-bold text-white\">Privacy Jenga Tutorial</h2>\r\n          </div>\r\n          <button onClick={onClose} className=\"text-gray-400 hover:text-white transition-colors\">\r\n            <X className=\"w-6 h-6\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Tutorial Content */}\r\n        <div className=\"space-y-6\">\r\n          <section>\r\n            <h3 className=\"text-xl font-semibold text-white mb-4\">How to Play</h3>\r\n            <div className=\"bg-gray-700/50 rounded-lg p-4 space-y-3\">\r\n              <div className=\"flex items-start gap-3\">\r\n                <div className=\"w-2 h-2 bg-blue-400 rounded-full mt-2\"></div>\r\n                <p className=\"text-gray-300\">Click on any block in the 3D tower to reveal a Bitcoin privacy question</p>\r\n              </div>\r\n              <div className=\"flex items-start gap-3\">\r\n                <div className=\"w-2 h-2 bg-blue-400 rounded-full mt-2\"></div>\r\n                <p className=\"text-gray-300\">Answer the question correctly to maintain tower stability</p>\r\n              </div>\r\n              <div className=\"flex items-start gap-3\">\r\n                <div className=\"w-2 h-2 bg-blue-400 rounded-full mt-2\"></div>\r\n                <p className=\"text-gray-300\">Wrong answers reduce stability and can cause the tower to collapse</p>\r\n              </div>\r\n              <div className=\"flex items-start gap-3\">\r\n                <div className=\"w-2 h-2 bg-blue-400 rounded-full mt-2\"></div>\r\n                <p className=\"text-gray-300\">Learn all 54 Bitcoin privacy concepts through interactive questions</p>\r\n              </div>\r\n            </div>\r\n          </section>\r\n\r\n                     <section>\r\n             <h3 className=\"text-xl font-semibold text-white mb-4\">Block Types</h3>\r\n             <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n               <div className=\"bg-green-500/10 border border-green-400/30 rounded-lg p-4\">\r\n                 <h4 className=\"text-lg font-semibold text-green-300 mb-2\">Green Blocks</h4>\r\n                 <p className=\"text-green-200 text-sm\">Safe blocks</p>\r\n               </div>\r\n               <div className=\"bg-orange-500/10 border border-orange-400/30 rounded-lg p-4\">\r\n                 <h4 className=\"text-lg font-semibold text-orange-300 mb-2\">Orange Blocks</h4>\r\n                 <p className=\"text-orange-200 text-sm\">Medium difficulty</p>\r\n               </div>\r\n               <div className=\"bg-red-500/10 border border-red-400/30 rounded-lg p-4\">\r\n                 <h4 className=\"text-lg font-semibold text-red-300 mb-2\">Red Blocks</h4>\r\n                 <p className=\"text-red-200 text-sm\">Risky blocks</p>\r\n               </div>\r\n             </div>\r\n           </section>\r\n\r\n          <section>\r\n            <h3 className=\"text-xl font-semibold text-white mb-4\">Game Mechanics</h3>\r\n            <div className=\"bg-gray-700/50 rounded-lg p-4 space-y-3\">\r\n              <div className=\"flex items-start gap-3\">\r\n                <div className=\"w-2 h-2 bg-yellow-400 rounded-full mt-2\"></div>\r\n                <p className=\"text-gray-300\">Tower stability starts at 100%</p>\r\n              </div>\r\n              <div className=\"flex items-start gap-3\">\r\n                <div className=\"w-2 h-2 bg-yellow-400 rounded-full mt-2\"></div>\r\n                <p className=\"text-gray-300\">Correct answers: +8 to +20 stability (based on difficulty)</p>\r\n              </div>\r\n              <div className=\"flex items-start gap-3\">\r\n                <div className=\"w-2 h-2 bg-yellow-400 rounded-full mt-2\"></div>\r\n                <p className=\"text-gray-300\">Wrong answers: -15 to -35 stability (based on difficulty)</p>\r\n              </div>\r\n              <div className=\"flex items-start gap-3\">\r\n                <div className=\"w-2 h-2 bg-yellow-400 rounded-full mt-2\"></div>\r\n                <p className=\"text-gray-300\">Tower collapses when stability reaches 0%</p>\r\n              </div>\r\n              <div className=\"flex items-start gap-3\">\r\n                <div className=\"w-2 h-2 bg-yellow-400 rounded-full mt-2\"></div>\r\n                <p className=\"text-gray-300\">Difficulty adapts based on your performance</p>\r\n              </div>\r\n              <div className=\"flex items-start gap-3\">\r\n                <div className=\"w-2 h-2 bg-yellow-400 rounded-full mt-2\"></div>\r\n                <p className=\"text-gray-300\">Tougher questions give bigger rewards but bigger penalties!</p>\r\n              </div>\r\n            </div>\r\n          </section>\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        <div className=\"mt-8 pt-6 border-t border-gray-700 text-center\">\r\n          <div className=\"flex flex-col sm:flex-row gap-3 justify-center\">\r\n            {onStartTutorial && (\r\n              <motion.button\r\n                whileHover={{ scale: 1.05 }}\r\n                whileTap={{ scale: 0.95 }}\r\n                onClick={onStartTutorial}\r\n                className=\"bitsacco-btn bitsacco-btn-outline px-6 py-3\"\r\n              >\r\n                Interactive Tutorial\r\n              </motion.button>\r\n            )}\r\n            {onStartGame && (\r\n              <motion.button\r\n                whileHover={{ scale: 1.05 }}\r\n                whileTap={{ scale: 0.95 }}\r\n                onClick={onStartGame}\r\n                className=\"bitsacco-btn bitsacco-btn-primary px-8 py-3\"\r\n              >\r\n                Start Game\r\n              </motion.button>\r\n            )}\r\n            <motion.button\r\n              whileHover={{ scale: 1.05 }}\r\n              whileTap={{ scale: 0.95 }}\r\n              onClick={onClose}\r\n              className=\"bitsacco-btn bitsacco-btn-outline px-6 py-3\"\r\n            >\r\n              Close\r\n            </motion.button>\r\n          </div>\r\n        </div>\r\n      </motion.div>\r\n    </motion.div>\r\n  );\r\n};\r\n\r\nexport default GameTutorial;\r\n","export default \"__VITE_ASSET__CZm7jmO$__\"","import React from 'react';\r\nimport bitsaccoLogo from '../assets/bitsacco-logo.png';\r\nimport { BitsaccoLogoProps } from '../types';\r\n\r\nconst BitsaccoLogo: React.FC<BitsaccoLogoProps> = ({ size = 32, className = '' }) => {\r\n  return (\r\n    <div \r\n      className={`bitsacco-logo-clean ${className}`}\r\n      style={{ width: size, height: size }}\r\n    >\r\n      <img\r\n        src={bitsaccoLogo}\r\n        alt=\"Bitsacco Teal Horse Logo\"\r\n        style={{\r\n          transition: 'all 0.3s ease-in-out'\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BitsaccoLogo;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { Brain, Target, Zap, Play, HelpCircle, BookOpen, Trophy, Shield, AlertTriangle } from 'lucide-react';\r\nimport GameTutorial from '../components/GameTutorial';\r\nimport BitsaccoLogo from '../components/BitsaccoLogo';\r\nimport { motion } from 'framer-motion';\r\n\r\nconst HomePage: React.FC = () => {\r\n  const navigate = useNavigate();\r\n  const [showTutorial, setShowTutorial] = useState(false);\r\n  const [showWelcome, setShowWelcome] = useState(true);\r\n\r\n  useEffect(() => {\r\n    // Always show welcome message when visiting homepage\r\n    setShowWelcome(true);\r\n  }, []);\r\n\r\n  const handleStartGame = () => {\r\n    navigate('/game');\r\n  };\r\n\r\n  const handleStartTutorial = () => {\r\n    setShowTutorial(false);\r\n    // Tutorial logic can be implemented here\r\n    console.log('Starting interactive tutorial...');\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900\">\r\n      {/* Header */}\r\n      <header className=\"bg-black/20 backdrop-blur-sm border-b border-gray-700\">\r\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n          <div className=\"flex items-center justify-between h-16\">\r\n            <div className=\"flex items-center space-x-4\">\r\n              <div className=\"flex items-center gap-3\">\r\n                <div className=\"w-10 h-10 bg-gradient-to-br from-teal-400 to-teal-600 rounded-lg flex items-center justify-center\">\r\n                  <Shield className=\"w-6 h-6 text-white\" />\r\n                </div>\r\n                <h1 className=\"text-2xl font-bold text-white\">Privacy Jenga</h1>\r\n              </div>\r\n              <div className=\"flex items-center gap-2\">\r\n                <span className=\"text-teal-200 text-sm\">×</span>\r\n                <BitsaccoLogo className=\"w-8 h-8\" />\r\n                <span className=\"text-teal-200 text-sm font-medium\">Bitsacco</span>\r\n              </div>\r\n            </div>\r\n            \r\n            <div className=\"flex items-center space-x-3\">\r\n              <button\r\n                onClick={() => setShowTutorial(true)}\r\n                className=\"bitsacco-btn bitsacco-btn-outline flex items-center gap-2\"\r\n              >\r\n                <HelpCircle className=\"w-4 h-4\" />\r\n                How to Play\r\n              </button>\r\n              <a \r\n                href=\"https://bitsacco.com/\" \r\n                target=\"_blank\" \r\n                rel=\"noopener noreferrer\"\r\n                className=\"bitsacco-btn bitsacco-btn-outline flex items-center gap-1 group\"\r\n              >\r\n                Bitsacco\r\n                <svg className=\"w-3 h-3 group-hover:translate-x-0.5 transition-transform\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14\" />\r\n                </svg>\r\n              </a>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </header>\r\n\r\n      {/* Hero Section */}\r\n      <section className=\"relative py-20 px-4 sm:px-6 lg:px-8\">\r\n        <div className=\"max-w-7xl mx-auto text-center\">\r\n          {/* Welcome message - always shown */}\r\n          {showWelcome && (\r\n            <motion.div\r\n              initial={{ opacity: 0, y: 20 }}\r\n              animate={{ opacity: 1, y: 0 }}\r\n              className=\"mb-8 p-6 bg-teal-500/10 border border-teal-400/30 rounded-xl relative\"\r\n            >\r\n              {/* Close button */}\r\n              <button\r\n                onClick={() => setShowWelcome(false)}\r\n                className=\"absolute top-3 right-3 text-teal-400 hover:text-teal-300 transition-colors\"\r\n                aria-label=\"Close welcome message\"\r\n              >\r\n                <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n                </svg>\r\n              </button>\r\n              \r\n              <div className=\"flex items-center justify-center gap-3 mb-3\">\r\n                <Shield className=\"w-8 h-8 text-teal-400\" />\r\n                <h2 className=\"text-2xl font-bold text-teal-300\">Welcome to Privacy Jenga!</h2>\r\n              </div>\r\n              <p className=\"text-teal-200 text-lg\">\r\n                Learn online privacy and security through an engaging tower-building experience. \r\n                Each block contains valuable knowledge to protect yourself online.\r\n              </p>\r\n            </motion.div>\r\n          )}\r\n\r\n          <h1 className=\"text-5xl md:text-6xl font-bold text-white mb-6\">\r\n            Learn Privacy Through\r\n            <span className=\"block text-transparent bg-clip-text bg-gradient-to-r from-teal-400 to-blue-500\">\r\n              Interactive Gaming\r\n            </span>\r\n          </h1>\r\n          \r\n          <p className=\"text-xl text-gray-300 mb-8 max-w-3xl mx-auto\">\r\n            Master online privacy and security concepts by playing Privacy Jenga. \r\n            Remove blocks, answer quizzes, and build your knowledge while the tower grows taller.\r\n          </p>\r\n\r\n          <div className=\"flex flex-col sm:flex-row gap-4 justify-center items-center\">\r\n            <button\r\n              onClick={() => handleStartGame()}\r\n              className=\"bitsacco-btn bitsacco-btn-primary text-lg px-8 py-4 flex items-center gap-3\"\r\n            >\r\n              <Play className=\"w-6 h-6\" />\r\n              Start Playing Now\r\n            </button>\r\n            \r\n            <button\r\n              onClick={() => setShowTutorial(true)}\r\n              className=\"bitsacco-btn bitsacco-btn-outline text-lg px-8 py-4 flex items-center gap-3\"\r\n            >\r\n              <BookOpen className=\"w-6 h-6\" />\r\n              Learn How to Play\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </section>\r\n\r\n      {/* Features Section */}\r\n      <section className=\"py-20 px-4 sm:px-6 lg:px-8 bg-black/20\">\r\n        <div className=\"max-w-7xl mx-auto\">\r\n          <div className=\"text-center mb-16\">\r\n            <h2 className=\"text-3xl md:text-4xl font-bold text-white mb-4\">\r\n              Why Privacy Jenga?\r\n            </h2>\r\n            <p className=\"text-xl text-gray-300 max-w-2xl mx-auto\">\r\n              Our unique approach combines entertainment with education, making privacy learning \r\n              engaging and memorable.\r\n            </p>\r\n          </div>\r\n\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8\">\r\n            {/* Feature 1 */}\r\n            <div className=\"bitsacco-card p-6 text-center\">\r\n              <div className=\"w-16 h-16 bg-gradient-to-br from-green-400 to-green-600 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n                <Brain className=\"w-8 h-8 text-white\" />\r\n              </div>\r\n              <h3 className=\"text-xl font-bold text-white mb-3\">Interactive Learning</h3>\r\n              <p className=\"text-gray-300\">\r\n                Learn through hands-on experience. Each block removal teaches you something new \r\n                about online privacy and security.\r\n              </p>\r\n            </div>\r\n\r\n            {/* Feature 2 */}\r\n            <div className=\"bitsacco-card p-6 text-center\">\r\n              <div className=\"w-16 h-16 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n                <Target className=\"w-8 h-8 text-white\" />\r\n              </div>\r\n              <h3 className=\"text-xl font-bold text-white mb-3\">Progressive Difficulty</h3>\r\n              <p className=\"text-gray-300\">\r\n                Start with basic concepts and advance to complex privacy challenges as you \r\n                build your knowledge tower.\r\n              </p>\r\n            </div>\r\n\r\n            {/* Feature 3 */}\r\n            <div className=\"bitsacco-card p-6 text-center\">\r\n              <div className=\"w-16 h-16 bg-gradient-to-br from-purple-400 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n                <Zap className=\"w-8 h-8 text-white\" />\r\n              </div>\r\n              <h3 className=\"text-xl font-bold text-white mb-3\">Instant Feedback</h3>\r\n              <p className=\"text-gray-300\">\r\n                Get immediate feedback on your privacy knowledge through quizzes and \r\n                real-time scoring.\r\n              </p>\r\n            </div>\r\n\r\n            {/* Feature 4 */}\r\n            <div className=\"bitsacco-card p-6 text-center\">\r\n              <div className=\"w-16 h-16 bg-gradient-to-br from-yellow-400 to-yellow-600 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n                <Trophy className=\"w-8 h-8 text-white\" />\r\n              </div>\r\n              <h3 className=\"text-xl font-bold text-white mb-3\">Achievement System</h3>\r\n              <p className=\"text-gray-300\">\r\n                Unlock achievements and track your progress as you become a privacy expert.\r\n              </p>\r\n            </div>\r\n\r\n            {/* Feature 5 */}\r\n            <div className=\"bitsacco-card p-6 text-center\">\r\n              <div className=\"w-16 h-16 bg-gradient-to-br from-red-400 to-red-600 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n                <AlertTriangle className=\"w-8 h-8 text-white\" />\r\n              </div>\r\n              <h3 className=\"text-xl font-bold text-white mb-3\">Risk Awareness</h3>\r\n              <p className=\"text-gray-300\">\r\n                Understand the real risks of poor privacy practices and learn how to \r\n                protect yourself online.\r\n              </p>\r\n            </div>\r\n\r\n            {/* Feature 6 */}\r\n            <div className=\"bitsacco-card p-6 text-center\">\r\n              <div className=\"w-16 h-16 bg-gradient-to-br from-teal-400 to-teal-600 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n                <Shield className=\"w-8 h-8 text-white\" />\r\n              </div>\r\n              <h3 className=\"text-xl font-bold text-white mb-3\">Practical Skills</h3>\r\n              <p className=\"text-gray-300\">\r\n                Apply what you learn immediately to your daily online activities \r\n                and digital security practices.\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n\r\n      {/* Game Modes Section */}\r\n      <section className=\"py-20 px-4 sm:px-6 lg:px-8\">\r\n        <div className=\"max-w-7xl mx-auto\">\r\n          <div className=\"text-center mb-16\">\r\n            <h2 className=\"text-3xl md:text-4xl font-bold text-white mb-4\">\r\n              Continuous Learning Experience\r\n            </h2>\r\n            <p className=\"text-xl text-gray-300 max-w-2xl mx-auto\">\r\n              Master privacy concepts through uninterrupted practice and progressive learning\r\n            </p>\r\n          </div>\r\n\r\n          <div className=\"max-w-4xl mx-auto\">\r\n            {/* Unified Learning Mode */}\r\n            <div className=\"bitsacco-card p-8 text-center\">\r\n              <div className=\"w-20 h-20 bg-gradient-to-br from-teal-400 to-teal-600 rounded-full flex items-center justify-center mx-auto mb-6\">\r\n                <Brain className=\"w-10 h-10 text-white\" />\r\n              </div>\r\n              <h3 className=\"text-2xl font-bold text-white mb-4\">Privacy Jenga Learning Mode</h3>\r\n              <p className=\"text-gray-300 mb-6\">\r\n                Progressive learning with intelligent difficulty scaling. When the tower falls, it automatically resets, \r\n                allowing you to practice privacy concepts, complete interactive quizzes, and unlock achievements.\r\n              </p>\r\n              <ul className=\"text-left text-gray-300 space-y-2 mb-6 max-w-2xl mx-auto\">\r\n                <li className=\"flex items-center gap-2\">\r\n                  <div className=\"w-2 h-2 bg-teal-400 rounded-full\"></div>\r\n                  Continuous tower resets for uninterrupted learning\r\n                </li>\r\n                <li className=\"flex items-center gap-2\">\r\n                  <div className=\"w-2 h-2 bg-teal-400 rounded-full\"></div>\r\n                  All 54 privacy tips accessible in one experience\r\n                </li>\r\n                <li className=\"flex items-center gap-2\">\r\n                  <div className=\"w-2 h-2 bg-teal-400 rounded-full\"></div>\r\n                  Achievement-based progression system\r\n                </li>\r\n                <li className=\"flex items-center gap-2\">\r\n                  <div className=\"w-2 h-2 bg-teal-400 rounded-full\"></div>\r\n                  Adaptive difficulty based on your skill level\r\n                </li>\r\n                <li className=\"flex items-center gap-2\">\r\n                  <div className=\"w-2 h-2 bg-teal-400 rounded-full\"></div>\r\n                  Interactive quizzes and privacy challenges\r\n                </li>\r\n              </ul>\r\n              <button\r\n                onClick={() => handleStartGame()}\r\n                className=\"bitsacco-btn bitsacco-btn-primary text-lg px-8 py-4\"\r\n              >\r\n                Start Learning Journey\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n\r\n      {/* Call to Action */}\r\n      <section className=\"py-20 px-4 sm:px-6 lg:px-8 bg-gradient-to-r from-teal-500/10 to-blue-500/10\">\r\n        <div className=\"max-w-4xl mx-auto text-center\">\r\n          <h2 className=\"text-3xl md:text-4xl font-bold text-white mb-6\">\r\n            Ready to Master Online Privacy?\r\n          </h2>\r\n          <p className=\"text-xl text-gray-300 mb-8\">\r\n            Join thousands of learners who are already improving their digital security\r\n          </p>\r\n          <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\r\n            <button\r\n              onClick={() => handleStartGame()}\r\n              className=\"bitsacco-btn bitsacco-btn-primary text-lg px-8 py-4\"\r\n            >\r\n              Start Your Privacy Journey\r\n            </button>\r\n            <button\r\n              onClick={() => setShowTutorial(true)}\r\n              className=\"bitsacco-btn bitsacco-btn-outline text-lg px-8 py-4\"\r\n            >\r\n              Learn More\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </section>\r\n\r\n      {/* Attribution Footer */}\r\n            {/* Footer */}\r\n      <footer className=\"bg-gradient-to-r from-teal-800 to-cyan-700 text-white\">\r\n        <div className=\"container mx-auto px-4 py-8\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <BitsaccoLogo className=\"w-8 h-8\" />\r\n              <div>\r\n                <h3 className=\"text-lg font-bold\">Privacy Jenga</h3>\r\n                <p className=\"text-teal-200 text-sm\">\r\n                  Educational privacy game powered by Bitsacco\r\n                </p>\r\n              </div>\r\n            </div>\r\n            <div className=\"flex items-center gap-6 text-sm text-teal-200\">\r\n              <a href=\"#\" className=\"hover:text-white transition-colors\">\r\n                About\r\n              </a>\r\n              <a href=\"#\" className=\"hover:text-white transition-colors\">\r\n                Privacy Policy\r\n              </a>\r\n              <a \r\n                href=\"https://bitsacco.com/\" \r\n                target=\"_blank\" \r\n                rel=\"noopener noreferrer\"\r\n                className=\"hover:text-white transition-colors flex items-center gap-1 group\"\r\n              >\r\n                Bitsacco\r\n                <svg className=\"w-3 h-3 group-hover:translate-x-0.5 transition-transform\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14\" />\r\n                </svg>\r\n              </a>\r\n            </div>\r\n          </div>\r\n          <div className=\"border-t border-teal-800 mt-6 pt-6 text-center text-sm text-teal-300\">\r\n            <div className=\"text-xs text-teal-400\">\r\n              Educational content inspired by{' '}\r\n              <a \r\n                href=\"https://bitcoinjenga.com\" \r\n                target=\"_blank\" \r\n                rel=\"noopener noreferrer\"\r\n                className=\"underline hover:text-teal-300 transition-colors\"\r\n              >\r\n                bitcoinjenga.com\r\n              </a>\r\n              {' '}by Amiti Uttarwar & D++\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </footer>\r\n\r\n      {/* Tutorial Modal */}\r\n      <GameTutorial\r\n        isOpen={showTutorial}\r\n        onClose={() => setShowTutorial(false)}\r\n        onStartTutorial={handleStartTutorial}\r\n        onStartGame={handleStartGame}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HomePage;\r\n","import { useState, useEffect } from 'react';\r\n\r\nexport const useResponsiveDesign = () => {\r\n  const [isMobile, setIsMobile] = useState(false);\r\n  const [isTablet, setIsTablet] = useState(false);\r\n  const [isDesktop, setIsDesktop] = useState(false);\r\n  const [isSmallMobile, setIsSmallMobile] = useState(false);\r\n  const [isLargeMobile, setIsLargeMobile] = useState(false);\r\n  const [screenWidth, setScreenWidth] = useState(0);\r\n  const [screenHeight, setScreenHeight] = useState(0);\r\n\r\n  useEffect(() => {\r\n    const checkScreenSize = () => {\r\n      const width = window.innerWidth;\r\n      const height = window.innerHeight;\r\n      \r\n      setScreenWidth(width);\r\n      setScreenHeight(height);\r\n      \r\n      // Small mobile: < 480px (iPhone SE, small Android)\r\n      setIsSmallMobile(width < 480);\r\n      \r\n      // Large mobile: 480px - 767px (iPhone 12/13/14, larger Android)\r\n      setIsLargeMobile(width >= 480 && width < 768);\r\n      \r\n      // Mobile: < 768px (all mobile devices)\r\n      setIsMobile(width < 768);\r\n      \r\n      // Tablet: 768px - 1023px (iPad, small laptops)\r\n      setIsTablet(width >= 768 && width < 1024);\r\n      \r\n      // Desktop: >= 1024px (laptops, desktops)\r\n      setIsDesktop(width >= 1024);\r\n    };\r\n\r\n    // Check on mount\r\n    checkScreenSize();\r\n\r\n    // Add event listener\r\n    window.addEventListener('resize', checkScreenSize);\r\n\r\n    // Cleanup\r\n    return () => window.removeEventListener('resize', checkScreenSize);\r\n  }, []);\r\n\r\n  return { \r\n    isMobile, \r\n    isTablet, \r\n    isDesktop, \r\n    isSmallMobile, \r\n    isLargeMobile,\r\n    screenWidth,\r\n    screenHeight\r\n  };\r\n};\r\n","import React, { useState, useMemo, useCallback } from 'react';\r\nimport { Canvas } from '@react-three/fiber';\r\nimport { OrbitControls } from '@react-three/drei';\r\nimport { Block, SimplifiedJengaTowerProps } from '../../types';\r\nimport { useResponsiveDesign } from '../../hooks/useResponsiveDesign';\r\n\r\nconst SimplifiedJengaTower: React.FC<SimplifiedJengaTowerProps> = ({\r\n  blocks,\r\n  onBlockClick,\r\n  gameState,\r\n  selectedBlockId,\r\n  onGameRestart\r\n}) => {\r\n  const [showGameInfo, setShowGameInfo] = useState(true);\r\n  const { isMobile, isSmallMobile } = useResponsiveDesign();\r\n  const [showStabilityWarning, setShowStabilityWarning] = useState(false);\r\n  const [lastStabilityLevel, setLastStabilityLevel] = useState<'stable' | 'unstable' | 'critical'>('stable');\r\n  const [warningTimer, setWarningTimer] = useState<ReturnType<typeof setTimeout> | null>(null);\r\n\r\n  // Filter visible blocks\r\n  const visibleBlocks = useMemo(() => {\r\n    return blocks.filter(block => !block.isRemoved);\r\n  }, [blocks]);\r\n\r\n  // Handle block click\r\n  const handleBlockClick = useCallback((block: Block) => {\r\n    if (!block.isRemoved) {\r\n      onBlockClick(block);\r\n    }\r\n  }, [onBlockClick]);\r\n\r\n  // Manage stability warning display\r\n  React.useEffect(() => {\r\n    let currentStabilityLevel: 'stable' | 'unstable' | 'critical' = 'stable';\r\n    \r\n    if (gameState.towerStability <= 25 && gameState.towerStability > 0) {\r\n      currentStabilityLevel = 'critical';\r\n    } else if (gameState.towerStability <= 50 && gameState.towerStability > 0) {\r\n      currentStabilityLevel = 'unstable';\r\n    }\r\n\r\n    // Show warning if stability level changed\r\n    if (currentStabilityLevel !== lastStabilityLevel && currentStabilityLevel !== 'stable') {\r\n      console.log(`🚨 Stability warning triggered: ${lastStabilityLevel} → ${currentStabilityLevel}`);\r\n      \r\n      // Clear any existing timer\r\n      if (warningTimer) {\r\n        clearTimeout(warningTimer);\r\n      }\r\n      \r\n      setShowStabilityWarning(true);\r\n      setLastStabilityLevel(currentStabilityLevel);\r\n      \r\n      // Hide warning after 3 seconds\r\n      const timer = setTimeout(() => {\r\n        console.log('⏰ Hiding stability warning after 3 seconds');\r\n        setShowStabilityWarning(false);\r\n      }, 3000);\r\n      \r\n      setWarningTimer(timer);\r\n    }\r\n    \r\n    // Cleanup function\r\n    return () => {\r\n      if (warningTimer) {\r\n        clearTimeout(warningTimer);\r\n      }\r\n    };\r\n  }, [gameState.towerStability, lastStabilityLevel, warningTimer]);\r\n\r\n  // Cleanup timer on unmount\r\n  React.useEffect(() => {\r\n    return () => {\r\n      if (warningTimer) {\r\n        clearTimeout(warningTimer);\r\n      }\r\n    };\r\n  }, [warningTimer]);\r\n\r\n  // Get block color based on layer and difficulty\r\n  const getBlockColor = (block: Block) => {\r\n    // Color by layer (as shown in the image)\r\n    if (block.layer <= 6) {\r\n      // Bottom 6 layers - Red (Hard difficulty)\r\n      return block.difficulty === 'hard' ? 0xdc2626 : 0xef4444;\r\n    } else if (block.layer <= 12) {\r\n      // Middle 6 layers - Orange (Medium difficulty)\r\n      return block.difficulty === 'medium' ? 0xd97706 : 0xf59e0b;\r\n    } else {\r\n      // Top 6 layers - Green (Easy difficulty)\r\n      return block.difficulty === 'easy' ? 0x059669 : 0x10b981;\r\n    }\r\n  };\r\n\r\n  // Get block glow effect for selected blocks\r\n  const getBlockGlow = (block: Block) => {\r\n    if (selectedBlockId === block.id) {\r\n      return 0x3b82f6; // Blue glow for selected block\r\n    }\r\n    return null;\r\n  };\r\n\r\n  // Get block type indicator (unused but kept for future use)\r\n  // const getBlockTypeIndicator = (block: Block) => {\r\n  //   if (block.type === 'QUESTION') {\r\n  //     return '❓'; // Question mark for quiz blocks\r\n  //   }\r\n  //   return '💡'; // Lightbulb for tip blocks\r\n  // };\r\n\r\n  return (\r\n    <div className=\"jenga-tower-container relative w-full h-full flex flex-col\">\r\n             {/* Enhanced Game Info Panel */}\r\n       <div className={`absolute z-20 ${\r\n         isSmallMobile ? 'top-2 right-2' : \r\n         isMobile ? 'top-3 right-3' : \r\n         'top-4 right-4'\r\n       }`}>\r\n         <div className=\"bg-black/90 backdrop-blur-sm rounded-lg border border-gray-600/50 overflow-hidden\">\r\n           <button\r\n             onClick={() => setShowGameInfo(!showGameInfo)}\r\n             className={`w-full bg-gray-800/80 hover:bg-gray-700/80 transition-colors flex items-center justify-between text-white font-semibold ${\r\n               isSmallMobile ? 'px-3 py-2 text-sm' : 'px-4 py-3'\r\n             }`}\r\n           >\r\n             <div className=\"flex items-center gap-2\">\r\n               <span className=\"text-blue-400\">🎯</span>\r\n               {!isSmallMobile && \"Game Status\"}\r\n             </div>\r\n             <span className=\"text-gray-400\">{showGameInfo ? '▼' : '▶'}</span>\r\n           </button>\r\n          \r\n                     {showGameInfo && (\r\n             <div className={`space-y-4 ${\r\n               isSmallMobile ? 'p-2 space-y-2 max-w-xs' : \r\n               isMobile ? 'p-3 space-y-3 max-w-sm' : \r\n               'p-4 space-y-4 max-w-sm'\r\n             }`}>\r\n               {/* Score */}\r\n               <div className={`text-center bg-blue-500/10 border border-blue-400/30 rounded-lg ${\r\n                 isSmallMobile ? 'p-2' : 'p-3'\r\n               }`}>\r\n                 <div className={`text-blue-300 font-semibold mb-1 ${\r\n                   isSmallMobile ? 'text-xs' : 'text-sm'\r\n                 }`}>Score</div>\r\n                 <div className={`text-white font-bold ${\r\n                   isSmallMobile ? 'text-lg' : 'text-2xl'\r\n                 }`}>{gameState.currentScore}</div>\r\n               </div>\r\n\r\n              {/* Tower Stability */}\r\n              <div className=\"text-center p-3 bg-green-500/10 border border-green-400/30 rounded-lg\">\r\n                <div className=\"text-green-300 text-sm font-semibold mb-1\">Tower Stability</div>\r\n                <div className=\"text-2xl font-bold text-green-400\">\r\n                  {gameState.towerStability >= 80 ? '🟢' : gameState.towerStability >= 50 ? '🟡' : '🔴'} {gameState.towerStability}%\r\n                </div>\r\n              </div>\r\n\r\n              {/* Learning Progress */}\r\n              <div className=\"text-center p-3 bg-purple-500/10 border border-purple-400/30 rounded-lg\">\r\n                <div className=\"text-purple-300 text-sm font-semibold mb-1\">Learning Progress</div>\r\n                <div className=\"text-white text-lg font-bold\">\r\n                  {gameState.totalContentShown}/{gameState.totalContentAvailable}\r\n                </div>\r\n                <div className=\"text-purple-200 text-xs\">concepts learned</div>\r\n              </div>\r\n\r\n              {/* Difficulty Level */}\r\n              <div className=\"text-center p-3 bg-yellow-500/10 border border-yellow-400/30 rounded-lg\">\r\n                <div className=\"text-yellow-300 text-sm font-semibold mb-1\">Difficulty</div>\r\n                <div className=\"text-white text-lg font-bold capitalize\">\r\n                  {gameState.currentDifficulty}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Block Type Legend */}\r\n              <div className=\"p-3 bg-gray-700/50 border border-gray-600/30 rounded-lg\">\r\n                <div className=\"text-gray-300 text-sm font-semibold mb-2\">Block Types:</div>\r\n                <div className=\"space-y-1 text-xs\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <div className=\"w-3 h-3 bg-green-500 rounded\"></div>\r\n                    <span className=\"text-green-300\">Green = Safe blocks</span>\r\n                  </div>\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <div className=\"w-3 h-3 bg-orange-500 rounded\"></div>\r\n                    <span className=\"text-orange-300\">Orange = Medium difficulty</span>\r\n                  </div>\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <div className=\"w-3 h-3 bg-red-500 rounded\"></div>\r\n                    <span className=\"text-red-300\">Red = Risky blocks</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n             {/* 3D Canvas */}\r\n       <Canvas\r\n         camera={{ \r\n           position: isSmallMobile ? [8, 8, 8] : isMobile ? [7, 7, 7] : [6, 6, 6], \r\n           fov: isSmallMobile ? 50 : 45 \r\n         }}\r\n         className=\"w-full flex-1\"\r\n         style={{ \r\n           minHeight: isSmallMobile ? '400px' : isMobile ? '500px' : '600px',\r\n           aspectRatio: isSmallMobile ? '4/3' : '16/9',\r\n           maxHeight: isSmallMobile ? '70vh' : '80vh'\r\n         }}\r\n         gl={{ antialias: true, alpha: false }}\r\n       >\r\n        {/* Lighting */}\r\n        <ambientLight intensity={0.4} />\r\n        <directionalLight position={[5, 10, 5]} intensity={0.8} castShadow />\r\n        <directionalLight position={[-5, 5, -5]} intensity={0.3} />\r\n        \r\n        {/* Ground plane */}\r\n        <mesh rotation={[-Math.PI / 2, 0, 0]} position={[0, -0.05, 0]}>\r\n          <planeGeometry args={[12, 12]} />\r\n          <meshStandardMaterial color=\"#1f2937\" transparent opacity={0.3} />\r\n        </mesh>\r\n        \r\n        {/* Grid helper for better spatial reference */}\r\n        <gridHelper args={[8, 8, 0x374151, 0x1f2937]} position={[0, -0.04, 0]} />\r\n        \r\n        {/* Render blocks with enhanced design */}\r\n        {visibleBlocks.map((block) => {\r\n          const blockColor = getBlockColor(block);\r\n          const glowColor = getBlockGlow(block);\r\n          const isSelected = selectedBlockId === block.id;\r\n          \r\n          // Add instability effects based on tower stability\r\n          const isUnstable = gameState.towerStability <= 50;\r\n          const isCritical = gameState.towerStability <= 25;\r\n          \r\n          // Calculate instability offset for shake effect\r\n          const instabilityOffset = isUnstable ? \r\n            (isCritical ? 0.05 : 0.02) * Math.sin(Date.now() * 0.01 + block.id.charCodeAt(0)) : 0;\r\n          \r\n          // Adjust block position for shake effect\r\n          const shakePosition: [number, number, number] = [\r\n            block.worldPosition[0] + instabilityOffset,\r\n            block.worldPosition[1],\r\n            block.worldPosition[2] + instabilityOffset\r\n          ];\r\n          \r\n          return (\r\n            <group key={block.id}>\r\n                             {/* Main block */}\r\n               <mesh\r\n                 position={shakePosition}\r\n                 onClick={() => handleBlockClick(block)}\r\n                 castShadow\r\n                 receiveShadow\r\n               >\r\n                 <boxGeometry args={[1, 0.3, 1]} />\r\n                                   <meshStandardMaterial\r\n                    color={isCritical ? 0xff4444 : blockColor}\r\n                    metalness={0.2}\r\n                    roughness={0.6}\r\n                    // eslint-disable-next-line react/no-unknown-property\r\n                    emissive={isCritical ? 0xff0000 : (glowColor || 0x000000)}\r\n                    // eslint-disable-next-line react/no-unknown-property\r\n                    emissiveIntensity={isSelected ? 0.4 : (isCritical ? 0.3 : 0)}\r\n                  />\r\n               </mesh>\r\n               \r\n               {/* Block edge highlights for better definition */}\r\n               <mesh position={shakePosition}>\r\n                 <boxGeometry args={[1.02, 0.32, 1.02]} />\r\n                 <meshStandardMaterial\r\n                   color={0xffffff}\r\n                   transparent\r\n                   opacity={0.1}\r\n                   wireframe={true}\r\n                 />\r\n               </mesh>\r\n              \r\n              {/* Block type indicator */}\r\n              <mesh position={[block.worldPosition[0], block.worldPosition[1] + 0.2, block.worldPosition[2]]}>\r\n                <boxGeometry args={[0.8, 0.05, 0.8]} />\r\n                                 <meshStandardMaterial \r\n                   color=\"#ffffff\" \r\n                   transparent \r\n                   opacity={0.2}\r\n                   // eslint-disable-next-line react/no-unknown-property\r\n                   emissive={0xffffff}\r\n                   // eslint-disable-next-line react/no-unknown-property\r\n                   emissiveIntensity={0.1}\r\n                 />\r\n              </mesh>\r\n              \r\n              {/* Selection highlight */}\r\n              {isSelected && (\r\n                <mesh position={block.worldPosition}>\r\n                  <boxGeometry args={[1.1, 0.35, 1.1]} />\r\n                  <meshStandardMaterial\r\n                    color={0x3b82f6}\r\n                    transparent\r\n                    opacity={0.3}\r\n                    wireframe={true}\r\n                  />\r\n                </mesh>\r\n              )}\r\n            </group>\r\n          );\r\n        })}\r\n\r\n                 {/* Improved camera controls */}\r\n         <OrbitControls \r\n           enablePan={!isSmallMobile}\r\n           enableZoom={true}\r\n           enableRotate={true}\r\n           minDistance={isSmallMobile ? 6 : 4}\r\n           maxDistance={isSmallMobile ? 20 : 15}\r\n           maxPolarAngle={Math.PI * 0.8}\r\n           target={[0, 3, 0.375]}\r\n           dampingFactor={0.05}\r\n           enableDamping={true}\r\n         />\r\n      </Canvas>\r\n\r\n      {/* Enhanced Game Phase Indicators */}\r\n      \r\n             {/* Stability Warning - Brief Pop-up */}\r\n       {showStabilityWarning && (\r\n         <div className={`absolute inset-0 backdrop-blur-sm z-20 flex items-center justify-center transition-all duration-500 animate-in fade-in ${\r\n           lastStabilityLevel === 'critical' ? 'bg-black/60' : 'bg-black/40'\r\n         }`}>\r\n           <div className={`rounded-2xl p-6 max-w-md text-center animate-bounce transition-all duration-300 animate-in zoom-in relative ${\r\n             lastStabilityLevel === 'critical' \r\n               ? 'bg-red-900/90 border border-red-600' \r\n               : 'bg-orange-900/80 border border-orange-600'\r\n           }`}>\r\n             {/* Close button */}\r\n             <button\r\n               onClick={() => {\r\n                 console.log('🔴 Manual close of stability warning');\r\n                 setShowStabilityWarning(false);\r\n                 if (warningTimer) {\r\n                   clearTimeout(warningTimer);\r\n                 }\r\n               }}\r\n               className=\"absolute top-2 right-2 text-white hover:text-gray-300 text-xl font-bold w-6 h-6 flex items-center justify-center rounded-full hover:bg-black/20 transition-colors\"\r\n             >\r\n               ×\r\n             </button>\r\n             \r\n             <div className=\"text-4xl mb-3\">\r\n               {lastStabilityLevel === 'critical' ? '🚨' : '⚠️'}\r\n             </div>\r\n             <h2 className=\"text-2xl font-bold text-white mb-2\">\r\n               {lastStabilityLevel === 'critical' ? 'Critical Stability!' : 'Tower Unstable!'}\r\n             </h2>\r\n             <p className={`mb-3 ${\r\n               lastStabilityLevel === 'critical' ? 'text-red-200' : 'text-orange-200'\r\n             }`}>\r\n               Stability: {gameState.towerStability}% - {lastStabilityLevel === 'critical' ? 'One wrong answer could collapse the tower!' : 'Be careful!'}\r\n             </p>\r\n             <p className=\"text-gray-300 text-sm\">\r\n               {lastStabilityLevel === 'critical' ? 'Answer carefully or the tower will fall!' : 'Wrong answers will collapse the tower!'}\r\n             </p>\r\n             <p className=\"text-gray-400 text-xs mt-2\">\r\n               (Auto-hides in 3 seconds or click × to close)\r\n             </p>\r\n           </div>\r\n         </div>\r\n       )}\r\n\r\n             {/* Tower Collapsed */}\r\n       {gameState.gamePhase === 'collapsed' && (\r\n         <div className=\"absolute inset-0 bg-black/80 backdrop-blur-sm z-30 flex items-center justify-center\">\r\n           <div className=\"bg-red-900/90 border border-red-600 rounded-2xl p-8 max-w-md text-center\">\r\n             <div className=\"text-6xl mb-4\">💥</div>\r\n             <h2 className=\"text-3xl font-bold text-white mb-4\">Game Ended!</h2>\r\n             <p className=\"text-red-200 mb-4\">\r\n               The tower has fallen! Your final score: <span className=\"text-2xl font-bold text-yellow-400\">{gameState.currentScore}</span>\r\n             </p>\r\n             <p className=\"text-gray-300 mb-6\">\r\n               Concepts learned: {gameState.totalContentShown}/54\r\n             </p>\r\n                           <p className=\"text-orange-200 mb-6 italic\">\r\n                &quot;Oops! The tower got a bit too wobbly! 🎲 Better luck next time, privacy warrior!&quot;\r\n              </p>\r\n             <div className=\"space-y-3\">\r\n                               <button\r\n                  onClick={onGameRestart || (() => window.location.reload())}\r\n                  className=\"bg-red-600 hover:bg-red-700 text-white px-8 py-3 rounded-lg font-semibold transition-colors w-full\"\r\n                >\r\n                  🏗️ Rebuild & Play Again\r\n                </button>\r\n               <button\r\n                 onClick={() => window.location.href = '/'}\r\n                 className=\"bg-gray-600 hover:bg-gray-700 text-white px-8 py-3 rounded-lg font-semibold transition-colors w-full\"\r\n               >\r\n                 🏠 Back to Menu\r\n               </button>\r\n             </div>\r\n           </div>\r\n         </div>\r\n       )}\r\n\r\n      {gameState.gamePhase === 'completed' && (\r\n        <div className=\"absolute inset-0 bg-black/80 backdrop-blur-sm z-30 flex items-center justify-center\">\r\n          <div className=\"bg-green-900/90 border border-green-600 rounded-2xl p-8 max-w-md text-center\">\r\n            <div className=\"text-6xl mb-4\">🏆</div>\r\n            <h2 className=\"text-3xl font-bold text-white mb-4\">Privacy Master!</h2>\r\n                         <p className=\"text-green-200 mb-6\">\r\n               Congratulations! You&apos;ve learned all 54 Bitcoin privacy concepts!\r\n             </p>\r\n            <p className=\"text-gray-300 mb-6\">\r\n              Your final score: {gameState.currentScore} points\r\n            </p>\r\n            <button\r\n              onClick={() => window.location.reload()}\r\n              className=\"bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg font-semibold transition-colors\"\r\n            >\r\n              Play Again\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n             {/* Instructions Overlay */}\r\n       <div className={`absolute z-20 ${\r\n         isSmallMobile ? 'bottom-2 left-2' : \r\n         isMobile ? 'bottom-3 left-3' : \r\n         'bottom-4 left-4'\r\n       }`}>\r\n         <div className={`bg-black/80 backdrop-blur-sm rounded-lg border border-gray-600/50 ${\r\n           isSmallMobile ? 'p-2' : 'p-3'\r\n         }`}>\r\n           <div className={`text-gray-300 space-y-1 ${\r\n             isSmallMobile ? 'text-xs' : 'text-xs'\r\n           }`}>\r\n             <div className={`font-semibold text-white mb-2 ${\r\n               isSmallMobile ? 'text-xs' : 'text-xs'\r\n             }`}>How to Play:</div>\r\n             <div>• Click on any block to reveal content</div>\r\n             <div>• Answer questions correctly to maintain stability</div>\r\n             {!isSmallMobile && (\r\n               <>\r\n                 <div>• Learn all 54 privacy concepts!</div>\r\n                 <div>• Difficulty adapts to your performance</div>\r\n               </>\r\n             )}\r\n           </div>\r\n         </div>\r\n       </div>\r\n\r\n             {/* Stability Warning Indicator */}\r\n       {gameState.towerStability <= 50 && (\r\n         <div className={`absolute z-20 ${\r\n           isSmallMobile ? 'top-2 left-2' : \r\n           isMobile ? 'top-3 left-3' : \r\n           'top-4 left-4'\r\n         }`}>\r\n           <div className={`bg-black/80 backdrop-blur-sm rounded-lg border ${\r\n             gameState.towerStability <= 25 ? 'border-red-500' : 'border-orange-500'\r\n           } ${isSmallMobile ? 'p-2' : 'p-3'}`}>\r\n             <div className=\"text-center\">\r\n               <div className={`font-bold ${\r\n                 gameState.towerStability <= 25 ? 'text-red-400' : 'text-orange-400'\r\n               } ${isSmallMobile ? 'text-base' : 'text-lg'}`}>\r\n                 {gameState.towerStability <= 25 ? '🚨' : '⚠️'} {gameState.towerStability}%\r\n               </div>\r\n               <div className={`text-gray-300 mt-1 ${\r\n                 isSmallMobile ? 'text-xs' : 'text-xs'\r\n               }`}>\r\n                 {gameState.towerStability <= 25 ? 'Critical!' : 'Unstable!'}\r\n               </div>\r\n               <div className=\"w-full bg-gray-700 rounded-full h-1 mt-2\">\r\n                 <div \r\n                   className={`h-1 rounded-full transition-all duration-300 ${\r\n                     gameState.towerStability <= 25 ? 'bg-red-500' : 'bg-orange-500'\r\n                   }`}\r\n                   style={{ width: `${gameState.towerStability}%` }}\r\n                 />\r\n               </div>\r\n             </div>\r\n           </div>\r\n         </div>\r\n       )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SimplifiedJengaTower;\r\n","import React, { useState } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { X, CheckCircle, XCircle, Lightbulb, BookOpen, Star, Target } from 'lucide-react';\r\nimport { BlockContent, GameState } from '../types';\r\n\r\ninterface ContentModalProps {\r\n  content: BlockContent | null;\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onQuizAnswer?: (blockId: string, selectedAnswer: number) => Promise<void>;\r\n  showQuiz?: boolean;\r\n  gameState: GameState;\r\n  blockId?: string;\r\n}\r\n\r\nconst ContentModal: React.FC<ContentModalProps> = ({\r\n  content,\r\n  isOpen,\r\n  onClose,\r\n  onQuizAnswer,\r\n  showQuiz,\r\n  // gameState, // Unused parameter\r\n  blockId,\r\n}) => {\r\n  const [selectedAnswer, setSelectedAnswer] = useState<number | null>(null);\r\n  const [quizSubmitted, setQuizSubmitted] = useState(false);\r\n  const [isCorrect, setIsCorrect] = useState<boolean | null>(null);\r\n  const [showExplanation, setShowExplanation] = useState(false);\r\n\r\n  React.useEffect(() => {\r\n    if (isOpen) {\r\n      setSelectedAnswer(null);\r\n      setQuizSubmitted(false);\r\n      setIsCorrect(null);\r\n      setShowExplanation(false);\r\n    }\r\n  }, [isOpen, content]);\r\n\r\n  const handleAnswerSubmit = async () => {\r\n    if (content?.question && selectedAnswer !== null && blockId && onQuizAnswer) {\r\n      setQuizSubmitted(true);\r\n      try {\r\n        await onQuizAnswer(blockId, selectedAnswer);\r\n        // Check if the answer is correct by comparing with the correct index\r\n        const isAnswerCorrect = selectedAnswer === content.question.correctIndex;\r\n        setIsCorrect(isAnswerCorrect);\r\n      } catch (error) {\r\n        console.error('Error submitting quiz answer:', error);\r\n        setIsCorrect(false);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleCloseModal = () => {\r\n    onClose();\r\n  };\r\n\r\n  if (!isOpen || !content) return null;\r\n\r\n  const isQuestion = content.type === 'QUESTION';\r\n  const questionContent = content.question;\r\n\r\n  return (\r\n    <AnimatePresence>\r\n      {isOpen && (\r\n        <motion.div\r\n          initial={{ opacity: 0 }}\r\n          animate={{ opacity: 1 }}\r\n          exit={{ opacity: 0 }}\r\n          className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4\"\r\n        >\r\n          <motion.div\r\n            initial={{ scale: 0.9, opacity: 0 }}\r\n            animate={{ scale: 1, opacity: 1 }}\r\n            exit={{ scale: 0.9, opacity: 0 }}\r\n            className=\"bitsacco-modal w-full max-w-2xl max-h-[90vh] overflow-y-auto\"\r\n          >\r\n            {/* Header */}\r\n            <div className=\"flex items-center justify-between p-6 border-b border-gray-700\">\r\n              <div className=\"flex items-center gap-3\">\r\n                {isQuestion ? (\r\n                  <BookOpen className=\"w-8 h-8 text-yellow-400\" />\r\n                ) : (\r\n                  <Lightbulb className=\"w-8 h-8 text-green-400\" />\r\n                )}\r\n                <h2 className=\"text-2xl font-bold text-white\">{content.title}</h2>\r\n              </div>\r\n              <button\r\n                onClick={handleCloseModal}\r\n                className=\"p-2 hover:bg-gray-700 rounded-lg transition-colors\"\r\n              >\r\n                <X className=\"w-6 h-6 text-gray-400\" />\r\n              </button>\r\n            </div>\r\n\r\n            {/* Content Body */}\r\n            <div className=\"p-6 space-y-6\">\r\n              {/* Main Content */}\r\n              <div className=\"bg-gray-700/50 rounded-lg p-4\">\r\n                <h3 className=\"text-lg font-semibold text-white mb-3\">\r\n                  {isQuestion ? 'Learning Objective' : 'Privacy Tip'}\r\n                </h3>\r\n                <p className=\"text-gray-300 text-lg leading-relaxed\">{content.content}</p>\r\n              </div>\r\n\r\n              {/* Category and Difficulty */}\r\n              <div className=\"flex items-center gap-4\">\r\n                <div className=\"px-3 py-1 bg-blue-500/20 border border-blue-400/30 rounded-full\">\r\n                  <span className=\"text-blue-300 text-sm font-medium\">\r\n                    {content.category.replace('-', ' ').toUpperCase()}\r\n                  </span>\r\n                </div>\r\n                <div className=\"px-3 py-1 bg-purple-500/20 border border-purple-400/30 rounded-full\">\r\n                  <span className=\"text-purple-300 text-sm font-medium\">\r\n                    {content.difficulty.charAt(0).toUpperCase() + content.difficulty.slice(1)}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Quiz Section */}\r\n              {isQuestion && questionContent && showQuiz && (\r\n                <div className=\"bg-gray-700/50 rounded-lg p-4 space-y-4\">\r\n                  <h3 className=\"text-xl font-semibold text-white flex items-center gap-2\">\r\n                    <Target className=\"w-5 h-5 text-yellow-400\" />\r\n                    Quiz Challenge\r\n                  </h3>\r\n                  <p className=\"text-yellow-200 font-medium\">{questionContent.question}</p>\r\n                  <div className=\"space-y-3\">\r\n                    {questionContent.options.map((option: string, index: number) => (\r\n                      <button\r\n                        key={index}\r\n                        onClick={() => !quizSubmitted && setSelectedAnswer(index)}\r\n                        className={`w-full text-left p-3 rounded-lg border transition-all duration-200\r\n                          ${quizSubmitted\r\n                            ? (index === questionContent.correctIndex\r\n                              ? 'border-green-500 bg-green-500/20 text-green-300'\r\n                              : (index === selectedAnswer ? 'border-red-500 bg-red-500/20 text-red-300' : 'border-gray-600 bg-gray-800 text-gray-300'))\r\n                            : (selectedAnswer === index\r\n                              ? 'border-blue-500 bg-blue-500/20 text-blue-300'\r\n                              : 'border-gray-600 bg-gray-800 text-gray-300 hover:border-blue-500 hover:text-blue-300')\r\n                          }`}\r\n                        disabled={quizSubmitted}\r\n                      >\r\n                        {option}\r\n                      </button>\r\n                    ))}\r\n                  </div>\r\n                  {!quizSubmitted && (\r\n                    <button\r\n                      onClick={handleAnswerSubmit}\r\n                      disabled={selectedAnswer === null}\r\n                      className=\"bitsacco-btn bitsacco-btn-primary w-full mt-4\"\r\n                    >\r\n                      Submit Answer\r\n                    </button>\r\n                  )}\r\n                </div>\r\n              )}\r\n\r\n              {/* Quiz Result/Explanation */}\r\n              {quizSubmitted && isQuestion && questionContent && (\r\n                <motion.div\r\n                  initial={{ opacity: 0, y: 20 }}\r\n                  animate={{ opacity: 1, y: 0 }}\r\n                  className={`p-4 rounded-lg space-y-3 ${isCorrect ? 'bg-green-700/30 border border-green-600' : 'bg-red-700/30 border border-red-600'}`}\r\n                >\r\n                  <h4 className=\"text-xl font-semibold flex items-center gap-2\">\r\n                    {isCorrect ? (\r\n                      <CheckCircle className=\"w-6 h-6 text-green-400\" />\r\n                    ) : (\r\n                      <XCircle className=\"w-6 h-6 text-red-400\" />\r\n                    )}\r\n                    {isCorrect ? 'Correct!' : 'Incorrect!'}\r\n                  </h4>\r\n                  <p className=\"text-gray-300\">{questionContent.explanation}</p>\r\n                  <button\r\n                    onClick={() => setShowExplanation(!showExplanation)}\r\n                    className=\"text-blue-400 hover:underline text-sm\"\r\n                  >\r\n                    {showExplanation ? 'Hide Details' : 'Show More Details'}\r\n                  </button>\r\n                </motion.div>\r\n              )}\r\n\r\n              {/* Success Message for Tips */}\r\n              {!isQuestion && (\r\n                <div className=\"bg-green-700/30 border border-green-600 rounded-lg p-4\">\r\n                  <div className=\"flex items-center gap-2 mb-2\">\r\n                    <Star className=\"w-5 h-5 text-green-400\" />\r\n                    <span className=\"text-green-300 font-semibold\">Great Learning!</span>\r\n                  </div>\r\n                  <p className=\"text-gray-300\">\r\n                    You&apos;ve learned an important privacy concept. Keep building your knowledge!\r\n                  </p>\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* Footer */}\r\n            <div className=\"p-6 border-t border-gray-700 flex justify-end\">\r\n              <button onClick={handleCloseModal} className=\"bitsacco-btn bitsacco-btn-secondary\">\r\n                Close\r\n              </button>\r\n            </div>\r\n          </motion.div>\r\n        </motion.div>\r\n      )}\r\n    </AnimatePresence>\r\n  );\r\n};\r\n\r\nexport default ContentModal;\r\n","import React from 'react';\r\nimport { X, HelpCircle, BookOpen, Target, Zap, Shield, AlertTriangle, Star, Brain, Gamepad2 } from 'lucide-react';\r\nimport { GameHelpProps } from '../types';\r\n\r\nconst GameHelp: React.FC<GameHelpProps> = ({ isOpen, onClose }) => {\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\r\n      <div className=\"bg-gray-800 rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between p-6 border-b border-gray-700\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <HelpCircle className=\"w-8 h-8 text-blue-400\" />\r\n            <h2 className=\"text-2xl font-bold text-white\">Privacy Jenga Help</h2>\r\n          </div>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"p-2 hover:bg-gray-700 rounded-lg transition-colors\"\r\n          >\r\n            <X className=\"w-6 h-6 text-gray-400\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Content */}\r\n        <div className=\"p-6 space-y-8\">\r\n          {/* Game Overview */}\r\n          <section>\r\n            <h3 className=\"text-xl font-semibold text-white mb-4 flex items-center gap-2\">\r\n              <BookOpen className=\"w-6 h-6 text-green-400\" />\r\n              Game Overview\r\n            </h3>\r\n            <div className=\"bg-gray-700/50 rounded-lg p-4 space-y-3\">\r\n              <p className=\"text-gray-300\">\r\n                Privacy Jenga is an educational game that teaches Bitcoin privacy concepts through interactive block removal.\r\n                Learn about on-chain privacy, off-chain solutions, and best practices while maintaining tower stability.\r\n              </p>\r\n              <ul className=\"text-gray-300 space-y-1 ml-4\">\r\n                <li>• <strong>Direct Interaction:</strong> Click on any block to reveal content</li>\r\n                <li>• <strong>Learning:</strong> Each block contains privacy tips or quiz questions</li>\r\n                <li>• <strong>Stability:</strong> Wrong answers decrease tower stability</li>\r\n                <li>• <strong>Continuous Learning:</strong> Tower rebuilds until all 54 concepts are learned</li>\r\n              </ul>\r\n            </div>\r\n          </section>\r\n\r\n          {/* Category System */}\r\n          <section>\r\n            <h3 className=\"text-xl font-semibold text-white mb-4 flex items-center gap-2\">\r\n              <Target className=\"w-6 h-6 text-purple-400\" />\r\n              Category System\r\n            </h3>\r\n            <div className=\"bg-gray-700/50 rounded-lg p-4 space-y-3\">\r\n              <p className=\"text-gray-300\">\r\n                The game uses a category-based system where different blocks represent different privacy concepts:\r\n              </p>\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4\">\r\n                <div className=\"space-y-2\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <div className=\"w-3 h-3 bg-blue-500 rounded-full\"></div>\r\n                    <span className=\"text-blue-300 font-semibold\">On-Chain Privacy</span>\r\n                  </div>\r\n                  <p className=\"text-sm text-gray-400 ml-5\">CoinJoin, Schnorr signatures, Taproot</p>\r\n                </div>\r\n                <div className=\"space-y-2\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <div className=\"w-3 h-3 bg-green-500 rounded-full\"></div>\r\n                    <span className=\"text-green-300 font-semibold\">Off-Chain Solutions</span>\r\n                  </div>\r\n                  <p className=\"text-sm text-gray-400 ml-5\">Lightning Network, state channels</p>\r\n                </div>\r\n                <div className=\"space-y-2\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <div className=\"w-3 h-3 bg-purple-500 rounded-full\"></div>\r\n                    <span className=\"text-purple-300 font-semibold\">Coin Mixing</span>\r\n                  </div>\r\n                  <p className=\"text-sm text-gray-400 ml-5\">Privacy tools and techniques</p>\r\n                </div>\r\n                <div className=\"space-y-2\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <div className=\"w-3 h-3 bg-yellow-500 rounded-full\"></div>\r\n                    <span className=\"text-yellow-300 font-semibold\">Wallet Setup</span>\r\n                  </div>\r\n                  <p className=\"text-sm text-gray-400 ml-5\">Security and privacy configuration</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </section>\r\n\r\n          {/* Block Types */}\r\n          <section>\r\n            <h3 className=\"text-xl font-semibold text-white mb-4 flex items-center gap-2\">\r\n              <Shield className=\"w-6 h-6 text-green-400\" />\r\n              Block Types\r\n            </h3>\r\n            <div className=\"bg-gray-700/50 rounded-lg p-4 space-y-3\">\r\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                <div className=\"text-center p-3 bg-green-500/10 rounded-lg border border-green-400/30\">\r\n                  <div className=\"text-2xl mb-2\">🟢</div>\r\n                  <h4 className=\"font-semibold text-green-300 mb-1\">Green Blocks</h4>\r\n                  <p className=\"text-xs text-gray-300\">Bottom layers - Safe content</p>\r\n                </div>\r\n                <div className=\"text-center p-3 bg-orange-500/10 rounded-lg border border-orange-400/30\">\r\n                  <div className=\"text-2xl mb-2\">🟠</div>\r\n                  <h4 className=\"font-semibold text-orange-300 mb-1\">Orange Blocks</h4>\r\n                  <p className=\"text-xs text-gray-300\">Middle layers - Medium difficulty</p>\r\n                </div>\r\n                <div className=\"text-center p-3 bg-red-500/10 rounded-lg border border-red-400/30\">\r\n                  <div className=\"text-2xl mb-2\">🔴</div>\r\n                  <h4 className=\"font-semibold text-red-300 mb-1\">Red Blocks</h4>\r\n                  <p className=\"text-xs text-gray-300\">Top layers - Risky content</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </section>\r\n\r\n          {/* Strategy Tips */}\r\n          <section>\r\n            <h3 className=\"text-xl font-semibold text-white mb-4 flex items-center gap-2\">\r\n              <Brain className=\"w-6 h-6 text-teal-400\" />\r\n              Strategy Tips\r\n            </h3>\r\n            <div className=\"bg-gray-700/50 rounded-lg p-4 space-y-3\">\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                <div>\r\n                  <h4 className=\"font-semibold text-blue-300 mb-2\">🎯 Category Strategy</h4>\r\n                  <ul className=\"text-sm text-gray-300 space-y-1\">\r\n                    <li>• Start with beginner categories</li>\r\n                    <li>• Focus on one category at a time</li>\r\n                    <li>• Build knowledge systematically</li>\r\n                    <li>• Use category rotation for variety</li>\r\n                  </ul>\r\n                </div>\r\n                <div>\r\n                  <h4 className=\"font-semibold text-green-300 mb-2\">🏗️ Tower Management</h4>\r\n                  <ul className=\"text-sm text-gray-300 space-y-1\">\r\n                    <li>• Remove blocks evenly from all sides</li>\r\n                    <li>• Avoid creating unstable configurations</li>\r\n                    <li>• Monitor stability meter closely</li>\r\n                    <li>• Plan your moves ahead</li>\r\n                  </ul>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </section>\r\n\r\n          {/* Learning Objectives */}\r\n          <section>\r\n            <h3 className=\"text-xl font-semibold text-white mb-4 flex items-center gap-2\">\r\n              <Star className=\"w-6 h-6 text-yellow-400\" />\r\n              Learning Objectives\r\n            </h3>\r\n            <div className=\"bg-gray-700/50 rounded-lg p-4 space-y-3\">\r\n              <p className=\"text-gray-300\">\r\n                By playing Privacy Jenga, you&apos;ll learn about:\r\n              </p>\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4\">\r\n                <div className=\"space-y-2\">\r\n                  <h4 className=\"font-semibold text-blue-300\">Privacy Fundamentals</h4>\r\n                  <ul className=\"text-sm text-gray-400 space-y-1\">\r\n                    <li>• Transaction privacy</li>\r\n                    <li>• Address reuse prevention</li>\r\n                    <li>• Network analysis resistance</li>\r\n                  </ul>\r\n                </div>\r\n                <div className=\"space-y-2\">\r\n                  <h4 className=\"font-semibold text-green-300\">Advanced Techniques</h4>\r\n                  <ul className=\"text-sm text-gray-400 space-y-1\">\r\n                    <li>• CoinJoin implementation</li>\r\n                    <li>• Lightning privacy</li>\r\n                    <li>• Regulatory compliance</li>\r\n                  </ul>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </section>\r\n\r\n          {/* Common Mistakes */}\r\n          <section>\r\n            <h3 className=\"text-xl font-semibold text-white mb-4 flex items-center gap-2\">\r\n              <AlertTriangle className=\"w-6 h-6 text-orange-400\" />\r\n              Common Mistakes\r\n            </h3>\r\n            <div className=\"bg-gray-700/50 rounded-lg p-4 space-y-3\">\r\n              <div className=\"space-y-3\">\r\n                <div className=\"flex items-start gap-3\">\r\n                  <div className=\"w-2 h-2 bg-red-500 rounded-full mt-2\"></div>\r\n                  <div>\r\n                    <h4 className=\"font-semibold text-red-300\">Ignoring Categories</h4>\r\n                    <p className=\"text-sm text-gray-400\">Always check which category is currently highlighted</p>\r\n                  </div>\r\n                </div>\r\n                <div className=\"flex items-start gap-3\">\r\n                  <div className=\"w-2 h-2 bg-red-500 rounded-full mt-2\"></div>\r\n                  <div>\r\n                    <h4 className=\"font-semibold text-red-300\">Rushing Through</h4>\r\n                    <p className=\"text-sm text-gray-400\">Take time to read and understand the content</p>\r\n                  </div>\r\n                </div>\r\n                <div className=\"flex items-start gap-3\">\r\n                  <div className=\"w-2 h-2 bg-red-500 rounded-full mt-2\"></div>\r\n                  <div>\r\n                    <h4 className=\"font-semibold text-red-300\">Ignoring Stability</h4>\r\n                    <p className=\"text-sm text-gray-400\">Watch the stability meter and plan accordingly</p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </section>\r\n\r\n          {/* Advanced Tips */}\r\n          <section>\r\n            <h3 className=\"text-xl font-semibold text-white mb-4 flex items-center gap-2\">\r\n              <Zap className=\"w-6 h-6 text-yellow-400\" />\r\n              Advanced Tips\r\n            </h3>\r\n            <div className=\"bg-gray-700/50 rounded-lg p-4 space-y-3\">\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                <div>\r\n                  <h4 className=\"font-semibold text-purple-300 mb-2\">🎯 Category Mastery</h4>\r\n                  <div className=\"text-blue-200 text-sm\">\r\n                    Master one category completely before moving to the next for better learning retention\r\n                  </div>\r\n                </div>\r\n                <div>\r\n                  <h4 className=\"font-semibold text-teal-300 mb-2\">🏗️ Tower Balance</h4>\r\n                  <div className=\"text-green-200 text-sm\">\r\n                    Maintain even weight distribution by removing blocks from opposite sides\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </section>\r\n\r\n          {/* Game Controls */}\r\n          <section>\r\n            <h3 className=\"text-xl font-semibold text-white mb-4 flex items-center gap-2\">\r\n              <Gamepad2 className=\"w-6 h-6 text-blue-400\" />\r\n              Game Controls\r\n            </h3>\r\n            <div className=\"bg-gray-700/50 rounded-lg p-4 space-y-3\">\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                <div>\r\n                  <h4 className=\"font-semibold text-blue-300 mb-2\">Mouse Controls</h4>\r\n                  <ul className=\"text-sm text-gray-300 space-y-1\">\r\n                    <li>• <strong>Click:</strong> Select and interact with blocks</li>\r\n                    <li>• <strong>Hover:</strong> Preview block information</li>\r\n                    <li>• <strong>Scroll:</strong> Zoom in/out of the tower</li>\r\n                  </ul>\r\n                </div>\r\n                <div>\r\n                  <h4 className=\"font-semibold text-green-300 mb-2\">Keyboard Shortcuts</h4>\r\n                  <ul className=\"text-sm text-gray-300 space-y-1\">\r\n                    <li>• <strong>R:</strong> Reset tower</li>\r\n                    <li>• <strong>H:</strong> Toggle help</li>\r\n                    <li>• <strong>ESC:</strong> Close modals</li>\r\n                  </ul>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </section>\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        <div className=\"p-6 border-t border-gray-700 bg-gray-700/30\">\r\n          <div className=\"text-center\">\r\n            <p className=\"text-gray-400 text-sm\">\r\n              Need more help? Check out the tutorial or contact support.\r\n            </p>\r\n            <button\r\n              onClick={onClose}\r\n              className=\"mt-4 bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg font-semibold transition-colors\"\r\n            >\r\n              Got it!\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GameHelp;\r\n","import React from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { X, Brain, Trophy, BarChart3, Shield } from 'lucide-react';\r\nimport { GameStatsProps } from '../types';\r\n\r\nconst GameStats: React.FC<GameStatsProps> = ({ player, statistics, onClose }) => {\r\n  const getGameModeInfo = () => {\r\n    return {\r\n      mode: 'Privacy Jenga Learning Mode',\r\n      icon: <Brain className=\"w-6 h-6\" />,\r\n      color: 'text-teal-400',\r\n      bgColor: 'bg-teal-500/10',\r\n      borderColor: 'border-teal-400/30'\r\n    };\r\n  };\r\n\r\n  const modeInfo = getGameModeInfo();\r\n\r\n  return (\r\n    <motion.div\r\n      initial={{ opacity: 0 }}\r\n      animate={{ opacity: 1 }}\r\n      exit={{ opacity: 0 }}\r\n      className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4\"\r\n    >\r\n      <motion.div\r\n        initial={{ scale: 0.9, opacity: 0 }}\r\n        animate={{ scale: 1, opacity: 1 }}\r\n        exit={{ scale: 0.9, opacity: 0 }}\r\n        className=\"bitsacco-modal max-w-4xl w-full max-h-[90vh] overflow-y-auto\"\r\n      >\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between mb-6\">\r\n          <div className=\"flex items-center gap-3\">\r\n            {modeInfo.icon}\r\n            <h2 className=\"text-2xl font-bold text-white\">Game Statistics</h2>\r\n          </div>\r\n          <button \r\n            onClick={onClose}\r\n            className=\"text-gray-400 hover:text-white transition-colors\"\r\n          >\r\n            <X className=\"w-6 h-6\" />\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n          {/* Game Mode */}\r\n          <div className={`bitsacco-card p-6 ${modeInfo.bgColor} border ${modeInfo.borderColor}`}>\r\n            <div className=\"flex items-center gap-3 mb-4\">\r\n              {modeInfo.icon}\r\n              <h3 className=\"text-xl font-semibold text-white\">Game Mode</h3>\r\n            </div>\r\n            <div className=\"text-3xl font-bold mb-2 text-teal-300\">\r\n              🧠 Learning Mode\r\n            </div>\r\n            <p className=\"text-gray-300\">Continuous</p>\r\n          </div>\r\n\r\n          {/* Current Score */}\r\n          <div className=\"bitsacco-card p-6 bg-blue-500/10 border border-blue-400/30\">\r\n            <div className=\"flex items-center gap-3 mb-4\">\r\n              <Trophy className=\"w-6 h-6 text-blue-400\" />\r\n              <h3 className=\"text-xl font-semibold text-white\">Current Score</h3>\r\n            </div>\r\n            <div className=\"text-3xl font-bold mb-2 text-blue-300\">\r\n              {player.score}\r\n            </div>\r\n            <p className=\"text-gray-300\">Points earned</p>\r\n          </div>\r\n\r\n          {/* Total Score */}\r\n          <div className=\"bitsacco-card p-6 bg-yellow-500/10 border border-yellow-400/30\">\r\n            <div className=\"flex items-center gap-3 mb-4\">\r\n              <BarChart3 className=\"w-6 h-6 text-yellow-400\" />\r\n              <h3 className=\"text-xl font-semibold text-white\">Total Score</h3>\r\n            </div>\r\n            <div className=\"text-3xl font-bold mb-2 text-yellow-300\">\r\n              {player.totalScore}\r\n            </div>\r\n            <p className=\"text-gray-300\">All time points</p>\r\n          </div>\r\n\r\n          {/* Blocks Removed */}\r\n          <div className=\"bitsacco-card p-6 bg-red-500/10 border border-red-400/30\">\r\n            <div className=\"flex items-center gap-3 mb-4\">\r\n              <Shield className=\"w-6 h-6 text-red-400\" />\r\n              <h3 className=\"text-xl font-semibold text-white\">Blocks Removed</h3>\r\n            </div>\r\n            <div className=\"text-3xl font-bold mb-2 text-red-300\">\r\n              {statistics.totalBlocksRemoved}\r\n            </div>\r\n            <p className=\"text-gray-300\">Privacy concepts learned</p>\r\n          </div>\r\n\r\n          {/* Achievements */}\r\n          <div className=\"bitsacco-card p-6 bg-purple-500/10 border border-purple-400/30\">\r\n            <div className=\"flex items-center gap-3 mb-4\">\r\n              <Trophy className=\"w-6 h-6 text-purple-400\" />\r\n              <h3 className=\"text-xl font-semibold text-white\">Achievements</h3>\r\n            </div>\r\n            <div className=\"text-3xl font-bold mb-2 text-purple-300\">\r\n              {statistics.totalAchievements}\r\n            </div>\r\n            <p className=\"text-gray-300\">Unlocked badges</p>\r\n          </div>\r\n\r\n          {/* Completion Rate */}\r\n          <div className=\"bitsacco-card p-6 bg-green-500/10 border border-green-400/30\">\r\n            <div className=\"flex items-center gap-3 mb-4\">\r\n              <BarChart3 className=\"w-6 h-6 text-green-400\" />\r\n              <h3 className=\"text-xl font-semibold text-white\">Completion</h3>\r\n            </div>\r\n            <div className=\"text-3xl font-bold mb-2 text-green-300\">\r\n              {Math.round(statistics.completionRate)}%\r\n            </div>\r\n            <p className=\"text-gray-300\">Content learned</p>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Learning Mode Rules */}\r\n        <div className=\"bitsacco-card p-6 mt-6\">\r\n          <h3 className=\"text-xl font-semibold text-white mb-4 flex items-center gap-2\">\r\n            <Brain className=\"w-5 h-5 text-teal-400\" />\r\n            Learning Mode Rules\r\n          </h3>\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            <div className=\"flex items-start gap-3\">\r\n              <div className=\"w-2 h-2 bg-teal-400 rounded-full mt-2\"></div>\r\n              <p className=\"text-gray-300\">Tower automatically resets when it becomes unstable for continuous learning</p>\r\n            </div>\r\n            <div className=\"flex items-start gap-3\">\r\n              <div className=\"w-2 h-2 bg-teal-400 rounded-full mt-2\"></div>\r\n              <p className=\"text-gray-300\">Score accumulates across multiple tower resets</p>\r\n            </div>\r\n            <div className=\"flex items-start gap-3\">\r\n              <div className=\"w-2 h-2 bg-teal-400 rounded-full mt-2\"></div>\r\n              <p className=\"text-gray-300\">Focus on mastering all 54 privacy concepts</p>\r\n            </div>\r\n            <div className=\"flex items-start gap-3\">\r\n              <div className=\"w-2 h-2 bg-teal-400 rounded-full mt-2\"></div>\r\n              <p className=\"text-gray-300\">Perfect for extended learning and skill development</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        <div className=\"flex items-center justify-between mt-6 pt-6 border-t border-gray-700\">\r\n          <p className=\"text-gray-400 text-sm\">\r\n            🧠 Privacy Jenga - Learn Bitcoin privacy through play\r\n          </p>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"bitsacco-btn-primary px-6 py-3\"\r\n          >\r\n            <Trophy className=\"w-5 h-5 mr-2\" />\r\n            Close\r\n          </button>\r\n        </div>\r\n      </motion.div>\r\n    </motion.div>\r\n  );\r\n};\r\n\r\nexport default GameStats;\r\n","import React from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { \r\n  Trophy, \r\n  X, \r\n  CheckCircle, \r\n  Clock, \r\n  Target, \r\n  BookOpen, \r\n  BarChart3,\r\n  Star,\r\n  Award,\r\n  Zap,\r\n  Shield,\r\n  // Map\r\n} from 'lucide-react';\r\nimport { GameState, GameMove, Achievement } from '../types';\r\n\r\ninterface EndgameSummaryProps {\r\n  gameState: GameState;\r\n  gameHistory: GameMove[];\r\n  achievements: Achievement[];\r\n  onPlayAgain: () => void;\r\n  onClose: () => void;\r\n  isOpen: boolean;\r\n}\r\n\r\nconst EndgameSummary: React.FC<EndgameSummaryProps> = ({\r\n  gameState,\r\n  gameHistory,\r\n  achievements,\r\n  onPlayAgain,\r\n  onClose,\r\n  isOpen\r\n}) => {\r\n  const unlockedAchievements = achievements.filter(a => a.isUnlocked);\r\n  const totalAchievements = achievements.length;\r\n  const completionRate = (gameState.totalContentShown / gameState.totalContentAvailable) * 100;\r\n  \r\n  // Calculate session statistics\r\n  const sessionDuration = gameState.currentPlayer.totalPlayTime;\r\n  const averageScore = gameHistory.length > 0 ? \r\n    gameHistory.reduce((sum, move) => sum + move.points, 0) / gameHistory.length : 0;\r\n\r\n  // Get category progress\r\n  const categoryProgress = Object.entries(gameState.learningProgress).map(([category, progress]) => ({\r\n    category: category as any,\r\n    progress,\r\n    maxProgress: 15 // Approximate max per category\r\n  }));\r\n\r\n  const getCategoryIcon = (category: string) => {\r\n    const icons: Record<string, React.ReactNode> = {\r\n      'on-chain': <Shield className=\"w-4 h-4\" />,\r\n      'off-chain': <Zap className=\"w-4 h-4\" />,\r\n      'coin-mixing': <Target className=\"w-4 h-4\" />,\r\n      'wallet-setup': <BookOpen className=\"w-4 h-4\" />,\r\n      'lightning': <Zap className=\"w-4 h-4\" />,\r\n      'regulatory': <Award className=\"w-4 h-4\" />,\r\n      'best-practices': <Star className=\"w-4 h-4\" />\r\n    };\r\n    return icons[category] || <BookOpen className=\"w-4 h-4\" />;\r\n  };\r\n\r\n  const getCategoryName = (category: string) => {\r\n    const names: Record<string, string> = {\r\n      'on-chain': 'On-Chain Privacy',\r\n      'off-chain': 'Off-Chain Solutions',\r\n      'coin-mixing': 'Coin Mixing',\r\n      'wallet-setup': 'Wallet Setup',\r\n      'lightning': 'Lightning Network',\r\n      'regulatory': 'Regulatory',\r\n      'best-practices': 'Best Practices'\r\n    };\r\n    return names[category] || category;\r\n  };\r\n\r\n  return (\r\n    <AnimatePresence>\r\n      {isOpen && (\r\n        <motion.div\r\n          initial={{ opacity: 0 }}\r\n          animate={{ opacity: 1 }}\r\n          exit={{ opacity: 0 }}\r\n          className=\"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4\"\r\n        >\r\n          <motion.div\r\n            initial={{ scale: 0.9, opacity: 0 }}\r\n            animate={{ scale: 1, opacity: 1 }}\r\n            exit={{ scale: 0.9, opacity: 0 }}\r\n            className=\"bg-gradient-to-br from-blue-900 via-purple-900 to-indigo-900 rounded-2xl p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto border border-white/20\"\r\n          >\r\n            {/* Header */}\r\n            <div className=\"flex items-center justify-between mb-6\">\r\n              <div className=\"flex items-center gap-3\">\r\n                <Trophy className=\"w-8 h-8 text-yellow-400\" />\r\n                <div>\r\n                  <h2 className=\"text-2xl font-bold text-white\">\r\n                    {gameState.gamePhase === 'completed' ? 'Privacy Master!' : 'Game Summary'}\r\n                  </h2>\r\n                  <p className=\"text-gray-300\">\r\n                    {gameState.gamePhase === 'completed' \r\n                      ? 'Congratulations! You\\'ve learned all privacy concepts!' \r\n                      : 'Here\\'s how you performed'}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n              <button\r\n                onClick={onClose}\r\n                className=\"text-gray-400 hover:text-white transition-colors\"\r\n              >\r\n                <X className=\"w-6 h-6\" />\r\n              </button>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n              {/* Left Column - Game Statistics */}\r\n              <div className=\"space-y-6\">\r\n                {/* Score and Performance */}\r\n                <div className=\"bg-white/10 backdrop-blur-sm rounded-xl p-4 border border-white/20\">\r\n                  <h3 className=\"text-lg font-semibold text-white mb-4 flex items-center gap-2\">\r\n                    <BarChart3 className=\"w-5 h-5\" />\r\n                    Performance Summary\r\n                  </h3>\r\n                  <div className=\"grid grid-cols-2 gap-4\">\r\n                    <div className=\"text-center\">\r\n                      <div className=\"text-2xl font-bold text-yellow-400\">{gameState.currentScore}</div>\r\n                      <div className=\"text-sm text-gray-300\">Total Score</div>\r\n                    </div>\r\n                    <div className=\"text-center\">\r\n                      <div className=\"text-2xl font-bold text-green-400\">{gameState.correctAnswers}</div>\r\n                      <div className=\"text-sm text-gray-300\">Correct Answers</div>\r\n                    </div>\r\n                    <div className=\"text-center\">\r\n                      <div className=\"text-2xl font-bold text-blue-400\">{gameState.blocksRemoved}</div>\r\n                      <div className=\"text-sm text-gray-300\">Blocks Removed</div>\r\n                    </div>\r\n                    <div className=\"text-center\">\r\n                      <div className=\"text-2xl font-bold text-purple-400\">{Math.round(completionRate)}%</div>\r\n                      <div className=\"text-sm text-gray-300\">Completion</div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Learning Progress */}\r\n                <div className=\"bg-white/10 backdrop-blur-sm rounded-xl p-4 border border-white/20\">\r\n                  <h3 className=\"text-lg font-semibold text-white mb-4 flex items-center gap-2\">\r\n                    <BookOpen className=\"w-5 h-5\" />\r\n                    Learning Progress\r\n                  </h3>\r\n                  <div className=\"space-y-3\">\r\n                    {categoryProgress.map(({ category, progress, maxProgress }) => (\r\n                      <div key={category} className=\"flex items-center justify-between\">\r\n                        <div className=\"flex items-center gap-2 text-sm text-gray-300\">\r\n                          {getCategoryIcon(category)}\r\n                          <span>{getCategoryName(category)}</span>\r\n                        </div>\r\n                        <div className=\"flex items-center gap-2\">\r\n                          <div className=\"w-20 bg-gray-700 rounded-full h-2\">\r\n                            <div \r\n                              className=\"bg-gradient-to-r from-blue-500 to-purple-500 h-2 rounded-full transition-all duration-500\"\r\n                              style={{ width: `${(progress / maxProgress) * 100}%` }}\r\n                            />\r\n                          </div>\r\n                          <span className=\"text-xs text-gray-400 w-8 text-right\">\r\n                            {progress}/{maxProgress}\r\n                          </span>\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Session Stats */}\r\n                <div className=\"bg-white/10 backdrop-blur-sm rounded-xl p-4 border border-white/20\">\r\n                  <h3 className=\"text-lg font-semibold text-white mb-4 flex items-center gap-2\">\r\n                    <Clock className=\"w-5 h-5\" />\r\n                    Session Statistics\r\n                  </h3>\r\n                  <div className=\"space-y-2 text-sm\">\r\n                    <div className=\"flex justify-between\">\r\n                      <span className=\"text-gray-300\">Session Duration:</span>\r\n                      <span className=\"text-white\">{Math.round(sessionDuration)} minutes</span>\r\n                    </div>\r\n                    <div className=\"flex justify-between\">\r\n                      <span className=\"text-gray-300\">Average Score:</span>\r\n                      <span className=\"text-white\">{Math.round(averageScore)} points</span>\r\n                    </div>\r\n                    <div className=\"flex justify-between\">\r\n                      <span className=\"text-gray-300\">Tower Rebuilds:</span>\r\n                      <span className=\"text-white\">{gameState.rebuildCount}</span>\r\n                    </div>\r\n                    <div className=\"flex justify-between\">\r\n                      <span className=\"text-gray-300\">Final Stability:</span>\r\n                      <span className=\"text-white\">{gameState.towerStability}%</span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Right Column - Achievements */}\r\n              <div className=\"space-y-6\">\r\n                {/* Achievements Summary */}\r\n                <div className=\"bg-white/10 backdrop-blur-sm rounded-xl p-4 border border-white/20\">\r\n                  <h3 className=\"text-lg font-semibold text-white mb-4 flex items-center gap-2\">\r\n                    <Trophy className=\"w-5 h-5\" />\r\n                    Achievements ({unlockedAchievements.length}/{totalAchievements})\r\n                  </h3>\r\n                  <div className=\"space-y-3 max-h-64 overflow-y-auto\">\r\n                    {achievements.map((achievement) => (\r\n                      <motion.div\r\n                        key={achievement.id}\r\n                        initial={{ opacity: 0, x: -20 }}\r\n                        animate={{ opacity: 1, x: 0 }}\r\n                        transition={{ delay: achievement.isUnlocked ? 0.1 : 0 }}\r\n                        className={`flex items-center gap-3 p-3 rounded-lg transition-all duration-300 ${\r\n                          achievement.isUnlocked \r\n                            ? 'bg-gradient-to-r from-yellow-500/20 to-orange-500/20 border border-yellow-500/30' \r\n                            : 'bg-gray-800/50 border border-gray-700/50'\r\n                        }`}\r\n                      >\r\n                        <div className={`text-2xl ${achievement.isUnlocked ? 'opacity-100' : 'opacity-30'}`}>\r\n                          {achievement.icon}\r\n                        </div>\r\n                        <div className=\"flex-1\">\r\n                          <div className={`font-semibold ${achievement.isUnlocked ? 'text-white' : 'text-gray-400'}`}>\r\n                            {achievement.name}\r\n                          </div>\r\n                          <div className={`text-sm ${achievement.isUnlocked ? 'text-gray-300' : 'text-gray-500'}`}>\r\n                            {achievement.description}\r\n                          </div>\r\n                          {achievement.isUnlocked && (\r\n                            <div className=\"text-xs text-yellow-400 mt-1\">\r\n                              +{achievement.points} points\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                        {achievement.isUnlocked && (\r\n                          <CheckCircle className=\"w-5 h-5 text-green-400\" />\r\n                        )}\r\n                      </motion.div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Special Recognition */}\r\n                {gameState.gamePhase === 'completed' && (\r\n                  <motion.div\r\n                    initial={{ scale: 0.9, opacity: 0 }}\r\n                    animate={{ scale: 1, opacity: 1 }}\r\n                    transition={{ delay: 0.5 }}\r\n                    className=\"bg-gradient-to-r from-yellow-500/20 to-orange-500/20 rounded-xl p-4 border border-yellow-500/30\"\r\n                  >\r\n                    <div className=\"text-center\">\r\n                      <div className=\"text-4xl mb-2\">🏆</div>\r\n                      <h3 className=\"text-xl font-bold text-white mb-2\">Privacy Master</h3>\r\n                      <p className=\"text-gray-300 text-sm\">\r\n                        You&apos;ve successfully learned all 54 Bitcoin privacy concepts! \r\n                        You&apos;re now equipped with comprehensive knowledge about Bitcoin privacy.\r\n                      </p>\r\n                    </div>\r\n                  </motion.div>\r\n                )}\r\n\r\n                {/* Action Buttons */}\r\n                <div className=\"flex gap-3\">\r\n                  <motion.button\r\n                    whileHover={{ scale: 1.05 }}\r\n                    whileTap={{ scale: 0.95 }}\r\n                    onClick={onPlayAgain}\r\n                    className=\"flex-1 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white py-3 px-6 rounded-lg font-semibold transition-all duration-200\"\r\n                  >\r\n                    {gameState.gamePhase === 'completed' ? 'Play Again' : 'Continue Learning'}\r\n                  </motion.button>\r\n                  <motion.button\r\n                    whileHover={{ scale: 1.05 }}\r\n                    whileTap={{ scale: 0.95 }}\r\n                    onClick={onClose}\r\n                    className=\"bg-gray-700 hover:bg-gray-600 text-white py-3 px-6 rounded-lg font-semibold transition-colors\"\r\n                  >\r\n                    Close\r\n                  </motion.button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </motion.div>\r\n        </motion.div>\r\n      )}\r\n    </AnimatePresence>\r\n  );\r\n};\r\n\r\nexport default EndgameSummary;\r\n","import React from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { RefreshCw, HelpCircle, Brain, Home } from 'lucide-react';\r\nimport { MobileControlsProps } from '../../types';\r\nimport { useResponsiveDesign } from '../../hooks/useResponsiveDesign';\r\n\r\nexport const MobileControls: React.FC<MobileControlsProps> = ({\r\n  onReset,\r\n  onHelp,\r\n  onTutorial\r\n}) => {\r\n  const { isSmallMobile } = useResponsiveDesign();\r\n\r\n  return (\r\n    <div className=\"fixed bottom-4 left-1/2 transform -translate-x-1/2 z-30\">\r\n      <div className={`flex items-center gap-2 bg-black/90 backdrop-blur-sm rounded-full px-3 py-2 border border-gray-600/50 ${\r\n        isSmallMobile ? 'gap-1 px-2' : 'gap-3 px-4'\r\n      }`}>\r\n        <motion.button\r\n          whileHover={{ scale: 1.1 }}\r\n          whileTap={{ scale: 0.9 }}\r\n          onClick={onReset}\r\n          className={`bg-blue-600 hover:bg-blue-700 rounded-full text-white transition-colors ${\r\n            isSmallMobile ? 'p-2' : 'p-3'\r\n          }`}\r\n          title=\"Reset Game\"\r\n        >\r\n          <RefreshCw className={isSmallMobile ? \"w-4 h-4\" : \"w-5 h-5\"} />\r\n        </motion.button>\r\n\r\n        <motion.button\r\n          whileHover={{ scale: 1.1 }}\r\n          whileTap={{ scale: 0.9 }}\r\n          onClick={onHelp}\r\n          className={`bg-green-600 hover:bg-green-700 rounded-full text-white transition-colors ${\r\n            isSmallMobile ? 'p-2' : 'p-3'\r\n          }`}\r\n          title=\"Game Help\"\r\n        >\r\n          <HelpCircle className={isSmallMobile ? \"w-4 h-4\" : \"w-5 h-5\"} />\r\n        </motion.button>\r\n\r\n        <motion.button\r\n          whileHover={{ scale: 1.1 }}\r\n          whileTap={{ scale: 0.9 }}\r\n          onClick={onTutorial}\r\n          className={`bg-purple-600 hover:bg-purple-700 rounded-full text-white transition-colors ${\r\n            isSmallMobile ? 'p-2' : 'p-3'\r\n          }`}\r\n          title=\"Game Tutorial\"\r\n        >\r\n          <Brain className={isSmallMobile ? \"w-4 h-4\" : \"w-5 h-5\"} />\r\n        </motion.button>\r\n\r\n        <motion.button\r\n          whileHover={{ scale: 1.1 }}\r\n          whileTap={{ scale: 0.9 }}\r\n          onClick={() => window.location.href = '/'}\r\n          className={`bg-gray-600 hover:bg-gray-700 rounded-full text-white transition-colors ${\r\n            isSmallMobile ? 'p-2' : 'p-3'\r\n          }`}\r\n          title=\"Back to Menu\"\r\n        >\r\n          <Home className={isSmallMobile ? \"w-4 h-4\" : \"w-5 h-5\"} />\r\n        </motion.button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import { EnhancedQuestion } from '../types';\r\n\r\n// Enhanced Bitcoin Privacy Questions Database\r\n// 54 questions matching the original physical Jenga blocks exactly\r\nexport const ENHANCED_PRIVACY_QUESTIONS: EnhancedQuestion[] = [\r\n  // ===== 🔴 RED BLOCKS (High Risk - HARD Difficulty) =====\r\n  \r\n  // RED 1: Putting identifiable information in an OP_RETURN\r\n  {\r\n    id: 'red-001',\r\n    type: 'multiple_choice',\r\n    difficulty: 'hard',\r\n    category: 'on-chain',\r\n    question: 'What privacy risk occurs when putting identifiable information in an OP_RETURN?',\r\n    options: [\r\n      'It increases transaction fees',\r\n      'It permanently links your identity to the transaction on the blockchain',\r\n      'It slows down transaction confirmation',\r\n      'It reduces the transaction size'\r\n    ],\r\n    correctIndex: 1,\r\n    explanation: 'OP_RETURN data is permanently stored on the blockchain and can contain identifiable information that links your identity to the transaction, creating a permanent privacy risk.',\r\n    stabilityImpact: { correct: 20, incorrect: -35 },\r\n    points: { correct: 25, incorrect: 0 },\r\n    learningTags: ['op_return', 'blockchain-privacy', 'identity-linkage'],\r\n  },\r\n\r\n  // RED 2: Publicly sharing your IP address\r\n  {\r\n    id: 'red-002',\r\n    type: 'scenario',\r\n    difficulty: 'hard',\r\n    category: 'network-privacy',\r\n    question: 'Alice shares her IP address publicly while using Bitcoin. What is the main privacy risk?',\r\n    options: [\r\n      'Her transactions will be slower',\r\n      'Her IP can be linked to her Bitcoin transactions and location',\r\n      'Her wallet will be compromised',\r\n      'Her fees will increase'\r\n    ],\r\n    correctIndex: 1,\r\n    explanation: 'Sharing your IP address publicly can link your physical location and identity to your Bitcoin transactions, creating a significant privacy risk.',\r\n    stabilityImpact: { correct: 20, incorrect: -35 },\r\n    points: { correct: 25, incorrect: 0 },\r\n    learningTags: ['ip-address', 'location-privacy', 'identity-linkage'],\r\n  },\r\n\r\n  // RED 3: Using compromised wallet\r\n  {\r\n    id: 'red-003',\r\n    type: 'multiple_choice',\r\n    difficulty: 'hard',\r\n    category: 'wallet-setup',\r\n    question: 'What is the primary risk of using a compromised wallet?',\r\n    options: [\r\n      'Higher transaction fees',\r\n      'Loss of all funds and complete privacy compromise',\r\n      'Slower transaction processing',\r\n      'Limited functionality'\r\n    ],\r\n    correctIndex: 1,\r\n    explanation: 'A compromised wallet can lead to complete loss of funds and compromise of all privacy, as the attacker gains full control over your private keys.',\r\n    stabilityImpact: { correct: 20, incorrect: -35 },\r\n    points: { correct: 25, incorrect: 0 },\r\n    learningTags: ['wallet-security', 'compromise', 'fund-loss'],\r\n  },\r\n\r\n  // RED 4: Using a compromised ISP\r\n  {\r\n    id: 'red-004',\r\n    type: 'true_false',\r\n    difficulty: 'hard',\r\n    category: 'network-privacy',\r\n    question: 'Using a compromised ISP can expose all your Bitcoin transactions and browsing activity.',\r\n    options: ['True', 'False'],\r\n    correctIndex: 0,\r\n    explanation: 'A compromised ISP can monitor all your internet traffic, including Bitcoin transactions, wallet connections, and browsing activity, creating a major privacy risk.',\r\n    stabilityImpact: { correct: 20, incorrect: -35 },\r\n    points: { correct: 25, incorrect: 0 },\r\n    learningTags: ['isp', 'network-monitoring', 'traffic-analysis'],\r\n  },\r\n\r\n  // RED 5: Exclusively using exchanges to manage all transactions\r\n  {\r\n    id: 'red-005',\r\n    type: 'scenario',\r\n    difficulty: 'hard',\r\n    category: 'exchange-privacy',\r\n    question: 'Bob uses only exchanges for all his Bitcoin transactions. What privacy risk does this create?',\r\n    options: [\r\n      'Higher fees',\r\n      'Complete surveillance of all financial activity by exchange and authorities',\r\n      'Slower transactions',\r\n      'Limited coin selection'\r\n    ],\r\n    correctIndex: 1,\r\n    explanation: 'Using only exchanges creates complete surveillance of all financial activity, as exchanges are required to report to authorities and can track all your transactions.',\r\n    stabilityImpact: { correct: 20, incorrect: -35 },\r\n    points: { correct: 25, incorrect: 0 },\r\n    learningTags: ['exchange-surveillance', 'kyc', 'financial-tracking'],\r\n  },\r\n\r\n  // RED 6: Sharing the location of your bitcoin private keys\r\n  {\r\n    id: 'red-006',\r\n    type: 'multiple_choice',\r\n    difficulty: 'hard',\r\n    category: 'wallet-setup',\r\n    question: 'What happens when you share the location of your Bitcoin private keys?',\r\n    options: [\r\n      'Nothing, keys are just information',\r\n      'Anyone who finds them can steal all your funds',\r\n      'It improves security',\r\n      'It helps with backup'\r\n    ],\r\n    correctIndex: 1,\r\n    explanation: 'Sharing the location of your private keys is equivalent to giving someone access to steal all your funds, as private keys provide complete control over Bitcoin addresses.',\r\n    stabilityImpact: { correct: 20, incorrect: -35 },\r\n    points: { correct: 25, incorrect: 0 },\r\n    learningTags: ['private-keys', 'security', 'fund-theft'],\r\n  },\r\n\r\n  // RED 7: Using public bitcoin APIs that log your data\r\n  {\r\n    id: 'red-007',\r\n    type: 'true_false',\r\n    difficulty: 'hard',\r\n    category: 'api-privacy',\r\n    question: 'Public Bitcoin APIs that log your data can track your IP address and query patterns.',\r\n    options: ['True', 'False'],\r\n    correctIndex: 0,\r\n    explanation: 'Public Bitcoin APIs often log IP addresses, query patterns, and usage data, which can be used to track your Bitcoin activity and link it to your identity.',\r\n    stabilityImpact: { correct: 20, incorrect: -35 },\r\n    points: { correct: 25, incorrect: 0 },\r\n    learningTags: ['api-logging', 'ip-tracking', 'query-patterns'],\r\n  },\r\n\r\n  // RED 8: Storing your private keys in a browser extension\r\n  {\r\n    id: 'red-008',\r\n    type: 'scenario',\r\n    difficulty: 'hard',\r\n    category: 'wallet-setup',\r\n    question: 'What is the main risk of storing private keys in a browser extension?',\r\n    options: [\r\n      'Slower performance',\r\n      'Browser extensions can be compromised and steal your keys',\r\n      'Limited functionality',\r\n      'Higher fees'\r\n    ],\r\n    correctIndex: 1,\r\n    explanation: 'Browser extensions can be compromised, updated maliciously, or have vulnerabilities that expose your private keys to attackers.',\r\n    stabilityImpact: { correct: 20, incorrect: -35 },\r\n    points: { correct: 25, incorrect: 0 },\r\n    learningTags: ['browser-extension', 'key-storage', 'compromise-risk'],\r\n  },\r\n\r\n  // RED 9: Putting your bitcoin address on your business card\r\n  {\r\n    id: 'red-009',\r\n    type: 'multiple_choice',\r\n    difficulty: 'hard',\r\n    category: 'social-privacy',\r\n    question: 'What privacy risk occurs when putting your Bitcoin address on your business card?',\r\n    options: [\r\n      'No risk, addresses are public',\r\n      'It links your real identity to all transactions to that address',\r\n      'It increases transaction fees',\r\n      'It improves security'\r\n    ],\r\n    correctIndex: 1,\r\n    explanation: 'Putting your Bitcoin address on a business card links your real identity to all transactions involving that address, creating a permanent privacy risk.',\r\n    stabilityImpact: { correct: 20, incorrect: -35 },\r\n    points: { correct: 25, incorrect: 0 },\r\n    learningTags: ['address-sharing', 'identity-linkage', 'business-privacy'],\r\n  },\r\n\r\n  // RED 10: Sending your bitcoin to a malicious entity\r\n  {\r\n    id: 'red-010',\r\n    type: 'scenario',\r\n    difficulty: 'hard',\r\n    category: 'transaction-security',\r\n    question: 'What happens when you send Bitcoin to a malicious entity?',\r\n    options: [\r\n      'The transaction will be reversed',\r\n      'Your funds are permanently lost and may be used for illegal activities',\r\n      'You can recover the funds later',\r\n      'Nothing, it\\'s just a transaction'\r\n    ],\r\n    correctIndex: 1,\r\n    explanation: 'Sending Bitcoin to a malicious entity results in permanent loss of funds, and the transaction may be used to link you to illegal activities.',\r\n    stabilityImpact: { correct: 20, incorrect: -35 },\r\n    points: { correct: 25, incorrect: 0 },\r\n    learningTags: ['malicious-entity', 'fund-loss', 'illegal-activities'],\r\n  },\r\n\r\n  // RED 11: Tweeting about engagement in illicit activity\r\n  {\r\n    id: 'red-011',\r\n    type: 'true_false',\r\n    difficulty: 'hard',\r\n    category: 'social-privacy',\r\n    question: 'Tweeting about engagement in illicit activity can link your identity to Bitcoin transactions.',\r\n    options: ['True', 'False'],\r\n    correctIndex: 0,\r\n    explanation: 'Tweeting about illicit activities can link your identity to Bitcoin transactions and create evidence that can be used against you legally.',\r\n    stabilityImpact: { correct: 20, incorrect: -35 },\r\n    points: { correct: 25, incorrect: 0 },\r\n    learningTags: ['social-media', 'illicit-activity', 'legal-evidence'],\r\n  },\r\n\r\n  // RED 12: Spending KYC bitcoin\r\n  {\r\n    id: 'red-012',\r\n    type: 'multiple_choice',\r\n    difficulty: 'hard',\r\n    category: 'kyc-privacy',\r\n    question: 'What happens when you spend KYC Bitcoin?',\r\n    options: [\r\n      'Nothing, it\\'s just a transaction',\r\n      'Your identity is permanently linked to the transaction and can be tracked',\r\n      'The transaction is faster',\r\n      'You get better privacy'\r\n    ],\r\n    correctIndex: 1,\r\n    explanation: 'Spending KYC Bitcoin permanently links your identity to the transaction, as the source of the funds is already identified through the exchange.',\r\n    stabilityImpact: { correct: 20, incorrect: -35 },\r\n    points: { correct: 25, incorrect: 0 },\r\n    learningTags: ['kyc', 'identity-linkage', 'transaction-tracking'],\r\n  },\r\n\r\n  // RED 13: Submitting your private keys to a malicious software wallet\r\n  {\r\n    id: 'red-013',\r\n    type: 'scenario',\r\n    difficulty: 'hard',\r\n    category: 'wallet-setup',\r\n    question: 'What is the immediate consequence of submitting private keys to a malicious software wallet?',\r\n    options: [\r\n      'The wallet will work normally',\r\n      'Complete loss of all funds as the attacker gains full control',\r\n      'You can recover the keys later',\r\n      'The wallet will be more secure'\r\n    ],\r\n    correctIndex: 1,\r\n    explanation: 'Submitting private keys to a malicious wallet gives the attacker complete control over all your funds, resulting in immediate and total loss.',\r\n    stabilityImpact: { correct: 20, incorrect: -35 },\r\n    points: { correct: 25, incorrect: 0 },\r\n    learningTags: ['malicious-wallet', 'key-submission', 'fund-loss'],\r\n  },\r\n\r\n  // RED 14: Tweeting an image of your transaction\r\n  {\r\n    id: 'red-014',\r\n    type: 'true_false',\r\n    difficulty: 'hard',\r\n    category: 'social-privacy',\r\n    question: 'Tweeting an image of your Bitcoin transaction can reveal your wallet address and transaction details.',\r\n    options: ['True', 'False'],\r\n    correctIndex: 0,\r\n    explanation: 'Tweeting transaction images can reveal wallet addresses, transaction amounts, and other details that link your identity to specific Bitcoin activity.',\r\n    stabilityImpact: { correct: 20, incorrect: -35 },\r\n    points: { correct: 25, incorrect: 0 },\r\n    learningTags: ['transaction-sharing', 'wallet-revelation', 'social-media'],\r\n  },\r\n\r\n  // RED 15: Posting your bitcoin wallet address on your website for donations\r\n  {\r\n    id: 'red-015',\r\n    type: 'multiple_choice',\r\n    difficulty: 'hard',\r\n    category: 'social-privacy',\r\n    question: 'What privacy risk occurs when posting a Bitcoin address on your website for donations?',\r\n    options: [\r\n      'No risk, addresses are meant to be shared',\r\n      'It links your identity to all incoming transactions and spending patterns',\r\n      'It improves security',\r\n      'It reduces fees'\r\n    ],\r\n    correctIndex: 1,\r\n    explanation: 'Posting a Bitcoin address on your website links your identity to all incoming donations and any subsequent spending from that address.',\r\n    stabilityImpact: { correct: 20, incorrect: -35 },\r\n    points: { correct: 25, incorrect: 0 },\r\n    learningTags: ['donation-address', 'identity-linkage', 'spending-patterns'],\r\n  },\r\n\r\n  // RED 16: Repeatedly reusing the same address\r\n  {\r\n    id: 'red-016',\r\n    type: 'scenario',\r\n    difficulty: 'hard',\r\n    category: 'on-chain',\r\n    question: 'Alice repeatedly reuses the same Bitcoin address. What privacy risk does this create?',\r\n    options: [\r\n      'No risk, addresses are public anyway',\r\n      'All her transactions are linked together, creating a complete spending history',\r\n      'It improves security',\r\n      'It reduces fees'\r\n    ],\r\n    correctIndex: 1,\r\n    explanation: 'Reusing the same address links all transactions together, creating a complete spending history that can be analyzed and tracked.',\r\n    stabilityImpact: { correct: 20, incorrect: -35 },\r\n    points: { correct: 25, incorrect: 0 },\r\n    learningTags: ['address-reuse', 'transaction-linking', 'spending-history'],\r\n  },\r\n\r\n  // RED 17: Inputting private information into a phishing attack\r\n  {\r\n    id: 'red-017',\r\n    type: 'multiple_choice',\r\n    difficulty: 'hard',\r\n    category: 'security',\r\n    question: 'What happens when you input private information into a phishing attack?',\r\n    options: [\r\n      'Nothing, it\\'s just a form',\r\n      'Your private keys and identity information are stolen',\r\n      'The website will work normally',\r\n      'You get better security'\r\n    ],\r\n    correctIndex: 1,\r\n    explanation: 'Phishing attacks steal private keys and identity information, giving attackers complete control over your funds and personal data.',\r\n    stabilityImpact: { correct: 20, incorrect: -35 },\r\n    points: { correct: 25, incorrect: 0 },\r\n    learningTags: ['phishing', 'key-theft', 'identity-theft'],\r\n  },\r\n\r\n  // RED 18: Selling bitcoin on a KYC exchange\r\n  {\r\n    id: 'red-018',\r\n    type: 'true_false',\r\n    difficulty: 'hard',\r\n    category: 'exchange-privacy',\r\n    question: 'Selling Bitcoin on a KYC exchange permanently links your identity to the transaction.',\r\n    options: ['True', 'False'],\r\n    correctIndex: 0,\r\n    explanation: 'KYC exchanges require identity verification and report transactions to authorities, permanently linking your identity to the Bitcoin transaction.',\r\n    stabilityImpact: { correct: 20, incorrect: -35 },\r\n    points: { correct: 25, incorrect: 0 },\r\n    learningTags: ['kyc-exchange', 'identity-linkage', 'authority-reporting'],\r\n\r\n  },\r\n\r\n  // ===== 🟠 ORANGE BLOCKS (Medium Risk - MEDIUM Difficulty) =====\r\n\r\n  // ORANGE 1: Logging into wallet or exchange from a public shared computer\r\n  {\r\n    id: 'orange-001',\r\n    type: 'scenario',\r\n    difficulty: 'medium',\r\n    category: 'security',\r\n    question: 'What risk occurs when logging into a wallet from a public computer?',\r\n    options: [\r\n      'Slower performance',\r\n      'Keyloggers or malware can steal your credentials',\r\n      'Higher fees',\r\n      'Limited functionality'\r\n    ],\r\n    correctIndex: 1,\r\n    explanation: 'Public computers may have keyloggers or malware that can capture your passwords, private keys, or other sensitive information.',\r\n    stabilityImpact: { correct: 12, incorrect: -20 },\r\n    points: { correct: 15, incorrect: 0 },\r\n    learningTags: ['public-computer', 'keylogger', 'malware'],\r\n  },\r\n\r\n  // ORANGE 2: Creating unique and identifiable transaction structures\r\n  {\r\n    id: 'orange-002',\r\n    type: 'multiple_choice',\r\n    difficulty: 'medium',\r\n    category: 'on-chain',\r\n    question: 'How can unique transaction structures compromise privacy?',\r\n    options: [\r\n      'They increase fees',\r\n      'They create identifiable patterns that can be linked to specific wallets',\r\n      'They slow down confirmations',\r\n      'They reduce security'\r\n    ],\r\n    correctIndex: 1,\r\n    explanation: 'Unique transaction structures create identifiable patterns that blockchain analysis can use to link transactions to specific wallets or individuals.',\r\n    stabilityImpact: { correct: 12, incorrect: -20 },\r\n    points: { correct: 15, incorrect: 0 },\r\n    learningTags: ['transaction-structure', 'fingerprinting', 'pattern-analysis'],\r\n  },\r\n\r\n  // ORANGE 3: Spending funds from a dust attack\r\n  {\r\n    id: 'orange-003',\r\n    type: 'true_false',\r\n    difficulty: 'medium',\r\n    category: 'on-chain',\r\n    question: 'Spending funds from a dust attack can link your wallet to the attacker\\'s address.',\r\n    options: ['True', 'False'],\r\n    correctIndex: 0,\r\n    explanation: 'Dust attacks send small amounts to many addresses to track which ones are active. Spending these funds links your wallet to the attacker\\'s address.',\r\n    stabilityImpact: { correct: 12, incorrect: -20 },\r\n    points: { correct: 15, incorrect: 0 },\r\n    learningTags: ['dust-attack', 'wallet-tracking', 'address-linking'],\r\n  },\r\n\r\n  // ORANGE 4: Combining inputs from many UTXOs into a single transaction\r\n  {\r\n    id: 'orange-004',\r\n    type: 'scenario',\r\n    difficulty: 'medium',\r\n    category: 'on-chain',\r\n    question: 'What privacy risk occurs when combining many UTXOs in one transaction?',\r\n    options: [\r\n      'Higher fees',\r\n      'It reveals that all UTXOs belong to the same wallet',\r\n      'Slower confirmation',\r\n      'Better privacy'\r\n    ],\r\n    correctIndex: 1,\r\n    explanation: 'Combining many UTXOs in one transaction reveals that all inputs belong to the same wallet, linking previously separate transaction histories.',\r\n    stabilityImpact: { correct: 12, incorrect: -20 },\r\n    points: { correct: 15, incorrect: 0 },\r\n    learningTags: ['utxo-consolidation', 'wallet-linking', 'transaction-history'],\r\n  },\r\n\r\n  // ORANGE 5: Using a software wallet that fingerprints all transactions\r\n  {\r\n    id: 'orange-005',\r\n    type: 'multiple_choice',\r\n    difficulty: 'medium',\r\n    category: 'wallet-setup',\r\n    question: 'What is transaction fingerprinting in Bitcoin wallets?',\r\n    options: [\r\n      'A security feature',\r\n      'Creating unique transaction patterns that can identify the wallet software',\r\n      'A privacy enhancement',\r\n      'A fee optimization'\r\n    ],\r\n    correctIndex: 1,\r\n    explanation: 'Transaction fingerprinting occurs when wallet software creates unique patterns in transactions that can identify the specific wallet software being used.',\r\n    stabilityImpact: { correct: 12, incorrect: -20 },\r\n    points: { correct: 15, incorrect: 0 },\r\n    learningTags: ['transaction-fingerprinting', 'wallet-identification', 'software-patterns'],\r\n  },\r\n\r\n  // ORANGE 6: Reusing an address for a second transaction\r\n  {\r\n    id: 'orange-006',\r\n    type: 'true_false',\r\n    difficulty: 'medium',\r\n    category: 'on-chain',\r\n    question: 'Reusing an address for a second transaction links the two transactions together.',\r\n    options: ['True', 'False'],\r\n    correctIndex: 0,\r\n    explanation: 'Reusing an address links multiple transactions together, making it easier for blockchain analysis to track spending patterns.',\r\n    stabilityImpact: { correct: 12, incorrect: -20 },\r\n    points: { correct: 15, incorrect: 0 },\r\n    learningTags: ['address-reuse', 'transaction-linking', 'spending-patterns'],\r\n  },\r\n\r\n  // ORANGE 7: Posting to twitter complaining that your transaction hasn't been mined\r\n  {\r\n    id: 'orange-007',\r\n    type: 'scenario',\r\n    difficulty: 'medium',\r\n    category: 'social-privacy',\r\n    question: 'What privacy risk occurs when complaining on Twitter about unmined transactions?',\r\n    options: [\r\n      'No risk, it\\'s just a complaint',\r\n      'It can reveal your transaction details and wallet activity',\r\n      'It improves transaction speed',\r\n      'It helps with fees'\r\n    ],\r\n    correctIndex: 1,\r\n    explanation: 'Complaining about unmined transactions can reveal transaction details, fees, and wallet activity that can be linked to your identity.',\r\n    stabilityImpact: { correct: 12, incorrect: -20 },\r\n    points: { correct: 15, incorrect: 0 },\r\n    learningTags: ['transaction-complaints', 'wallet-activity', 'social-media'],\r\n  },\r\n\r\n  // ORANGE 8: Sharing how much bitcoin you own\r\n  {\r\n    id: 'orange-008',\r\n    type: 'multiple_choice',\r\n    difficulty: 'medium',\r\n    category: 'social-privacy',\r\n    question: 'What risk occurs when sharing how much Bitcoin you own?',\r\n    options: [\r\n      'No risk, it\\'s just information',\r\n      'It makes you a target for theft and can link your identity to transactions',\r\n      'It improves security',\r\n      'It helps with privacy'\r\n    ],\r\n    correctIndex: 1,\r\n    explanation: 'Sharing Bitcoin holdings makes you a target for theft and can link your identity to specific transactions and addresses.',\r\n    stabilityImpact: { correct: 12, incorrect: -20 },\r\n    points: { correct: 15, incorrect: 0 },\r\n    learningTags: ['wealth-disclosure', 'theft-target', 'identity-linkage'],\r\n  },\r\n\r\n  // ORANGE 9: Sharing screenshots of wallets with identifiable information\r\n  {\r\n    id: 'orange-009',\r\n    type: 'true_false',\r\n    difficulty: 'medium',\r\n    category: 'social-privacy',\r\n    question: 'Sharing wallet screenshots can reveal addresses, balances, and transaction history.',\r\n    options: ['True', 'False'],\r\n    correctIndex: 0,\r\n    explanation: 'Wallet screenshots can reveal addresses, balances, transaction history, and other sensitive information that compromises privacy.',\r\n    stabilityImpact: { correct: 12, incorrect: -20 },\r\n    points: { correct: 15, incorrect: 0 },\r\n    learningTags: ['wallet-screenshots', 'balance-revelation', 'transaction-history'],\r\n  },\r\n\r\n  // ORANGE 10: Using an app that allows SMS password retrieval\r\n  {\r\n    id: 'orange-010',\r\n    type: 'scenario',\r\n    difficulty: 'medium',\r\n    category: 'security',\r\n    question: 'What security risk occurs with SMS password retrieval?',\r\n    options: [\r\n      'No risk, SMS is secure',\r\n      'SMS can be intercepted, allowing account takeover',\r\n      'It improves security',\r\n      'It reduces fees'\r\n    ],\r\n    correctIndex: 1,\r\n    explanation: 'SMS can be intercepted through SIM swapping or other attacks, allowing attackers to reset passwords and gain account access.',\r\n    stabilityImpact: { correct: 12, incorrect: -20 },\r\n    points: { correct: 15, incorrect: 0 },\r\n    learningTags: ['sms-security', 'sim-swapping', 'account-takeover'],\r\n  },\r\n\r\n  // ORANGE 11: Installing suspicious browser extensions\r\n  {\r\n    id: 'orange-011',\r\n    type: 'multiple_choice',\r\n    difficulty: 'medium',\r\n    category: 'security',\r\n    question: 'What risk occurs when installing suspicious browser extensions?',\r\n    options: [\r\n      'Slower browsing',\r\n      'Extensions can access your browsing data and potentially steal information',\r\n      'Higher fees',\r\n      'Better functionality'\r\n    ],\r\n    correctIndex: 1,\r\n    explanation: 'Suspicious browser extensions can access your browsing data, passwords, and potentially steal sensitive information including cryptocurrency credentials.',\r\n    stabilityImpact: { correct: 12, incorrect: -20 },\r\n    points: { correct: 15, incorrect: 0 },\r\n    learningTags: ['browser-extensions', 'data-access', 'credential-theft'],\r\n  },\r\n\r\n  // ORANGE 12: Linking lightning node public key to your public identity\r\n  {\r\n    id: 'orange-012',\r\n    type: 'true_false',\r\n    difficulty: 'medium',\r\n    category: 'lightning',\r\n    question: 'Linking your Lightning node public key to your identity can reveal payment patterns.',\r\n    options: ['True', 'False'],\r\n    correctIndex: 0,\r\n    explanation: 'Linking your Lightning node public key to your identity can reveal payment patterns, channel balances, and routing information.',\r\n    stabilityImpact: { correct: 12, incorrect: -20 },\r\n    points: { correct: 15, incorrect: 0 },\r\n    learningTags: ['lightning-node', 'payment-patterns', 'channel-balances'],\r\n  },\r\n\r\n  // ORANGE 13: Delivering bitcoin hardware to your home address\r\n  {\r\n    id: 'orange-013',\r\n    type: 'scenario',\r\n    difficulty: 'medium',\r\n    category: 'physical-privacy',\r\n    question: 'What privacy risk occurs when having Bitcoin hardware delivered to your home?',\r\n    options: [\r\n      'No risk, it\\'s just delivery',\r\n      'It links your physical address to Bitcoin ownership',\r\n      'It improves security',\r\n      'It reduces costs'\r\n    ],\r\n    correctIndex: 1,\r\n    explanation: 'Having Bitcoin hardware delivered to your home address links your physical location to Bitcoin ownership, creating a privacy risk.',\r\n    stabilityImpact: { correct: 12, incorrect: -20 },\r\n    points: { correct: 15, incorrect: 0 },\r\n    learningTags: ['hardware-delivery', 'address-linkage', 'ownership-revelation'],\r\n  },\r\n\r\n  // ORANGE 14: Public sharing about tax evasion\r\n  {\r\n    id: 'orange-014',\r\n    type: 'multiple_choice',\r\n    difficulty: 'medium',\r\n    category: 'regulatory',\r\n    question: 'What risk occurs when publicly sharing about tax evasion?',\r\n    options: [\r\n      'No risk, it\\'s just discussion',\r\n      'It can provide evidence for legal action and link you to transactions',\r\n      'It improves privacy',\r\n      'It reduces taxes'\r\n    ],\r\n    correctIndex: 1,\r\n    explanation: 'Publicly sharing about tax evasion can provide evidence for legal action and link your identity to specific Bitcoin transactions.',\r\n    stabilityImpact: { correct: 12, incorrect: -20 },\r\n    points: { correct: 15, incorrect: 0 },\r\n    learningTags: ['tax-evasion', 'legal-evidence', 'transaction-linkage'],\r\n  },\r\n\r\n  // ORANGE 15: Using extremely outdated software\r\n  {\r\n    id: 'orange-015',\r\n    type: 'true_false',\r\n    difficulty: 'medium',\r\n    category: 'security',\r\n    question: 'Using extremely outdated Bitcoin software can expose you to security vulnerabilities.',\r\n    options: ['True', 'False'],\r\n    correctIndex: 0,\r\n    explanation: 'Outdated software may contain known security vulnerabilities that can be exploited to compromise your funds or privacy.',\r\n    stabilityImpact: { correct: 12, incorrect: -20 },\r\n    points: { correct: 15, incorrect: 0 },\r\n    learningTags: ['outdated-software', 'security-vulnerabilities', 'exploitation'],\r\n  },\r\n\r\n  // ORANGE 16: Using a compromised block explorer\r\n  {\r\n    id: 'orange-016',\r\n    type: 'scenario',\r\n    difficulty: 'medium',\r\n    category: 'network-privacy',\r\n    question: 'What risk occurs when using a compromised block explorer?',\r\n    options: [\r\n      'Slower performance',\r\n      'Your queries and IP address can be logged and tracked',\r\n      'Higher fees',\r\n      'Better functionality'\r\n    ],\r\n    correctIndex: 1,\r\n    explanation: 'A compromised block explorer can log your queries, IP address, and browsing patterns, creating a privacy risk.',\r\n    stabilityImpact: { correct: 12, incorrect: -20 },\r\n    points: { correct: 15, incorrect: 0 },\r\n    learningTags: ['block-explorer', 'query-logging', 'ip-tracking'],\r\n  },\r\n\r\n  // ORANGE 17: Storing your private keys in the cloud\r\n  {\r\n    id: 'orange-017',\r\n    type: 'multiple_choice',\r\n    difficulty: 'medium',\r\n    category: 'wallet-setup',\r\n    question: 'What risk occurs when storing private keys in the cloud?',\r\n    options: [\r\n      'No risk, cloud is secure',\r\n      'Cloud services can be compromised, exposing your keys',\r\n      'It improves security',\r\n      'It reduces costs'\r\n    ],\r\n    correctIndex: 1,\r\n    explanation: 'Cloud services can be compromised through hacking, insider threats, or legal requests, exposing your private keys to attackers.',\r\n    stabilityImpact: { correct: 12, incorrect: -20 },\r\n    points: { correct: 15, incorrect: 0 },\r\n    learningTags: ['cloud-storage', 'key-exposure', 'service-compromise'],\r\n  },\r\n\r\n  // ORANGE 18: Broadcasting a transaction from your home IP address\r\n  {\r\n    id: 'orange-018',\r\n    type: 'true_false',\r\n    difficulty: 'medium',\r\n    category: 'network-privacy',\r\n    question: 'Broadcasting transactions from your home IP can link your location to Bitcoin activity.',\r\n    options: ['True', 'False'],\r\n    correctIndex: 0,\r\n    explanation: 'Broadcasting transactions from your home IP address can link your physical location to Bitcoin activity, creating a privacy risk.',\r\n    stabilityImpact: { correct: 12, incorrect: -20 },\r\n    points: { correct: 15, incorrect: 0 },\r\n    learningTags: ['home-ip', 'location-linkage', 'transaction-broadcasting'],\r\n\r\n  },\r\n\r\n  // ===== 🟢 GREEN BLOCKS (Lower Risk - EASY Difficulty) =====\r\n\r\n  // GREEN 1: Using software that doesn't support intentional coin selection\r\n  {\r\n    id: 'green-001',\r\n    type: 'multiple_choice',\r\n    difficulty: 'easy',\r\n    category: 'on-chain',\r\n    question: 'What is intentional coin selection in Bitcoin?',\r\n    options: [\r\n      'Choosing which coins to spend based on privacy considerations',\r\n      'Selecting the cheapest coins first',\r\n      'Using the newest coins',\r\n      'Random coin selection'\r\n    ],\r\n    correctIndex: 0,\r\n    explanation: 'Intentional coin selection allows you to choose which UTXOs to spend based on privacy considerations, rather than using default selection algorithms.',\r\n    stabilityImpact: { correct: 8, incorrect: -15 },\r\n    points: { correct: 10, incorrect: 0 },\r\n    learningTags: ['coin-selection', 'utxo-privacy', 'spending-control'],\r\n  },\r\n\r\n  // GREEN 2: Using the bitcoin base layer for all transactions\r\n  {\r\n    id: 'green-002',\r\n    type: 'true_false',\r\n    difficulty: 'easy',\r\n    category: 'on-chain',\r\n    question: 'Using only the Bitcoin base layer for all transactions can reduce privacy.',\r\n    options: ['True', 'False'],\r\n    correctIndex: 0,\r\n    explanation: 'Using only the base layer for all transactions makes all activity visible on the public blockchain, reducing privacy compared to layer 2 solutions.',\r\n    stabilityImpact: { correct: 8, incorrect: -15 },\r\n    points: { correct: 10, incorrect: 0 },\r\n    learningTags: ['base-layer', 'layer2', 'blockchain-visibility'],\r\n  },\r\n\r\n  // GREEN 3: Using round amounts when sending payments\r\n  {\r\n    id: 'green-003',\r\n    type: 'scenario',\r\n    difficulty: 'easy',\r\n    category: 'on-chain',\r\n    question: 'Why can using round amounts in Bitcoin payments reduce privacy?',\r\n    options: [\r\n      'Round amounts are more expensive',\r\n      'Round amounts are easier to track and identify',\r\n      'Round amounts are slower',\r\n      'Round amounts are less secure'\r\n    ],\r\n    correctIndex: 1,\r\n    explanation: 'Round amounts are easier to track and identify in blockchain analysis, making it easier to link transactions to specific individuals or businesses.',\r\n    stabilityImpact: { correct: 8, incorrect: -15 },\r\n    points: { correct: 10, incorrect: 0 },\r\n    learningTags: ['round-amounts', 'transaction-tracking', 'blockchain-analysis'],\r\n  },\r\n\r\n  // GREEN 4: Mixing KYC and non-KYC bitcoin, deanonymizing all UTXOs\r\n  {\r\n    id: 'green-004',\r\n    type: 'multiple_choice',\r\n    difficulty: 'easy',\r\n    category: 'kyc-privacy',\r\n    question: 'What happens when you mix KYC and non-KYC Bitcoin?',\r\n    options: [\r\n      'Nothing, they remain separate',\r\n      'The KYC Bitcoin deanonymizes all mixed UTXOs',\r\n      'It improves privacy',\r\n      'It reduces fees'\r\n    ],\r\n    correctIndex: 1,\r\n    explanation: 'Mixing KYC and non-KYC Bitcoin deanonymizes all the mixed UTXOs, as the KYC Bitcoin can be traced back to your identity.',\r\n    stabilityImpact: { correct: 8, incorrect: -15 },\r\n    points: { correct: 10, incorrect: 0 },\r\n    learningTags: ['kyc-mixing', 'deanonymization', 'utxo-tracking'],\r\n  },\r\n\r\n  // GREEN 5: Using slightly outdated software\r\n  {\r\n    id: 'green-005',\r\n    type: 'true_false',\r\n    difficulty: 'easy',\r\n    category: 'security',\r\n    question: 'Using slightly outdated Bitcoin software can expose you to minor security risks.',\r\n    options: ['True', 'False'],\r\n    correctIndex: 0,\r\n    explanation: 'Even slightly outdated software may contain security vulnerabilities that could be exploited, though the risk is lower than with extremely outdated software.',\r\n    stabilityImpact: { correct: 8, incorrect: -15 },\r\n    points: { correct: 10, incorrect: 0 },\r\n    learningTags: ['software-updates', 'security-vulnerabilities', 'minor-risks'],\r\n  },\r\n\r\n  // GREEN 6: Using a public blockchain explorer\r\n  {\r\n    id: 'green-006',\r\n    type: 'scenario',\r\n    difficulty: 'easy',\r\n    category: 'network-privacy',\r\n    question: 'What privacy consideration exists when using public blockchain explorers?',\r\n    options: [\r\n      'No considerations',\r\n      'Your queries can be logged and tracked',\r\n      'They are more secure',\r\n      'They are faster'\r\n    ],\r\n    correctIndex: 1,\r\n    explanation: 'Public blockchain explorers can log your queries, potentially linking your IP address to specific Bitcoin addresses you\\'re researching.',\r\n    stabilityImpact: { correct: 8, incorrect: -15 },\r\n    points: { correct: 10, incorrect: 0 },\r\n    learningTags: ['blockchain-explorer', 'query-logging', 'ip-linkage'],\r\n  },\r\n\r\n  // GREEN 7: Talking about bitcoin publicly\r\n  {\r\n    id: 'green-007',\r\n    type: 'multiple_choice',\r\n    difficulty: 'easy',\r\n    category: 'social-privacy',\r\n    question: 'What privacy risk can occur when talking about Bitcoin publicly?',\r\n    options: [\r\n      'No risk, it\\'s just discussion',\r\n      'It can reveal your interest and potentially link you to transactions',\r\n      'It improves privacy',\r\n      'It reduces fees'\r\n    ],\r\n    correctIndex: 1,\r\n    explanation: 'Publicly discussing Bitcoin can reveal your interest and potentially link you to transactions if you later use Bitcoin.',\r\n    stabilityImpact: { correct: 8, incorrect: -15 },\r\n    points: { correct: 10, incorrect: 0 },\r\n    learningTags: ['public-discussion', 'interest-revelation', 'transaction-linkage'],\r\n  },\r\n\r\n  // GREEN 8: Talking about your bitcoin transactions on an insecure messaging app\r\n  {\r\n    id: 'green-008',\r\n    type: 'true_false',\r\n    difficulty: 'easy',\r\n    category: 'social-privacy',\r\n    question: 'Discussing Bitcoin transactions on insecure messaging apps can expose transaction details.',\r\n    options: ['True', 'False'],\r\n    correctIndex: 0,\r\n    explanation: 'Insecure messaging apps can expose transaction details to third parties, compromising privacy.',\r\n    stabilityImpact: { correct: 8, incorrect: -15 },\r\n    points: { correct: 10, incorrect: 0 },\r\n    learningTags: ['insecure-messaging', 'transaction-exposure', 'third-party-access'],\r\n  },\r\n\r\n  // GREEN 9: Having a high profile as a public figure or activist\r\n  {\r\n    id: 'green-009',\r\n    type: 'scenario',\r\n    difficulty: 'easy',\r\n    category: 'social-privacy',\r\n    question: 'How does being a public figure affect Bitcoin privacy?',\r\n    options: [\r\n      'It has no effect',\r\n      'It makes you a target for surveillance and analysis',\r\n      'It improves privacy',\r\n      'It reduces fees'\r\n    ],\r\n    correctIndex: 1,\r\n    explanation: 'Being a public figure makes you a target for surveillance and blockchain analysis, as your transactions are more likely to be monitored.',\r\n    stabilityImpact: { correct: 8, incorrect: -15 },\r\n    points: { correct: 10, incorrect: 0 },\r\n    learningTags: ['public-figure', 'surveillance-target', 'blockchain-analysis'],\r\n  },\r\n\r\n  // GREEN 10: Broadcasting a transaction from your home internet\r\n  {\r\n    id: 'green-010',\r\n    type: 'multiple_choice',\r\n    difficulty: 'easy',\r\n    category: 'network-privacy',\r\n    question: 'What privacy consideration exists when broadcasting from home internet?',\r\n    options: [\r\n      'No considerations',\r\n      'Your IP address can be linked to the transaction',\r\n      'It\\'s more secure',\r\n      'It\\'s faster'\r\n    ],\r\n    correctIndex: 1,\r\n    explanation: 'Broadcasting from your home internet can link your IP address to the transaction, potentially revealing your location.',\r\n    stabilityImpact: { correct: 8, incorrect: -15 },\r\n    points: { correct: 10, incorrect: 0 },\r\n    learningTags: ['home-internet', 'ip-linkage', 'location-revelation'],\r\n  },\r\n\r\n  // GREEN 11: Using one wallet for all purposes\r\n  {\r\n    id: 'green-011',\r\n    type: 'true_false',\r\n    difficulty: 'easy',\r\n    category: 'wallet-setup',\r\n    question: 'Using one wallet for all purposes can link different types of transactions together.',\r\n    options: ['True', 'False'],\r\n    correctIndex: 0,\r\n    explanation: 'Using one wallet for all purposes links different types of transactions together, making it easier to analyze your complete financial activity.',\r\n    stabilityImpact: { correct: 8, incorrect: -15 },\r\n    points: { correct: 10, incorrect: 0 },\r\n    learningTags: ['wallet-separation', 'transaction-linking', 'financial-analysis'],\r\n  },\r\n\r\n  // GREEN 12: Having bitcoin stickers on your laptop or water bottle\r\n  {\r\n    id: 'green-012',\r\n    type: 'scenario',\r\n    difficulty: 'easy',\r\n    category: 'physical-privacy',\r\n    question: 'What privacy risk can occur from displaying Bitcoin stickers?',\r\n    options: [\r\n      'No risk, they\\'re just stickers',\r\n      'They can indicate Bitcoin ownership and make you a target',\r\n      'They improve security',\r\n      'They reduce costs'\r\n    ],\r\n    correctIndex: 1,\r\n    explanation: 'Bitcoin stickers can indicate ownership and make you a target for theft or surveillance.',\r\n    stabilityImpact: { correct: 8, incorrect: -15 },\r\n    points: { correct: 10, incorrect: 0 },\r\n    learningTags: ['physical-indicators', 'ownership-revelation', 'theft-target'],\r\n  },\r\n\r\n  // GREEN 13: Broadcasting a transaction from the same node that runs your wallet\r\n  {\r\n    id: 'green-013',\r\n    type: 'multiple_choice',\r\n    difficulty: 'easy',\r\n    category: 'network-privacy',\r\n    question: 'What privacy consideration exists when using the same node for wallet and broadcasting?',\r\n    options: [\r\n      'No considerations',\r\n      'It can link your wallet activity to your IP address',\r\n      'It\\'s more secure',\r\n      'It\\'s faster'\r\n    ],\r\n    correctIndex: 1,\r\n    explanation: 'Using the same node for wallet and broadcasting can link your wallet activity to your IP address, potentially revealing your location.',\r\n    stabilityImpact: { correct: 8, incorrect: -15 },\r\n    points: { correct: 10, incorrect: 0 },\r\n    learningTags: ['node-privacy', 'wallet-ip-linkage', 'location-revelation'],\r\n  },\r\n\r\n  // GREEN 14: Using the default transaction structure of 1 input & 2 outputs\r\n  {\r\n    id: 'green-014',\r\n    type: 'true_false',\r\n    difficulty: 'easy',\r\n    category: 'on-chain',\r\n    question: 'Default transaction structures can make transactions easier to identify and track.',\r\n    options: ['True', 'False'],\r\n    correctIndex: 0,\r\n    explanation: 'Default transaction structures create predictable patterns that make transactions easier to identify and track through blockchain analysis.',\r\n    stabilityImpact: { correct: 8, incorrect: -15 },\r\n    points: { correct: 10, incorrect: 0 },\r\n    learningTags: ['transaction-structure', 'predictable-patterns', 'blockchain-analysis'],\r\n  },\r\n\r\n  // GREEN 15: Publicly discussing your personal security practices\r\n  {\r\n    id: 'green-015',\r\n    type: 'scenario',\r\n    difficulty: 'easy',\r\n    category: 'social-privacy',\r\n    question: 'What risk can occur from discussing security practices publicly?',\r\n    options: [\r\n      'No risk, it\\'s educational',\r\n      'It can reveal vulnerabilities and make you a target',\r\n      'It improves security',\r\n      'It helps others'\r\n    ],\r\n    correctIndex: 1,\r\n    explanation: 'Publicly discussing security practices can reveal vulnerabilities and make you a target for attackers.',\r\n    stabilityImpact: { correct: 8, incorrect: -15 },\r\n    points: { correct: 10, incorrect: 0 },\r\n    learningTags: ['security-discussion', 'vulnerability-revelation', 'attack-target'],\r\n  },\r\n\r\n  // GREEN 16: Attending bitcoin conferences\r\n  {\r\n    id: 'green-016',\r\n    type: 'multiple_choice',\r\n    difficulty: 'easy',\r\n    category: 'social-privacy',\r\n    question: 'What privacy consideration exists when attending Bitcoin conferences?',\r\n    options: [\r\n      'No considerations',\r\n      'Your attendance can indicate Bitcoin interest and ownership',\r\n      'It improves privacy',\r\n      'It reduces costs'\r\n    ],\r\n    correctIndex: 1,\r\n    explanation: 'Attending Bitcoin conferences can indicate your interest in Bitcoin and potentially link you to ownership.',\r\n    stabilityImpact: { correct: 8, incorrect: -15 },\r\n    points: { correct: 10, incorrect: 0 },\r\n    learningTags: ['conference-attendance', 'interest-indication', 'ownership-linkage'],\r\n  },\r\n\r\n  // GREEN 17: Personal pro-bitcoin material on twitter\r\n  {\r\n    id: 'green-017',\r\n    type: 'true_false',\r\n    difficulty: 'easy',\r\n    category: 'social-privacy',\r\n    question: 'Posting pro-Bitcoin content on social media can indicate Bitcoin ownership.',\r\n    options: ['True', 'False'],\r\n    correctIndex: 0,\r\n    explanation: 'Posting pro-Bitcoin content on social media can indicate ownership and make you a target for surveillance or theft.',\r\n    stabilityImpact: { correct: 8, incorrect: -15 },\r\n    points: { correct: 10, incorrect: 0 },\r\n    learningTags: ['social-media', 'ownership-indication', 'surveillance-target'],\r\n  },\r\n\r\n  // GREEN 18: Sharing widely that you own bitcoin\r\n  {\r\n    id: 'green-018',\r\n    type: 'scenario',\r\n    difficulty: 'easy',\r\n    category: 'social-privacy',\r\n    question: 'What risk can occur from widely sharing Bitcoin ownership?',\r\n    options: [\r\n      'No risk, it\\'s just information',\r\n      'It can make you a target for theft and surveillance',\r\n      'It improves security',\r\n      'It helps with adoption'\r\n    ],\r\n    correctIndex: 1,\r\n    explanation: 'Widely sharing Bitcoin ownership can make you a target for theft, surveillance, and social engineering attacks.',\r\n    stabilityImpact: { correct: 8, incorrect: -15 },\r\n    points: { correct: 10, incorrect: 0 },\r\n    learningTags: ['ownership-disclosure', 'theft-target', 'surveillance-target'],\r\n  },\r\n];\r\n\r\nexport default ENHANCED_PRIVACY_QUESTIONS;\r\n","import { \r\n  Block, \r\n  BlockContent, \r\n  GameState, \r\n  Player, \r\n  GameMove, \r\n  QuizResult, \r\n  PrivacyCategory,\r\n  GameSettings,\r\n  GameStatistics,\r\n  Achievement,\r\n  Difficulty,\r\n  ContentTracker,\r\n  EnhancedQuestion,\r\n  PlayerProgress,\r\n  QuestionAttempt,\r\n  AdaptiveMetrics\r\n} from '../types';\r\nimport ENHANCED_PRIVACY_QUESTIONS from '../data/enhancedPrivacyQuestions';\r\n\r\n// Enhanced game settings with new stability mechanics\r\nconst DEFAULT_SETTINGS: GameSettings = {\r\n  startingStability: 100,\r\n  maxStability: 100,\r\n  \r\n  // Enhanced stability mechanics\r\n  stabilityMechanics: {\r\n    baseStability: 100,\r\n    stabilityRanges: {\r\n      critical: [0, 25],    // Red zone - high risk\r\n      warning: [26, 50],    // Orange zone - medium risk  \r\n      stable: [51, 75],     // Yellow zone - low risk\r\n      optimal: [76, 100],   // Green zone - safe\r\n    },\r\n    impactMultipliers: {\r\n      easy: { correct: 2, incorrect: -5 },\r\n      medium: { correct: 3, incorrect: -8 },\r\n      hard: { correct: 5, incorrect: -12 },\r\n    },\r\n    consecutiveBonuses: {\r\n      correct: [0, 1, 2, 3, 5], // Bonus for streaks\r\n      incorrect: [0, -1, -2, -3, -5], // Penalty for streaks\r\n    },\r\n  },\r\n  \r\n  // Adaptive difficulty settings\r\n  adaptiveDifficulty: {\r\n    playerSkill: {\r\n      overallAccuracy: 0,\r\n      categoryAccuracy: {\r\n        'on-chain': 0,\r\n        'off-chain': 0,\r\n        'coin-mixing': 0,\r\n        'wallet-setup': 0,\r\n        'lightning': 0,\r\n        'regulatory': 0,\r\n        'best-practices': 0,\r\n        'network-privacy': 0,\r\n        'exchange-privacy': 0,\r\n        'api-privacy': 0,\r\n        'social-privacy': 0,\r\n        'transaction-security': 0,\r\n        'kyc-privacy': 0,\r\n        'security': 0,\r\n        'physical-privacy': 0,\r\n      },\r\n      difficultyPerformance: {\r\n        easy: 0,\r\n        medium: 0,\r\n        hard: 0,\r\n      },\r\n    },\r\n    dynamicAdjustment: {\r\n      questionSelection: 'adaptive',\r\n      difficultyProgression: 'adaptive',\r\n      stabilityScaling: 'dynamic',\r\n    },\r\n  },\r\n  \r\n  // Achievement settings\r\n  achievementSettings: {\r\n    perfectRoundThreshold: 10,\r\n    survivorThreshold: 15,\r\n    fastThinkerThreshold: 10,\r\n    stabilityMasterThreshold: 80,\r\n    learningMasterThreshold: 90,\r\n  },\r\n  \r\n  // Question settings\r\n  questionSettings: {\r\n    timeLimitEnabled: true,\r\n    defaultTimeLimit: 30,\r\n    hintsEnabled: true,\r\n    maxHintsPerQuestion: 3,\r\n    progressiveDifficulty: true,\r\n  },\r\n};\r\n\r\n// Enhanced achievement definitions\r\nconst ACHIEVEMENTS: Omit<Achievement, 'isUnlocked' | 'unlockedAt'>[] = [\r\n  {\r\n    id: 'perfect-round',\r\n    name: 'Perfect Round',\r\n    description: 'Answered all questions correctly in a tower',\r\n    icon: '🎯',\r\n    category: 'gameplay',\r\n    points: 100,\r\n    condition: {\r\n      type: 'perfect_round',\r\n      value: DEFAULT_SETTINGS.achievementSettings.perfectRoundThreshold,\r\n      description: 'Complete a tower without any wrong answers'\r\n    }\r\n  },\r\n  {\r\n    id: 'survivor',\r\n    name: 'Survivor',\r\n    description: 'Lasted many turns before tower collapse',\r\n    icon: '🧱',\r\n    category: 'gameplay',\r\n    points: 75,\r\n    condition: {\r\n      type: 'survivor',\r\n      value: DEFAULT_SETTINGS.achievementSettings.survivorThreshold,\r\n      description: 'Survive many turns before the tower collapses'\r\n    }\r\n  },\r\n  {\r\n    id: 'privacy-pro',\r\n    name: 'Privacy Pro',\r\n    description: 'Completed all 54 privacy questions',\r\n    icon: '🔒',\r\n    category: 'learning',\r\n    points: 500,\r\n    condition: {\r\n      type: 'privacy_pro',\r\n      value: 54,\r\n      description: 'Learn all privacy concepts in the game'\r\n    }\r\n  },\r\n  {\r\n    id: 'fast-thinker',\r\n    name: 'Fast Thinker',\r\n    description: 'Answered questions within time limit',\r\n    icon: '⚡',\r\n    category: 'gameplay',\r\n    points: 50,\r\n    condition: {\r\n      type: 'fast_thinker',\r\n      value: DEFAULT_SETTINGS.achievementSettings.fastThinkerThreshold,\r\n      description: 'Answer questions quickly'\r\n    }\r\n  },\r\n  {\r\n    id: 'consecutive-master',\r\n    name: 'Consecutive Master',\r\n    description: 'Answered many questions correctly in a row',\r\n    icon: '🔥',\r\n    category: 'mastery',\r\n    points: 150,\r\n    condition: {\r\n      type: 'consecutive_correct',\r\n      value: 5,\r\n      description: 'Answer 5 questions correctly in a row'\r\n    }\r\n  },\r\n  {\r\n    id: 'stability-master',\r\n    name: 'Stability Master',\r\n    description: 'Maintained high tower stability throughout',\r\n    icon: '🏗️',\r\n    category: 'mastery',\r\n    points: 200,\r\n    condition: {\r\n      type: 'stability_master',\r\n      value: DEFAULT_SETTINGS.achievementSettings.stabilityMasterThreshold,\r\n      description: 'Keep tower stability above 80%'\r\n    }\r\n  },\r\n  {\r\n    id: 'category-explorer',\r\n    name: 'Category Explorer',\r\n    description: 'Explored all privacy categories',\r\n    icon: '🗺️',\r\n    category: 'learning',\r\n    points: 100,\r\n    condition: {\r\n      type: 'all_categories',\r\n      value: 7,\r\n      description: 'Learn from all 7 privacy categories'\r\n    }\r\n  },\r\n  {\r\n    id: 'learning-master',\r\n    name: 'Learning Master',\r\n    description: 'Achieved high learning effectiveness',\r\n    icon: '🧠',\r\n    category: 'learning',\r\n    points: 300,\r\n    condition: {\r\n      type: 'learning_master',\r\n      value: DEFAULT_SETTINGS.achievementSettings.learningMasterThreshold,\r\n      description: 'Achieve high learning effectiveness score'\r\n    }\r\n  }\r\n];\r\n\r\n// Enhanced content tracker implementation\r\nclass EnhancedContentTrackerImpl implements ContentTracker {\r\n  public shownContent: Set<string> = new Set();\r\n  public availableContent: BlockContent[] = [];\r\n  public questionBank: EnhancedQuestion[] = [];\r\n\r\n  constructor() {\r\n    this.initializeQuestionBank();\r\n  }\r\n\r\n  private initializeQuestionBank(): void {\r\n    // Use the enhanced question database\r\n    this.questionBank = ENHANCED_PRIVACY_QUESTIONS;\r\n    this.availableContent = this.questionBank.map(q => this.createBlockContent(q));\r\n  }\r\n\r\n  private createBlockContent(question: EnhancedQuestion): BlockContent {\r\n    return {\r\n      id: question.id,\r\n      type: 'QUESTION',\r\n      difficulty: question.difficulty,\r\n      category: question.category,\r\n      title: `Question: ${question.question.substring(0, 50)}...`,\r\n      content: question.explanation,\r\n      question,\r\n    };\r\n  }\r\n\r\n  getUnseenContent(difficulty?: Difficulty, category?: PrivacyCategory): BlockContent[] {\r\n    return this.availableContent.filter(content => {\r\n      const notShown = !this.shownContent.has(content.id);\r\n      const matchesDifficulty = !difficulty || content.difficulty === difficulty;\r\n      const matchesCategory = !category || content.category === category;\r\n      return notShown && matchesDifficulty && matchesCategory;\r\n    });\r\n  }\r\n\r\n  markAsShown(contentId: string): void {\r\n    this.shownContent.add(contentId);\r\n  }\r\n\r\n  isAllContentShown(): boolean {\r\n    return this.shownContent.size >= this.availableContent.length;\r\n  }\r\n\r\n  getCompletionPercentage(): number {\r\n    return (this.shownContent.size / this.availableContent.length) * 100;\r\n  }\r\n\r\n  selectOptimalQuestion(): BlockContent | null {\r\n    // Implement intelligent question selection based on player context\r\n    const unseenContent = this.getUnseenContent();\r\n    if (unseenContent.length === 0) return null;\r\n\r\n    // Simple selection for now - will be enhanced with adaptive logic\r\n    return unseenContent[Math.floor(Math.random() * unseenContent.length)];\r\n  }\r\n\r\n  getQuestionByDifficulty(difficulty: Difficulty): BlockContent[] {\r\n    return this.availableContent.filter(content => content.difficulty === difficulty);\r\n  }\r\n\r\n  getQuestionByCategory(category: PrivacyCategory): BlockContent[] {\r\n    return this.availableContent.filter(content => content.category === category);\r\n  }\r\n}\r\n\r\nclass EnhancedGameService {\r\n  private gameState: GameState;\r\n  private settings: GameSettings;\r\n  private blocks: Block[] = [];\r\n  private contentTracker: ContentTracker;\r\n  private sessionStartTime: Date;\r\n  private lastAnswerTime?: Date;\r\n\r\n  constructor() {\r\n    this.settings = DEFAULT_SETTINGS;\r\n    this.contentTracker = new EnhancedContentTrackerImpl();\r\n    this.sessionStartTime = new Date();\r\n    this.gameState = this.createInitialGameState();\r\n  }\r\n\r\n  // Initialize a new game\r\n  initializeGame(): GameState {\r\n    this.blocks = this.createTower();\r\n    this.gameState = this.createInitialGameState();\r\n    this.gameState.totalBlocks = this.blocks.length;\r\n    this.gameState.totalContentAvailable = this.contentTracker.availableContent.length;\r\n    this.sessionStartTime = new Date();\r\n    return this.gameState;\r\n  }\r\n\r\n  // Get current game state\r\n  getGameState(): GameState {\r\n    return this.gameState;\r\n  }\r\n\r\n  // Get all blocks\r\n  getBlocks(): Block[] {\r\n    return this.blocks;\r\n  }\r\n\r\n  // Handle block click (now always shows a question)\r\n  handleBlockClick(blockId: string): BlockContent | null {\r\n    const block = this.blocks.find(b => b.id === blockId);\r\n    if (!block || block.isRemoved) {\r\n      return null;\r\n    }\r\n\r\n    // Mark content as shown\r\n    this.contentTracker.markAsShown(block.content.id);\r\n    this.gameState.contentShown.add(block.content.id);\r\n    this.gameState.totalContentShown = this.gameState.contentShown.size;\r\n\r\n    // Update game state\r\n    this.gameState.selectedBlockId = blockId;\r\n    block.hasBeenShown = true;\r\n    \r\n    // Record the move\r\n    this.recordGameMove('block_clicked', 'success', 0, 0, block.content);\r\n    \r\n    console.log(`📚 Content shown: ${block.content.title} (${block.content.category})`);\r\n    console.log(`📊 Total content shown: ${this.gameState.totalContentShown}/${this.gameState.totalContentAvailable}`);\r\n    \r\n    return block.content;\r\n  }\r\n\r\n  // Enhanced quiz answer handling\r\n  handleQuizAnswer(blockId: string, selectedAnswer: number): QuizResult {\r\n    const block = this.blocks.find(b => b.id === blockId);\r\n    if (!block || !block.content.question) {\r\n      throw new Error('Invalid block or no question found');\r\n    }\r\n\r\n    const question = block.content.question;\r\n    const isCorrect = selectedAnswer === question.correctIndex;\r\n    \r\n    console.log(`🧠 Quiz answer: ${selectedAnswer}, Correct: ${question.correctIndex}, IsCorrect: ${isCorrect}`);\r\n    \r\n    // Calculate enhanced stability impact\r\n    const stabilityChange = this.calculateStabilityImpact(question, isCorrect);\r\n    const pointsEarned = isCorrect ? question.points.correct : question.points.incorrect;\r\n\r\n    // Calculate time to answer\r\n    const timeToAnswer = this.lastAnswerTime ? \r\n      (Date.now() - this.lastAnswerTime.getTime()) / 1000 : undefined;\r\n\r\n    // Update adaptive difficulty\r\n    this.updateAdaptiveDifficulty(isCorrect, question);\r\n\r\n    // Update game state\r\n    if (isCorrect) {\r\n      this.gameState.correctAnswers++;\r\n      this.gameState.currentScore += pointsEarned;\r\n      this.gameState.consecutiveCorrect++;\r\n      this.gameState.consecutiveIncorrect = 0;\r\n    } else {\r\n      this.gameState.incorrectAnswers++;\r\n      this.gameState.consecutiveIncorrect++;\r\n      this.gameState.consecutiveCorrect = 0;\r\n    }\r\n\r\n    // REMOVE THE BLOCK - This was the missing piece!\r\n    block.isRemoved = true;\r\n    this.gameState.blocksRemoved++;\r\n    \r\n    // Update player statistics\r\n    this.gameState.currentPlayer.totalBlocksRemoved++;\r\n    if (isCorrect) {\r\n      this.gameState.currentPlayer.totalCorrectAnswers++;\r\n    } else {\r\n      this.gameState.currentPlayer.totalIncorrectAnswers++;\r\n    }\r\n\r\n    // Update tower stability\r\n    const oldStability = this.gameState.towerStability;\r\n    this.gameState.towerStability = Math.max(0, \r\n      Math.min(100, this.gameState.towerStability + stabilityChange)\r\n    );\r\n    \r\n    console.log(`🏗️ Tower stability: ${oldStability}% → ${this.gameState.towerStability}% (change: ${stabilityChange})`);\r\n\r\n    // Check if tower collapsed\r\n    if (this.gameState.towerStability <= 0) {\r\n      this.gameState.gamePhase = 'collapsed';\r\n      this.gameState.towerCollapsed = true;\r\n      console.log('💥 Tower collapsed!');\r\n    }\r\n\r\n    // Create enhanced quiz result\r\n    const quizResult: QuizResult = {\r\n      blockId,\r\n      question: question.question,\r\n      selectedAnswer,\r\n      correctAnswer: question.correctIndex,\r\n      isCorrect,\r\n      explanation: question.explanation,\r\n      pointsEarned,\r\n      stabilityChange,\r\n      timeToAnswer,\r\n      difficulty: question.difficulty,\r\n      category: question.category,\r\n      learningTags: question.learningTags,\r\n      adaptiveImpact: {\r\n        skillAdjustment: isCorrect ? 1 : -1,\r\n        categoryAdjustment: isCorrect ? 0.5 : -0.5,\r\n        difficultyAdjustment: isCorrect ? 0.2 : -0.2,\r\n      },\r\n    };\r\n\r\n    this.gameState.lastQuizResult = quizResult;\r\n    \r\n    // Record the move\r\n    this.recordGameMove('question_answered', isCorrect ? 'success' : 'failure', pointsEarned, stabilityChange, block.content);\r\n\r\n    // Update player progress\r\n    this.updatePlayerProgress(quizResult);\r\n\r\n    // Check achievements\r\n    this.checkAchievements();\r\n\r\n    console.log(`📊 Quiz result: ${isCorrect ? '✅ Correct' : '❌ Incorrect'}, Stability: ${stabilityChange}, Score: +${pointsEarned}`);\r\n\r\n    return quizResult;\r\n  }\r\n\r\n  // Enhanced stability calculation\r\n  private calculateStabilityImpact(question: EnhancedQuestion, isCorrect: boolean): number {\r\n    // Use the question's stability impact directly\r\n    const baseImpact = isCorrect ? \r\n      question.stabilityImpact.correct : \r\n      question.stabilityImpact.incorrect;\r\n\r\n    // Apply consecutive bonus/penalty\r\n    const consecutiveArray = isCorrect ? \r\n      this.settings.stabilityMechanics.consecutiveBonuses.correct :\r\n      this.settings.stabilityMechanics.consecutiveBonuses.incorrect;\r\n    \r\n    const consecutiveIndex = Math.min(\r\n      isCorrect ? this.gameState.consecutiveCorrect : this.gameState.consecutiveIncorrect,\r\n      consecutiveArray.length - 1\r\n    );\r\n    const consecutiveBonus = consecutiveArray[consecutiveIndex];\r\n\r\n    // Apply stability-based scaling\r\n    const currentStability = this.gameState.towerStability;\r\n    let stabilityMultiplier = 1;\r\n    \r\n    if (currentStability <= 25) {\r\n      // Critical zone - reduce penalties, increase rewards\r\n      stabilityMultiplier = isCorrect ? 1.5 : 0.5;\r\n    } else if (currentStability <= 50) {\r\n      // Warning zone - moderate scaling\r\n      stabilityMultiplier = isCorrect ? 1.2 : 0.8;\r\n    } else if (currentStability >= 80) {\r\n      // Optimal zone - reduce rewards, increase penalties\r\n      stabilityMultiplier = isCorrect ? 0.8 : 1.2;\r\n    }\r\n\r\n    const finalImpact = Math.round(baseImpact * (1 + consecutiveBonus * 0.1) * stabilityMultiplier);\r\n    \r\n    console.log(`🔧 Stability calculation: base=${baseImpact}, consecutive=${consecutiveBonus}, multiplier=${stabilityMultiplier}, final=${finalImpact}`);\r\n    \r\n    return finalImpact;\r\n  }\r\n\r\n  // Enhanced adaptive difficulty update\r\n  private updateAdaptiveDifficulty(_isCorrect: boolean, question: EnhancedQuestion): void {\r\n    // Update overall accuracy\r\n    const totalAnswers = this.gameState.correctAnswers + this.gameState.incorrectAnswers;\r\n    if (totalAnswers > 0) {\r\n      this.settings.adaptiveDifficulty.playerSkill.overallAccuracy = \r\n        (this.gameState.correctAnswers / totalAnswers) * 100;\r\n    }\r\n\r\n    // Update category accuracy\r\n    const categoryAttempts = this.gameState.playerProgress.questionHistory\r\n      .filter(q => q.category === question.category);\r\n    const categoryCorrect = categoryAttempts.filter(q => q.isCorrect).length;\r\n    if (categoryAttempts.length > 0) {\r\n      this.settings.adaptiveDifficulty.playerSkill.categoryAccuracy[question.category] = \r\n        (categoryCorrect / categoryAttempts.length) * 100;\r\n    }\r\n\r\n    // Update difficulty performance\r\n    const difficultyAttempts = this.gameState.playerProgress.questionHistory\r\n      .filter(q => q.difficulty === question.difficulty);\r\n    const difficultyCorrect = difficultyAttempts.filter(q => q.isCorrect).length;\r\n    if (difficultyAttempts.length > 0) {\r\n      this.settings.adaptiveDifficulty.playerSkill.difficultyPerformance[question.difficulty] = \r\n        (difficultyCorrect / difficultyAttempts.length) * 100;\r\n    }\r\n\r\n    // Adjust current difficulty based on performance\r\n    this.adjustDifficulty();\r\n  }\r\n\r\n  private adjustDifficulty(): void {\r\n    const overallAccuracy = this.settings.adaptiveDifficulty.playerSkill.overallAccuracy;\r\n    const currentDifficulty = this.gameState.currentDifficulty;\r\n\r\n    if (overallAccuracy >= 80 && currentDifficulty !== 'hard') {\r\n      // High accuracy - increase difficulty\r\n      if (currentDifficulty === 'easy') {\r\n        this.gameState.currentDifficulty = 'medium';\r\n      } else if (currentDifficulty === 'medium') {\r\n        this.gameState.currentDifficulty = 'hard';\r\n      }\r\n    } else if (overallAccuracy <= 40 && currentDifficulty !== 'easy') {\r\n      // Low accuracy - decrease difficulty\r\n      if (currentDifficulty === 'hard') {\r\n        this.gameState.currentDifficulty = 'medium';\r\n      } else if (currentDifficulty === 'medium') {\r\n        this.gameState.currentDifficulty = 'easy';\r\n      }\r\n    }\r\n  }\r\n\r\n  // Enhanced player progress update\r\n  private updatePlayerProgress(quizResult: QuizResult): void {\r\n    const questionAttempt: QuestionAttempt = {\r\n      questionId: quizResult.blockId,\r\n      isCorrect: quizResult.isCorrect,\r\n      timeToAnswer: quizResult.timeToAnswer || 0,\r\n      stabilityImpact: quizResult.stabilityChange,\r\n      pointsEarned: quizResult.pointsEarned,\r\n      timestamp: new Date(),\r\n      difficulty: quizResult.difficulty,\r\n      category: quizResult.category,\r\n    };\r\n\r\n    this.gameState.playerProgress.questionHistory.push(questionAttempt);\r\n\r\n    // Update category mastery\r\n    const categoryAttempts = this.gameState.playerProgress.questionHistory\r\n      .filter(q => q.category === quizResult.category);\r\n    const categoryCorrect = categoryAttempts.filter(q => q.isCorrect).length;\r\n    this.gameState.playerProgress.categoryMastery[quizResult.category] = \r\n      categoryAttempts.length > 0 ? (categoryCorrect / categoryAttempts.length) * 100 : 0;\r\n\r\n    // Update difficulty progression\r\n    const difficultyAttempts = this.gameState.playerProgress.questionHistory\r\n      .filter(q => q.difficulty === quizResult.difficulty);\r\n    const difficultyCorrect = difficultyAttempts.filter(q => q.isCorrect).length;\r\n    this.gameState.playerProgress.difficultyProgression[quizResult.difficulty] = \r\n      difficultyAttempts.length > 0 ? (difficultyCorrect / difficultyAttempts.length) * 100 : 0;\r\n\r\n    // Update adaptive metrics\r\n    this.updateAdaptiveMetrics();\r\n  }\r\n\r\n  private updateAdaptiveMetrics(): void {\r\n    const totalAttempts = this.gameState.playerProgress.questionHistory.length;\r\n    if (totalAttempts === 0) return;\r\n\r\n    const correctAttempts = this.gameState.playerProgress.questionHistory\r\n      .filter(q => q.isCorrect).length;\r\n    \r\n    // Calculate skill level (0-100)\r\n    this.gameState.adaptiveMetrics.skillLevel = (correctAttempts / totalAttempts) * 100;\r\n\r\n    // Calculate learning rate (recent performance vs overall)\r\n    const recentAttempts = this.gameState.playerProgress.questionHistory\r\n      .slice(-10); // Last 10 attempts\r\n    const recentCorrect = recentAttempts.filter(q => q.isCorrect).length;\r\n    const recentAccuracy = recentAttempts.length > 0 ? (recentCorrect / recentAttempts.length) * 100 : 0;\r\n    \r\n    this.gameState.adaptiveMetrics.learningRate = recentAccuracy - this.gameState.adaptiveMetrics.skillLevel;\r\n\r\n    // Determine difficulty preference\r\n    const difficultyPerformance = this.gameState.playerProgress.difficultyProgression;\r\n    const bestDifficulty = Object.entries(difficultyPerformance)\r\n      .reduce((a, b) => difficultyPerformance[a[0] as Difficulty] > difficultyPerformance[b[0] as Difficulty] ? a : b)[0] as Difficulty;\r\n    this.gameState.adaptiveMetrics.difficultyPreference = bestDifficulty;\r\n\r\n    // Determine category strengths and weaknesses\r\n    const categoryMastery = this.gameState.playerProgress.categoryMastery;\r\n    const strengths = Object.entries(categoryMastery)\r\n      .filter(([_, mastery]) => mastery >= 70)\r\n      .map(([category, _]) => category as PrivacyCategory);\r\n    const weaknesses = Object.entries(categoryMastery)\r\n      .filter(([_, mastery]) => mastery <= 30)\r\n      .map(([category, _]) => category as PrivacyCategory);\r\n\r\n    this.gameState.adaptiveMetrics.categoryStrengths = strengths;\r\n    this.gameState.adaptiveMetrics.categoryWeaknesses = weaknesses;\r\n  }\r\n\r\n  // Rebuild tower after collapse\r\n  rebuildTower(): GameState {\r\n    if (this.gameState.gamePhase !== 'collapsed') {\r\n      return this.gameState;\r\n    }\r\n\r\n    // Check if there's unseen content to continue\r\n    const unseenContent = this.contentTracker.getUnseenContent();\r\n    if (unseenContent.length === 0) {\r\n      this.gameState.gamePhase = 'completed';\r\n      return this.gameState;\r\n    }\r\n\r\n    // Rebuild tower with unseen content\r\n    this.blocks = this.createTower();\r\n    this.gameState.gamePhase = 'playing';\r\n    this.gameState.towerStability = this.settings.startingStability;\r\n    this.gameState.blocksRemoved = 0;\r\n    this.gameState.totalBlocks = this.blocks.length;\r\n    this.gameState.towerCollapsed = false;\r\n    this.gameState.rebuildCount++;\r\n\r\n    // Reset consecutive counters for new tower\r\n    this.gameState.consecutiveCorrect = 0;\r\n    this.gameState.consecutiveIncorrect = 0;\r\n\r\n    // Record the rebuild\r\n    this.recordGameMove('tower_rebuilt', 'success', 0, 0, unseenContent[0]);\r\n\r\n    return this.gameState;\r\n  }\r\n\r\n  // Reset game\r\n  resetGame(): GameState {\r\n    this.blocks = this.createTower();\r\n    this.gameState = this.createInitialGameState();\r\n    this.gameState.totalBlocks = this.blocks.length;\r\n    this.gameState.totalContentAvailable = this.contentTracker.availableContent.length;\r\n    this.sessionStartTime = new Date();\r\n    return this.gameState;\r\n  }\r\n\r\n  // Get enhanced game statistics\r\n  getGameStatistics(): GameStatistics {\r\n    const totalGames = this.gameState.currentPlayer.gamesPlayed;\r\n    const averageScore = totalGames > 0 ? this.gameState.currentPlayer.totalScore / totalGames : 0;\r\n    const sessionDuration = (Date.now() - this.sessionStartTime.getTime()) / (1000 * 60); // minutes\r\n\r\n    return {\r\n      totalGamesPlayed: totalGames,\r\n      totalScore: this.gameState.currentPlayer.totalScore,\r\n      averageScore: Math.round(averageScore),\r\n      bestScore: this.gameState.currentPlayer.highScore,\r\n      totalBlocksRemoved: this.gameState.currentPlayer.totalBlocksRemoved,\r\n      totalCorrectAnswers: this.gameState.currentPlayer.totalCorrectAnswers,\r\n      totalIncorrectAnswers: this.gameState.currentPlayer.totalIncorrectAnswers,\r\n      averageStability: this.gameState.towerStability,\r\n      categoriesMastered: this.getMasteredCategories(),\r\n      learningProgress: this.gameState.learningProgress,\r\n      \r\n      // Achievement statistics\r\n      totalAchievements: this.gameState.currentPlayer.totalAchievements,\r\n      achievementsUnlocked: this.gameState.currentPlayer.achievements.filter(a => a.isUnlocked),\r\n      \r\n      // Session statistics\r\n      totalPlayTime: this.gameState.currentPlayer.totalPlayTime + sessionDuration,\r\n      longestSession: Math.max(this.gameState.currentPlayer.longestSession, sessionDuration),\r\n      averageSessionLength: totalGames > 0 ? (this.gameState.currentPlayer.totalPlayTime + sessionDuration) / totalGames : 0,\r\n      \r\n      // Learning statistics\r\n      totalContentLearned: this.gameState.totalContentShown,\r\n      completionRate: this.contentTracker.getCompletionPercentage(),\r\n      \r\n      // Enhanced learning metrics\r\n      adaptiveMetrics: this.gameState.adaptiveMetrics,\r\n      learningEffectiveness: {\r\n        knowledgeRetention: this.calculateKnowledgeRetention(),\r\n        skillProgression: this.gameState.adaptiveMetrics.learningRate,\r\n        categoryMastery: this.calculateAverageCategoryMastery(),\r\n        difficultyAdaptation: this.calculateDifficultyAdaptation(),\r\n      },\r\n    };\r\n  }\r\n\r\n  // Private helper methods\r\n  private createInitialGameState(): GameState {\r\n    return {\r\n      gamePhase: 'playing',\r\n      currentScore: 0,\r\n      towerStability: this.settings.startingStability,\r\n      blocksRemoved: 0,\r\n      totalBlocks: 0,\r\n      correctAnswers: 0,\r\n      incorrectAnswers: 0,\r\n      \r\n      // Enhanced learning progress\r\n      totalContentShown: 0,\r\n      totalContentAvailable: this.contentTracker.availableContent.length,\r\n      contentShown: new Set(),\r\n      \r\n      // Adaptive difficulty\r\n      currentDifficulty: 'easy',\r\n      consecutiveCorrect: 0,\r\n      consecutiveIncorrect: 0,\r\n      \r\n      // Enhanced player state\r\n      currentPlayer: this.createDefaultPlayer(),\r\n      \r\n      // Game history\r\n      gameHistory: [],\r\n      learningProgress: this.createInitialLearningProgress(),\r\n      \r\n      // Tower state\r\n      towerCollapsed: false,\r\n      rebuildCount: 0,\r\n      \r\n      // Enhanced features\r\n      playerProgress: this.createInitialPlayerProgress(),\r\n      adaptiveMetrics: this.createInitialAdaptiveMetrics(),\r\n    };\r\n  }\r\n\r\n  private createDefaultPlayer(): Player {\r\n    return {\r\n      id: 'default-player',\r\n      nickname: 'Privacy Explorer',\r\n      score: 0,\r\n      totalScore: 0,\r\n      highScore: 0,\r\n      gamesPlayed: 0,\r\n      totalBlocksRemoved: 0,\r\n      totalCorrectAnswers: 0,\r\n      totalIncorrectAnswers: 0,\r\n      learningProgress: this.createInitialLearningProgress(),\r\n      \r\n      // Enhanced achievement tracking\r\n      achievements: ACHIEVEMENTS.map(achievement => ({\r\n        ...achievement,\r\n        isUnlocked: false,\r\n        unlockedAt: undefined\r\n      })),\r\n      totalAchievements: 0,\r\n      \r\n      // Session tracking\r\n      currentSessionStart: new Date(),\r\n      longestSession: 0,\r\n      totalPlayTime: 0,\r\n      \r\n      // Enhanced learning metrics\r\n      playerProgress: this.createInitialPlayerProgress(),\r\n      adaptiveMetrics: this.createInitialAdaptiveMetrics(),\r\n    };\r\n  }\r\n\r\n  private createInitialLearningProgress(): Record<PrivacyCategory, number> {\r\n    return {\r\n      'on-chain': 0,\r\n      'off-chain': 0,\r\n      'coin-mixing': 0,\r\n      'wallet-setup': 0,\r\n      'lightning': 0,\r\n      'regulatory': 0,\r\n      'best-practices': 0,\r\n      'network-privacy': 0,\r\n      'exchange-privacy': 0,\r\n      'api-privacy': 0,\r\n      'social-privacy': 0,\r\n      'transaction-security': 0,\r\n      'kyc-privacy': 0,\r\n      'security': 0,\r\n      'physical-privacy': 0\r\n    };\r\n  }\r\n\r\n  private createInitialPlayerProgress(): PlayerProgress {\r\n    return {\r\n      questionHistory: [],\r\n      categoryMastery: this.createInitialLearningProgress(),\r\n      difficultyProgression: { easy: 0, medium: 0, hard: 0 },\r\n      learningPath: {\r\n        currentPhase: 'foundation',\r\n        phaseProgress: 0,\r\n        requiredAccuracy: 70,\r\n        unlockedQuestions: [],\r\n        completedQuestions: [],\r\n      },\r\n      adaptiveMetrics: this.createInitialAdaptiveMetrics(),\r\n    };\r\n  }\r\n\r\n  private createInitialAdaptiveMetrics(): AdaptiveMetrics {\r\n    return {\r\n      skillLevel: 0,\r\n      learningRate: 0,\r\n      retentionRate: 0,\r\n      difficultyPreference: 'easy',\r\n      categoryStrengths: [],\r\n      categoryWeaknesses: [],\r\n    };\r\n  }\r\n\r\n  private createTower(): Block[] {\r\n    const blocks: Block[] = [];\r\n    let blockId = 1;\r\n\r\n    // Get unseen content for this tower\r\n    const unseenContent = this.contentTracker.getUnseenContent();\r\n    if (unseenContent.length === 0) {\r\n      // If no unseen content, reset the tracker and use all content\r\n      this.contentTracker.shownContent.clear();\r\n      unseenContent.push(...this.contentTracker.availableContent);\r\n    }\r\n\r\n    // Create 18 layers with 3 blocks per layer (except top layer)\r\n    for (let layer = 1; layer <= 18; layer++) {\r\n      const blocksInLayer = layer === 18 ? 1 : 3; // Top layer has 1 block\r\n      \r\n      for (let position = 1; position <= blocksInLayer; position++) {\r\n        // Get content for this specific block, ensuring variety\r\n        const content = this.getContentForBlock(unseenContent, layer, position);\r\n        \r\n        // Calculate centered positions for each layer\r\n        let xOffset = 0;\r\n        if (blocksInLayer === 3) {\r\n          // For 3-block layers, center them around 0\r\n          xOffset = (position - 2) * 1.2; // -1.2, 0, 1.2\r\n        }\r\n        // For 1-block top layer, xOffset remains 0 (centered)\r\n        \r\n        const worldPosition: [number, number, number] = [\r\n          xOffset,                                    // X position (centered)\r\n          (18 - layer) * 0.4,                        // Y position (height from bottom)\r\n          layer % 2 === 0 ? 0 : 0.75                 // Z position (alternating, reduced spacing)\r\n        ];\r\n\r\n        blocks.push({\r\n          id: `block-${blockId++}`,\r\n          type: 'QUESTION',\r\n          content,\r\n          isRemoved: false,\r\n          layer,\r\n          position,\r\n          worldPosition,\r\n          category: content.category,\r\n          difficulty: content.difficulty,\r\n          hasBeenShown: false\r\n        });\r\n      }\r\n    }\r\n\r\n    return blocks;\r\n  }\r\n\r\n\r\n\r\n  private getContentForBlock(availableContent: BlockContent[], layer: number, position: number): BlockContent {\r\n    // Determine difficulty based on layer (matching visual design)\r\n    let targetDifficulty: Difficulty;\r\n    if (layer <= 6) {\r\n      targetDifficulty = 'hard'; // Bottom layers = Red = Hard\r\n    } else if (layer <= 12) {\r\n      targetDifficulty = 'medium'; // Middle layers = Orange = Medium\r\n    } else {\r\n      targetDifficulty = 'easy'; // Top layers = Green = Easy\r\n    }\r\n\r\n    // Filter content by target difficulty\r\n    const difficultyContent = availableContent.filter(content => \r\n      content.difficulty === targetDifficulty\r\n    );\r\n\r\n    // If no content for target difficulty, use any available content\r\n    const contentPool = difficultyContent.length > 0 ? difficultyContent : availableContent;\r\n    \r\n    // Use deterministic selection based on layer and position to ensure variety\r\n    const seed = layer * 100 + position;\r\n    const index = seed % contentPool.length;\r\n    return contentPool[index];\r\n  }\r\n\r\n  private checkAchievements(): void {\r\n    // Perfect Round - no mistakes in current tower\r\n    if (this.gameState.incorrectAnswers === 0 && this.gameState.blocksRemoved >= this.settings.achievementSettings.perfectRoundThreshold) {\r\n      this.unlockAchievement('perfect-round');\r\n    }\r\n\r\n    // Survivor - lasted many turns (only for correct answers)\r\n    if (this.gameState.correctAnswers >= this.settings.achievementSettings.survivorThreshold) {\r\n      this.unlockAchievement('survivor');\r\n    }\r\n\r\n    // Fast Thinker - answered quickly (only for correct answers)\r\n    if (this.gameState.lastQuizResult?.isCorrect && \r\n        this.gameState.lastQuizResult?.timeToAnswer && \r\n        this.gameState.lastQuizResult.timeToAnswer <= this.settings.achievementSettings.fastThinkerThreshold) {\r\n      this.unlockAchievement('fast-thinker');\r\n    }\r\n\r\n    // Consecutive Master\r\n    if (this.gameState.consecutiveCorrect >= 5) {\r\n      this.unlockAchievement('consecutive-master');\r\n    }\r\n\r\n    // Stability Master - only if maintaining high stability\r\n    if (this.gameState.towerStability >= this.settings.achievementSettings.stabilityMasterThreshold && \r\n        this.gameState.blocksRemoved >= 5) {\r\n      this.unlockAchievement('stability-master');\r\n    }\r\n\r\n    // Category Explorer - only for correct answers\r\n    const exploredCategories = Object.values(this.gameState.learningProgress).filter(progress => progress > 0).length;\r\n    if (exploredCategories >= 7 && this.gameState.correctAnswers >= 10) {\r\n      this.unlockAchievement('category-explorer');\r\n    }\r\n\r\n    // Learning Master - only for high accuracy\r\n    if (this.gameState.adaptiveMetrics.skillLevel >= this.settings.achievementSettings.learningMasterThreshold && \r\n        this.gameState.correctAnswers >= 20) {\r\n      this.unlockAchievement('learning-master');\r\n    }\r\n  }\r\n\r\n  private unlockAchievement(achievementId: string): void {\r\n    const achievement = this.gameState.currentPlayer.achievements.find(a => a.id === achievementId);\r\n    if (achievement && !achievement.isUnlocked) {\r\n      achievement.isUnlocked = true;\r\n      achievement.unlockedAt = new Date();\r\n      this.gameState.currentPlayer.totalAchievements++;\r\n      this.gameState.currentPlayer.score += achievement.points;\r\n      this.gameState.currentScore += achievement.points;\r\n      \r\n      console.log(`🏆 Achievement unlocked: ${achievement.name} - ${achievement.description}`);\r\n    }\r\n  }\r\n\r\n  private recordGameMove(\r\n    action: GameMove['action'],\r\n    result: GameMove['result'],\r\n    points: number,\r\n    stabilityChange: number,\r\n    content: BlockContent\r\n  ): void {\r\n    const move: GameMove = {\r\n      id: `move-${Date.now()}`,\r\n      blockId: this.gameState.selectedBlockId || '',\r\n      action,\r\n      result,\r\n      points,\r\n      stabilityChange,\r\n      timestamp: new Date(),\r\n      content,\r\n      difficulty: this.gameState.currentDifficulty,\r\n    };\r\n\r\n    this.gameState.gameHistory.push(move);\r\n  }\r\n\r\n  private getMasteredCategories(): PrivacyCategory[] {\r\n    return Object.entries(this.gameState.learningProgress)\r\n      .filter(([_, progress]) => progress >= 3) // Consider mastered after 3 interactions\r\n      .map(([category, _]) => category as PrivacyCategory);\r\n  }\r\n\r\n  private calculateKnowledgeRetention(): number {\r\n    // Calculate based on recent vs older performance\r\n    const history = this.gameState.playerProgress.questionHistory;\r\n    if (history.length < 10) return 0;\r\n\r\n    const recent = history.slice(-10);\r\n    const older = history.slice(-20, -10);\r\n    \r\n    const recentAccuracy = recent.filter(q => q.isCorrect).length / recent.length;\r\n    const olderAccuracy = older.filter(q => q.isCorrect).length / older.length;\r\n    \r\n    return Math.max(0, (recentAccuracy - olderAccuracy) * 100);\r\n  }\r\n\r\n  private calculateAverageCategoryMastery(): number {\r\n    const masteries = Object.values(this.gameState.playerProgress.categoryMastery);\r\n    return masteries.reduce((sum, mastery) => sum + mastery, 0) / masteries.length;\r\n  }\r\n\r\n  private calculateDifficultyAdaptation(): number {\r\n    const difficulties = Object.values(this.gameState.playerProgress.difficultyProgression);\r\n    return difficulties.reduce((sum, perf) => sum + perf, 0) / difficulties.length;\r\n  }\r\n\r\n  // Public method to set answer time for Fast Thinker achievement\r\n  setAnswerStartTime(): void {\r\n    this.lastAnswerTime = new Date();\r\n  }\r\n}\r\n\r\nexport const enhancedGameService = new EnhancedGameService();\r\nexport default enhancedGameService;\r\n","import React, { useState, useEffect, useCallback } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { \r\n  ArrowLeft, \r\n  BarChart3, \r\n  HelpCircle, \r\n  Brain\r\n} from 'lucide-react';\r\nimport SimplifiedJengaTower from '../components/jenga/SimplifiedJengaTower';\r\nimport ContentModal from '../components/ContentModal';\r\nimport GameHelp from '../components/GameHelp';\r\nimport GameTutorial from '../components/GameTutorial';\r\nimport GameStats from '../components/GameStats';\r\nimport EndgameSummary from '../components/EndgameSummary';\r\nimport { MobileControls } from '../components/mobile/MobileControls';\r\n\r\n// Import responsive design hooks\r\nimport { useResponsiveDesign } from '../hooks/useResponsiveDesign';\r\n\r\n// Import enhanced game service\r\nimport enhancedGameService from '../services/simplifiedGameService';\r\nimport { Block, BlockContent, GameState, Achievement } from '../types';\r\n\r\n// Error Boundary Component to prevent crashes\r\nclass GameErrorBoundary extends React.Component<\r\n  { children: React.ReactNode },\r\n  { hasError: boolean; error?: Error }\r\n> {\r\n  constructor(props: { children: React.ReactNode }) {\r\n    super(props);\r\n    this.state = { hasError: false };\r\n  }\r\n\r\n  static getDerivedStateFromError(error: Error) {\r\n    return { hasError: true, error };\r\n  }\r\n\r\n  componentDidCatch(error: Error, errorInfo: React.ErrorInfo) {\r\n    console.error('🚨 Game Error Boundary caught error:', error, errorInfo);\r\n  }\r\n\r\n  render() {\r\n    if (this.state.hasError) {\r\n      return (\r\n        <div className=\"min-h-screen bg-gradient-to-br from-blue-900 via-purple-900 to-indigo-900 flex items-center justify-center p-8\">\r\n          <div className=\"bg-white/10 backdrop-blur-lg rounded-2xl p-8 max-w-md text-center border border-white/20\">\r\n            <div className=\"text-6xl mb-4\">💥</div>\r\n            <h2 className=\"text-2xl font-bold text-white mb-4\">Game Error Detected</h2>\r\n            <p className=\"text-gray-300 mb-6\">\r\n              Something went wrong with the game. Don&apos;t worry, your progress is safe!\r\n            </p>\r\n            <button\r\n              onClick={() => window.location.reload()}\r\n              className=\"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-semibold transition-colors\"\r\n            >\r\n              Reload Game\r\n            </button>\r\n            <div className=\"mt-4 text-xs text-gray-400\">\r\n              Error: {this.state.error?.message}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return this.props.children;\r\n  }\r\n}\r\n\r\nconst GamePage: React.FC = () => {\r\n  const [gameState, setGameState] = useState<GameState | null>(null);\r\n  const [blocks, setBlocks] = useState<Block[]>([]);\r\n  const [currentContent, setCurrentContent] = useState<BlockContent | null>(null);\r\n  const [showContentModal, setShowContentModal] = useState(false);\r\n  const [showHelp, setShowHelp] = useState(false);\r\n  const [showTutorial, setShowTutorial] = useState(false);\r\n  const [showStats, setShowStats] = useState(false);\r\n  const [showEndgameSummary, setShowEndgameSummary] = useState(false);\r\n  const [showQuickHelp, setShowQuickHelp] = useState(false);\r\n  const [selectedBlockId, setSelectedBlockId] = useState<string | undefined>(undefined);\r\n  \r\n  // Quiz system state\r\n  const [showQuiz, setShowQuiz] = useState(false);\r\n  \r\n  // Achievement notification state\r\n  const [showAchievementNotification, setShowAchievementNotification] = useState(false);\r\n  const [lastAchievement, setLastAchievement] = useState<Achievement | null>(null);\r\n  \r\n  // Mobile responsiveness\r\n  const { isMobile, isSmallMobile } = useResponsiveDesign();\r\n\r\n  // Initialize game\r\n  useEffect(() => {\r\n    const initializeGame = () => {\r\n      try {\r\n        const newGameState = enhancedGameService.initializeGame();\r\n        const newBlocks = enhancedGameService.getBlocks();\r\n        \r\n        setGameState(newGameState);\r\n        setBlocks(newBlocks);\r\n        \r\n        console.log('🎮 Game initialized:', { gameState: newGameState, blocks: newBlocks.length });\r\n      } catch (error) {\r\n        console.error('🚨 Error initializing game:', error);\r\n      }\r\n    };\r\n\r\n    initializeGame();\r\n  }, []);\r\n\r\n  // Handle block click\r\n  const handleBlockClick = useCallback(async (block: Block) => {\r\n    if (!gameState || block.isRemoved) return;\r\n\r\n    try {\r\n      console.log('🎯 Block clicked:', block.id, block.type);\r\n      \r\n      // Get block content\r\n      const content = enhancedGameService.handleBlockClick(block.id);\r\n      if (!content) {\r\n        console.log('🚫 No content found for block:', block.id);\r\n        return;\r\n      }\r\n\r\n      setCurrentContent(content);\r\n      setSelectedBlockId(block.id);\r\n      \r\n      // Show quiz for question blocks\r\n      if (content.type === 'QUESTION') {\r\n        setShowQuiz(true);\r\n        setShowContentModal(true);\r\n        // Start timing for Fast Thinker achievement\r\n        enhancedGameService.setAnswerStartTime();\r\n      } else {\r\n        // For tip blocks, show content directly\r\n        setShowQuiz(false);\r\n        setShowContentModal(true);\r\n      }\r\n      \r\n    } catch (error) {\r\n      console.error('🚨 Error handling block click:', error);\r\n    }\r\n  }, [gameState]);\r\n\r\n\r\n\r\n  // Handle quiz answer\r\n  const handleQuizAnswer = useCallback(async (blockId: string, selectedAnswer: number) => {\r\n    if (!gameState) return;\r\n\r\n    try {\r\n      console.log('🧠 Quiz answer submitted:', { blockId, selectedAnswer });\r\n      \r\n      // Submit answer to game service\r\n      const quizResult = enhancedGameService.handleQuizAnswer(blockId, selectedAnswer);\r\n      \r\n      // Update game state and blocks\r\n      const updatedGameState = enhancedGameService.getGameState();\r\n      const updatedBlocks = enhancedGameService.getBlocks();\r\n      setGameState(updatedGameState);\r\n      setBlocks(updatedBlocks);\r\n      \r\n      // Show quiz result\r\n      setShowQuiz(false);\r\n      \r\n      console.log('✅ Quiz result:', quizResult);\r\n      console.log('📊 Updated stability:', updatedGameState.towerStability);\r\n      console.log('🧱 Blocks removed:', updatedGameState.blocksRemoved);\r\n      \r\n      // Check for new achievements\r\n      const currentAchievements = updatedGameState.currentPlayer.achievements;\r\n      const newAchievement = currentAchievements.find(a => \r\n        a.isUnlocked && a.unlockedAt && \r\n        Date.now() - a.unlockedAt.getTime() < 5000 // Show if unlocked in last 5 seconds\r\n      );\r\n      \r\n      if (newAchievement) {\r\n        setLastAchievement(newAchievement);\r\n        setShowAchievementNotification(true);\r\n        setTimeout(() => setShowAchievementNotification(false), 4000);\r\n      }\r\n      \r\n      // Check if tower collapsed - don't auto-rebuild, let the popup show\r\n      if (updatedGameState.gamePhase === 'collapsed') {\r\n        console.log('💥 Tower collapsed! Game end popup should show now.');\r\n        // Don't auto-rebuild - let the user see the game end popup first\r\n      }\r\n      \r\n    } catch (error) {\r\n      console.error('🚨 Error handling quiz answer:', error);\r\n    }\r\n  }, [gameState]);\r\n\r\n  // Close content modal\r\n  const handleCloseContentModal = useCallback(() => {\r\n    setShowContentModal(false);\r\n    setShowQuiz(false);\r\n    setSelectedBlockId(undefined);\r\n    setCurrentContent(null);\r\n  }, []);\r\n\r\n  // Reset game\r\n  const handleResetGame = useCallback(() => {\r\n    try {\r\n      const newGameState = enhancedGameService.resetGame();\r\n      const newBlocks = enhancedGameService.getBlocks();\r\n      \r\n      setGameState(newGameState);\r\n      setBlocks(newBlocks);\r\n      setShowContentModal(false);\r\n      setShowQuiz(false);\r\n      setShowEndgameSummary(false);\r\n      setSelectedBlockId(undefined);\r\n      setCurrentContent(null);\r\n      \r\n      console.log('🔄 Game reset successfully');\r\n    } catch (error) {\r\n      console.error('🚨 Error resetting game:', error);\r\n    }\r\n  }, []);\r\n\r\n  // Handle play again\r\n  const handlePlayAgain = useCallback(() => {\r\n    setShowEndgameSummary(false);\r\n    handleResetGame();\r\n  }, [handleResetGame]);\r\n\r\n  // Handle game restart from collapse popup\r\n  const handleGameRestart = useCallback(() => {\r\n    console.log('🔄 Restarting game from collapse popup');\r\n    handleResetGame();\r\n  }, [handleResetGame]);\r\n\r\n  // Get category icon for progress display (unused but kept for future reference)\r\n  // const getCategoryIcon = (category: PrivacyCategory) => {\r\n  //   const icons: Record<PrivacyCategory, React.ReactNode> = {\r\n  //     'on-chain': <Shield className=\"w-4 h-4\" />,\r\n  //     'off-chain': <Zap className=\"w-4 h-4\" />,\r\n  //     'coin-mixing': <Target className=\"w-4 h-4\" />,\r\n  //     'wallet-setup': <BookOpen className=\"w-4 h-4\" />,\r\n  //     'lightning': <Zap className=\"w-4 h-4\" />,\r\n  //     'regulatory': <Award className=\"w-4 h-4\" />,\r\n  //     'best-practices': <Star className=\"w-4 h-4\" />\r\n  //   };\r\n  //   return icons[category];\r\n  // };\r\n\r\n  // Loading state\r\n  if (!gameState || !blocks.length) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gradient-to-br from-blue-900 via-purple-900 to-indigo-900 flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <div className=\"w-16 h-16 border-4 border-teal-400 border-t-transparent rounded-full animate-spin mx-auto mb-4\"></div>\r\n          <div className=\"text-teal-400 text-lg font-semibold\">Loading Privacy Jenga...</div>\r\n          <div className=\"text-gray-400 text-sm\">Preparing your privacy education journey</div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <GameErrorBoundary>\r\n      <div className=\"min-h-screen bg-gradient-to-br from-blue-900 via-purple-900 to-indigo-900\">\r\n        {/* Header */}\r\n        <header className=\"relative z-30 bg-black/20 backdrop-blur-sm border-b border-white/10\">\r\n          <div className=\"container mx-auto px-4 py-4\">\r\n            <div className=\"flex items-center justify-between\">\r\n              {/* Back Button */}\r\n              <motion.button\r\n                whileHover={{ scale: 1.05 }}\r\n                whileTap={{ scale: 0.95 }}\r\n                onClick={() => window.history.back()}\r\n                className={`flex items-center gap-2 text-white hover:text-teal-300 transition-colors ${\r\n                  isSmallMobile ? 'text-sm' : ''\r\n                }`}\r\n              >\r\n                <ArrowLeft className={isSmallMobile ? \"w-4 h-4\" : \"w-5 h-5\"} />\r\n                {!isSmallMobile && \"Back to Menu\"}\r\n              </motion.button>\r\n\r\n              {/* Game Title */}\r\n              <div className=\"text-center\">\r\n                <h1 className={`font-bold text-white ${\r\n                  isSmallMobile ? 'text-lg' : 'text-2xl'\r\n                }`}>Privacy Jenga</h1>\r\n                <p className={`text-gray-300 ${\r\n                  isSmallMobile ? 'text-xs' : 'text-sm'\r\n                }`}>Learn Bitcoin Privacy Through Play</p>\r\n              </div>\r\n\r\n              {/* Action Buttons */}\r\n              <div className={`flex items-center gap-2 ${\r\n                isSmallMobile ? 'gap-1' : ''\r\n              }`}>\r\n                <motion.button\r\n                  whileHover={{ scale: 1.05 }}\r\n                  whileTap={{ scale: 0.95 }}\r\n                  onClick={() => setShowStats(true)}\r\n                  className={`text-white hover:text-yellow-300 transition-colors ${\r\n                    isSmallMobile ? 'p-1' : 'p-2'\r\n                  }`}\r\n                  title=\"Game Statistics\"\r\n                >\r\n                  <BarChart3 className={isSmallMobile ? \"w-4 h-4\" : \"w-5 h-5\"} />\r\n                </motion.button>\r\n                \r\n                <motion.button\r\n                  whileHover={{ scale: 1.05 }}\r\n                  whileTap={{ scale: 0.95 }}\r\n                  onClick={() => setShowHelp(true)}\r\n                  className={`text-white hover:text-blue-300 transition-colors ${\r\n                    isSmallMobile ? 'p-1' : 'p-2'\r\n                  }`}\r\n                  title=\"Game Help\"\r\n                >\r\n                  <HelpCircle className={isSmallMobile ? \"w-4 h-4\" : \"w-5 h-5\"} />\r\n                </motion.button>\r\n                \r\n                <motion.button\r\n                  whileHover={{ scale: 1.05 }}\r\n                  whileTap={{ scale: 0.95 }}\r\n                  onClick={() => setShowTutorial(true)}\r\n                  className={`text-white hover:text-green-300 transition-colors ${\r\n                    isSmallMobile ? 'p-1' : 'p-2'\r\n                  }`}\r\n                  title=\"Game Tutorial\"\r\n                >\r\n                  <Brain className={isSmallMobile ? \"w-4 h-4\" : \"w-5 h-5\"} />\r\n                </motion.button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </header>\r\n\r\n        {/* Game Progress Bar */}\r\n        <div className=\"bg-black/20 backdrop-blur-sm border-b border-white/10 px-4 py-2\">\r\n          <div className=\"container mx-auto\">\r\n            <div className=\"flex items-center justify-between text-sm text-gray-300 mb-2\">\r\n              <span>Learning Progress</span>\r\n              <span>{gameState.totalContentShown}/{gameState.totalContentAvailable} concepts</span>\r\n            </div>\r\n            <div className=\"w-full bg-gray-700 rounded-full h-2\">\r\n              <div \r\n                className=\"bg-gradient-to-r from-blue-500 to-purple-500 h-2 rounded-full transition-all duration-500\"\r\n                style={{ width: `${(gameState.totalContentShown / gameState.totalContentAvailable) * 100}%` }}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Game Stats Bar */}\r\n        <div className=\"bg-black/10 backdrop-blur-sm px-4 py-3\">\r\n          <div className=\"container mx-auto\">\r\n            <div className={`grid gap-4 text-center ${\r\n              isSmallMobile ? 'grid-cols-2 gap-2' : \r\n              isMobile ? 'grid-cols-2 gap-3' : \r\n              'grid-cols-2 md:grid-cols-4 gap-4'\r\n            }`}>\r\n              <div>\r\n                <div className={`font-bold text-yellow-400 ${\r\n                  isSmallMobile ? 'text-base' : 'text-lg'\r\n                }`}>{gameState.currentScore}</div>\r\n                <div className={`text-gray-400 ${\r\n                  isSmallMobile ? 'text-xs' : 'text-xs'\r\n                }`}>Score</div>\r\n              </div>\r\n              <div>\r\n                <div className={`font-bold text-green-400 ${\r\n                  isSmallMobile ? 'text-base' : 'text-lg'\r\n                }`}>{gameState.towerStability}%</div>\r\n                <div className={`text-gray-400 ${\r\n                  isSmallMobile ? 'text-xs' : 'text-xs'\r\n                }`}>Stability</div>\r\n              </div>\r\n              {!isSmallMobile && (\r\n                <>\r\n                  <div>\r\n                    <div className={`font-bold text-blue-400 ${\r\n                      isMobile ? 'text-base' : 'text-lg'\r\n                    }`}>{gameState.currentDifficulty}</div>\r\n                    <div className=\"text-xs text-gray-400\">Difficulty</div>\r\n                  </div>\r\n                  <div>\r\n                    <div className={`font-bold text-purple-400 ${\r\n                      isMobile ? 'text-base' : 'text-lg'\r\n                    }`}>{gameState.currentPlayer.totalAchievements}</div>\r\n                    <div className=\"text-xs text-gray-400\">Achievements</div>\r\n                  </div>\r\n                </>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Main Game Area */}\r\n        <main className=\"flex-1 relative\">\r\n          {/* Simplified Jenga Tower */}\r\n          <SimplifiedJengaTower\r\n            blocks={blocks}\r\n            onBlockClick={handleBlockClick}\r\n            gameState={gameState}\r\n            selectedBlockId={selectedBlockId}\r\n            onGameRestart={handleGameRestart}\r\n          />\r\n\r\n          {/* Quick Help Button */}\r\n          <div className=\"absolute bottom-4 left-4 z-20\">\r\n            <button\r\n              onClick={() => setShowQuickHelp(!showQuickHelp)}\r\n              className=\"bg-black/80 backdrop-blur-sm rounded-lg p-3 border border-gray-600/50 hover:bg-gray-700/80 transition-colors\"\r\n              title=\"Quick Help\"\r\n            >\r\n              <div className=\"text-center\">\r\n                <div className=\"text-gray-300 text-sm font-semibold\">?</div>\r\n                <div className=\"text-gray-400 text-xs\">Help</div>\r\n              </div>\r\n            </button>\r\n            \r\n                    {/* Quick help tooltip */}\r\n        {showQuickHelp && (\r\n          <div className=\"absolute bottom-full left-0 mb-2 bg-black/90 backdrop-blur-sm rounded-lg p-3 border border-gray-600/50 max-w-xs z-30\">\r\n            <div className=\"text-gray-300 text-xs space-y-1\">\r\n              <div className=\"font-semibold text-white mb-2\">Quick Tips:</div>\r\n              <div>• Click on any block to reveal content</div>\r\n              <div>• Answer questions correctly to maintain stability</div>\r\n              <div>• Learn all 54 Bitcoin privacy concepts</div>\r\n              <div>• Difficulty adapts to your performance</div>\r\n              <div>• Green = Safe, Orange = Medium, Red = Risky</div>\r\n            </div>\r\n          </div>\r\n        )}\r\n          </div>\r\n\r\n          {/* Tower Collapse Button removed - now handled by popup */}\r\n        </main>\r\n\r\n        {/* Achievement Notification */}\r\n        {showAchievementNotification && lastAchievement && (\r\n          <motion.div\r\n            initial={{ opacity: 0, y: -50, scale: 0.9 }}\r\n            animate={{ opacity: 1, y: 0, scale: 1 }}\r\n            exit={{ opacity: 0, y: -50, scale: 0.9 }}\r\n            className=\"fixed top-4 right-4 z-50 bg-gradient-to-r from-yellow-500/90 to-orange-500/90 backdrop-blur-sm rounded-lg p-4 border border-yellow-400/50 shadow-lg\"\r\n          >\r\n            <div className=\"flex items-center gap-3\">\r\n              <div className=\"text-3xl\">{lastAchievement.icon}</div>\r\n              <div>\r\n                <div className=\"font-bold text-white\">{lastAchievement.name}</div>\r\n                <div className=\"text-sm text-yellow-100\">{lastAchievement.description}</div>\r\n                <div className=\"text-xs text-yellow-200\">+{lastAchievement.points} points</div>\r\n              </div>\r\n            </div>\r\n          </motion.div>\r\n        )}\r\n\r\n        {/* Content Modal */}\r\n        <ContentModal\r\n          content={currentContent}\r\n          isOpen={showContentModal}\r\n          onClose={handleCloseContentModal}\r\n          onQuizAnswer={handleQuizAnswer}\r\n          showQuiz={showQuiz}\r\n          gameState={gameState}\r\n          blockId={selectedBlockId}\r\n        />\r\n\r\n        {/* Game Help Modal */}\r\n        {showHelp && (\r\n          <GameHelp isOpen={showHelp} onClose={() => setShowHelp(false)} />\r\n        )}\r\n\r\n        {/* Game Tutorial Modal */}\r\n        {showTutorial && (\r\n          <GameTutorial isOpen={showTutorial} onClose={() => setShowTutorial(false)} />\r\n        )}\r\n\r\n        {/* Game Stats Modal */}\r\n        {showStats && (\r\n          <GameStats\r\n            player={gameState.currentPlayer}\r\n            statistics={enhancedGameService.getGameStatistics()}\r\n            onClose={() => setShowStats(false)}\r\n          />\r\n        )}\r\n\r\n        {/* Endgame Summary Modal */}\r\n        {showEndgameSummary && (\r\n          <EndgameSummary\r\n            gameState={gameState}\r\n            gameHistory={gameState.gameHistory}\r\n            achievements={gameState.currentPlayer.achievements}\r\n            onPlayAgain={handlePlayAgain}\r\n            onClose={() => setShowEndgameSummary(false)}\r\n            isOpen={showEndgameSummary}\r\n          />\r\n        )}\r\n\r\n        {/* Mobile Controls */}\r\n        {isMobile && (\r\n          <MobileControls\r\n            onReset={handleResetGame}\r\n            onHelp={() => setShowHelp(true)}\r\n            onTutorial={() => setShowTutorial(true)}\r\n          />\r\n        )}\r\n      </div>\r\n    </GameErrorBoundary>\r\n  );\r\n};\r\n\r\nexport default GamePage;\r\n","import { Routes, Route } from 'react-router-dom';\r\nimport HomePage from './pages/HomePage';\r\nimport GamePage from './pages/GamePage';\r\n\r\nfunction App() {\r\n  return (\r\n    <Routes>\r\n      <Route path=\"/\" element={<HomePage />} />\r\n      <Route path=\"/game\" element={<GamePage />} />\r\n    </Routes>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom/client'\r\nimport { BrowserRouter } from 'react-router-dom'\r\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query'\r\nimport { Toaster } from 'react-hot-toast'\r\nimport App from './App.tsx'\r\nimport './index.css'\r\n\r\n// Create a client for React Query\r\nconst queryClient = new QueryClient({\r\n  defaultOptions: {\r\n    queries: {\r\n      retry: 1,\r\n      refetchOnWindowFocus: false,\r\n      staleTime: 5 * 60 * 1000, // 5 minutes\r\n    },\r\n  },\r\n})\r\n\r\n// Debug output\r\nconsole.log('🚀 Privacy Jenga app is starting...');\r\nconsole.log('📍 Current location:', window.location.href);\r\nconsole.log('🔧 Environment mode:', (import.meta as any).env.MODE);\r\nconsole.log('🏠 Base name will be:', (import.meta as any).env.PROD ? \"/Privacy-Jenga\" : \"/\");\r\n\r\nReactDOM.createRoot(document.getElementById('root')!).render(\r\n  <React.StrictMode>\r\n    <QueryClientProvider client={queryClient}>\r\n      <BrowserRouter basename={(import.meta as any).env.PROD ? \"/Privacy-Jenga\" : \"/\"}>\r\n        <App />\r\n        <Toaster \r\n          position=\"top-right\"\r\n          toastOptions={{\r\n            duration: 4000,\r\n            style: {\r\n              background: '#1f2937',\r\n              color: '#f9fafb',\r\n              borderRadius: '8px',\r\n            },\r\n            success: {\r\n              iconTheme: {\r\n                primary: '#22c55e',\r\n                secondary: '#f9fafb',\r\n              },\r\n            },\r\n            error: {\r\n              iconTheme: {\r\n                primary: '#ef4444',\r\n                secondary: '#f9fafb',\r\n              },\r\n            },\r\n          }}\r\n        />\r\n      </BrowserRouter>\r\n    </QueryClientProvider>\r\n  </React.StrictMode>,\r\n)\r\n"],"names":["_extends","target","i","source","key","Action","PopStateEventType","createBrowserHistory","options","createBrowserLocation","window","globalHistory","pathname","search","hash","createLocation","createBrowserHref","to","createPath","getUrlBasedHistory","invariant","value","message","warning","cond","createKey","getHistoryState","location","index","current","state","parsePath","_ref","path","parsedPath","hashIndex","searchIndex","getLocation","createHref","validateLocation","v5Compat","action","listener","getIndex","handlePop","nextIndex","delta","history","push","historyState","url","error","replace","createURL","base","href","fn","n","ResultType","matchRoutes","routes","locationArg","basename","matchRoutesImpl","allowPartial","stripBasename","branches","flattenRoutes","rankRouteBranches","matches","decoded","decodePath","matchRouteBranch","parentsMeta","parentPath","flattenRoute","route","relativePath","meta","joinPaths","routesMeta","computeScore","_route$path","exploded","explodeOptionalSegments","segments","first","rest","isOptional","required","restExploded","result","subpath","a","b","compareIndexes","paramRe","dynamicSegmentValue","indexRouteValue","emptySegmentValue","staticSegmentValue","splatPenalty","isSplat","s","initialScore","score","segment","branch","matchedParams","matchedPathname","end","remainingPathname","match","matchPath","normalizePathname","pattern","matcher","compiledParams","compilePath","pathnameBase","captureGroups","memo","paramName","splatValue","caseSensitive","params","regexpSource","_","v","startIndex","nextChar","resolvePath","fromPathname","toPathname","resolvePathname","normalizeSearch","normalizeHash","getInvalidPathError","char","field","dest","getPathContributingMatches","getResolveToMatches","v7_relativeSplatPath","pathMatches","idx","resolveTo","toArg","routePathnames","locationPathname","isPathRelative","isEmptyPath","from","routePathnameIndex","toSegments","hasExplicitTrailingSlash","hasCurrentTrailingSlash","paths","isRouteErrorResponse","validMutationMethodsArr","validRequestMethodsArr","DataRouterContext","React.createContext","DataRouterStateContext","NavigationContext","LocationContext","RouteContext","RouteErrorContext","useInRouterContext","React.useContext","useLocation","UNSAFE_invariant","useIsomorphicLayoutEffect","cb","React.useLayoutEffect","useNavigate","isDataRoute","useNavigateStable","useNavigateUnstable","dataRouterContext","future","navigator","routePathnamesJson","UNSAFE_getResolveToMatches","activeRef","React.useRef","React.useCallback","useRoutes","useRoutesImpl","dataRouterState","parentMatches","routeMatch","parentParams","parentPathnameBase","locationFromContext","_parsedLocationArg$pa","parsedLocationArg","parentSegments","renderedMatches","_renderMatches","React.createElement","DefaultErrorComponent","useRouteError","stack","preStyles","React.Fragment","defaultErrorElement","RenderErrorBoundary","React.Component","props","errorInfo","RenderedRoute","routeContext","children","_dataRouterState","_future","errors","errorIndex","m","renderFallback","fallbackIndex","loaderData","needsToRunLoader","outlet","shouldRenderHydrateFallback","errorElement","hydrateFallbackElement","warningOnce","getChildren","DataRouterHook","DataRouterStateHook","useDataRouterContext","hookName","ctx","useDataRouterState","useRouteContext","useCurrentRouteId","thisRoute","_state$errors","routeId","router","id","alreadyWarned$1","logV6DeprecationWarnings","renderFuture","routerFuture","Route","_props","Router","_ref5","basenameProp","locationProp","navigationType","staticProp","navigationContext","React.useMemo","locationContext","trailingPathname","Routes","_ref6","createRoutesFromChildren","React.Children","element","React.isValidElement","treePath","REACT_ROUTER_VERSION","START_TRANSITION","startTransitionImpl","React","BrowserRouter","_ref4","historyRef","setStateImpl","React.useState","v7_startTransition","setState","newState","React.useEffect","UNSAFE_logV6DeprecationWarnings","Subscribable","isServer","noop","functionalUpdate","updater","input","isValidTimeout","timeUntilStale","updatedAt","staleTime","resolveStaleTime","query","resolveEnabled","enabled","matchQuery","filters","type","exact","fetchStatus","predicate","queryKey","stale","hashQueryKeyByOptions","partialMatchKey","isActive","matchMutation","mutation","status","mutationKey","hashKey","val","isPlainObject","replaceEqualDeep","array","isPlainArray","aItems","aSize","bItems","bSize","copy","aItemsSet","equalItems","o","hasObjectPrototype","ctor","prot","sleep","timeout","resolve","replaceData","prevData","data","addToEnd","items","item","max","newItems","addToStart","skipToken","ensureQueryFn","fetchOptions","FocusManager","_a","__privateAdd","_focused","_cleanup","_setup","__privateSet","onFocus","__privateGet","setup","focused","isFocused","focusManager","OnlineManager","_online","onOnline","onlineListener","offlineListener","online","onlineManager","pendingThenable","reject","thenable","_resolve","_reject","finalize","reason","defaultRetryDelay","failureCount","canFetch","networkMode","CancelledError","createRetryer","config","isRetryCancelled","continueFn","isResolved","cancel","cancelOptions","cancelRetry","continueRetry","canContinue","canStart","pause","continueResolve","run","promiseOrValue","initialPromise","retry","retryDelay","delay","shouldRetry","defaultScheduler","createNotifyManager","queue","transactions","notifyFn","callback","batchNotifyFn","scheduleFn","schedule","flush","originalQueue","args","notifyManager","Removable","_gcTimeout","newGcTime","Query","_Query_instances","_initialState","_revertState","_cache","_client","_retryer","_defaultOptions","_abortSignalConsumed","getDefaultState","newData","__privateMethod","dispatch_fn","setStateOptions","promise","_b","observer","x","abortController","addSignalProperty","object","fetchFn","queryFn","queryFnContext","queryFnContext2","context","context2","_c","_d","_f","_e","_h","_g","_j","_i","_l","_k","reducer","fetchState","hasData","initialDataUpdatedAt","QueryCache","_queries","client","queryHash","queryInMap","defaultedFilters","queries","event","Mutation","_Mutation_instances","_observers","_mutationCache","variables","onContinue","restored","isPaused","_n","_m","_p","_o","_r","_q","_t","_s","MutationCache","_mutations","_scopes","_mutationId","__privateWrapper","scope","scopeFor","scopedMutations","mutationsWithSameScope","firstPendingMutation","foundMutation","pausedMutations","infiniteQueryBehavior","pages","direction","oldPages","oldPageParams","currentPage","cancelled","fetchPage","param","previous","page","maxPages","addTo","pageParamFn","getPreviousPageParam","getNextPageParam","oldData","remainingPages","pageParams","lastIndex","QueryClient","_queryCache","_queryDefaults","_mutationDefaults","_mountCount","_unsubscribeFocus","_unsubscribeOnline","defaultedOptions","cachedData","queryCache","defaultedCancelOptions","promises","defaults","queryDefault","QueryClientContext","QueryClientProvider","jsx","e","t","l","r","c","p","u","d","f","g","h","j","W","F","A","Y","U","P","y","q","D","Q","H","J","K","X","Z","ee","O","$","L","S","E","oe","I","re","se","k","te","ne","ie","V","ae","pe","N","de","ce","ue","w","le","fe","me","Te","M","g.createElement","ye","ge","he","xe","be","B","Se","Ae","z","C","l.memo","l.createElement","l.Fragment","Re","T.createElement","ve","T.useCallback","Ee","De","Pe","R","Oe","defaultAttributes","toKebabCase","string","createLucideIcon","iconName","iconNode","Component","forwardRef","color","size","strokeWidth","absoluteStrokeWidth","className","ref","createElement","tag","attrs","AlertTriangle","ArrowLeft","Award","BarChart3","BookOpen","Brain","CheckCircle","Clock","Gamepad2","HelpCircle","Home","Lightbulb","Play","RefreshCw","Shield","Star","Target","Trophy","XCircle","Zap","MotionConfigContext","createContext","MotionContext","PresenceContext","isBrowser","useLayoutEffect","useEffect","LazyContext","camelToDash","str","optimizedAppearDataId","optimizedAppearDataAttribute","useVisualElement","visualState","createVisualElement","parent","useContext","lazyContext","presenceContext","reducedMotionConfig","visualElementRef","useRef","visualElement","useInsertionEffect","wantsHandoff","isRefObject","useMotionRef","externalRef","useCallback","instance","isVariantLabel","isAnimationControls","variantPriorityOrder","variantProps","isControllingVariants","name","isVariantNode","getCurrentTreeVariants","initial","animate","useCreateMotionContext","useMemo","variantLabelsAsDependency","prop","featureProps","featureDefinitions","loadFeatures","features","LayoutGroupContext","SwitchLayoutGroupContext","motionComponentSymbol","createMotionComponent","preloadedFeatures","useRender","useVisualState","MotionComponent","MeasureLayout","configAndProps","useLayoutId","isStatic","initialLayoutGroupConfig","isStrict","ForwardRefComponent","layoutId","layoutGroupId","createMotionProxy","createConfig","custom","customMotionComponentConfig","componentCache","_target","lowercaseSVGElements","isSVGComponent","scaleCorrectors","addScaleCorrector","correctors","transformPropOrder","transformProps","isForcedMotionValue","layout","isMotionValue","translateAlias","numTransforms","buildTransform","transform","enableHardwareAcceleration","allowTransformNone","transformIsDefault","transformTemplate","transformString","transformName","checkStringStartsWith","token","isCSSVariableName","isCSSVariableToken","cssVariableRegex","getValueAsType","clamp","min","number","alpha","scale","sanitize","floatRegex","colorRegex","singleColorRegex","isString","createUnitType","unit","degrees","percent","px","vh","vw","progressPercentage","int","numberValueTypes","buildHTMLStyles","latestValues","style","vars","transformOrigin","hasTransform","hasTransformOrigin","transformIsNone","valueType","valueAsType","originX","originY","originZ","createHtmlRenderState","copyRawValuesOnly","useInitialMotionValues","useStyle","styleProp","useHTMLProps","htmlProps","validMotionProps","isValidMotionProp","shouldForward","loadExternalIsValidProp","isValidProp","filterProps","isDom","forwardMotionProps","filteredProps","calcOrigin","origin","offset","calcSVGTransformOrigin","dimensions","pxOriginX","pxOriginY","dashKeys","camelKeys","buildSVGPath","length","spacing","useDashCase","keys","pathLength","pathSpacing","buildSVGAttrs","attrX","attrY","attrScale","pathOffset","latest","isSVGTag","createSvgRenderState","useSVGProps","_isStatic","visualProps","rawStyles","createUseRender","elementProps","renderedChildren","renderHTML","projection","camelCaseAttributes","renderSVG","renderState","_styleProp","scrapeMotionValuesFromProps","prevProps","newValues","scrapeMotionValuesFromProps$1","targetKey","resolveVariantFromProps","definition","currentValues","currentVelocity","useConstant","init","isKeyframesTarget","isCustomValue","resolveFinalValueInKeyframes","resolveMotionValue","unwrappedValue","makeState","createRenderState","onMount","makeLatestValues","makeUseVisualState","make","scrapeMotionValues","values","motionValues","isControllingVariants$1","isVariantNode$1","isInitialAnimationBlocked","variantToSet","resolved","transitionEnd","transition","valueTarget","any","Queue","process","createRenderStep","runNextFrame","thisFrame","nextFrame","numToRun","isProcessing","flushNextFrame","toKeepAlive","step","keepAlive","immediate","addToCurrentFrame","frameData","stepsOrder","maxElapsed","createRenderBatcher","scheduleNextBatch","allowKeepAlive","useDefaultElapsed","steps","acc","processStep","stepId","processBatch","timestamp","wake","frame","cancelFrame","svgMotionConfig","htmlMotionConfig","createDomMotionConfig","addDomEvent","eventName","handler","isPrimaryPointer","extractEventInfo","pointType","addPointerInfo","addPointerEvent","combineFunctions","pipe","transformers","createLock","lock","openLock","globalHorizontalLock","globalVerticalLock","getGlobalLock","drag","openHorizontal","openVertical","isDragActive","openGestureLock","Feature","node","addHoverEvent","callbackName","handleEvent","info","HoverGesture","FocusGesture","isFocusVisible","isNodeOrChild","child","fireSyntheticPointerEvent","syntheticPointerEvent","PressGesture","startEvent","startInfo","removePointerUpListener","endEvent","endInfo","onTap","onTapCancel","globalTapTarget","removePointerCancelListener","cancelEvent","cancelInfo","handleKeydown","keydownEvent","handleKeyup","keyupEvent","removeKeydownListener","handleBlur","removeBlurListener","onTapStart","whileTap","removePointerListener","removeFocusListener","observerCallbacks","observers","fireObserverCallback","entry","fireAllObserverCallbacks","entries","initIntersectionObserver","root","lookupRoot","rootObservers","observeIntersection","rootInteresectionObserver","thresholdNames","InViewFeature","viewport","rootMargin","amount","once","onIntersectionUpdate","isIntersecting","onViewportEnter","onViewportLeave","hasViewportOptionChanged","prevViewport","gestureAnimations","shallowCompare","next","prev","prevLength","getCurrent","getVelocity","velocity","resolveVariant","secondsToMilliseconds","seconds","millisecondsToSeconds","milliseconds","instantAnimationState","isBezierDefinition","easing","isWaapiSupportedEasing","supportedWaapiEasing","cubicBezierAsString","mapEasingToNativeEasing","animateStyle","valueName","keyframes","duration","repeat","repeatType","ease","times","keyframeOptions","getFinalKeyframe","calcBezier","a1","a2","subdivisionPrecision","subdivisionMaxIterations","binarySubdivide","lowerBound","upperBound","mX1","mX2","currentX","currentT","cubicBezier","mY1","mY2","getTForX","aX","easeIn","easeOut","easeInOut","isEasingArray","mirrorEasing","reverseEasing","circIn","circOut","circInOut","backOut","backIn","backInOut","anticipate","easingLookup","easingDefinitionToFunction","x1","y1","x2","y2","isColorString","testProp","splitColor","aName","bName","cName","clampRgbUnit","rgbUnit","rgba","red","green","blue","alpha$1","parseHex","hex","hsla","hue","saturation","lightness","mix","progress","hueToRgb","hslaToRgba","mixLinearColor","fromExpo","colorTypes","getColorType","asRGBA","model","mixColor","fromRGBA","toRGBA","blended","test","cssVarTokeniser","colorTokeniser","numberTokeniser","tokenise","regex","countKey","parse","analyseComplexValue","originalValue","parseComplexValue","createTransformer","numColors","numVars","tokenised","numValues","output","convertNumbersToZero","getAnimatableNone","parsed","complex","mixImmediate","getMixer","mixComplex","mixArray","blendValue","fromThis","mixObject","template","originStats","targetStats","toFromDifference","mixNumber","detectMixerFactory","createMixers","customMixer","mixers","mixerFactory","numMixers","mixer","easingFunction","interpolate","isClamp","inputLength","interpolator","progressInRange","fillOffset","remaining","offsetProgress","defaultOffset","arr","convertOffsetToTimes","defaultEasing","keyframeValues","easingFunctions","absoluteTimes","mapTimeToKeyframe","velocityPerSecond","frameDuration","velocitySampleDuration","calcGeneratorVelocity","resolveValue","prevT","safeMin","minDuration","maxDuration","minDamping","maxDamping","findSpring","bounce","mass","envelope","derivative","dampingRatio","undampedFreq","exponentialDecay","calcAngularFreq","initialGuess","approximateRoot","stiffness","rootIterations","durationKeys","physicsKeys","isSpringType","getSpringOptions","springOptions","derived","spring","restDelta","restSpeed","damping","isResolvedFromDuration","initialVelocity","initialDelta","undampedAngularFreq","isGranularScale","resolveSpring","angularFreq","dampedAngularFreq","freqForT","isBelowVelocityThreshold","isBelowDisplacementThreshold","inertia","power","timeConstant","bounceDamping","bounceStiffness","modifyTarget","isOutOfBounds","nearestBoundary","amplitude","ideal","calcDelta","calcLatest","applyFriction","timeReachedBoundary","spring$1","checkCatchBoundary","hasUpdatedFrame","frameloopDriver","update","passTimestamp","maxGeneratorDuration","calcGeneratorDuration","generator","timeStep","types","animateValue","autoplay","driver","keyframes$1","repeatDelay","onPlay","onStop","onComplete","onUpdate","speed","hasStopped","resolveFinishedPromise","currentFinishedPromise","updateFinishedPromise","animationDriver","generatorFactory","mapNumbersToKeyframes","mirroredGenerator","playState","holdTime","startTime","cancelTime","calculatedDuration","resolvedDuration","totalDuration","currentTime","tick","timeWithoutDelay","isInDelayPhase","elapsed","frameGenerator","currentIteration","iterationProgress","done","isAnimationFinished","finish","stopAnimationDriver","play","now","controls","newTime","newSpeed","supportsWaapi","acceleratedValues","sampleDelta","requiresPregeneratedKeyframes","createAcceleratedAnimation","pendingCancel","sampleAnimation","pregeneratedKeyframes","animation","cancelAnimation","safeCancel","timeline","createInstantAnimation","setValue","underDampedSpring","criticallyDampedSpring","keyframesTransition","getDefaultTransition","valueKey","isAnimatable","maxDefaults","applyDefaultFilter","defaultValue","functionRegex","filter","functions","defaultValueTypes","getDefaultValueType","defaultValueType","isZeroValueString","isNone","getKeyframes","isTargetAnimatable","defaultOrigin","animatableTemplateValue","noneKeyframeIndexes","isTransitionDefined","when","_delay","delayChildren","staggerChildren","staggerDirection","getValueTransition","MotionGlobalConfig","animateMotionValue","valueTransition","originKeyframe","targetKeyframe","isOriginAnimatable","acceleratedAnimation","isWillChangeMotionValue","isNumericalString","addUniqueItem","removeItem","SubscriptionManager","numSubscriptions","isFloat","MotionValue","render","subscription","unsubscribe","eventManagers","passiveEffect","stopPassiveEffect","startAnimation","motionValue","testValueType","auto","dimensionValueTypes","findDimensionValueType","valueTypes","findValueType","setMotionValue","setTarget","checkTargetForNewValues","newValueKeys","numNewValues","targetValue","getOriginFromTransition","getOrigin","transitionOrigin","shouldBlockAnimation","protectedKeys","needsAnimating","shouldBlock","hasKeyframesChanged","animateTarget","transitionOverride","willChange","animations","animationTypeState","appearId","canSkip","animateVariant","variant","getAnimation","getChildAnimations","forwardDelay","animateChildren","last","maxStaggerDuration","generateStaggerDuration","sortByTreeOrder","animateVisualElement","resolvedDefinition","reversePriorityOrder","numAnimationTypes","animateList","createAnimationState","createState","isInitialRender","buildResolvedTypeValues","setAnimateFunction","makeAnimator","animateChanges","changedActiveType","removedKeys","encounteredKeys","removedVariantIndex","typeState","propIsVariant","activeDelta","isInherited","shouldAnimateType","checkVariantsDidChange","handledRemovedValues","definitionList","resolvedValues","prevResolvedValues","allKeys","markToAnimate","valueHasChanged","fallbackAnimation","fallbackTarget","shouldAnimate","setActive","createTypeState","AnimationFeature","prevAnimate","ExitAnimationFeature","isPresent","onExitComplete","prevIsPresent","exitAnimation","register","distance","distance2D","xDelta","yDelta","PanSession","handlers","transformPagePoint","contextWindow","dragSnapToOrigin","getPanInfo","isPanStarted","isDistancePastThreshold","point","onStart","onMove","transformPoint","onEnd","onSessionEnd","resumeAnimation","panInfo","initialInfo","onSessionStart","subtractPoint","lastDevicePoint","startDevicePoint","timeDelta","timestampedPoint","lastPoint","time","calcLength","axis","isNear","maxDistance","calcAxisDelta","calcBoxDelta","calcRelativeAxis","relative","calcRelativeBox","calcRelativeAxisPosition","calcRelativePosition","applyConstraints","elastic","calcRelativeAxisConstraints","calcRelativeConstraints","layoutBox","top","left","bottom","right","calcViewportAxisConstraints","layoutAxis","constraintsAxis","calcViewportConstraints","constraintsBox","sourceLength","targetLength","rebaseAxisConstraints","constraints","relativeConstraints","defaultElastic","resolveDragElastic","dragElastic","resolveAxisElastic","minLabel","maxLabel","resolvePointElastic","label","createAxisDelta","createDelta","createAxis","createBox","eachAxis","convertBoundingBoxToBox","convertBoxToBoundingBox","transformBoxPoints","topLeft","bottomRight","isIdentityScale","hasScale","scaleX","scaleY","has2DTranslate","is2DTranslate","scalePoint","originPoint","distanceFromOrigin","scaled","applyPointDelta","translate","boxScale","applyAxisDelta","applyBoxDelta","box","applyTreeDeltas","treeScale","isSharedTransition","treeLength","transformBox","snapToDefault","translateAxis","transformAxis","transforms","scaleKey","originKey","axisOrigin","xKeys","yKeys","measureViewportBox","measurePageBox","rootProjectionNode","viewportBox","scroll","getContextWindow","elementDragControls","VisualElementDragControls","originEvent","snapToCursor","dragPropagation","onDragStart","measuredAxis","animationState","dragDirectionLock","onDirectionLock","onDrag","getCurrentDirection","isDragging","onDragEnd","_point","shouldDrag","axisValue","dragConstraints","prevConstraints","onMeasureDragConstraints","constraintsElement","measuredConstraints","userConstraints","dragMomentum","dragTransition","onDragTransitionEnd","momentumAnimations","dragKey","externalMotionValue","boxProgress","stopPointerListener","dragListener","measureDragConstraints","stopMeasureLayoutListener","stopResizeListener","stopLayoutUpdateListener","hasLayoutChanged","currentDirection","lockThreshold","DragGesture","dragControls","asyncHandler","PanGesture","pointerDownEvent","onPanSessionStart","onPanStart","onPan","onPanEnd","usePresence","useId","globalProjectionState","pixelsToPercent","pixels","correctBorderRadius","correctBoxShadow","projectionDelta","original","shadow","xScale","yScale","averageScale","MeasureLayoutWithContext","React__default","layoutGroup","switchLayoutGroup","defaultScaleCorrectors","layoutDependency","promoteContext","safeToRemove","borders","numBorders","asNumber","isPx","mixValues","follow","lead","shouldCrossfadeOpacity","isOnlyMember","easeCrossfadeIn","easeCrossfadeOut","borderLabel","followRadius","getRadius","leadRadius","radiusName","compress","copyAxisInto","originAxis","copyBoxInto","originBox","removePointDelta","removeAxisDelta","sourceAxis","removeAxisTransforms","removeBoxTransforms","sourceBox","isAxisDeltaZero","isDeltaZero","boxEquals","boxEqualsRounded","aspectRatio","NodeStack","prevLead","indexOfNode","member","preserveFollowOpacity","crossfade","resumingFrom","buildProjectionTransform","latestTransform","xTranslate","yTranslate","rotate","rotateX","rotateY","elementScaleX","elementScaleY","compareByDepth","FlatTree","start","checkElapsed","record","isSVGElement","animateSingleValue","motionValue$1","transformAxes","hiddenVisibility","animationTarget","projectionFrameData","createProjectionNode","attachResizeListener","defaultParent","measureScroll","checkIsScrollRoot","resetTransform","propagateDirtyNodes","resolveTargetDelta","calcProjection","cleanDirtyNodes","subscriptionManager","isLayoutDirty","cancelDelay","resizeUnblockUpdate","finishAnimation","hasRelativeTargetChanged","newLayout","layoutTransition","defaultLayoutTransition","onLayoutAnimationStart","onLayoutAnimationComplete","targetChanged","hasOnlyRelativeTargetChanged","animationOptions","resetRotation","shouldNotifyListeners","clearMeasurements","clearIsLayoutDirty","resetTransformStyle","updateLayout","notifyLayoutUpdate","clearSnapshot","removeLeadSnapshots","prevLayout","phase","needsMeasurement","isResetRequested","hasProjection","transformTemplateValue","transformTemplateHasChanged","removeTransform","pageBox","roundBox","boxWithoutScroll","rootScroll","transformOnly","withTransforms","boxWithoutTransform","nodeBox","forceRecalculation","isShared","relativeParent","prevTreeScaleX","prevTreeScaleY","prevProjectionTransform","notifyAll","snapshot","snapshotLatestValues","mixedValues","targetDelta","relativeLayout","snapshotSource","layoutSource","isSharedLayoutAnimation","hasOpacityCrossfade","prevRelativeTarget","mixAxisDelta","mixBox","targetWithTransforms","shouldAnimatePositionOnly","xLength","yLength","needsReset","hasRotate","resetValues","styles","emptyStyles","valuesToRender","correct","applyTo","corrected","num","measuredLayout","animationType","axisSnapshot","layoutDelta","visualDelta","parentSnapshot","parentLayout","relativeSnapshot","mixAxis","userAgentContains","roundPoint","roundAxis","DocumentProjectionNode","notify","HTMLProjectionNode","documentNode","splitCSSVariableRegex","parseCSSVariable","fallback","getVariableValue","depth","trimmed","resolveCSSVariables","positionalKeys","isPositionalKey","hasPositionalKey","isNumOrPxType","getPosFromMatrix","matrix","pos","getTranslateFromMatrix","pos2","pos3","_bbox","matrix3d","transformKeys","nonTranslationalTransformKeys","removeNonTranslationalTransform","removedTransforms","positionalValues","paddingLeft","paddingRight","paddingTop","paddingBottom","convertChangedValueTypes","changedKeys","originBbox","elementComputedStyle","display","targetBbox","checkAndConvertChangedValueTypes","targetPositionalKeys","removedTransformValues","hasAttemptedToRemoveTransformValues","changedValueTypeKeys","fromType","toType","numKeyframes","fromIndex","scrollY","convertedTarget","unitConversion","parseDomVariant","prefersReducedMotion","hasReducedMotionListener","initPrefersReducedMotion","motionMediaQuery","setReducedMotionPreferences","updateMotionValuesFromProps","nextValue","prevValue","existingValue","latestValue","visualElementStore","featureNames","numFeatures","propEventHandlers","numVariantProps","VisualElement","initialMotionValues","_prevProps","remove","valueIsTransform","removeOnChange","removeOnRenderRequest","other","renderedProps","ProjectionNodeConstructor","isEnabled","FeatureConstructor","ProjectionNode","MeasureLayoutComponent","layoutScroll","layoutRoot","feature","canMutate","startAtParent","closestVariantNode","valueFromInitial","DOMVisualElement","transformValues","isMounted","getComputedStyle","HTMLVisualElement","defaultType","computedStyle","SVGVisualElement","createDomVisualElement","motion","useIsMounted","useForceUpdate","forcedRenderCount","setForcedRenderCount","useState","forceRender","PopChildMeasure","PopChild","width","height","React.cloneElement","PresenceChild","presenceAffectsLayout","mode","presenceChildren","newChildrenMap","childId","isComplete","useUnmountEffect","getChildKey","updateChildLookup","allChildren","onlyElements","filtered","Children","isValidElement","AnimatePresence","exitBeforeEnter","filteredChildren","childrenToRender","exitingChildren","presentChildren","presentKeys","targetKeys","numPresent","component","insertionIndex","exitingComponent","onExit","leftOverKeys","childKey","leftOverKey","presentChild","presentChildKey","cloneElement","GameTutorial","isOpen","onClose","onStartTutorial","onStartGame","jsxs","bitsaccoLogo","BitsaccoLogo","HomePage","navigate","showTutorial","setShowTutorial","showWelcome","setShowWelcome","handleStartGame","handleStartTutorial","useResponsiveDesign","isMobile","setIsMobile","isTablet","setIsTablet","isDesktop","setIsDesktop","isSmallMobile","setIsSmallMobile","isLargeMobile","setIsLargeMobile","screenWidth","setScreenWidth","screenHeight","setScreenHeight","checkScreenSize","SimplifiedJengaTower","blocks","onBlockClick","gameState","selectedBlockId","onGameRestart","showGameInfo","setShowGameInfo","showStabilityWarning","setShowStabilityWarning","lastStabilityLevel","setLastStabilityLevel","warningTimer","setWarningTimer","visibleBlocks","block","handleBlockClick","currentStabilityLevel","timer","getBlockColor","getBlockGlow","Canvas","blockColor","glowColor","isSelected","isUnstable","isCritical","instabilityOffset","shakePosition","OrbitControls","Fragment","ContentModal","content","onQuizAnswer","showQuiz","blockId","selectedAnswer","setSelectedAnswer","quizSubmitted","setQuizSubmitted","isCorrect","setIsCorrect","showExplanation","setShowExplanation","handleAnswerSubmit","isAnswerCorrect","handleCloseModal","isQuestion","questionContent","option","GameHelp","GameStats","player","statistics","modeInfo","EndgameSummary","gameHistory","achievements","onPlayAgain","unlockedAchievements","totalAchievements","completionRate","sessionDuration","averageScore","sum","move","categoryProgress","category","getCategoryIcon","getCategoryName","maxProgress","achievement","MobileControls","onReset","onHelp","onTutorial","ENHANCED_PRIVACY_QUESTIONS","DEFAULT_SETTINGS","ACHIEVEMENTS","EnhancedContentTrackerImpl","__publicField","question","difficulty","notShown","matchesDifficulty","matchesCategory","contentId","unseenContent","EnhancedGameService","stabilityChange","pointsEarned","timeToAnswer","oldStability","quizResult","baseImpact","consecutiveArray","consecutiveIndex","consecutiveBonus","currentStability","stabilityMultiplier","finalImpact","_isCorrect","totalAnswers","categoryAttempts","categoryCorrect","difficultyAttempts","difficultyCorrect","overallAccuracy","currentDifficulty","questionAttempt","totalAttempts","correctAttempts","recentAttempts","recentCorrect","recentAccuracy","difficultyPerformance","bestDifficulty","categoryMastery","strengths","mastery","weaknesses","totalGames","layer","blocksInLayer","position","xOffset","worldPosition","availableContent","targetDifficulty","difficultyContent","contentPool","achievementId","points","recent","older","olderAccuracy","masteries","difficulties","perf","enhancedGameService","GameErrorBoundary","GamePage","setGameState","setBlocks","currentContent","setCurrentContent","showContentModal","setShowContentModal","showHelp","setShowHelp","showStats","setShowStats","showEndgameSummary","setShowEndgameSummary","showQuickHelp","setShowQuickHelp","setSelectedBlockId","setShowQuiz","showAchievementNotification","setShowAchievementNotification","lastAchievement","setLastAchievement","newGameState","newBlocks","handleQuizAnswer","updatedGameState","updatedBlocks","newAchievement","handleCloseContentModal","handleResetGame","handlePlayAgain","handleGameRestart","App","queryClient","ReactDOM","Toaster"],"mappings":"w6CAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAUA,SAASA,IAAW,CAClBA,OAAAA,GAAW,OAAO,OAAS,OAAO,OAAO,KAAI,EAAK,SAAUC,EAAQ,CAClE,QAASC,EAAI,EAAGA,EAAI,UAAU,OAAQA,IAAK,CACzC,IAAIC,EAAS,UAAUD,CAAC,EACxB,QAASE,KAAOD,EACV,OAAO,UAAU,eAAe,KAAKA,EAAQC,CAAG,IAClDH,EAAOG,CAAG,EAAID,EAAOC,CAAG,EAG9B,CACA,OAAOH,CACT,EACOD,GAAS,MAAM,KAAM,SAAS,CACvC,CAQA,IAAIK,IACH,SAAUA,EAAQ,CAQjBA,EAAO,IAAS,MAMhBA,EAAO,KAAU,OAKjBA,EAAO,QAAa,SACtB,GAAGA,KAAWA,GAAS,CAAA,EAAG,EAC1B,MAAMC,GAAoB,WAgH1B,SAASC,GAAqBC,EAAS,CACjCA,IAAY,SACdA,EAAU,CAAA,GAEZ,SAASC,EAAsBC,EAAQC,EAAe,CACpD,GAAI,CACF,SAAAC,EACA,OAAAC,EACA,KAAAC,CACN,EAAQJ,EAAO,SACX,OAAOK,GAAe,GAAI,CACxB,SAAAH,EACA,OAAAC,EACA,KAAAC,CACN,EAEIH,EAAc,OAASA,EAAc,MAAM,KAAO,KAAMA,EAAc,OAASA,EAAc,MAAM,KAAO,SAAS,CACrH,CACA,SAASK,EAAkBN,EAAQO,EAAI,CACrC,OAAO,OAAOA,GAAO,SAAWA,EAAKC,GAAWD,CAAE,CACpD,CACA,OAAOE,GAAmBV,EAAuBO,EAAmB,KAAMR,CAAO,CACnF,CAmDA,SAASY,EAAUC,EAAOC,EAAS,CACjC,GAAID,IAAU,IAASA,IAAU,MAAQ,OAAOA,EAAU,IACxD,MAAM,IAAI,MAAMC,CAAO,CAE3B,CACA,SAASC,GAAQC,EAAMF,EAAS,CAC9B,GAAI,CAACE,EAAM,CAEL,OAAO,QAAY,KAAa,QAAQ,KAAKF,CAAO,EACxD,GAAI,CAMF,MAAM,IAAI,MAAMA,CAAO,CAEzB,MAAY,CAAC,CACf,CACF,CACA,SAASG,IAAY,CACnB,OAAO,KAAK,OAAM,EAAG,SAAS,EAAE,EAAE,OAAO,EAAG,CAAC,CAC/C,CAIA,SAASC,GAAgBC,EAAUC,EAAO,CACxC,MAAO,CACL,IAAKD,EAAS,MACd,IAAKA,EAAS,IACd,IAAKC,CACT,CACA,CAIA,SAASb,GAAec,EAASZ,EAAIa,EAAO1B,EAAK,CAC/C,OAAI0B,IAAU,SACZA,EAAQ,MAEK9B,GAAS,CACtB,SAAU,OAAO6B,GAAY,SAAWA,EAAUA,EAAQ,SAC1D,OAAQ,GACR,KAAM,EACV,EAAK,OAAOZ,GAAO,SAAWc,GAAUd,CAAE,EAAIA,EAAI,CAC9C,MAAAa,EAKA,IAAKb,GAAMA,EAAG,KAAOb,GAAOqB,GAAS,CACzC,CAAG,CAEH,CAIA,SAASP,GAAWc,EAAM,CACxB,GAAI,CACF,SAAApB,EAAW,IACX,OAAAC,EAAS,GACT,KAAAC,EAAO,EACX,EAAMkB,EACJ,OAAInB,GAAUA,IAAW,MAAKD,GAAYC,EAAO,OAAO,CAAC,IAAM,IAAMA,EAAS,IAAMA,GAChFC,GAAQA,IAAS,MAAKF,GAAYE,EAAK,OAAO,CAAC,IAAM,IAAMA,EAAO,IAAMA,GACrEF,CACT,CAIA,SAASmB,GAAUE,EAAM,CACvB,IAAIC,EAAa,CAAA,EACjB,GAAID,EAAM,CACR,IAAIE,EAAYF,EAAK,QAAQ,GAAG,EAC5BE,GAAa,IACfD,EAAW,KAAOD,EAAK,OAAOE,CAAS,EACvCF,EAAOA,EAAK,OAAO,EAAGE,CAAS,GAEjC,IAAIC,EAAcH,EAAK,QAAQ,GAAG,EAC9BG,GAAe,IACjBF,EAAW,OAASD,EAAK,OAAOG,CAAW,EAC3CH,EAAOA,EAAK,OAAO,EAAGG,CAAW,GAE/BH,IACFC,EAAW,SAAWD,EAE1B,CACA,OAAOC,CACT,CACA,SAASf,GAAmBkB,EAAaC,EAAYC,EAAkB/B,EAAS,CAC1EA,IAAY,SACdA,EAAU,CAAA,GAEZ,GAAI,CACF,OAAAE,EAAS,SAAS,YAClB,SAAA8B,EAAW,EACf,EAAMhC,EACAG,EAAgBD,EAAO,QACvB+B,EAASpC,GAAO,IAChBqC,EAAW,KACXd,EAAQe,EAAQ,EAIhBf,GAAS,OACXA,EAAQ,EACRjB,EAAc,aAAaX,GAAS,CAAA,EAAIW,EAAc,MAAO,CAC3D,IAAKiB,CACX,CAAK,EAAG,EAAE,GAER,SAASe,GAAW,CAIlB,OAHYhC,EAAc,OAAS,CACjC,IAAK,IACX,GACiB,GACf,CACA,SAASiC,GAAY,CACnBH,EAASpC,GAAO,IAChB,IAAIwC,EAAYF,EAAQ,EACpBG,EAAQD,GAAa,KAAO,KAAOA,EAAYjB,EACnDA,EAAQiB,EACJH,GACFA,EAAS,CACP,OAAAD,EACA,SAAUM,EAAQ,SAClB,MAAAD,CACR,CAAO,CAEL,CACA,SAASE,EAAK/B,EAAIa,EAAO,CACvBW,EAASpC,GAAO,KAChB,IAAIsB,EAAWZ,GAAegC,EAAQ,SAAU9B,EAAIa,CAAK,EAEzDF,EAAQe,EAAQ,EAAK,EACrB,IAAIM,EAAevB,GAAgBC,EAAUC,CAAK,EAC9CsB,EAAMH,EAAQ,WAAWpB,CAAQ,EAErC,GAAI,CACFhB,EAAc,UAAUsC,EAAc,GAAIC,CAAG,CAC/C,OAASC,EAAO,CAKd,GAAIA,aAAiB,cAAgBA,EAAM,OAAS,iBAClD,MAAMA,EAIRzC,EAAO,SAAS,OAAOwC,CAAG,CAC5B,CACIV,GAAYE,GACdA,EAAS,CACP,OAAAD,EACA,SAAUM,EAAQ,SAClB,MAAO,CACf,CAAO,CAEL,CACA,SAASK,EAAQnC,EAAIa,EAAO,CAC1BW,EAASpC,GAAO,QAChB,IAAIsB,EAAWZ,GAAegC,EAAQ,SAAU9B,EAAIa,CAAK,EAEzDF,EAAQe,EAAQ,EAChB,IAAIM,EAAevB,GAAgBC,EAAUC,CAAK,EAC9CsB,EAAMH,EAAQ,WAAWpB,CAAQ,EACrChB,EAAc,aAAasC,EAAc,GAAIC,CAAG,EAC5CV,GAAYE,GACdA,EAAS,CACP,OAAAD,EACA,SAAUM,EAAQ,SAClB,MAAO,CACf,CAAO,CAEL,CACA,SAASM,EAAUpC,EAAI,CAIrB,IAAIqC,EAAO5C,EAAO,SAAS,SAAW,OAASA,EAAO,SAAS,OAASA,EAAO,SAAS,KACpF6C,EAAO,OAAOtC,GAAO,SAAWA,EAAKC,GAAWD,CAAE,EAItD,OAAAsC,EAAOA,EAAK,QAAQ,KAAM,KAAK,EAC/BnC,EAAUkC,EAAM,sEAAwEC,CAAI,EACrF,IAAI,IAAIA,EAAMD,CAAI,CAC3B,CACA,IAAIP,EAAU,CACZ,IAAI,QAAS,CACX,OAAON,CACT,EACA,IAAI,UAAW,CACb,OAAOJ,EAAY3B,EAAQC,CAAa,CAC1C,EACA,OAAO6C,EAAI,CACT,GAAId,EACF,MAAM,IAAI,MAAM,4CAA4C,EAE9D,OAAAhC,EAAO,iBAAiBJ,GAAmBsC,CAAS,EACpDF,EAAWc,EACJ,IAAM,CACX9C,EAAO,oBAAoBJ,GAAmBsC,CAAS,EACvDF,EAAW,IACb,CACF,EACA,WAAWzB,EAAI,CACb,OAAOqB,EAAW5B,EAAQO,CAAE,CAC9B,EACA,UAAAoC,EACA,eAAepC,EAAI,CAEjB,IAAIiC,EAAMG,EAAUpC,CAAE,EACtB,MAAO,CACL,SAAUiC,EAAI,SACd,OAAQA,EAAI,OACZ,KAAMA,EAAI,IAClB,CACI,EACA,KAAAF,EACA,QAAAI,EACA,GAAGK,EAAG,CACJ,OAAO9C,EAAc,GAAG8C,CAAC,CAC3B,CACJ,EACE,OAAOV,CACT,CAGA,IAAIW,IACH,SAAUA,EAAY,CACrBA,EAAW,KAAU,OACrBA,EAAW,SAAc,WACzBA,EAAW,SAAc,WACzBA,EAAW,MAAW,OACxB,GAAGA,KAAeA,GAAa,CAAA,EAAG,EA2ClC,SAASC,GAAYC,EAAQC,EAAaC,EAAU,CAClD,OAAIA,IAAa,SACfA,EAAW,KAENC,GAAgBH,EAAQC,EAAaC,CAAe,CAC7D,CACA,SAASC,GAAgBH,EAAQC,EAAaC,EAAUE,EAAc,CACpE,IAAIrC,EAAW,OAAOkC,GAAgB,SAAW9B,GAAU8B,CAAW,EAAIA,EACtEjD,EAAWqD,GAActC,EAAS,UAAY,IAAKmC,CAAQ,EAC/D,GAAIlD,GAAY,KACd,OAAO,KAET,IAAIsD,EAAWC,GAAcP,CAAM,EACnCQ,GAAkBF,CAAQ,EAC1B,IAAIG,EAAU,KACd,QAASnE,EAAI,EAAGmE,GAAW,MAAQnE,EAAIgE,EAAS,OAAQ,EAAEhE,EAAG,CAO3D,IAAIoE,EAAUC,GAAW3D,CAAQ,EACjCyD,EAAUG,GAAiBN,EAAShE,CAAC,EAAGoE,CAAqB,CAC/D,CACA,OAAOD,CACT,CAeA,SAASF,GAAcP,EAAQM,EAAUO,EAAaC,EAAY,CAC5DR,IAAa,SACfA,EAAW,CAAA,GAETO,IAAgB,SAClBA,EAAc,CAAA,GAEZC,IAAe,SACjBA,EAAa,IAEf,IAAIC,EAAe,CAACC,EAAOhD,EAAOiD,IAAiB,CACjD,IAAIC,EAAO,CACT,aAAcD,IAAiB,OAAYD,EAAM,MAAQ,GAAKC,EAC9D,cAAeD,EAAM,gBAAkB,GACvC,cAAehD,EACf,MAAAgD,CACN,EACQE,EAAK,aAAa,WAAW,GAAG,IAClC1D,EAAU0D,EAAK,aAAa,WAAWJ,CAAU,EAAG,wBAA2BI,EAAK,aAAe,wBAA2B,IAAOJ,EAAa,iDAAoD,6DAA6D,EACnQI,EAAK,aAAeA,EAAK,aAAa,MAAMJ,EAAW,MAAM,GAE/D,IAAIzC,EAAO8C,GAAU,CAACL,EAAYI,EAAK,YAAY,CAAC,EAChDE,EAAaP,EAAY,OAAOK,CAAI,EAIpCF,EAAM,UAAYA,EAAM,SAAS,OAAS,IAC5CxD,EAGAwD,EAAM,QAAU,GAAM,2DAA6D,qCAAwC3C,EAAO,KAAM,EACxIkC,GAAcS,EAAM,SAAUV,EAAUc,EAAY/C,CAAI,GAItD,EAAA2C,EAAM,MAAQ,MAAQ,CAACA,EAAM,QAGjCV,EAAS,KAAK,CACZ,KAAAjC,EACA,MAAOgD,GAAahD,EAAM2C,EAAM,KAAK,EACrC,WAAAI,CACN,CAAK,CACH,EACA,OAAApB,EAAO,QAAQ,CAACgB,EAAOhD,IAAU,CAC/B,IAAIsD,EAEJ,GAAIN,EAAM,OAAS,IAAM,GAAGM,EAAcN,EAAM,OAAS,MAAQM,EAAY,SAAS,GAAG,GACvFP,EAAaC,EAAOhD,CAAK,MAEzB,SAASuD,KAAYC,GAAwBR,EAAM,IAAI,EACrDD,EAAaC,EAAOhD,EAAOuD,CAAQ,CAGzC,CAAC,EACMjB,CACT,CAeA,SAASkB,GAAwBnD,EAAM,CACrC,IAAIoD,EAAWpD,EAAK,MAAM,GAAG,EAC7B,GAAIoD,EAAS,SAAW,EAAG,MAAO,CAAA,EAClC,GAAI,CAACC,EAAO,GAAGC,CAAI,EAAIF,EAEnBG,EAAaF,EAAM,SAAS,GAAG,EAE/BG,EAAWH,EAAM,QAAQ,MAAO,EAAE,EACtC,GAAIC,EAAK,SAAW,EAGlB,OAAOC,EAAa,CAACC,EAAU,EAAE,EAAI,CAACA,CAAQ,EAEhD,IAAIC,EAAeN,GAAwBG,EAAK,KAAK,GAAG,CAAC,EACrDI,EAAS,CAAA,EAQb,OAAAA,EAAO,KAAK,GAAGD,EAAa,IAAIE,GAAWA,IAAY,GAAKH,EAAW,CAACA,EAAUG,CAAO,EAAE,KAAK,GAAG,CAAC,CAAC,EAEjGJ,GACFG,EAAO,KAAK,GAAGD,CAAY,EAGtBC,EAAO,IAAIR,GAAYlD,EAAK,WAAW,GAAG,GAAKkD,IAAa,GAAK,IAAMA,CAAQ,CACxF,CACA,SAASf,GAAkBF,EAAU,CACnCA,EAAS,KAAK,CAAC2B,EAAGC,IAAMD,EAAE,QAAUC,EAAE,MAAQA,EAAE,MAAQD,EAAE,MACxDE,GAAeF,EAAE,WAAW,IAAIf,GAAQA,EAAK,aAAa,EAAGgB,EAAE,WAAW,IAAIhB,GAAQA,EAAK,aAAa,CAAC,CAAC,CAC9G,CACA,MAAMkB,GAAU,YACVC,GAAsB,EACtBC,GAAkB,EAClBC,GAAoB,EACpBC,GAAqB,GACrBC,GAAe,GACfC,GAAUC,GAAKA,IAAM,IAC3B,SAAStB,GAAahD,EAAML,EAAO,CACjC,IAAIyD,EAAWpD,EAAK,MAAM,GAAG,EACzBuE,EAAenB,EAAS,OAC5B,OAAIA,EAAS,KAAKiB,EAAO,IACvBE,GAAgBH,IAEdzE,IACF4E,GAAgBN,IAEXb,EAAS,OAAOkB,GAAK,CAACD,GAAQC,CAAC,CAAC,EAAE,OAAO,CAACE,EAAOC,IAAYD,GAAST,GAAQ,KAAKU,CAAO,EAAIT,GAAsBS,IAAY,GAAKP,GAAoBC,IAAqBI,CAAY,CACnM,CACA,SAAST,GAAeF,EAAGC,EAAG,CAE5B,OADeD,EAAE,SAAWC,EAAE,QAAUD,EAAE,MAAM,EAAG,EAAE,EAAE,MAAM,CAACpC,EAAGvD,IAAMuD,IAAMqC,EAAE5F,CAAC,CAAC,EAMjF2F,EAAEA,EAAE,OAAS,CAAC,EAAIC,EAAEA,EAAE,OAAS,CAAC,EAGhC,CACF,CACA,SAAStB,GAAiBmC,EAAQ/F,EAAUoD,EAAc,CAIxD,GAAI,CACF,WAAAgB,CACJ,EAAM2B,EACAC,EAAgB,CAAA,EAChBC,EAAkB,IAClBxC,EAAU,CAAA,EACd,QAASnE,EAAI,EAAGA,EAAI8E,EAAW,OAAQ,EAAE9E,EAAG,CAC1C,IAAI4E,EAAOE,EAAW9E,CAAC,EACnB4G,EAAM5G,IAAM8E,EAAW,OAAS,EAChC+B,EAAoBF,IAAoB,IAAMjG,EAAWA,EAAS,MAAMiG,EAAgB,MAAM,GAAK,IACnGG,EAAQC,GAAU,CACpB,KAAMnC,EAAK,aACX,cAAeA,EAAK,cACpB,IAAAgC,CACN,EAAOC,CAAiB,EAChBnC,EAAQE,EAAK,MAQjB,GAAI,CAACkC,EACH,OAAO,KAET,OAAO,OAAOJ,EAAeI,EAAM,MAAM,EACzC3C,EAAQ,KAAK,CAEX,OAAQuC,EACR,SAAU7B,GAAU,CAAC8B,EAAiBG,EAAM,QAAQ,CAAC,EACrD,aAAcE,GAAkBnC,GAAU,CAAC8B,EAAiBG,EAAM,YAAY,CAAC,CAAC,EAChF,MAAApC,CACN,CAAK,EACGoC,EAAM,eAAiB,MACzBH,EAAkB9B,GAAU,CAAC8B,EAAiBG,EAAM,YAAY,CAAC,EAErE,CACA,OAAO3C,CACT,CA8CA,SAAS4C,GAAUE,EAASvG,EAAU,CAChC,OAAOuG,GAAY,WACrBA,EAAU,CACR,KAAMA,EACN,cAAe,GACf,IAAK,EACX,GAEE,GAAI,CAACC,EAASC,CAAc,EAAIC,GAAYH,EAAQ,KAAMA,EAAQ,cAAeA,EAAQ,GAAG,EACxFH,EAAQpG,EAAS,MAAMwG,CAAO,EAClC,GAAI,CAACJ,EAAO,OAAO,KACnB,IAAIH,EAAkBG,EAAM,CAAC,EACzBO,EAAeV,EAAgB,QAAQ,UAAW,IAAI,EACtDW,EAAgBR,EAAM,MAAM,CAAC,EAoBjC,MAAO,CACL,OApBWK,EAAe,OAAO,CAACI,EAAMzF,EAAMJ,IAAU,CACxD,GAAI,CACF,UAAA8F,EACA,WAAAlC,CACN,EAAQxD,EAGJ,GAAI0F,IAAc,IAAK,CACrB,IAAIC,EAAaH,EAAc5F,CAAK,GAAK,GACzC2F,EAAeV,EAAgB,MAAM,EAAGA,EAAgB,OAASc,EAAW,MAAM,EAAE,QAAQ,UAAW,IAAI,CAC7G,CACA,MAAMtG,EAAQmG,EAAc5F,CAAK,EACjC,OAAI4D,GAAc,CAACnE,EACjBoG,EAAKC,CAAS,EAAI,OAElBD,EAAKC,CAAS,GAAKrG,GAAS,IAAI,QAAQ,OAAQ,GAAG,EAE9CoG,CACT,EAAG,CAAA,CAAE,EAGH,SAAUZ,EACV,aAAAU,EACA,QAAAJ,CACJ,CACA,CACA,SAASG,GAAYrF,EAAM2F,EAAed,EAAK,CACzCc,IAAkB,SACpBA,EAAgB,IAEdd,IAAQ,SACVA,EAAM,IAERvF,GAAQU,IAAS,KAAO,CAACA,EAAK,SAAS,GAAG,GAAKA,EAAK,SAAS,IAAI,EAAG,eAAkBA,EAAO,oCAAuC,IAAOA,EAAK,QAAQ,MAAO,IAAI,EAAI,qCAAwC,oEAAsE,oCAAuCA,EAAK,QAAQ,MAAO,IAAI,EAAI,KAAM,EAC9V,IAAI4F,EAAS,CAAA,EACTC,EAAe,IAAM7F,EAAK,QAAQ,UAAW,EAAE,EAClD,QAAQ,OAAQ,GAAG,EACnB,QAAQ,qBAAsB,MAAM,EACpC,QAAQ,oBAAqB,CAAC8F,EAAGL,EAAWlC,KAC3CqC,EAAO,KAAK,CACV,UAAAH,EACA,WAAYlC,GAAc,IAChC,CAAK,EACMA,EAAa,eAAiB,aACtC,EACD,OAAIvD,EAAK,SAAS,GAAG,GACnB4F,EAAO,KAAK,CACV,UAAW,GACjB,CAAK,EACDC,GAAgB7F,IAAS,KAAOA,IAAS,KAAO,QAC9C,qBACO6E,EAETgB,GAAgB,QACP7F,IAAS,IAAMA,IAAS,MAQjC6F,GAAgB,iBAGX,CADO,IAAI,OAAOA,EAAcF,EAAgB,OAAY,GAAG,EACrDC,CAAM,CACzB,CACA,SAAStD,GAAWlD,EAAO,CACzB,GAAI,CACF,OAAOA,EAAM,MAAM,GAAG,EAAE,IAAI2G,GAAK,mBAAmBA,CAAC,EAAE,QAAQ,MAAO,KAAK,CAAC,EAAE,KAAK,GAAG,CACxF,OAAS7E,EAAO,CACd,OAAA5B,GAAQ,GAAO,iBAAoBF,EAAQ,2GAAmH,aAAe8B,EAAQ,KAAK,EACnL9B,CACT,CACF,CAIA,SAAS4C,GAAcrD,EAAUkD,EAAU,CACzC,GAAIA,IAAa,IAAK,OAAOlD,EAC7B,GAAI,CAACA,EAAS,YAAW,EAAG,WAAWkD,EAAS,YAAW,CAAE,EAC3D,OAAO,KAIT,IAAImE,EAAanE,EAAS,SAAS,GAAG,EAAIA,EAAS,OAAS,EAAIA,EAAS,OACrEoE,EAAWtH,EAAS,OAAOqH,CAAU,EACzC,OAAIC,GAAYA,IAAa,IAEpB,KAEFtH,EAAS,MAAMqH,CAAU,GAAK,GACvC,CAMA,SAASE,GAAYlH,EAAImH,EAAc,CACjCA,IAAiB,SACnBA,EAAe,KAEjB,GAAI,CACF,SAAUC,EACV,OAAAxH,EAAS,GACT,KAAAC,EAAO,EACX,EAAM,OAAOG,GAAO,SAAWc,GAAUd,CAAE,EAAIA,EAE7C,MAAO,CACL,SAFaoH,EAAaA,EAAW,WAAW,GAAG,EAAIA,EAAaC,GAAgBD,EAAYD,CAAY,EAAIA,EAGhH,OAAQG,GAAgB1H,CAAM,EAC9B,KAAM2H,GAAc1H,CAAI,CAC5B,CACA,CACA,SAASwH,GAAgBzD,EAAcuD,EAAc,CACnD,IAAI/C,EAAW+C,EAAa,QAAQ,OAAQ,EAAE,EAAE,MAAM,GAAG,EAEzD,OADuBvD,EAAa,MAAM,GAAG,EAC5B,QAAQ6B,GAAW,CAC9BA,IAAY,KAEVrB,EAAS,OAAS,GAAGA,EAAS,IAAG,EAC5BqB,IAAY,KACrBrB,EAAS,KAAKqB,CAAO,CAEzB,CAAC,EACMrB,EAAS,OAAS,EAAIA,EAAS,KAAK,GAAG,EAAI,GACpD,CACA,SAASoD,GAAoBC,EAAMC,EAAOC,EAAM3G,EAAM,CACpD,MAAO,qBAAuByG,EAAO,wCAA0C,OAASC,EAAQ,YAAc,KAAK,UAAU1G,CAAI,EAAI,uCAAyC,OAAS2G,EAAO,4DAA8D,mEAC9P,CAwBA,SAASC,GAA2BxE,EAAS,CAC3C,OAAOA,EAAQ,OAAO,CAAC2C,EAAOpF,IAAUA,IAAU,GAAKoF,EAAM,MAAM,MAAQA,EAAM,MAAM,KAAK,OAAS,CAAC,CACxG,CAGA,SAAS8B,GAAoBzE,EAAS0E,EAAsB,CAC1D,IAAIC,EAAcH,GAA2BxE,CAAO,EAIpD,OAAI0E,EACKC,EAAY,IAAI,CAAChC,EAAOiC,IAAQA,IAAQD,EAAY,OAAS,EAAIhC,EAAM,SAAWA,EAAM,YAAY,EAEtGgC,EAAY,IAAIhC,GAASA,EAAM,YAAY,CACpD,CAIA,SAASkC,GAAUC,EAAOC,EAAgBC,EAAkBC,EAAgB,CACtEA,IAAmB,SACrBA,EAAiB,IAEnB,IAAIrI,EACA,OAAOkI,GAAU,SACnBlI,EAAKc,GAAUoH,CAAK,GAEpBlI,EAAKjB,GAAS,CAAA,EAAImJ,CAAK,EACvB/H,EAAU,CAACH,EAAG,UAAY,CAACA,EAAG,SAAS,SAAS,GAAG,EAAGwH,GAAoB,IAAK,WAAY,SAAUxH,CAAE,CAAC,EACxGG,EAAU,CAACH,EAAG,UAAY,CAACA,EAAG,SAAS,SAAS,GAAG,EAAGwH,GAAoB,IAAK,WAAY,OAAQxH,CAAE,CAAC,EACtGG,EAAU,CAACH,EAAG,QAAU,CAACA,EAAG,OAAO,SAAS,GAAG,EAAGwH,GAAoB,IAAK,SAAU,OAAQxH,CAAE,CAAC,GAElG,IAAIsI,EAAcJ,IAAU,IAAMlI,EAAG,WAAa,GAC9CoH,EAAakB,EAAc,IAAMtI,EAAG,SACpCuI,EAUJ,GAAInB,GAAc,KAChBmB,EAAOH,MACF,CACL,IAAII,EAAqBL,EAAe,OAAS,EAKjD,GAAI,CAACE,GAAkBjB,EAAW,WAAW,IAAI,EAAG,CAClD,IAAIqB,EAAarB,EAAW,MAAM,GAAG,EACrC,KAAOqB,EAAW,CAAC,IAAM,MACvBA,EAAW,MAAK,EAChBD,GAAsB,EAExBxI,EAAG,SAAWyI,EAAW,KAAK,GAAG,CACnC,CACAF,EAAOC,GAAsB,EAAIL,EAAeK,CAAkB,EAAI,GACxE,CACA,IAAIxH,EAAOkG,GAAYlH,EAAIuI,CAAI,EAE3BG,EAA2BtB,GAAcA,IAAe,KAAOA,EAAW,SAAS,GAAG,EAEtFuB,GAA2BL,GAAelB,IAAe,MAAQgB,EAAiB,SAAS,GAAG,EAClG,MAAI,CAACpH,EAAK,SAAS,SAAS,GAAG,IAAM0H,GAA4BC,KAC/D3H,EAAK,UAAY,KAEZA,CACT,CAWA,MAAM8C,GAAY8E,GAASA,EAAM,KAAK,GAAG,EAAE,QAAQ,SAAU,GAAG,EAI1D3C,GAAoBtG,GAAYA,EAAS,QAAQ,OAAQ,EAAE,EAAE,QAAQ,OAAQ,GAAG,EAIhF2H,GAAkB1H,GAAU,CAACA,GAAUA,IAAW,IAAM,GAAKA,EAAO,WAAW,GAAG,EAAIA,EAAS,IAAMA,EAIrG2H,GAAgB1H,GAAQ,CAACA,GAAQA,IAAS,IAAM,GAAKA,EAAK,WAAW,GAAG,EAAIA,EAAO,IAAMA,EAmQ/F,SAASgJ,GAAqB3G,EAAO,CACnC,OAAOA,GAAS,MAAQ,OAAOA,EAAM,QAAW,UAAY,OAAOA,EAAM,YAAe,UAAY,OAAOA,EAAM,UAAa,WAAa,SAAUA,CACvJ,CAEA,MAAM4G,GAA0B,CAAC,OAAQ,MAAO,QAAS,QAAQ,EACpC,IAAI,IAAIA,EAAuB,EAC5D,MAAMC,GAAyB,CAAC,MAAO,GAAGD,EAAuB,EACrC,IAAI,IAAIC,EAAsB,EC3xC1D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAcA,SAAShK,IAAW,CAClB,OAAAA,GAAW,OAAO,OAAS,OAAO,OAAO,KAAA,EAAS,SAAUC,EAAQ,CAClE,QAASC,EAAI,EAAGA,EAAI,UAAU,OAAQA,IAAK,CACzC,IAAIC,EAAS,UAAUD,CAAC,EACxB,QAASE,KAAOD,EACV,OAAO,UAAU,eAAe,KAAKA,EAAQC,CAAG,IAClDH,EAAOG,CAAG,EAAID,EAAOC,CAAG,EAG9B,CACA,OAAOH,CACT,EACOD,GAAS,MAAM,KAAM,SAAS,CACvC,CAIA,MAAMiK,GAAiCC,EAAAA,cAAoB,IAAI,EAIzDC,GAAsCD,EAAAA,cAAoB,IAAI,EAmB9DE,GAAiCF,EAAAA,cAAoB,IAAI,EAIzDG,GAA+BH,EAAAA,cAAoB,IAAI,EAIvDI,mBAAgD,CACpD,OAAQ,KACR,QAAS,CAAA,EACT,YAAa,EACf,CAAC,EAIKC,GAAiCL,EAAAA,cAAoB,IAAI,EAkD/D,SAASM,IAAqB,CAC5B,OAAOC,EAAAA,WAAiBJ,EAAe,GAAK,IAC9C,CAYA,SAASK,IAAc,CACrB,OAACF,GAAA,GAE2EG,EAAiB,EAAK,EAC3FF,EAAAA,WAAiBJ,EAAe,EAAE,QAC3C,CAoCA,SAASO,GAA0BC,EAAI,CACtBJ,EAAAA,WAAiBL,EAAiB,EAAE,QAKjDU,EAAAA,gBAAsBD,CAAE,CAE5B,CAQA,SAASE,IAAc,CACrB,GAAI,CACF,YAAAC,CAAA,EACEP,EAAAA,WAAiBH,EAAY,EAGjC,OAAOU,EAAcC,GAAA,EAAsBC,GAAA,CAC7C,CACA,SAASA,IAAsB,CAC5BV,GAAA,GAE2EG,EAAiB,EAAK,EAClG,IAAIQ,EAAoBV,EAAAA,WAAiBR,EAAiB,EACtD,CACF,SAAAnG,EACA,OAAAsH,EACA,UAAAC,CAAA,EACEZ,EAAAA,WAAiBL,EAAiB,EAClC,CACF,QAAA/F,CAAA,EACEoG,EAAAA,WAAiBH,EAAY,EAC7B,CACF,SAAUjB,CAAA,EACRqB,GAAA,EACAY,EAAqB,KAAK,UAAUC,GAA2BlH,EAAS+G,EAAO,oBAAoB,CAAC,EACpGI,EAAYC,EAAAA,OAAa,EAAK,EAClCb,OAAAA,GAA0B,IAAM,CAC9BY,EAAU,QAAU,EACtB,CAAC,EACcE,EAAAA,YAAkB,SAAUzK,EAAIT,EAAS,CAQtD,GAPIA,IAAY,SACdA,EAAU,CAAA,GAMR,CAACgL,EAAU,QAAS,OACxB,GAAI,OAAOvK,GAAO,SAAU,CAC1BoK,EAAU,GAAGpK,CAAE,EACf,MACF,CACA,IAAIgB,EAAOiH,GAAUjI,EAAI,KAAK,MAAMqK,CAAkB,EAAGjC,EAAkB7I,EAAQ,WAAa,MAAM,EAQlG2K,GAAqB,MAAQrH,IAAa,MAC5C7B,EAAK,SAAWA,EAAK,WAAa,IAAM6B,EAAWiB,GAAU,CAACjB,EAAU7B,EAAK,QAAQ,CAAC,IAErFzB,EAAQ,QAAU6K,EAAU,QAAUA,EAAU,MAAMpJ,EAAMzB,EAAQ,MAAOA,CAAO,CACvF,EAAG,CAACsD,EAAUuH,EAAWC,EAAoBjC,EAAkB8B,CAAiB,CAAC,CAEnF,CAwEA,SAASQ,GAAU/H,EAAQC,EAAa,CACtC,OAAO+H,GAAchI,EAAQC,CAAW,CAC1C,CAGA,SAAS+H,GAAchI,EAAQC,EAAagI,EAAiBT,EAAQ,CAClEZ,GAAA,GAEyEG,EAAiB,EAAK,EAChG,GAAI,CACF,UAAAU,CAAA,EACEZ,EAAAA,WAAiBL,EAAiB,EAClC,CACF,QAAS0B,CAAA,EACPrB,EAAAA,WAAiBH,EAAY,EAC7ByB,EAAaD,EAAcA,EAAc,OAAS,CAAC,EACnDE,EAAeD,EAAaA,EAAW,OAAS,CAAA,EAC/BA,GAAaA,EAAW,SAC7C,IAAIE,EAAqBF,EAAaA,EAAW,aAAe,IAC9CA,GAAcA,EAAW,MAyB3C,IAAIG,EAAsBxB,GAAA,EACtB/I,EACJ,GAAIkC,EAAa,CACf,IAAIsI,EACJ,IAAIC,EAAoB,OAAOvI,GAAgB,SAAW9B,GAAU8B,CAAW,EAAIA,EACjFoI,IAAuB,MAASE,EAAwBC,EAAkB,WAAa,MAAgBD,EAAsB,WAAWF,CAAkB,GAAsbtB,EAAiB,EAAK,EACxmBhJ,EAAWyK,CACb,MACEzK,EAAWuK,EAEb,IAAItL,EAAWe,EAAS,UAAY,IAChCoF,EAAoBnG,EACxB,GAAIqL,IAAuB,IAAK,CAe9B,IAAII,EAAiBJ,EAAmB,QAAQ,MAAO,EAAE,EAAE,MAAM,GAAG,EAEpElF,EAAoB,IADLnG,EAAS,QAAQ,MAAO,EAAE,EAAE,MAAM,GAAG,EACjB,MAAMyL,EAAe,MAAM,EAAE,KAAK,GAAG,CAC1E,CACA,IAAIhI,EAAUV,GAAYC,EAAQ,CAChC,SAAUmD,CAAA,CACX,EAKGuF,EAAkBC,GAAelI,GAAWA,EAAQ,OAAa,OAAO,OAAO,CAAA,EAAI2C,EAAO,CAC5F,OAAQ,OAAO,OAAO,CAAA,EAAIgF,EAAchF,EAAM,MAAM,EACpD,SAAUjC,GAAU,CAACkH,EAErBZ,EAAU,eAAiBA,EAAU,eAAerE,EAAM,QAAQ,EAAE,SAAWA,EAAM,QAAA,CAAS,EAC9F,aAAcA,EAAM,eAAiB,IAAMiF,EAAqBlH,GAAU,CAACkH,EAE3EZ,EAAU,eAAiBA,EAAU,eAAerE,EAAM,YAAY,EAAE,SAAWA,EAAM,YAAA,CAAa,CAAA,CACvG,CAAC,EAAG8E,EAAeD,EAAiBT,CAAM,EAK3C,OAAIvH,GAAeyI,EACGE,EAAAA,cAAoBnC,GAAgB,SAAU,CAChE,MAAO,CACL,SAAUrK,GAAS,CACjB,SAAU,IACV,OAAQ,GACR,KAAM,GACN,MAAO,KACP,IAAK,SAAA,EACJ2B,CAAQ,EACX,eAAgBtB,GAAO,GAAA,CACzB,EACCiM,CAAe,EAEbA,CACT,CACA,SAASG,IAAwB,CAC/B,IAAItJ,EAAQuJ,GAAA,EACRpL,EAAUwI,GAAqB3G,CAAK,EAAIA,EAAM,OAAS,IAAMA,EAAM,WAAaA,aAAiB,MAAQA,EAAM,QAAU,KAAK,UAAUA,CAAK,EAC7IwJ,EAAQxJ,aAAiB,MAAQA,EAAM,MAAQ,KAE/CyJ,EAAY,CACd,QAAS,SACT,gBAHc,wBAGG,EAenB,OAAoBJ,EAAAA,cAAoBK,WAAgB,KAAmBL,EAAAA,cAAoB,KAAM,KAAM,+BAA+B,EAAgBA,EAAAA,cAAoB,KAAM,CAClL,MAAO,CACL,UAAW,QAAA,CACb,EACClL,CAAO,EAAGqL,EAAqBH,EAAAA,cAAoB,MAAO,CAC3D,MAAOI,CAAA,EACND,CAAK,EAAI,KAfE,IAeW,CAC3B,CACA,MAAMG,GAAmCN,EAAAA,cAAoBC,GAAuB,IAAI,EACxF,MAAMM,WAA4BC,EAAAA,SAAgB,CAChD,YAAYC,EAAO,CACjB,MAAMA,CAAK,EACX,KAAK,MAAQ,CACX,SAAUA,EAAM,SAChB,aAAcA,EAAM,aACpB,MAAOA,EAAM,KAAA,CAEjB,CACA,OAAO,yBAAyB9J,EAAO,CACrC,MAAO,CACL,MAAAA,CAAA,CAEJ,CACA,OAAO,yBAAyB8J,EAAOnL,EAAO,CAS5C,OAAIA,EAAM,WAAamL,EAAM,UAAYnL,EAAM,eAAiB,QAAUmL,EAAM,eAAiB,OACxF,CACL,MAAOA,EAAM,MACb,SAAUA,EAAM,SAChB,aAAcA,EAAM,YAAA,EAQjB,CACL,MAAOA,EAAM,QAAU,OAAYA,EAAM,MAAQnL,EAAM,MACvD,SAAUA,EAAM,SAChB,aAAcmL,EAAM,cAAgBnL,EAAM,YAAA,CAE9C,CACA,kBAAkBqB,EAAO+J,EAAW,CAClC,QAAQ,MAAM,wDAAyD/J,EAAO+J,CAAS,CACzF,CACA,QAAS,CACP,OAAO,KAAK,MAAM,QAAU,OAAyBV,EAAAA,cAAoBlC,GAAa,SAAU,CAC9F,MAAO,KAAK,MAAM,YAAA,EACJkC,EAAAA,cAAoBjC,GAAkB,SAAU,CAC9D,MAAO,KAAK,MAAM,MAClB,SAAU,KAAK,MAAM,SAAA,CACtB,CAAC,EAAI,KAAK,MAAM,QACnB,CACF,CACA,SAAS4C,GAAcnL,EAAM,CAC3B,GAAI,CACF,aAAAoL,EACA,MAAApG,EACA,SAAAqG,CAAA,EACErL,EACAmJ,EAAoBV,EAAAA,WAAiBR,EAAiB,EAI1D,OAAIkB,GAAqBA,EAAkB,QAAUA,EAAkB,gBAAkBnE,EAAM,MAAM,cAAgBA,EAAM,MAAM,iBAC/HmE,EAAkB,cAAc,2BAA6BnE,EAAM,MAAM,IAEvDwF,EAAAA,cAAoBlC,GAAa,SAAU,CAC7D,MAAO8C,CAAA,EACNC,CAAQ,CACb,CACA,SAASd,GAAelI,EAASyH,EAAeD,EAAiBT,EAAQ,CACvE,IAAIkC,EAUJ,GATIxB,IAAkB,SACpBA,EAAgB,CAAA,GAEdD,IAAoB,SACtBA,EAAkB,MAEhBT,IAAW,SACbA,EAAS,MAEP/G,GAAW,KAAM,CACnB,IAAIkJ,EACJ,GAAI,CAAC1B,EACH,OAAO,KAET,GAAIA,EAAgB,OAGlBxH,EAAUwH,EAAgB,iBAChB0B,EAAUnC,IAAW,MAAQmC,EAAQ,qBAAuBzB,EAAc,SAAW,GAAK,CAACD,EAAgB,aAAeA,EAAgB,QAAQ,OAAS,EAOrKxH,EAAUwH,EAAgB,YAE1B,QAAO,IAEX,CACA,IAAIS,EAAkBjI,EAGlBmJ,GAAUF,EAAmBzB,IAAoB,KAAO,OAASyB,EAAiB,OACtF,GAAIE,GAAU,KAAM,CAClB,IAAIC,EAAanB,EAAgB,UAAUoB,GAAKA,EAAE,MAAM,KAAOF,GAAU,KAAO,OAASA,EAAOE,EAAE,MAAM,EAAE,KAAO,MAAS,EACxHD,GAAc,GAAoK9C,EAAiB,EAAK,EAC1M2B,EAAkBA,EAAgB,MAAM,EAAG,KAAK,IAAIA,EAAgB,OAAQmB,EAAa,CAAC,CAAC,CAC7F,CAIA,IAAIE,EAAiB,GACjBC,EAAgB,GACpB,GAAI/B,GAAmBT,GAAUA,EAAO,oBACtC,QAASlL,EAAI,EAAGA,EAAIoM,EAAgB,OAAQpM,IAAK,CAC/C,IAAI8G,EAAQsF,EAAgBpM,CAAC,EAK7B,IAHI8G,EAAM,MAAM,iBAAmBA,EAAM,MAAM,0BAC7C4G,EAAgB1N,GAEd8G,EAAM,MAAM,GAAI,CAClB,GAAI,CACF,WAAA6G,EACA,OAAAL,CAAA,EACE3B,EACAiC,EAAmB9G,EAAM,MAAM,QAAU6G,EAAW7G,EAAM,MAAM,EAAE,IAAM,SAAc,CAACwG,GAAUA,EAAOxG,EAAM,MAAM,EAAE,IAAM,QAChI,GAAIA,EAAM,MAAM,MAAQ8G,EAAkB,CAIxCH,EAAiB,GACbC,GAAiB,EACnBtB,EAAkBA,EAAgB,MAAM,EAAGsB,EAAgB,CAAC,EAE5DtB,EAAkB,CAACA,EAAgB,CAAC,CAAC,EAEvC,KACF,CACF,CACF,CAEF,OAAOA,EAAgB,YAAY,CAACyB,EAAQ/G,EAAOpF,IAAU,CAE3D,IAAIuB,EACA6K,EAA8B,GAC9BC,EAAe,KACfC,EAAyB,KACzBrC,IACF1I,EAAQqK,GAAUxG,EAAM,MAAM,GAAKwG,EAAOxG,EAAM,MAAM,EAAE,EAAI,OAC5DiH,EAAejH,EAAM,MAAM,cAAgB8F,GACvCa,IACEC,EAAgB,GAAKhM,IAAU,GACjCuM,GAAY,gBAAmG,EAC/GH,EAA8B,GAC9BE,EAAyB,MAChBN,IAAkBhM,IAC3BoM,EAA8B,GAC9BE,EAAyBlH,EAAM,MAAM,wBAA0B,QAIrE,IAAI3C,EAAUyH,EAAc,OAAOQ,EAAgB,MAAM,EAAG1K,EAAQ,CAAC,CAAC,EAClEwM,EAAc,IAAM,CACtB,IAAIf,EACJ,OAAIlK,EACFkK,EAAWY,EACFD,EACTX,EAAWa,EACFlH,EAAM,MAAM,UAOrBqG,EAAwBb,EAAAA,cAAoBxF,EAAM,MAAM,UAAW,IAAI,EAC9DA,EAAM,MAAM,QACrBqG,EAAWrG,EAAM,MAAM,QAEvBqG,EAAWU,EAEOvB,EAAAA,cAAoBW,GAAe,CACrD,MAAAnG,EACA,aAAc,CACZ,OAAA+G,EACA,QAAA1J,EACA,YAAawH,GAAmB,IAAA,EAElC,SAAAwB,CAAA,CACD,CACH,EAIA,OAAOxB,IAAoB7E,EAAM,MAAM,eAAiBA,EAAM,MAAM,cAAgBpF,IAAU,GAAkB4K,EAAAA,cAAoBO,GAAqB,CACvJ,SAAUlB,EAAgB,SAC1B,aAAcA,EAAgB,aAC9B,UAAWoC,EACX,MAAA9K,EACA,SAAUiL,EAAA,EACV,aAAc,CACZ,OAAQ,KACR,QAAA/J,EACA,YAAa,EAAA,CACf,CACD,EAAI+J,EAAA,CACP,EAAG,IAAI,CACT,CACA,IAAIC,YAAwCA,EAAgB,CAC1DA,OAAAA,EAAe,WAAgB,aAC/BA,EAAe,eAAoB,iBACnCA,EAAe,kBAAuB,cAC/BA,CACT,EAAEA,IAAkB,CAAA,CAAE,EAClBC,YAA6CA,EAAqB,CACpEA,OAAAA,EAAoB,WAAgB,aACpCA,EAAoB,cAAmB,gBACvCA,EAAoB,cAAmB,gBACvCA,EAAoB,cAAmB,gBACvCA,EAAoB,cAAmB,gBACvCA,EAAoB,mBAAwB,qBAC5CA,EAAoB,WAAgB,aACpCA,EAAoB,eAAoB,iBACxCA,EAAoB,kBAAuB,cAC3CA,EAAoB,WAAgB,aAC7BA,CACT,EAAEA,IAAuB,CAAA,CAAE,EAI3B,SAASC,GAAqBC,EAAU,CACtC,IAAIC,EAAMhE,EAAAA,WAAiBR,EAAiB,EAC5C,OAACwE,GAA6G9D,EAAiB,EAAK,EAC7H8D,CACT,CACA,SAASC,GAAmBF,EAAU,CACpC,IAAI1M,EAAQ2I,EAAAA,WAAiBN,EAAsB,EACnD,OAACrI,GAA+G6I,EAAiB,EAAK,EAC/H7I,CACT,CACA,SAAS6M,GAAgBH,EAAU,CACjC,IAAI5J,EAAQ6F,EAAAA,WAAiBH,EAAY,EACzC,OAAC1F,GAA+G+F,EAAiB,EAAK,EAC/H/F,CACT,CAGA,SAASgK,GAAkBJ,EAAU,CACnC,IAAI5J,EAAQ+J,GAAwB,EAChCE,EAAYjK,EAAM,QAAQA,EAAM,QAAQ,OAAS,CAAC,EACtD,OAACiK,EAAU,MAAM,IAA8IlE,EAAiB,EAAK,EAC9KkE,EAAU,MAAM,EACzB,CA8EA,SAASnC,IAAgB,CACvB,IAAIoC,EACJ,IAAI3L,EAAQsH,EAAAA,WAAiBF,EAAiB,EAC1CzI,EAAQ4M,GAAoD,EAC5DK,EAAUH,GAAmD,EAIjE,OAAIzL,IAAU,OACLA,GAID2L,EAAgBhN,EAAM,SAAW,KAAO,OAASgN,EAAcC,CAAO,CAChF,CAsFA,SAAS9D,IAAoB,CAC3B,GAAI,CACF,OAAA+D,CAAA,EACET,GAAqBF,GAAe,iBAAiB,EACrDY,EAAKL,GAAkBN,GAAoB,iBAAiB,EAC5D9C,EAAYC,EAAAA,OAAa,EAAK,EAClCb,OAAAA,GAA0B,IAAM,CAC9BY,EAAU,QAAU,EACtB,CAAC,EACcE,EAAAA,YAAkB,SAAUzK,EAAIT,EAAS,CAClDA,IAAY,SACdA,EAAU,CAAA,GAMPgL,EAAU,UACX,OAAOvK,GAAO,SAChB+N,EAAO,SAAS/N,CAAE,EAElB+N,EAAO,SAAS/N,EAAIjB,GAAS,CAC3B,YAAaiP,CAAA,EACZzO,CAAO,CAAC,EAEf,EAAG,CAACwO,EAAQC,CAAE,CAAC,CAEjB,CACA,MAAMC,GAAkB,CAAA,EACxB,SAASf,GAAY/N,EAAKoB,EAAMF,EAAS,CACzB4N,GAAgB9O,CAAG,IAC/B8O,GAAgB9O,CAAG,EAAI,GAG3B,CAUA,SAAS+O,GAAyBC,EAAcC,EAAc,CACvDD,GAAgB,MAAgBA,EAAa,mBAG7CA,GAAgB,MAAgBA,EAAa,oBAiBpD,CAmNA,SAASE,GAAMC,EAAQ,CAC0L5E,EAAiB,EAAK,CACvO,CAUA,SAAS6E,GAAOC,EAAO,CACrB,GAAI,CACF,SAAUC,EAAe,IACzB,SAAArC,EAAW,KACX,SAAUsC,EACV,eAAAC,EAAiBvP,GAAO,IACxB,UAAAgL,EACA,OAAQwE,EAAa,GACrB,OAAAzE,CAAA,EACEqE,EACFjF,GAAA,GAAwMG,EAAiB,EAAK,EAIhO,IAAI7G,EAAW4L,EAAa,QAAQ,OAAQ,GAAG,EAC3CI,EAAoBC,EAAAA,QAAc,KAAO,CAC3C,SAAAjM,EACA,UAAAuH,EACA,OAAQwE,EACR,OAAQ7P,GAAS,CACf,qBAAsB,EAAA,EACrBoL,CAAM,CAAA,GACP,CAACtH,EAAUsH,EAAQC,EAAWwE,CAAU,CAAC,EACzC,OAAOF,GAAiB,WAC1BA,EAAe5N,GAAU4N,CAAY,GAEvC,GAAI,CACF,SAAA/O,EAAW,IACX,OAAAC,EAAS,GACT,KAAAC,EAAO,GACP,MAAAgB,EAAQ,KACR,IAAA1B,EAAM,SAAA,EACJuP,EACAK,EAAkBD,EAAAA,QAAc,IAAM,CACxC,IAAIE,EAAmBhM,GAAcrD,EAAUkD,CAAQ,EACvD,OAAImM,GAAoB,KACf,KAEF,CACL,SAAU,CACR,SAAUA,EACV,OAAApP,EACA,KAAAC,EACA,MAAAgB,EACA,IAAA1B,CAAA,EAEF,eAAAwP,CAAA,CAEJ,EAAG,CAAC9L,EAAUlD,EAAUC,EAAQC,EAAMgB,EAAO1B,EAAKwP,CAAc,CAAC,EAEjE,OAAII,GAAmB,KACd,KAEWxD,EAAAA,cAAoBpC,GAAkB,SAAU,CAClE,MAAO0F,CAAA,EACOtD,EAAAA,cAAoBnC,GAAgB,SAAU,CAC5D,SAAAgD,EACA,MAAO2C,CAAA,CACR,CAAC,CACJ,CAOA,SAASE,GAAOC,EAAO,CACrB,GAAI,CACF,SAAA9C,EACA,SAAA1L,CAAA,EACEwO,EACJ,OAAOxE,GAAUyE,GAAyB/C,CAAQ,EAAG1L,CAAQ,CAC/D,CAsB4B,IAAI,QAAQ,IAAM,CAAC,CAAC,EAiHhD,SAASyO,GAAyB/C,EAAU3I,EAAY,CAClDA,IAAe,SACjBA,EAAa,CAAA,GAEf,IAAId,EAAS,CAAA,EACbyM,OAAAA,EAAAA,SAAe,QAAQhD,EAAU,CAACiD,EAAS1O,IAAU,CACnD,GAAI,CAAe2O,EAAAA,eAAqBD,CAAO,EAG7C,OAEF,IAAIE,EAAW,CAAC,GAAG9L,EAAY9C,CAAK,EACpC,GAAI0O,EAAQ,OAASzD,WAAgB,CAEnCjJ,EAAO,KAAK,MAAMA,EAAQwM,GAAyBE,EAAQ,MAAM,SAAUE,CAAQ,CAAC,EACpF,MACF,CACEF,EAAQ,OAAShB,IAAmQ3E,EAAiB,EAAK,EAC1S,CAAC2F,EAAQ,MAAM,OAAS,CAACA,EAAQ,MAAM,UAA0H3F,EAAiB,EAAK,EACzL,IAAI/F,EAAQ,CACV,GAAI0L,EAAQ,MAAM,IAAME,EAAS,KAAK,GAAG,EACzC,cAAeF,EAAQ,MAAM,cAC7B,QAASA,EAAQ,MAAM,QACvB,UAAWA,EAAQ,MAAM,UACzB,MAAOA,EAAQ,MAAM,MACrB,KAAMA,EAAQ,MAAM,KACpB,OAAQA,EAAQ,MAAM,OACtB,OAAQA,EAAQ,MAAM,OACtB,aAAcA,EAAQ,MAAM,aAC5B,cAAeA,EAAQ,MAAM,cAC7B,iBAAkBA,EAAQ,MAAM,eAAiB,MAAQA,EAAQ,MAAM,cAAgB,KACvF,iBAAkBA,EAAQ,MAAM,iBAChC,OAAQA,EAAQ,MAAM,OACtB,KAAMA,EAAQ,MAAM,IAAA,EAElBA,EAAQ,MAAM,WAChB1L,EAAM,SAAWwL,GAAyBE,EAAQ,MAAM,SAAUE,CAAQ,GAE5E5M,EAAO,KAAKgB,CAAK,CACnB,CAAC,EACMhB,CACT,CCt5CA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GA8NA,MAAM6M,GAAuB,IAC7B,GAAI,CACF,OAAO,qBAAuBA,EAChC,MAAY,CAEZ,CAuHA,MAAMC,GAAmB,kBACnBC,GAAsBC,GAAMF,EAAgB,EA6QlD,SAASG,GAAcC,EAAO,CAC5B,GAAI,CACF,SAAAhN,EACA,SAAAuJ,EACA,OAAAjC,EACA,OAAA1K,CAAA,EACEoQ,EACAC,EAAatF,EAAAA,OAAM,EACnBsF,EAAW,SAAW,OACxBA,EAAW,QAAUxQ,GAAqB,CACxC,OAAAG,EACA,SAAU,EAAA,CACX,GAEH,IAAIqC,EAAUgO,EAAW,QACrB,CAACjP,EAAOkP,CAAY,EAAIC,WAAe,CACzC,OAAQlO,EAAQ,OAChB,SAAUA,EAAQ,QAAA,CACnB,EACG,CACF,mBAAAmO,CAAA,EACE9F,GAAU,CAAA,EACV+F,EAAWzF,cAAkB0F,GAAY,CAC3CF,GAAsBP,GAAsBA,GAAoB,IAAMK,EAAaI,CAAQ,CAAC,EAAIJ,EAAaI,CAAQ,CACvH,EAAG,CAACJ,EAAcE,CAAkB,CAAC,EACrCpG,OAAAA,EAAAA,gBAAsB,IAAM/H,EAAQ,OAAOoO,CAAQ,EAAG,CAACpO,EAASoO,CAAQ,CAAC,EACzEE,EAAAA,UAAgB,IAAMC,GAAgClG,CAAM,EAAG,CAACA,CAAM,CAAC,EACnDoB,EAAAA,cAAoBgD,GAAQ,CAC9C,SAAA1L,EACA,SAAAuJ,EACA,SAAUvL,EAAM,SAChB,eAAgBA,EAAM,OACtB,UAAWiB,EACX,OAAAqI,CAAA,CACD,CACH,CAmTA,IAAIiD,IACH,SAAUA,EAAgB,CACzBA,EAAe,qBAA0B,uBACzCA,EAAe,UAAe,YAC9BA,EAAe,iBAAsB,mBACrCA,EAAe,WAAgB,aAC/BA,EAAe,uBAA4B,wBAC7C,GAAGA,KAAmBA,GAAiB,CAAA,EAAG,EAC1C,IAAIC,IACH,SAAUA,EAAqB,CAC9BA,EAAoB,WAAgB,aACpCA,EAAoB,YAAiB,cACrCA,EAAoB,qBAA0B,sBAChD,GAAGA,KAAwBA,GAAsB,CAAA,EAAG,EC18BpD,IAAIiD,GAAe,KAAM,CACvB,aAAc,CACZ,KAAK,UAA4B,IAAI,IACrC,KAAK,UAAY,KAAK,UAAU,KAAK,IAAI,CAC3C,CACA,UAAU7O,EAAU,CAClB,YAAK,UAAU,IAAIA,CAAQ,EAC3B,KAAK,YAAW,EACT,IAAM,CACX,KAAK,UAAU,OAAOA,CAAQ,EAC9B,KAAK,cAAa,CACpB,CACF,CACA,cAAe,CACb,OAAO,KAAK,UAAU,KAAO,CAC/B,CACA,aAAc,CACd,CACA,eAAgB,CAChB,CACF,ECpBI8O,GAAW,OAAO,OAAW,KAAe,SAAU,WAC1D,SAASC,IAAO,CAChB,CACA,SAASC,GAAiBC,EAASC,EAAO,CACxC,OAAO,OAAOD,GAAY,WAAaA,EAAQC,CAAK,EAAID,CAC1D,CACA,SAASE,GAAexQ,EAAO,CAC7B,OAAO,OAAOA,GAAU,UAAYA,GAAS,GAAKA,IAAU,GAC9D,CACA,SAASyQ,GAAeC,EAAWC,EAAW,CAC5C,OAAO,KAAK,IAAID,GAAaC,GAAa,GAAK,KAAK,IAAA,EAAO,CAAC,CAC9D,CACA,SAASC,GAAiBD,EAAWE,EAAO,CAC1C,OAAO,OAAOF,GAAc,WAAaA,EAAUE,CAAK,EAAIF,CAC9D,CACA,SAASG,GAAeC,EAASF,EAAO,CACtC,OAAO,OAAOE,GAAY,WAAaA,EAAQF,CAAK,EAAIE,CAC1D,CACA,SAASC,GAAWC,EAASJ,EAAO,CAClC,KAAM,CACJ,KAAAK,EAAO,MACP,MAAAC,EACA,YAAAC,EACA,UAAAC,EACA,SAAAC,EACA,MAAAC,CAAA,EACEN,EACJ,GAAIK,GACF,GAAIH,GACF,GAAIN,EAAM,YAAcW,GAAsBF,EAAUT,EAAM,OAAO,EACnE,MAAO,WAEA,CAACY,GAAgBZ,EAAM,SAAUS,CAAQ,EAClD,MAAO,GAGX,GAAIJ,IAAS,MAAO,CAClB,MAAMQ,EAAWb,EAAM,SAAA,EAIvB,GAHIK,IAAS,UAAY,CAACQ,GAGtBR,IAAS,YAAcQ,EACzB,MAAO,EAEX,CAOA,MANI,SAAOH,GAAU,WAAaV,EAAM,QAAA,IAAcU,GAGlDH,GAAeA,IAAgBP,EAAM,MAAM,aAG3CQ,GAAa,CAACA,EAAUR,CAAK,EAInC,CACA,SAASc,GAAcV,EAASW,EAAU,CACxC,KAAM,CAAE,MAAAT,EAAO,OAAAU,EAAQ,UAAAR,EAAW,YAAAS,GAAgBb,EAClD,GAAIa,EAAa,CACf,GAAI,CAACF,EAAS,QAAQ,YACpB,MAAO,GAET,GAAIT,GACF,GAAIY,GAAQH,EAAS,QAAQ,WAAW,IAAMG,GAAQD,CAAW,EAC/D,MAAO,WAEA,CAACL,GAAgBG,EAAS,QAAQ,YAAaE,CAAW,EACnE,MAAO,EAEX,CAIA,MAHI,EAAAD,GAAUD,EAAS,MAAM,SAAWC,GAGpCR,GAAa,CAACA,EAAUO,CAAQ,EAItC,CACA,SAASJ,GAAsBF,EAAUnS,EAAS,CAEhD,QADeA,GAAA,YAAAA,EAAS,iBAAkB4S,IAC5BT,CAAQ,CACxB,CACA,SAASS,GAAQT,EAAU,CACzB,OAAO,KAAK,UACVA,EACA,CAAC5K,EAAGsL,IAAQC,GAAcD,CAAG,EAAI,OAAO,KAAKA,CAAG,EAAE,KAAA,EAAO,OAAO,CAAC1N,EAAQvF,KACvEuF,EAAOvF,CAAG,EAAIiT,EAAIjT,CAAG,EACduF,GACN,CAAA,CAAE,EAAI0N,CAAA,CAEb,CACA,SAASP,GAAgBjN,EAAGC,EAAG,CAC7B,OAAID,IAAMC,EACD,GAEL,OAAOD,GAAM,OAAOC,EACf,GAELD,GAAKC,GAAK,OAAOD,GAAM,UAAY,OAAOC,GAAM,SAC3C,OAAO,KAAKA,CAAC,EAAE,MAAO1F,GAAQ0S,GAAgBjN,EAAEzF,CAAG,EAAG0F,EAAE1F,CAAG,CAAC,CAAC,EAE/D,EACT,CACA,SAASmT,GAAiB1N,EAAGC,EAAG,CAC9B,GAAID,IAAMC,EACR,OAAOD,EAET,MAAM2N,EAAQC,GAAa5N,CAAC,GAAK4N,GAAa3N,CAAC,EAC/C,GAAI0N,GAASF,GAAczN,CAAC,GAAKyN,GAAcxN,CAAC,EAAG,CACjD,MAAM4N,EAASF,EAAQ3N,EAAI,OAAO,KAAKA,CAAC,EAClC8N,EAAQD,EAAO,OACfE,EAASJ,EAAQ1N,EAAI,OAAO,KAAKA,CAAC,EAClC+N,EAAQD,EAAO,OACfE,EAAON,EAAQ,CAAA,EAAK,CAAA,EACpBO,EAAY,IAAI,IAAIL,CAAM,EAChC,IAAIM,EAAa,EACjB,QAAS9T,EAAI,EAAGA,EAAI2T,EAAO3T,IAAK,CAC9B,MAAME,EAAMoT,EAAQtT,EAAI0T,EAAO1T,CAAC,GAC3B,CAACsT,GAASO,EAAU,IAAI3T,CAAG,GAAKoT,IAAU3N,EAAEzF,CAAG,IAAM,QAAU0F,EAAE1F,CAAG,IAAM,QAC7E0T,EAAK1T,CAAG,EAAI,OACZ4T,MAEAF,EAAK1T,CAAG,EAAImT,GAAiB1N,EAAEzF,CAAG,EAAG0F,EAAE1F,CAAG,CAAC,EACvC0T,EAAK1T,CAAG,IAAMyF,EAAEzF,CAAG,GAAKyF,EAAEzF,CAAG,IAAM,QACrC4T,IAGN,CACA,OAAOL,IAAUE,GAASG,IAAeL,EAAQ9N,EAAIiO,CACvD,CACA,OAAOhO,CACT,CAYA,SAAS2N,GAAapS,EAAO,CAC3B,OAAO,MAAM,QAAQA,CAAK,GAAKA,EAAM,SAAW,OAAO,KAAKA,CAAK,EAAE,MACrE,CACA,SAASiS,GAAcW,EAAG,CACxB,GAAI,CAACC,GAAmBD,CAAC,EACvB,MAAO,GAET,MAAME,EAAOF,EAAE,YACf,GAAIE,IAAS,OACX,MAAO,GAET,MAAMC,EAAOD,EAAK,UAOlB,MANI,GAACD,GAAmBE,CAAI,GAGxB,CAACA,EAAK,eAAe,eAAe,GAGpC,OAAO,eAAeH,CAAC,IAAM,OAAO,UAI1C,CACA,SAASC,GAAmBD,EAAG,CAC7B,OAAO,OAAO,UAAU,SAAS,KAAKA,CAAC,IAAM,iBAC/C,CACA,SAASI,GAAMC,EAAS,CACtB,OAAO,IAAI,QAASC,GAAY,CAC9B,WAAWA,EAASD,CAAO,CAC7B,CAAC,CACH,CACA,SAASE,GAAYC,EAAUC,EAAMlU,EAAS,CAC5C,OAAI,OAAOA,EAAQ,mBAAsB,WAChCA,EAAQ,kBAAkBiU,EAAUC,CAAI,EACtClU,EAAQ,oBAAsB,GAWhC+S,GAAiBkB,EAAUC,CAAI,EAEjCA,CACT,CAIA,SAASC,GAASC,EAAOC,EAAMC,EAAM,EAAG,CACtC,MAAMC,EAAW,CAAC,GAAGH,EAAOC,CAAI,EAChC,OAAOC,GAAOC,EAAS,OAASD,EAAMC,EAAS,MAAM,CAAC,EAAIA,CAC5D,CACA,SAASC,GAAWJ,EAAOC,EAAMC,EAAM,EAAG,CACxC,MAAMC,EAAW,CAACF,EAAM,GAAGD,CAAK,EAChC,OAAOE,GAAOC,EAAS,OAASD,EAAMC,EAAS,MAAM,EAAG,EAAE,EAAIA,CAChE,CACA,IAAIE,GAAY,OAAA,EAChB,SAASC,GAAc1U,EAAS2U,EAAc,CAQ5C,MAAI,CAAC3U,EAAQ,UAAW2U,GAAA,MAAAA,EAAc,gBAC7B,IAAMA,EAAa,eAExB,CAAC3U,EAAQ,SAAWA,EAAQ,UAAYyU,GACnC,IAAM,QAAQ,OAAO,IAAI,MAAM,qBAAqBzU,EAAQ,SAAS,GAAG,CAAC,EAE3EA,EAAQ,OACjB,iBCzNI4U,IAAeC,GAAA,cAAc9D,EAAa,CAI5C,aAAc,CACZ,MAAK,EAJP+D,EAAA,KAAAC,IACAD,EAAA,KAAAE,IACAF,EAAA,KAAAG,IAGEC,EAAA,KAAKD,GAAUE,GAAY,CACzB,GAAI,CAACnE,IAAY,OAAO,iBAAkB,CACxC,MAAM9O,EAAW,IAAMiT,EAAO,EAC9B,cAAO,iBAAiB,mBAAoBjT,EAAU,EAAK,EACpD,IAAM,CACX,OAAO,oBAAoB,mBAAoBA,CAAQ,CACzD,CACF,CAEF,EACF,CACA,aAAc,CACPkT,EAAA,KAAKJ,KACR,KAAK,iBAAiBI,EAAA,KAAKH,GAAM,CAErC,CACA,eAAgB,OACT,KAAK,kBACRJ,EAAAO,EAAA,KAAKJ,MAAL,MAAAH,EAAA,WACAK,EAAA,KAAKF,GAAW,QAEpB,CACA,iBAAiBK,EAAO,OACtBH,EAAA,KAAKD,GAASI,IACdR,EAAAO,EAAA,KAAKJ,MAAL,MAAAH,EAAA,WACAK,EAAA,KAAKF,GAAWK,EAAOC,GAAY,CAC7B,OAAOA,GAAY,UACrB,KAAK,WAAWA,CAAO,EAEvB,KAAK,QAAO,CAEhB,CAAC,EACH,CACA,WAAWA,EAAS,CACFF,EAAA,KAAKL,MAAaO,IAEhCJ,EAAA,KAAKH,GAAWO,GAChB,KAAK,QAAO,EAEhB,CACA,SAAU,CACR,MAAMC,EAAY,KAAK,UAAS,EAChC,KAAK,UAAU,QAASrT,GAAa,CACnCA,EAASqT,CAAS,CACpB,CAAC,CACH,CACA,WAAY,OACV,OAAI,OAAOH,EAAA,KAAKL,KAAa,UACpBK,EAAA,KAAKL,MAEPF,EAAA,WAAW,WAAX,YAAAA,EAAqB,mBAAoB,QAClD,CACF,EAzDEE,GAAA,YACAC,GAAA,YACAC,GAAA,YAHiBJ,IA2DfW,GAAe,IAAIZ,eC3DnBa,IAAgBZ,GAAA,cAAc9D,EAAa,CAI7C,aAAc,CACZ,MAAK,EAJP+D,EAAA,KAAAY,GAAU,IACVZ,EAAA,KAAAE,IACAF,EAAA,KAAAG,IAGEC,EAAA,KAAKD,GAAUU,GAAa,CAC1B,GAAI,CAAC3E,IAAY,OAAO,iBAAkB,CACxC,MAAM4E,EAAiB,IAAMD,EAAS,EAAI,EACpCE,EAAkB,IAAMF,EAAS,EAAK,EAC5C,cAAO,iBAAiB,SAAUC,EAAgB,EAAK,EACvD,OAAO,iBAAiB,UAAWC,EAAiB,EAAK,EAClD,IAAM,CACX,OAAO,oBAAoB,SAAUD,CAAc,EACnD,OAAO,oBAAoB,UAAWC,CAAe,CACvD,CACF,CAEF,EACF,CACA,aAAc,CACPT,EAAA,KAAKJ,KACR,KAAK,iBAAiBI,EAAA,KAAKH,GAAM,CAErC,CACA,eAAgB,OACT,KAAK,kBACRJ,EAAAO,EAAA,KAAKJ,MAAL,MAAAH,EAAA,WACAK,EAAA,KAAKF,GAAW,QAEpB,CACA,iBAAiBK,EAAO,OACtBH,EAAA,KAAKD,GAASI,IACdR,EAAAO,EAAA,KAAKJ,MAAL,MAAAH,EAAA,WACAK,EAAA,KAAKF,GAAWK,EAAM,KAAK,UAAU,KAAK,IAAI,CAAC,EACjD,CACA,UAAUS,EAAQ,CACAV,EAAA,KAAKM,MAAYI,IAE/BZ,EAAA,KAAKQ,GAAUI,GACf,KAAK,UAAU,QAAS5T,GAAa,CACnCA,EAAS4T,CAAM,CACjB,CAAC,EAEL,CACA,UAAW,CACT,OAAOV,EAAA,KAAKM,GACd,CACF,EA/CEA,GAAA,YACAV,GAAA,YACAC,GAAA,YAHkBJ,IAiDhBkB,GAAgB,IAAIN,GClDxB,SAASO,IAAkB,CACzB,IAAIjC,EACAkC,EACJ,MAAMC,EAAW,IAAI,QAAQ,CAACC,EAAUC,IAAY,CAClDrC,EAAUoC,EACVF,EAASG,CACX,CAAC,EACDF,EAAS,OAAS,UAClBA,EAAS,MAAM,IAAM,CACrB,CAAC,EACD,SAASG,EAASnC,EAAM,CACtB,OAAO,OAAOgC,EAAUhC,CAAI,EAC5B,OAAOgC,EAAS,QAChB,OAAOA,EAAS,MAClB,CACA,OAAAA,EAAS,QAAWrV,GAAU,CAC5BwV,EAAS,CACP,OAAQ,YACR,MAAAxV,CACN,CAAK,EACDkT,EAAQlT,CAAK,CACf,EACAqV,EAAS,OAAUI,GAAW,CAC5BD,EAAS,CACP,OAAQ,WACR,OAAAC,CACN,CAAK,EACDL,EAAOK,CAAM,CACf,EACOJ,CACT,CC3BA,SAASK,GAAkBC,EAAc,CACvC,OAAO,KAAK,IAAI,IAAM,GAAKA,EAAc,GAAG,CAC9C,CACA,SAASC,GAASC,EAAa,CAC7B,OAAQA,GAAe,YAAc,SAAWX,GAAc,SAAQ,EAAK,EAC7E,CACA,IAAIY,GAAiB,cAAc,KAAM,CACvC,YAAY3W,EAAS,CACnB,MAAM,gBAAgB,EACtB,KAAK,OAASA,GAAA,YAAAA,EAAS,OACvB,KAAK,OAASA,GAAA,YAAAA,EAAS,MACzB,CACF,EAIA,SAAS4W,GAAcC,EAAQ,CAC7B,IAAIC,EAAmB,GACnBN,EAAe,EACfO,EACJ,MAAMb,EAAWF,GAAe,EAC1BgB,EAAa,IAAMd,EAAS,SAAW,UACvCe,EAAUC,GAAkB,OAC3BF,EAAU,IACbf,EAAO,IAAIU,GAAeO,CAAa,CAAC,GACxCrC,EAAAgC,EAAO,QAAP,MAAAhC,EAAA,KAAAgC,GAEJ,EACMM,EAAc,IAAM,CACxBL,EAAmB,EACrB,EACMM,EAAgB,IAAM,CAC1BN,EAAmB,EACrB,EACMO,EAAc,IAAM7B,GAAa,UAAS,IAAOqB,EAAO,cAAgB,UAAYd,GAAc,SAAQ,IAAOc,EAAO,OAAM,EAC9HS,EAAW,IAAMb,GAASI,EAAO,WAAW,GAAKA,EAAO,OAAM,EAC9D9C,EAAWlT,GAAU,CACpBmW,EAAU,IACbD,GAAA,MAAAA,IACAb,EAAS,QAAQrV,CAAK,EAE1B,EACMoV,EAAUpV,GAAU,CACnBmW,EAAU,IACbD,GAAA,MAAAA,IACAb,EAAS,OAAOrV,CAAK,EAEzB,EACM0W,EAAQ,IACL,IAAI,QAASC,GAAoB,OACtCT,EAAclW,GAAU,EAClBmW,EAAU,GAAMK,MAClBG,EAAgB3W,CAAK,CAEzB,GACAgU,EAAAgC,EAAO,UAAP,MAAAhC,EAAA,KAAAgC,EACF,CAAC,EAAE,KAAK,IAAM,OACZE,EAAa,OACRC,EAAU,IACbnC,EAAAgC,EAAO,aAAP,MAAAhC,EAAA,KAAAgC,EAEJ,CAAC,EAEGY,EAAM,IAAM,CAChB,GAAIT,EAAU,EACZ,OAEF,IAAIU,EACJ,MAAMC,EAAiBnB,IAAiB,EAAIK,EAAO,eAAiB,OACpE,GAAI,CACFa,EAAiBC,GAAkBd,EAAO,GAAE,CAC9C,OAASlU,EAAO,CACd+U,EAAiB,QAAQ,OAAO/U,CAAK,CACvC,CACA,QAAQ,QAAQ+U,CAAc,EAAE,KAAK3D,CAAO,EAAE,MAAOpR,GAAU,OAC7D,GAAIqU,EAAU,EACZ,OAEF,MAAMY,EAAQf,EAAO,QAAU7F,GAAW,EAAI,GACxC6G,EAAahB,EAAO,YAAcN,GAClCuB,EAAQ,OAAOD,GAAe,WAAaA,EAAWrB,EAAc7T,CAAK,EAAIkV,EAC7EE,EAAcH,IAAU,IAAQ,OAAOA,GAAU,UAAYpB,EAAeoB,GAAS,OAAOA,GAAU,YAAcA,EAAMpB,EAAc7T,CAAK,EACnJ,GAAImU,GAAoB,CAACiB,EAAa,CACpC9B,EAAOtT,CAAK,EACZ,MACF,CACA6T,KACA3B,EAAAgC,EAAO,SAAP,MAAAhC,EAAA,KAAAgC,EAAgBL,EAAc7T,GAC9BkR,GAAMiE,CAAK,EAAE,KAAK,IACTT,EAAW,EAAK,OAASE,EAAK,CACtC,EAAE,KAAK,IAAM,CACRT,EACFb,EAAOtT,CAAK,EAEZ8U,EAAG,CAEP,CAAC,CACH,CAAC,CACH,EACA,MAAO,CACL,QAASvB,EACT,OAAQ,IAAMA,EAAS,OACvB,OAAAe,EACA,SAAU,KACRF,GAAA,MAAAA,IACOb,GAET,YAAAiB,EACA,cAAAC,EACA,SAAAE,EACA,MAAO,KACDA,EAAQ,EACVG,EAAG,EAEHF,EAAK,EAAG,KAAKE,CAAG,EAEXvB,EAEb,CACA,CC3HA,IAAI8B,GAAoB3N,GAAO,WAAWA,EAAI,CAAC,EAC/C,SAAS4N,IAAsB,CAC7B,IAAIC,EAAQ,CAAA,EACRC,EAAe,EACfC,EAAYC,GAAa,CAC3BA,EAAQ,CACV,EACIC,EAAiBD,GAAa,CAChCA,EAAQ,CACV,EACIE,EAAaP,GACjB,MAAMQ,EAAYH,GAAa,CACzBF,EACFD,EAAM,KAAKG,CAAQ,EAEnBE,EAAW,IAAM,CACfH,EAASC,CAAQ,CACnB,CAAC,CAEL,EACMI,EAAQ,IAAM,CAClB,MAAMC,EAAgBR,EACtBA,EAAQ,CAAA,EACJQ,EAAc,QAChBH,EAAW,IAAM,CACfD,EAAc,IAAM,CAClBI,EAAc,QAASL,GAAa,CAClCD,EAASC,CAAQ,CACnB,CAAC,CACH,CAAC,CACH,CAAC,CAEL,EACA,MAAO,CACL,MAAQA,GAAa,CACnB,IAAIlT,EACJgT,IACA,GAAI,CACFhT,EAASkT,EAAQ,CACnB,QAAC,CACCF,IACKA,GACHM,EAAK,CAET,CACA,OAAOtT,CACT,EAIA,WAAakT,GACJ,IAAIM,IAAS,CAClBH,EAAS,IAAM,CACbH,EAAS,GAAGM,CAAI,CAClB,CAAC,CACH,EAEF,SAAAH,EAKA,kBAAoBxV,GAAO,CACzBoV,EAAWpV,CACb,EAKA,uBAAyBA,GAAO,CAC9BsV,EAAgBtV,CAClB,EACA,aAAeA,GAAO,CACpBuV,EAAavV,CACf,CACJ,CACA,CACA,IAAI4V,EAAgBX,GAAmB,QC5EnCY,IAAYhE,GAAA,KAAM,CAAN,cACdC,EAAA,KAAAgE,IACA,SAAU,CACR,KAAK,eAAc,CACrB,CACA,YAAa,CACX,KAAK,eAAc,EACfzH,GAAe,KAAK,MAAM,GAC5B6D,EAAA,KAAK4D,GAAa,WAAW,IAAM,CACjC,KAAK,eAAc,CACrB,EAAG,KAAK,MAAM,EAElB,CACA,aAAaC,EAAW,CACtB,KAAK,OAAS,KAAK,IACjB,KAAK,QAAU,EACfA,IAAc/H,GAAW,IAAW,EAAI,GAAK,IACnD,CACE,CACA,gBAAiB,CACXoE,EAAA,KAAK0D,MACP,aAAa1D,EAAA,KAAK0D,GAAU,EAC5B5D,EAAA,KAAK4D,GAAa,QAEtB,CACF,EAxBEA,GAAA,YADcjE,iCCWZmE,IAAQnE,GAAA,cAAcgE,EAAU,CAQlC,YAAYhC,EAAQ,CAClB,MAAA,EATQ/B,EAAA,KAAAmE,IACVnE,EAAA,KAAAoE,IACApE,EAAA,KAAAqE,IACArE,EAAA,KAAAsE,IACAtE,EAAA,KAAAuE,IACAvE,EAAA,KAAAwE,GACAxE,EAAA,KAAAyE,IACAzE,EAAA,KAAA0E,IAGEtE,EAAA,KAAKsE,GAAuB,IAC5BtE,EAAA,KAAKqE,GAAkB1C,EAAO,gBAC9B,KAAK,WAAWA,EAAO,OAAO,EAC9B,KAAK,UAAY,CAAA,EACjB3B,EAAA,KAAKmE,GAAUxC,EAAO,QACtB3B,EAAA,KAAKkE,GAAShE,EAAA,KAAKiE,IAAQ,cAAA,GAC3B,KAAK,SAAWxC,EAAO,SACvB,KAAK,UAAYA,EAAO,UACxB3B,EAAA,KAAKgE,GAAgBO,GAAgB,KAAK,OAAO,GACjD,KAAK,MAAQ5C,EAAO,OAASzB,EAAA,KAAK8D,IAClC,KAAK,WAAA,CACP,CACA,IAAI,MAAO,CACT,OAAO,KAAK,QAAQ,IACtB,CACA,IAAI,SAAU,OACZ,OAAOrE,EAAAO,EAAA,KAAKkE,KAAL,YAAAzE,EAAe,OACxB,CACA,WAAW7U,EAAS,CAClB,KAAK,QAAU,CAAE,GAAGoV,EAAA,KAAKmE,IAAiB,GAAGvZ,CAAA,EAC7C,KAAK,aAAa,KAAK,QAAQ,MAAM,CACvC,CACA,gBAAiB,CACX,CAAC,KAAK,UAAU,QAAU,KAAK,MAAM,cAAgB,QACvDoV,EAAA,KAAKgE,IAAO,OAAO,IAAI,CAE3B,CACA,QAAQM,EAAS1Z,EAAS,CACxB,MAAMkU,EAAOF,GAAY,KAAK,MAAM,KAAM0F,EAAS,KAAK,OAAO,EAC/D,OAAAC,EAAA,KAAKV,GAAAW,IAAL,UAAe,CACb,KAAA1F,EACA,KAAM,UACN,cAAelU,GAAA,YAAAA,EAAS,UACxB,OAAQA,GAAA,YAAAA,EAAS,MAAA,GAEZkU,CACT,CACA,SAAS5S,EAAOuY,EAAiB,CAC/BF,EAAA,KAAKV,GAAAW,IAAL,UAAe,CAAE,KAAM,WAAY,MAAAtY,EAAO,gBAAAuY,GAC5C,CACA,OAAO7Z,EAAS,SACd,MAAM8Z,GAAUjF,EAAAO,EAAA,KAAKkE,KAAL,YAAAzE,EAAe,QAC/B,OAAAkF,EAAA3E,EAAA,KAAKkE,KAAL,MAAAS,EAAe,OAAO/Z,GACf8Z,EAAUA,EAAQ,KAAK7I,EAAI,EAAE,MAAMA,EAAI,EAAI,QAAQ,QAAA,CAC5D,CACA,SAAU,CACR,MAAM,QAAA,EACN,KAAK,OAAO,CAAE,OAAQ,EAAA,CAAM,CAC9B,CACA,OAAQ,CACN,KAAK,QAAA,EACL,KAAK,SAASmE,EAAA,KAAK8D,GAAa,CAClC,CACA,UAAW,CACT,OAAO,KAAK,UAAU,KACnBc,GAAarI,GAAeqI,EAAS,QAAQ,QAAS,IAAI,IAAM,EAAA,CAErE,CACA,YAAa,CACX,OAAI,KAAK,kBAAA,EAAsB,EACtB,CAAC,KAAK,SAAA,EAER,KAAK,QAAQ,UAAYvF,IAAa,KAAK,MAAM,gBAAkB,KAAK,MAAM,mBAAqB,CAC5G,CACA,UAAW,CACT,OAAI,KAAK,kBAAA,EAAsB,EACtB,KAAK,UAAU,KACnBuF,GAAavI,GAAiBuI,EAAS,QAAQ,UAAW,IAAI,IAAM,QAAA,EAGlE,EACT,CACA,SAAU,CACR,OAAI,KAAK,kBAAA,EAAsB,EACtB,KAAK,UAAU,KACnBA,GAAaA,EAAS,mBAAmB,OAAA,EAGvC,KAAK,MAAM,OAAS,QAAU,KAAK,MAAM,aAClD,CACA,cAAcxI,EAAY,EAAG,CAC3B,OAAI,KAAK,MAAM,OAAS,OACf,GAELA,IAAc,SACT,GAEL,KAAK,MAAM,cACN,GAEF,CAACF,GAAe,KAAK,MAAM,cAAeE,CAAS,CAC5D,CACA,SAAU,OACR,MAAMwI,EAAW,KAAK,UAAU,KAAMC,GAAMA,EAAE,0BAA0B,EACxED,GAAA,MAAAA,EAAU,QAAQ,CAAE,cAAe,EAAA,IACnCnF,EAAAO,EAAA,KAAKkE,KAAL,MAAAzE,EAAe,UACjB,CACA,UAAW,OACT,MAAMmF,EAAW,KAAK,UAAU,KAAMC,GAAMA,EAAE,wBAAwB,EACtED,GAAA,MAAAA,EAAU,QAAQ,CAAE,cAAe,EAAA,IACnCnF,EAAAO,EAAA,KAAKkE,KAAL,MAAAzE,EAAe,UACjB,CACA,YAAYmF,EAAU,CACf,KAAK,UAAU,SAASA,CAAQ,IACnC,KAAK,UAAU,KAAKA,CAAQ,EAC5B,KAAK,eAAA,EACL5E,EAAA,KAAKgE,IAAO,OAAO,CAAE,KAAM,gBAAiB,MAAO,KAAM,SAAAY,EAAU,EAEvE,CACA,eAAeA,EAAU,CACnB,KAAK,UAAU,SAASA,CAAQ,IAClC,KAAK,UAAY,KAAK,UAAU,OAAQC,GAAMA,IAAMD,CAAQ,EACvD,KAAK,UAAU,SACd5E,EAAA,KAAKkE,KACHlE,EAAA,KAAKoE,IACPpE,EAAA,KAAKkE,GAAS,OAAO,CAAE,OAAQ,GAAM,EAErClE,EAAA,KAAKkE,GAAS,YAAA,GAGlB,KAAK,WAAA,GAEPlE,EAAA,KAAKgE,IAAO,OAAO,CAAE,KAAM,kBAAmB,MAAO,KAAM,SAAAY,EAAU,EAEzE,CACA,mBAAoB,CAClB,OAAO,KAAK,UAAU,MACxB,CACA,YAAa,CACN,KAAK,MAAM,eACdL,EAAA,KAAKV,GAAAW,IAAL,UAAe,CAAE,KAAM,YAAA,EAE3B,CACA,MAAM,MAAM5Z,EAAS2U,EAAc,6BACjC,GAAI,KAAK,MAAM,cAAgB,UAG/BE,EAAAO,EAAA,KAAKkE,KAAL,YAAAzE,EAAe,YAAa,YAC1B,GAAI,KAAK,MAAM,OAAS,SAAUF,GAAA,MAAAA,EAAc,eAC9C,KAAK,OAAO,CAAE,OAAQ,EAAA,CAAM,UACnBS,EAAA,KAAKkE,GACd,OAAAlE,EAAA,KAAKkE,GAAS,cAAA,EACPlE,EAAA,KAAKkE,GAAS,QAMzB,GAHItZ,GACF,KAAK,WAAWA,CAAO,EAErB,CAAC,KAAK,QAAQ,QAAS,CACzB,MAAMga,EAAW,KAAK,UAAU,KAAMC,GAAMA,EAAE,QAAQ,OAAO,EACzDD,GACF,KAAK,WAAWA,EAAS,OAAO,CAEpC,CAQA,MAAME,EAAkB,IAAI,gBACtBC,EAAqBC,GAAW,CACpC,OAAO,eAAeA,EAAQ,SAAU,CACtC,WAAY,GACZ,IAAK,KACHlF,EAAA,KAAKsE,GAAuB,IACrBU,EAAgB,OACzB,CACD,CACH,EACMG,EAAU,IAAM,CACpB,MAAMC,EAAU5F,GAAc,KAAK,QAASC,CAAY,EAUlD4F,GATuB,IAAM,CACjC,MAAMC,EAAkB,CACtB,OAAQpF,EAAA,KAAKiE,IACb,SAAU,KAAK,SACf,KAAM,KAAK,IAAA,EAEb,OAAAc,EAAkBK,CAAe,EAC1BA,CACT,GACuB,EAEvB,OADAtF,EAAA,KAAKsE,GAAuB,IACxB,KAAK,QAAQ,UACR,KAAK,QAAQ,UAClBc,EACAC,EACA,IAAA,EAGGD,EAAQC,CAAc,CAC/B,EAaME,GAZqB,IAAM,CAC/B,MAAMC,EAAW,CACf,aAAA/F,EACA,QAAS,KAAK,QACd,SAAU,KAAK,SACf,OAAQS,EAAA,KAAKiE,IACb,MAAO,KAAK,MACZ,QAAAgB,CAAA,EAEF,OAAAF,EAAkBO,CAAQ,EACnBA,CACT,GACgB,GAChBX,EAAA,KAAK,QAAQ,WAAb,MAAAA,EAAuB,QAAQU,EAAS,MACxCvF,EAAA,KAAKiE,GAAe,KAAK,QACrB,KAAK,MAAM,cAAgB,QAAU,KAAK,MAAM,cAAcwB,EAAAF,EAAQ,eAAR,YAAAE,EAAsB,QACtFhB,EAAA,KAAKV,GAAAW,IAAL,UAAe,CAAE,KAAM,QAAS,MAAMgB,EAAAH,EAAQ,eAAR,YAAAG,EAAsB,OAE9D1F,EAAA,KAAKoE,EAAW1C,GAAc,CAC5B,eAAgBjC,GAAA,YAAAA,EAAc,eAC9B,GAAI8F,EAAQ,QACZ,MAAOP,EAAgB,MAAM,KAAKA,CAAe,EACjD,OAAQ,CAAC1D,EAAc7T,IAAU,CAC/BgX,EAAA,KAAKV,GAAAW,IAAL,UAAe,CAAE,KAAM,SAAU,aAAApD,EAAc,MAAA7T,GACjD,EACA,QAAS,IAAM,CACbgX,EAAA,KAAKV,GAAAW,IAAL,UAAe,CAAE,KAAM,OAAA,EACzB,EACA,WAAY,IAAM,CAChBD,EAAA,KAAKV,GAAAW,IAAL,UAAe,CAAE,KAAM,UAAA,EACzB,EACA,MAAOa,EAAQ,QAAQ,MACvB,WAAYA,EAAQ,QAAQ,WAC5B,YAAaA,EAAQ,QAAQ,YAC7B,OAAQ,IAAM,EAAA,CACf,GACD,GAAI,CACF,MAAMvG,EAAO,MAAMkB,EAAA,KAAKkE,GAAS,MAAA,EACjC,GAAIpF,IAAS,OAMX,MAAM,IAAI,MAAM,GAAG,KAAK,SAAS,oBAAoB,EAEvD,YAAK,QAAQA,CAAI,GACjB2G,GAAAC,EAAA1F,EAAA,KAAKgE,IAAO,QAAO,YAAnB,MAAAyB,EAAA,KAAAC,EAA+B5G,EAAM,OACrC6G,GAAAC,EAAA5F,EAAA,KAAKgE,IAAO,QAAO,YAAnB,MAAA2B,EAAA,KAAAC,EACE9G,EACA,KAAK,MAAM,MACX,MAEKA,CACT,OAASvR,EAAO,CACd,GAAIA,aAAiBgU,GAAgB,CACnC,GAAIhU,EAAM,OACR,OAAOyS,EAAA,KAAKkE,GAAS,QACvB,GAAW3W,EAAM,OACf,YAAK,SAAS,CACZ,GAAGyS,EAAA,KAAK+D,IACR,YAAa,MAAA,CACd,EACM,KAAK,MAAM,IAEtB,CACA,MAAAQ,EAAA,KAAKV,GAAAW,IAAL,UAAe,CACb,KAAM,QACN,MAAAjX,CAAA,IAEFsY,GAAAC,EAAA9F,EAAA,KAAKgE,IAAO,QAAO,UAAnB,MAAA6B,EAAA,KAAAC,EACEvY,EACA,OAEFwY,GAAAC,EAAAhG,EAAA,KAAKgE,IAAO,QAAO,YAAnB,MAAA+B,EAAA,KAAAC,EACE,KAAK,MAAM,KACXzY,EACA,MAEIA,CACR,QAAA,CACE,KAAK,WAAA,CACP,CACF,CA2EF,EAxWEuW,GAAA,YACAC,GAAA,YACAC,GAAA,YACAC,GAAA,YACAC,EAAA,YACAC,GAAA,YACAC,GAAA,YAPUP,GAAA,YA+RVW,YAAU3X,EAAQ,CAChB,MAAMoZ,EAAW/Z,GAAU,CACzB,OAAQW,EAAO,KAAA,CACb,IAAK,SACH,MAAO,CACL,GAAGX,EACH,kBAAmBW,EAAO,aAC1B,mBAAoBA,EAAO,KAAA,EAE/B,IAAK,QACH,MAAO,CACL,GAAGX,EACH,YAAa,QAAA,EAEjB,IAAK,WACH,MAAO,CACL,GAAGA,EACH,YAAa,UAAA,EAEjB,IAAK,QACH,MAAO,CACL,GAAGA,EACH,GAAGga,GAAWha,EAAM,KAAM,KAAK,OAAO,EACtC,UAAWW,EAAO,MAAQ,IAAA,EAE9B,IAAK,UACH,MAAM2O,EAAW,CACf,GAAGtP,EACH,KAAMW,EAAO,KACb,gBAAiBX,EAAM,gBAAkB,EACzC,cAAeW,EAAO,eAAiB,KAAK,IAAA,EAC5C,MAAO,KACP,cAAe,GACf,OAAQ,UACR,GAAG,CAACA,EAAO,QAAU,CACnB,YAAa,OACb,kBAAmB,EACnB,mBAAoB,IAAA,CACtB,EAEF,OAAAiT,EAAA,KAAKiE,GAAelX,EAAO,OAAS2O,EAAW,QACxCA,EACT,IAAK,QACH,MAAMjO,EAAQV,EAAO,MACrB,MAAO,CACL,GAAGX,EACH,MAAAqB,EACA,iBAAkBrB,EAAM,iBAAmB,EAC3C,eAAgB,KAAK,IAAA,EACrB,kBAAmBA,EAAM,kBAAoB,EAC7C,mBAAoBqB,EACpB,YAAa,OACb,OAAQ,OAAA,EAEZ,IAAK,aACH,MAAO,CACL,GAAGrB,EACH,cAAe,EAAA,EAEnB,IAAK,WACH,MAAO,CACL,GAAGA,EACH,GAAGW,EAAO,KAAA,CACZ,CAEN,EACA,KAAK,MAAQoZ,EAAQ,KAAK,KAAK,EAC/BzC,EAAc,MAAM,IAAM,CACxB,KAAK,UAAU,QAASoB,GAAa,CACnCA,EAAS,cAAA,CACX,CAAC,EACD5E,EAAA,KAAKgE,IAAO,OAAO,CAAE,MAAO,KAAM,KAAM,UAAW,OAAAnX,EAAQ,CAC7D,CAAC,CACH,EAxWU4S,IA0WZ,SAASyG,GAAWpH,EAAMlU,EAAS,CACjC,MAAO,CACL,kBAAmB,EACnB,mBAAoB,KACpB,YAAayW,GAASzW,EAAQ,WAAW,EAAI,WAAa,SAC1D,GAAGkU,IAAS,QAAU,CACpB,MAAO,KACP,OAAQ,SAAA,CACV,CAEJ,CACA,SAASuF,GAAgBzZ,EAAS,CAChC,MAAMkU,EAAO,OAAOlU,EAAQ,aAAgB,WAAaA,EAAQ,cAAgBA,EAAQ,YACnFub,EAAUrH,IAAS,OACnBsH,EAAuBD,EAAU,OAAOvb,EAAQ,sBAAyB,WAAaA,EAAQ,qBAAA,EAAyBA,EAAQ,qBAAuB,EAC5J,MAAO,CACL,KAAAkU,EACA,gBAAiB,EACjB,cAAeqH,EAAUC,GAAwB,KAAK,MAAQ,EAC9D,MAAO,KACP,iBAAkB,EAClB,eAAgB,EAChB,kBAAmB,EACnB,mBAAoB,KACpB,UAAW,KACX,cAAe,GACf,OAAQD,EAAU,UAAY,UAC9B,YAAa,MAAA,CAEjB,WC/YIE,IAAa5G,GAAA,cAAc9D,EAAa,CAC1C,YAAY8F,EAAS,GAAI,CACvB,MAAK,EAIP/B,EAAA,KAAA4G,IAHE,KAAK,OAAS7E,EACd3B,EAAA,KAAKwG,GAA2B,IAAI,IACtC,CAEA,MAAMC,EAAQ3b,EAASsB,EAAO,CAC5B,MAAM6Q,EAAWnS,EAAQ,SACnB4b,EAAY5b,EAAQ,WAAaqS,GAAsBF,EAAUnS,CAAO,EAC9E,IAAI0R,EAAQ,KAAK,IAAIkK,CAAS,EAC9B,OAAKlK,IACHA,EAAQ,IAAIsH,GAAM,CAChB,OAAA2C,EACA,SAAAxJ,EACA,UAAAyJ,EACA,QAASD,EAAO,oBAAoB3b,CAAO,EAC3C,MAAAsB,EACA,eAAgBqa,EAAO,iBAAiBxJ,CAAQ,CACxD,CAAO,EACD,KAAK,IAAIT,CAAK,GAETA,CACT,CACA,IAAIA,EAAO,CACJ0D,EAAA,KAAKsG,IAAS,IAAIhK,EAAM,SAAS,IACpC0D,EAAA,KAAKsG,IAAS,IAAIhK,EAAM,UAAWA,CAAK,EACxC,KAAK,OAAO,CACV,KAAM,QACN,MAAAA,CACR,CAAO,EAEL,CACA,OAAOA,EAAO,CACZ,MAAMmK,EAAazG,EAAA,KAAKsG,IAAS,IAAIhK,EAAM,SAAS,EAChDmK,IACFnK,EAAM,QAAO,EACTmK,IAAenK,GACjB0D,EAAA,KAAKsG,IAAS,OAAOhK,EAAM,SAAS,EAEtC,KAAK,OAAO,CAAE,KAAM,UAAW,MAAAA,CAAK,CAAE,EAE1C,CACA,OAAQ,CACNkH,EAAc,MAAM,IAAM,CACxB,KAAK,OAAM,EAAG,QAASlH,GAAU,CAC/B,KAAK,OAAOA,CAAK,CACnB,CAAC,CACH,CAAC,CACH,CACA,IAAIkK,EAAW,CACb,OAAOxG,EAAA,KAAKsG,IAAS,IAAIE,CAAS,CACpC,CACA,QAAS,CACP,MAAO,CAAC,GAAGxG,EAAA,KAAKsG,IAAS,OAAM,CAAE,CACnC,CACA,KAAK5J,EAAS,CACZ,MAAMgK,EAAmB,CAAE,MAAO,GAAM,GAAGhK,CAAO,EAClD,OAAO,KAAK,OAAM,EAAG,KAClBJ,GAAUG,GAAWiK,EAAkBpK,CAAK,CACnD,CACE,CACA,QAAQI,EAAU,GAAI,CACpB,MAAMiK,EAAU,KAAK,OAAM,EAC3B,OAAO,OAAO,KAAKjK,CAAO,EAAE,OAAS,EAAIiK,EAAQ,OAAQrK,GAAUG,GAAWC,EAASJ,CAAK,CAAC,EAAIqK,CACnG,CACA,OAAOC,EAAO,CACZpD,EAAc,MAAM,IAAM,CACxB,KAAK,UAAU,QAAS1W,GAAa,CACnCA,EAAS8Z,CAAK,CAChB,CAAC,CACH,CAAC,CACH,CACA,SAAU,CACRpD,EAAc,MAAM,IAAM,CACxB,KAAK,OAAM,EAAG,QAASlH,GAAU,CAC/BA,EAAM,QAAO,CACf,CAAC,CACH,CAAC,CACH,CACA,UAAW,CACTkH,EAAc,MAAM,IAAM,CACxB,KAAK,OAAM,EAAG,QAASlH,GAAU,CAC/BA,EAAM,SAAQ,CAChB,CAAC,CACH,CAAC,CACH,CACF,EAjFEgK,GAAA,YANe7G,qBCDboH,IAAWpH,GAAA,cAAcgE,EAAU,CAIrC,YAAYhC,EAAQ,CAClB,MAAK,EALM/B,EAAA,KAAAoH,IACbpH,EAAA,KAAAqH,IACArH,EAAA,KAAAsH,GACAtH,EAAA,KAAAwE,IAGE,KAAK,WAAazC,EAAO,WACzB3B,EAAA,KAAKkH,EAAiBvF,EAAO,eAC7B3B,EAAA,KAAKiH,GAAa,CAAA,GAClB,KAAK,MAAQtF,EAAO,OAAS4C,GAAe,EAC5C,KAAK,WAAW5C,EAAO,OAAO,EAC9B,KAAK,WAAU,CACjB,CACA,WAAW7W,EAAS,CAClB,KAAK,QAAUA,EACf,KAAK,aAAa,KAAK,QAAQ,MAAM,CACvC,CACA,IAAI,MAAO,CACT,OAAO,KAAK,QAAQ,IACtB,CACA,YAAYga,EAAU,CACf5E,EAAA,KAAK+G,IAAW,SAASnC,CAAQ,IACpC5E,EAAA,KAAK+G,IAAW,KAAKnC,CAAQ,EAC7B,KAAK,eAAc,EACnB5E,EAAA,KAAKgH,GAAe,OAAO,CACzB,KAAM,gBACN,SAAU,KACV,SAAApC,CACR,CAAO,EAEL,CACA,eAAeA,EAAU,CACvB9E,EAAA,KAAKiH,GAAa/G,EAAA,KAAK+G,IAAW,OAAQlC,GAAMA,IAAMD,CAAQ,GAC9D,KAAK,WAAU,EACf5E,EAAA,KAAKgH,GAAe,OAAO,CACzB,KAAM,kBACN,SAAU,KACV,SAAApC,CACN,CAAK,CACH,CACA,gBAAiB,CACV5E,EAAA,KAAK+G,IAAW,SACf,KAAK,MAAM,SAAW,UACxB,KAAK,WAAU,EAEf/G,EAAA,KAAKgH,GAAe,OAAO,IAAI,EAGrC,CACA,UAAW,OACT,QAAOvH,EAAAO,EAAA,KAAKkE,MAAL,YAAAzE,EAAe,aACtB,KAAK,QAAQ,KAAK,MAAM,SAAS,CACnC,CACA,MAAM,QAAQwH,EAAW,6CACvB,MAAMC,EAAa,IAAM,CACvB3C,EAAA,KAAKuC,GAAAtC,IAAL,UAAe,CAAE,KAAM,UAAU,EACnC,EACA1E,EAAA,KAAKoE,GAAW1C,GAAc,CAC5B,GAAI,IACG,KAAK,QAAQ,WAGX,KAAK,QAAQ,WAAWyF,CAAS,EAF/B,QAAQ,OAAO,IAAI,MAAM,qBAAqB,CAAC,EAI1D,OAAQ,CAAC7F,EAAc7T,IAAU,CAC/BgX,EAAA,KAAKuC,GAAAtC,IAAL,UAAe,CAAE,KAAM,SAAU,aAAApD,EAAc,MAAA7T,GACjD,EACA,QAAS,IAAM,CACbgX,EAAA,KAAKuC,GAAAtC,IAAL,UAAe,CAAE,KAAM,OAAO,EAChC,EACA,WAAA0C,EACA,MAAO,KAAK,QAAQ,OAAS,EAC7B,WAAY,KAAK,QAAQ,WACzB,YAAa,KAAK,QAAQ,YAC1B,OAAQ,IAAMlH,EAAA,KAAKgH,GAAe,OAAO,IAAI,CACnD,CAAK,GACD,MAAMG,EAAW,KAAK,MAAM,SAAW,UACjCC,EAAW,CAACpH,EAAA,KAAKkE,IAAS,SAAQ,EACxC,GAAI,CACF,GAAIiD,EACFD,EAAU,MACL,CACL3C,EAAA,KAAKuC,GAAAtC,IAAL,UAAe,CAAE,KAAM,UAAW,UAAAyC,EAAW,SAAAG,IAC7C,OAAMzC,GAAAlF,EAAAO,EAAA,KAAKgH,GAAe,QAAO,WAA3B,YAAArC,EAAA,KAAAlF,EACJwH,EACA,OAEF,MAAM5B,EAAU,OAAMG,GAAAD,EAAA,KAAK,SAAQ,WAAb,YAAAC,EAAA,KAAAD,EAAwB0B,IAC1C5B,IAAY,KAAK,MAAM,SACzBd,EAAA,KAAKuC,GAAAtC,IAAL,UAAe,CACb,KAAM,UACN,QAAAa,EACA,UAAA4B,EACA,SAAAG,CACZ,EAEM,CACA,MAAMtI,EAAO,MAAMkB,EAAA,KAAKkE,IAAS,MAAK,EACtC,cAAMuB,GAAAC,EAAA1F,EAAA,KAAKgH,GAAe,QAAO,YAA3B,YAAAvB,EAAA,KAAAC,EACJ5G,EACAmI,EACA,KAAK,MAAM,QACX,OAEF,OAAMtB,GAAAC,EAAA,KAAK,SAAQ,YAAb,YAAAD,EAAA,KAAAC,EAAyB9G,EAAMmI,EAAW,KAAK,MAAM,UAC3D,OAAMpB,GAAAC,EAAA9F,EAAA,KAAKgH,GAAe,QAAO,YAA3B,YAAAnB,EAAA,KAAAC,EACJhH,EACA,KACA,KAAK,MAAM,UACX,KAAK,MAAM,QACX,OAEF,OAAMiH,GAAAC,EAAA,KAAK,SAAQ,YAAb,YAAAD,EAAA,KAAAC,EAAyBlH,EAAM,KAAMmI,EAAW,KAAK,MAAM,UACjE1C,EAAA,KAAKuC,GAAAtC,IAAL,UAAe,CAAE,KAAM,UAAW,KAAA1F,CAAI,GAC/BA,CACT,OAASvR,EAAO,CACd,GAAI,CACF,aAAM8Z,GAAAC,EAAAtH,EAAA,KAAKgH,GAAe,QAAO,UAA3B,YAAAK,EAAA,KAAAC,EACJ/Z,EACA0Z,EACA,KAAK,MAAM,QACX,OAEF,OAAMM,GAAAC,EAAA,KAAK,SAAQ,UAAb,YAAAD,EAAA,KAAAC,EACJja,EACA0Z,EACA,KAAK,MAAM,UAEb,OAAMQ,GAAAC,EAAA1H,EAAA,KAAKgH,GAAe,QAAO,YAA3B,YAAAS,EAAA,KAAAC,EACJ,OACAna,EACA,KAAK,MAAM,UACX,KAAK,MAAM,QACX,OAEF,OAAMoa,GAAAC,EAAA,KAAK,SAAQ,YAAb,YAAAD,EAAA,KAAAC,EACJ,OACAra,EACA0Z,EACA,KAAK,MAAM,UAEP1Z,CACR,QAAC,CACCgX,EAAA,KAAKuC,GAAAtC,IAAL,UAAe,CAAE,KAAM,QAAS,MAAAjX,CAAK,EACvC,CACF,QAAC,CACCyS,EAAA,KAAKgH,GAAe,QAAQ,IAAI,CAClC,CACF,CAmEF,EAtNED,GAAA,YACAC,EAAA,YACA9C,GAAA,YAHa4C,GAAA,YAqJbtC,GAAS,SAAC3X,EAAQ,CAChB,MAAMoZ,EAAW/Z,GAAU,CACzB,OAAQW,EAAO,KAAI,CACjB,IAAK,SACH,MAAO,CACL,GAAGX,EACH,aAAcW,EAAO,aACrB,cAAeA,EAAO,KAClC,EACQ,IAAK,QACH,MAAO,CACL,GAAGX,EACH,SAAU,EACtB,EACQ,IAAK,WACH,MAAO,CACL,GAAGA,EACH,SAAU,EACtB,EACQ,IAAK,UACH,MAAO,CACL,GAAGA,EACH,QAASW,EAAO,QAChB,KAAM,OACN,aAAc,EACd,cAAe,KACf,MAAO,KACP,SAAUA,EAAO,SACjB,OAAQ,UACR,UAAWA,EAAO,UAClB,YAAa,KAAK,IAAG,CACjC,EACQ,IAAK,UACH,MAAO,CACL,GAAGX,EACH,KAAMW,EAAO,KACb,aAAc,EACd,cAAe,KACf,MAAO,KACP,OAAQ,UACR,SAAU,EACtB,EACQ,IAAK,QACH,MAAO,CACL,GAAGX,EACH,KAAM,OACN,MAAOW,EAAO,MACd,aAAcX,EAAM,aAAe,EACnC,cAAeW,EAAO,MACtB,SAAU,GACV,OAAQ,OACpB,CACA,CACI,EACA,KAAK,MAAQoZ,EAAQ,KAAK,KAAK,EAC/BzC,EAAc,MAAM,IAAM,CACxBxD,EAAA,KAAK+G,IAAW,QAASnC,GAAa,CACpCA,EAAS,iBAAiB/X,CAAM,CAClC,CAAC,EACDmT,EAAA,KAAKgH,GAAe,OAAO,CACzB,SAAU,KACV,KAAM,UACN,OAAAna,CACR,CAAO,CACH,CAAC,CACH,EAtNa4S,IAwNf,SAAS4E,IAAkB,CACzB,MAAO,CACL,QAAS,OACT,KAAM,OACN,MAAO,KACP,aAAc,EACd,cAAe,KACf,SAAU,GACV,OAAQ,OACR,UAAW,OACX,YAAa,CACjB,CACA,iBCnOIwD,IAAgBpI,GAAA,cAAc9D,EAAa,CAC7C,YAAY8F,EAAS,GAAI,CACvB,MAAK,EAMP/B,EAAA,KAAAoI,IACApI,EAAA,KAAAqI,IACArI,EAAA,KAAAsI,IAPE,KAAK,OAASvG,EACd3B,EAAA,KAAKgI,GAA6B,IAAI,KACtChI,EAAA,KAAKiI,GAA0B,IAAI,KACnCjI,EAAA,KAAKkI,GAAc,EACrB,CAIA,MAAMzB,EAAQ3b,EAASsB,EAAO,CAC5B,MAAMmR,EAAW,IAAIwJ,GAAS,CAC5B,cAAe,KACf,WAAmB,EAALoB,GAAA,KAAKD,IAAL,EACd,QAASzB,EAAO,uBAAuB3b,CAAO,EAC9C,MAAAsB,CACN,CAAK,EACD,YAAK,IAAImR,CAAQ,EACVA,CACT,CACA,IAAIA,EAAU,CACZ2C,EAAA,KAAK8H,IAAW,IAAIzK,CAAQ,EAC5B,MAAM6K,EAAQC,GAAS9K,CAAQ,EAC/B,GAAI,OAAO6K,GAAU,SAAU,CAC7B,MAAME,EAAkBpI,EAAA,KAAK+H,IAAQ,IAAIG,CAAK,EAC1CE,EACFA,EAAgB,KAAK/K,CAAQ,EAE7B2C,EAAA,KAAK+H,IAAQ,IAAIG,EAAO,CAAC7K,CAAQ,CAAC,CAEtC,CACA,KAAK,OAAO,CAAE,KAAM,QAAS,SAAAA,CAAQ,CAAE,CACzC,CACA,OAAOA,EAAU,CACf,GAAI2C,EAAA,KAAK8H,IAAW,OAAOzK,CAAQ,EAAG,CACpC,MAAM6K,EAAQC,GAAS9K,CAAQ,EAC/B,GAAI,OAAO6K,GAAU,SAAU,CAC7B,MAAME,EAAkBpI,EAAA,KAAK+H,IAAQ,IAAIG,CAAK,EAC9C,GAAIE,EACF,GAAIA,EAAgB,OAAS,EAAG,CAC9B,MAAMpc,EAAQoc,EAAgB,QAAQ/K,CAAQ,EAC1CrR,IAAU,IACZoc,EAAgB,OAAOpc,EAAO,CAAC,CAEnC,MAAWoc,EAAgB,CAAC,IAAM/K,GAChC2C,EAAA,KAAK+H,IAAQ,OAAOG,CAAK,CAG/B,CACF,CACA,KAAK,OAAO,CAAE,KAAM,UAAW,SAAA7K,CAAQ,CAAE,CAC3C,CACA,OAAOA,EAAU,CACf,MAAM6K,EAAQC,GAAS9K,CAAQ,EAC/B,GAAI,OAAO6K,GAAU,SAAU,CAC7B,MAAMG,EAAyBrI,EAAA,KAAK+H,IAAQ,IAAIG,CAAK,EAC/CI,EAAuBD,GAAA,YAAAA,EAAwB,KAClDvQ,GAAMA,EAAE,MAAM,SAAW,WAE5B,MAAO,CAACwQ,GAAwBA,IAAyBjL,CAC3D,KACE,OAAO,EAEX,CACA,QAAQA,EAAU,OAChB,MAAM6K,EAAQC,GAAS9K,CAAQ,EAC/B,GAAI,OAAO6K,GAAU,SAAU,CAC7B,MAAMK,GAAgB9I,EAAAO,EAAA,KAAK+H,IAAQ,IAAIG,CAAK,IAAtB,YAAAzI,EAAyB,KAAM3H,GAAMA,IAAMuF,GAAYvF,EAAE,MAAM,UACrF,OAAOyQ,GAAA,YAAAA,EAAe,aAAc,QAAQ,QAAO,CACrD,KACE,QAAO,QAAQ,QAAO,CAE1B,CACA,OAAQ,CACN/E,EAAc,MAAM,IAAM,CACxBxD,EAAA,KAAK8H,IAAW,QAASzK,GAAa,CACpC,KAAK,OAAO,CAAE,KAAM,UAAW,SAAAA,CAAQ,CAAE,CAC3C,CAAC,EACD2C,EAAA,KAAK8H,IAAW,MAAK,EACrB9H,EAAA,KAAK+H,IAAQ,MAAK,CACpB,CAAC,CACH,CACA,QAAS,CACP,OAAO,MAAM,KAAK/H,EAAA,KAAK8H,GAAU,CACnC,CACA,KAAKpL,EAAS,CACZ,MAAMgK,EAAmB,CAAE,MAAO,GAAM,GAAGhK,CAAO,EAClD,OAAO,KAAK,OAAM,EAAG,KAClBW,GAAaD,GAAcsJ,EAAkBrJ,CAAQ,CAC5D,CACE,CACA,QAAQX,EAAU,GAAI,CACpB,OAAO,KAAK,OAAM,EAAG,OAAQW,GAAaD,GAAcV,EAASW,CAAQ,CAAC,CAC5E,CACA,OAAOuJ,EAAO,CACZpD,EAAc,MAAM,IAAM,CACxB,KAAK,UAAU,QAAS1W,GAAa,CACnCA,EAAS8Z,CAAK,CAChB,CAAC,CACH,CAAC,CACH,CACA,uBAAwB,CACtB,MAAM4B,EAAkB,KAAK,SAAS,OAAQ3D,GAAMA,EAAE,MAAM,QAAQ,EACpE,OAAOrB,EAAc,MACnB,IAAM,QAAQ,IACZgF,EAAgB,IAAKnL,GAAaA,EAAS,SAAQ,EAAG,MAAMxB,EAAI,CAAC,CACzE,CACA,CACE,CACF,EAtGEiM,GAAA,YACAC,GAAA,YACAC,GAAA,YAVkBvI,IA+GpB,SAAS0I,GAAS9K,EAAU,OAC1B,OAAOoC,EAAApC,EAAS,QAAQ,QAAjB,YAAAoC,EAAwB,EACjC,CCpHA,SAASgJ,GAAsBC,EAAO,CACpC,MAAO,CACL,QAAS,CAACrD,EAAS/I,IAAU,eAC3B,MAAM1R,EAAUya,EAAQ,QAClBsD,GAAYpD,GAAAZ,GAAAlF,EAAA4F,EAAQ,eAAR,YAAA5F,EAAsB,OAAtB,YAAAkF,EAA4B,YAA5B,YAAAY,EAAuC,UACnDqD,IAAWpD,EAAAH,EAAQ,MAAM,OAAd,YAAAG,EAAoB,QAAS,CAAA,EACxCqD,IAAgBnD,EAAAL,EAAQ,MAAM,OAAd,YAAAK,EAAoB,aAAc,CAAA,EACxD,IAAI3V,EAAS,CAAE,MAAO,CAAA,EAAI,WAAY,CAAA,CAAE,EACpC+Y,EAAc,EAClB,MAAM7D,EAAU,SAAY,CAC1B,IAAI8D,EAAY,GAChB,MAAMhE,EAAqBC,GAAW,CACpC,OAAO,eAAeA,EAAQ,SAAU,CACtC,WAAY,GACZ,IAAK,KACCK,EAAQ,OAAO,QACjB0D,EAAY,GAEZ1D,EAAQ,OAAO,iBAAiB,QAAS,IAAM,CAC7C0D,EAAY,EACd,CAAC,EAEI1D,EAAQ,OAE7B,CAAW,CACH,EACMH,EAAU5F,GAAc+F,EAAQ,QAASA,EAAQ,YAAY,EAC7D2D,EAAY,MAAOlK,EAAMmK,EAAOC,IAAa,CACjD,GAAIH,EACF,OAAO,QAAQ,OAAM,EAEvB,GAAIE,GAAS,MAAQnK,EAAK,MAAM,OAC9B,OAAO,QAAQ,QAAQA,CAAI,EAa7B,MAAMqG,GAXuB,IAAM,CACjC,MAAMC,EAAkB,CACtB,OAAQC,EAAQ,OAChB,SAAUA,EAAQ,SAClB,UAAW4D,EACX,UAAWC,EAAW,WAAa,UACnC,KAAM7D,EAAQ,QAAQ,IACpC,EACY,OAAAN,EAAkBK,CAAe,EAC1BA,CACT,GAC2C,EACrC+D,EAAO,MAAMjE,EAAQC,CAAc,EACnC,CAAE,SAAAiE,GAAa/D,EAAQ,QACvBgE,EAAQH,EAAW9J,GAAaL,GACtC,MAAO,CACL,MAAOsK,EAAMvK,EAAK,MAAOqK,EAAMC,CAAQ,EACvC,WAAYC,EAAMvK,EAAK,WAAYmK,EAAOG,CAAQ,CAC9D,CACQ,EACA,GAAIT,GAAaC,EAAS,OAAQ,CAChC,MAAMM,EAAWP,IAAc,WACzBW,EAAcJ,EAAWK,GAAuBC,GAChDC,EAAU,CACd,MAAOb,EACP,WAAYC,CACxB,EACgBI,EAAQK,EAAY1e,EAAS6e,CAAO,EAC1C1Z,EAAS,MAAMiZ,EAAUS,EAASR,EAAOC,CAAQ,CACnD,KAAO,CACL,MAAMQ,EAAiBhB,GAASE,EAAS,OACzC,EAAG,CACD,MAAMK,EAAQH,IAAgB,EAAID,EAAc,CAAC,GAAKje,EAAQ,iBAAmB4e,GAAiB5e,EAASmF,CAAM,EACjH,GAAI+Y,EAAc,GAAKG,GAAS,KAC9B,MAEFlZ,EAAS,MAAMiZ,EAAUjZ,EAAQkZ,CAAK,EACtCH,GACF,OAASA,EAAcY,EACzB,CACA,OAAO3Z,CACT,EACIsV,EAAQ,QAAQ,UAClBA,EAAQ,QAAU,IAAM,SACtB,OAAOV,GAAAlF,EAAA4F,EAAQ,SAAQ,YAAhB,YAAAV,EAAA,KAAAlF,EACLwF,EACA,CACE,OAAQI,EAAQ,OAChB,SAAUA,EAAQ,SAClB,KAAMA,EAAQ,QAAQ,KACtB,OAAQA,EAAQ,MAC9B,EACY/I,EAEJ,EAEA+I,EAAQ,QAAUJ,CAEtB,CACJ,CACA,CACA,SAASuE,GAAiB5e,EAAS,CAAE,MAAA8d,EAAO,WAAAiB,CAAU,EAAI,CACxD,MAAMC,EAAYlB,EAAM,OAAS,EACjC,OAAOA,EAAM,OAAS,EAAI9d,EAAQ,iBAChC8d,EAAMkB,CAAS,EACflB,EACAiB,EAAWC,CAAS,EACpBD,CACJ,EAAM,MACN,CACA,SAASJ,GAAqB3e,EAAS,CAAE,MAAA8d,EAAO,WAAAiB,CAAU,EAAI,OAC5D,OAAOjB,EAAM,OAAS,GAAIjJ,EAAA7U,EAAQ,uBAAR,YAAA6U,EAAA,KAAA7U,EAA+B8d,EAAM,CAAC,EAAGA,EAAOiB,EAAW,CAAC,EAAGA,GAAc,MACzG,+BC5FIE,IAAcpK,GAAA,KAAM,CAStB,YAAYgC,EAAS,GAAI,CARzB/B,EAAA,KAAAoK,GACApK,EAAA,KAAAsH,IACAtH,EAAA,KAAAyE,IACAzE,EAAA,KAAAqK,IACArK,EAAA,KAAAsK,IACAtK,EAAA,KAAAuK,IACAvK,EAAA,KAAAwK,IACAxK,EAAA,KAAAyK,IAEErK,EAAA,KAAKgK,EAAcrI,EAAO,YAAc,IAAI4E,IAC5CvG,EAAA,KAAKkH,GAAiBvF,EAAO,eAAiB,IAAIoG,IAClD/H,EAAA,KAAKqE,GAAkB1C,EAAO,gBAAkB,CAAA,GAChD3B,EAAA,KAAKiK,GAAiC,IAAI,KAC1CjK,EAAA,KAAKkK,GAAoC,IAAI,KAC7ClK,EAAA,KAAKmK,GAAc,EACrB,CACA,OAAQ,CACNhC,GAAA,KAAKgC,IAAL,IACIjK,EAAA,KAAKiK,MAAgB,IACzBnK,EAAA,KAAKoK,GAAoB9J,GAAa,UAAU,MAAOF,GAAY,CAC7DA,IACF,MAAM,KAAK,sBAAqB,EAChCF,EAAA,KAAK8J,GAAY,QAAO,EAE5B,CAAC,GACDhK,EAAA,KAAKqK,GAAqBxJ,GAAc,UAAU,MAAOD,GAAW,CAC9DA,IACF,MAAM,KAAK,sBAAqB,EAChCV,EAAA,KAAK8J,GAAY,SAAQ,EAE7B,CAAC,GACH,CACA,SAAU,SACR7B,GAAA,KAAKgC,IAAL,IACIjK,EAAA,KAAKiK,MAAgB,KACzBxK,EAAAO,EAAA,KAAKkK,MAAL,MAAAzK,EAAA,WACAK,EAAA,KAAKoK,GAAoB,SACzBvF,EAAA3E,EAAA,KAAKmK,MAAL,MAAAxF,EAAA,WACA7E,EAAA,KAAKqK,GAAqB,QAC5B,CACA,WAAWzN,EAAS,CAClB,OAAOsD,EAAA,KAAK8J,GAAY,QAAQ,CAAE,GAAGpN,EAAS,YAAa,UAAU,CAAE,EAAE,MAC3E,CACA,WAAWA,EAAS,CAClB,OAAOsD,EAAA,KAAKgH,IAAe,QAAQ,CAAE,GAAGtK,EAAS,OAAQ,SAAS,CAAE,EAAE,MACxE,CAQA,aAAaK,EAAU,OACrB,MAAMnS,EAAU,KAAK,oBAAoB,CAAE,SAAAmS,CAAQ,CAAE,EACrD,OAAO0C,EAAAO,EAAA,KAAK8J,GAAY,IAAIlf,EAAQ,SAAS,IAAtC,YAAA6U,EAAyC,MAAM,IACxD,CACA,gBAAgB7U,EAAS,CACvB,MAAMwf,EAAmB,KAAK,oBAAoBxf,CAAO,EACnD0R,EAAQ0D,EAAA,KAAK8J,GAAY,MAAM,KAAMM,CAAgB,EACrDC,EAAa/N,EAAM,MAAM,KAC/B,OAAI+N,IAAe,OACV,KAAK,WAAWzf,CAAO,GAE5BA,EAAQ,mBAAqB0R,EAAM,cAAcD,GAAiB+N,EAAiB,UAAW9N,CAAK,CAAC,GACjG,KAAK,cAAc8N,CAAgB,EAEnC,QAAQ,QAAQC,CAAU,EACnC,CACA,eAAe3N,EAAS,CACtB,OAAOsD,EAAA,KAAK8J,GAAY,QAAQpN,CAAO,EAAE,IAAI,CAAC,CAAE,SAAAK,EAAU,MAAA7Q,KAAY,CACpE,MAAM4S,EAAO5S,EAAM,KACnB,MAAO,CAAC6Q,EAAU+B,CAAI,CACxB,CAAC,CACH,CACA,aAAa/B,EAAUhB,EAASnR,EAAS,CACvC,MAAMwf,EAAmB,KAAK,oBAAoB,CAAE,SAAArN,CAAQ,CAAE,EACxDT,EAAQ0D,EAAA,KAAK8J,GAAY,IAC7BM,EAAiB,SACvB,EACUvL,EAAWvC,GAAA,YAAAA,EAAO,MAAM,KACxBwC,EAAOhD,GAAiBC,EAAS8C,CAAQ,EAC/C,GAAIC,IAAS,OAGb,OAAOkB,EAAA,KAAK8J,GAAY,MAAM,KAAMM,CAAgB,EAAE,QAAQtL,EAAM,CAAE,GAAGlU,EAAS,OAAQ,EAAI,CAAE,CAClG,CACA,eAAe8R,EAASX,EAASnR,EAAS,CACxC,OAAO4Y,EAAc,MACnB,IAAMxD,EAAA,KAAK8J,GAAY,QAAQpN,CAAO,EAAE,IAAI,CAAC,CAAE,SAAAK,KAAe,CAC5DA,EACA,KAAK,aAAaA,EAAUhB,EAASnR,CAAO,CACpD,CAAO,CACP,CACE,CACA,cAAcmS,EAAU,OACtB,MAAMnS,EAAU,KAAK,oBAAoB,CAAE,SAAAmS,CAAQ,CAAE,EACrD,OAAO0C,EAAAO,EAAA,KAAK8J,GAAY,IACtBlf,EAAQ,SACd,IAFW,YAAA6U,EAEJ,KACL,CACA,cAAc/C,EAAS,CACrB,MAAM4N,EAAatK,EAAA,KAAK8J,GACxBtG,EAAc,MAAM,IAAM,CACxB8G,EAAW,QAAQ5N,CAAO,EAAE,QAASJ,GAAU,CAC7CgO,EAAW,OAAOhO,CAAK,CACzB,CAAC,CACH,CAAC,CACH,CACA,aAAaI,EAAS9R,EAAS,CAC7B,MAAM0f,EAAatK,EAAA,KAAK8J,GACxB,OAAOtG,EAAc,MAAM,KACzB8G,EAAW,QAAQ5N,CAAO,EAAE,QAASJ,GAAU,CAC7CA,EAAM,MAAK,CACb,CAAC,EACM,KAAK,eACV,CACE,KAAM,SACN,GAAGI,CACb,EACQ9R,CACR,EACK,CACH,CACA,cAAc8R,EAASoF,EAAgB,GAAI,CACzC,MAAMyI,EAAyB,CAAE,OAAQ,GAAM,GAAGzI,CAAa,EACzD0I,EAAWhH,EAAc,MAC7B,IAAMxD,EAAA,KAAK8J,GAAY,QAAQpN,CAAO,EAAE,IAAKJ,GAAUA,EAAM,OAAOiO,CAAsB,CAAC,CACjG,EACI,OAAO,QAAQ,IAAIC,CAAQ,EAAE,KAAK3O,EAAI,EAAE,MAAMA,EAAI,CACpD,CACA,kBAAkBa,EAAS9R,EAAU,GAAI,CACvC,OAAO4Y,EAAc,MAAM,KACzBxD,EAAA,KAAK8J,GAAY,QAAQpN,CAAO,EAAE,QAASJ,GAAU,CACnDA,EAAM,WAAU,CAClB,CAAC,GACGI,GAAA,YAAAA,EAAS,eAAgB,OACpB,QAAQ,QAAO,EAEjB,KAAK,eACV,CACE,GAAGA,EACH,MAAMA,GAAA,YAAAA,EAAS,eAAeA,GAAA,YAAAA,EAAS,OAAQ,QACzD,EACQ9R,CACR,EACK,CACH,CACA,eAAe8R,EAAS9R,EAAU,GAAI,CACpC,MAAM2U,EAAe,CACnB,GAAG3U,EACH,cAAeA,EAAQ,eAAiB,EAC9C,EACU4f,EAAWhH,EAAc,MAC7B,IAAMxD,EAAA,KAAK8J,GAAY,QAAQpN,CAAO,EAAE,OAAQJ,GAAU,CAACA,EAAM,WAAU,GAAM,CAACA,EAAM,SAAQ,CAAE,EAAE,IAAKA,GAAU,CACjH,IAAIoI,EAAUpI,EAAM,MAAM,OAAQiD,CAAY,EAC9C,OAAKA,EAAa,eAChBmF,EAAUA,EAAQ,MAAM7I,EAAI,GAEvBS,EAAM,MAAM,cAAgB,SAAW,QAAQ,QAAO,EAAKoI,CACpE,CAAC,CACP,EACI,OAAO,QAAQ,IAAI8F,CAAQ,EAAE,KAAK3O,EAAI,CACxC,CACA,WAAWjR,EAAS,CAClB,MAAMwf,EAAmB,KAAK,oBAAoBxf,CAAO,EACrDwf,EAAiB,QAAU,SAC7BA,EAAiB,MAAQ,IAE3B,MAAM9N,EAAQ0D,EAAA,KAAK8J,GAAY,MAAM,KAAMM,CAAgB,EAC3D,OAAO9N,EAAM,cACXD,GAAiB+N,EAAiB,UAAW9N,CAAK,CACxD,EAAQA,EAAM,MAAM8N,CAAgB,EAAI,QAAQ,QAAQ9N,EAAM,MAAM,IAAI,CACtE,CACA,cAAc1R,EAAS,CACrB,OAAO,KAAK,WAAWA,CAAO,EAAE,KAAKiR,EAAI,EAAE,MAAMA,EAAI,CACvD,CACA,mBAAmBjR,EAAS,CAC1B,OAAAA,EAAQ,SAAW6d,GAAsB7d,EAAQ,KAAK,EAC/C,KAAK,WAAWA,CAAO,CAChC,CACA,sBAAsBA,EAAS,CAC7B,OAAO,KAAK,mBAAmBA,CAAO,EAAE,KAAKiR,EAAI,EAAE,MAAMA,EAAI,CAC/D,CACA,wBAAwBjR,EAAS,CAC/B,OAAAA,EAAQ,SAAW6d,GAAsB7d,EAAQ,KAAK,EAC/C,KAAK,gBAAgBA,CAAO,CACrC,CACA,uBAAwB,CACtB,OAAI+V,GAAc,WACTX,EAAA,KAAKgH,IAAe,sBAAqB,EAE3C,QAAQ,QAAO,CACxB,CACA,eAAgB,CACd,OAAOhH,EAAA,KAAK8J,EACd,CACA,kBAAmB,CACjB,OAAO9J,EAAA,KAAKgH,GACd,CACA,mBAAoB,CAClB,OAAOhH,EAAA,KAAKmE,GACd,CACA,kBAAkBvZ,EAAS,CACzBkV,EAAA,KAAKqE,GAAkBvZ,EACzB,CACA,iBAAiBmS,EAAUnS,EAAS,CAClCoV,EAAA,KAAK+J,IAAe,IAAIvM,GAAQT,CAAQ,EAAG,CACzC,SAAAA,EACA,eAAgBnS,CACtB,CAAK,CACH,CACA,iBAAiBmS,EAAU,CACzB,MAAM0N,EAAW,CAAC,GAAGzK,EAAA,KAAK+J,IAAe,OAAM,CAAE,EAC3Cha,EAAS,CAAA,EACf,OAAA0a,EAAS,QAASC,GAAiB,CAC7BxN,GAAgBH,EAAU2N,EAAa,QAAQ,GACjD,OAAO,OAAO3a,EAAQ2a,EAAa,cAAc,CAErD,CAAC,EACM3a,CACT,CACA,oBAAoBwN,EAAa3S,EAAS,CACxCoV,EAAA,KAAKgK,IAAkB,IAAIxM,GAAQD,CAAW,EAAG,CAC/C,YAAAA,EACA,eAAgB3S,CACtB,CAAK,CACH,CACA,oBAAoB2S,EAAa,CAC/B,MAAMkN,EAAW,CAAC,GAAGzK,EAAA,KAAKgK,IAAkB,OAAM,CAAE,EAC9Cja,EAAS,CAAA,EACf,OAAA0a,EAAS,QAASC,GAAiB,CAC7BxN,GAAgBK,EAAamN,EAAa,WAAW,GACvD,OAAO,OAAO3a,EAAQ2a,EAAa,cAAc,CAErD,CAAC,EACM3a,CACT,CACA,oBAAoBnF,EAAS,CAC3B,GAAIA,EAAQ,WACV,OAAOA,EAET,MAAMwf,EAAmB,CACvB,GAAGpK,EAAA,KAAKmE,IAAgB,QACxB,GAAG,KAAK,iBAAiBvZ,EAAQ,QAAQ,EACzC,GAAGA,EACH,WAAY,EAClB,EACI,OAAKwf,EAAiB,YACpBA,EAAiB,UAAYnN,GAC3BmN,EAAiB,SACjBA,CACR,GAEQA,EAAiB,qBAAuB,SAC1CA,EAAiB,mBAAqBA,EAAiB,cAAgB,UAErEA,EAAiB,eAAiB,SACpCA,EAAiB,aAAe,CAAC,CAACA,EAAiB,UAEjD,CAACA,EAAiB,aAAeA,EAAiB,YACpDA,EAAiB,YAAc,gBAE7BA,EAAiB,UAAY/K,KAC/B+K,EAAiB,QAAU,IAEtBA,CACT,CACA,uBAAuBxf,EAAS,CAC9B,OAAIA,GAAA,MAAAA,EAAS,WACJA,EAEF,CACL,GAAGoV,EAAA,KAAKmE,IAAgB,UACxB,IAAGvZ,GAAA,YAAAA,EAAS,cAAe,KAAK,oBAAoBA,EAAQ,WAAW,EACvE,GAAGA,EACH,WAAY,EAClB,CACE,CACA,OAAQ,CACNoV,EAAA,KAAK8J,GAAY,MAAK,EACtB9J,EAAA,KAAKgH,IAAe,MAAK,CAC3B,CACF,EA3RE8C,EAAA,YACA9C,GAAA,YACA7C,GAAA,YACA4F,GAAA,YACAC,GAAA,YACAC,GAAA,YACAC,GAAA,YACAC,GAAA,YARgB1K,ICXdkL,GAAqBrW,EAAAA,cACvB,MACF,EAWIsW,GAAsB,CAAC,CACzB,OAAArE,EACA,SAAA9O,CACF,KACEgE,EAAAA,UAAgB,KACd8K,EAAO,MAAK,EACL,IAAM,CACXA,EAAO,QAAO,CAChB,GACC,CAACA,CAAM,CAAC,EACYsE,EAAAA,IAAIF,GAAmB,SAAU,CAAE,MAAOpE,EAAQ,SAAA9O,EAAU,GC5BlF,IAACqT,GAAE,CAAC,KAAK,EAAE,EAAEC,GAAEA,GAAa,OAAO,QAAjB,WAA0BA,EAAEA,EAAE,cAAc,UAAU,EAAE,OAAO,UAAU,OAAO,QAAQA,GAAG,SAAS,MAAM,YAAY,SAAS,cAAc,OAAO,CAAC,EAAE,CAAC,UAAU,IAAI,GAAG,SAAS,CAAC,GAAG,WAAWA,GAAGD,GAAgDE,GAAE,oEAAoE/a,GAAE,qBAAqBpC,GAAE,OAAOwQ,GAAE,CAAC,EAAE,IAAI,CAAC,IAAI4M,EAAE,GAAGD,EAAE,GAAG/a,EAAE,GAAG,QAAQpC,KAAK,EAAE,CAAC,IAAIqd,EAAE,EAAErd,CAAC,EAAOA,EAAE,CAAC,GAAR,IAAeA,EAAE,CAAC,GAAR,IAAUod,EAAEpd,EAAE,IAAIqd,EAAE,IAAIF,GAAQnd,EAAE,CAAC,GAAR,IAAUwQ,GAAE6M,EAAErd,CAAC,EAAEA,EAAE,IAAIwQ,GAAE6M,EAAOrd,EAAE,CAAC,GAAR,IAAU,GAAG,CAAC,EAAE,IAAc,OAAOqd,GAAjB,SAAmBF,GAAG3M,GAAE6M,EAAE,EAAE,EAAE,QAAQ,WAAWJ,GAAGjd,EAAE,QAAQ,gCAAgCkd,GAAG,IAAI,KAAKA,CAAC,EAAEA,EAAE,QAAQ,KAAKD,CAAC,EAAEA,EAAEA,EAAE,IAAIC,EAAEA,CAAC,CAAC,EAAEld,CAAC,EAAQqd,GAAN,OAAUrd,EAAE,MAAM,KAAKA,CAAC,EAAEA,EAAEA,EAAE,QAAQ,SAAS,KAAK,EAAE,YAAW,EAAGoC,GAAGoO,GAAE,EAAEA,GAAE,EAAExQ,EAAEqd,CAAC,EAAErd,EAAE,IAAIqd,EAAE,IAAI,CAAC,OAAOD,GAAG,GAAGhb,EAAE,EAAE,IAAIA,EAAE,IAAIA,GAAG+a,CAAC,EAAEE,GAAE,CAAA,EAAGva,GAAE,GAAG,CAAC,GAAa,OAAO,GAAjB,SAAmB,CAAC,IAAI,EAAE,GAAG,QAAQsa,KAAK,EAAE,GAAGA,EAAEta,GAAE,EAAEsa,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,OAAO,CAAC,EAAE3gB,GAAE,CAAC,EAAE,EAAE2gB,EAAE,EAAEE,IAAI,CAAC,IAAIC,EAAEza,GAAE,CAAC,EAAE0a,EAAEH,GAAEE,CAAC,IAAIF,GAAEE,CAAC,GAAGN,GAAG,CAAC,IAAIC,EAAE,EAAEE,EAAE,GAAG,KAAKF,EAAED,EAAE,QAAQG,EAAE,IAAIA,EAAEH,EAAE,WAAWC,GAAG,IAAI,EAAE,MAAM,KAAKE,CAAC,GAAGG,CAAC,GAAG,GAAG,CAACF,GAAEG,CAAC,EAAE,CAAC,IAAIN,EAAEK,IAAI,EAAE,GAAGN,GAAG,CAAC,IAAIC,EAAEE,EAAE5M,EAAE,CAAC,CAAA,CAAE,EAAE,KAAK0M,EAAEC,GAAE,KAAKF,EAAE,QAAQ7a,GAAE,EAAE,CAAC,GAAG8a,EAAE,CAAC,EAAE1M,EAAE,MAAK,EAAG0M,EAAE,CAAC,GAAGE,EAAEF,EAAE,CAAC,EAAE,QAAQld,GAAE,GAAG,EAAE,KAAI,EAAGwQ,EAAE,QAAQA,EAAE,CAAC,EAAE4M,CAAC,EAAE5M,EAAE,CAAC,EAAE4M,CAAC,GAAG,CAAA,CAAE,GAAG5M,EAAE,CAAC,EAAE0M,EAAE,CAAC,CAAC,EAAEA,EAAE,CAAC,EAAE,QAAQld,GAAE,GAAG,EAAE,KAAI,EAAG,OAAOwQ,EAAE,CAAC,CAAC,GAAG,CAAC,EAAE6M,GAAEG,CAAC,EAAEhN,GAAE8M,EAAE,CAAC,CAAC,cAAcE,CAAC,EAAEN,CAAC,EAAEA,EAAEE,EAAE,GAAG,IAAII,CAAC,CAAC,CAAC,IAAIC,EAAEL,GAAGC,GAAE,EAAEA,GAAE,EAAE,KAAK,OAAOD,IAAIC,GAAE,EAAEA,GAAEG,CAAC,IAAI,CAACP,EAAEC,EAAEE,EAAED,IAAI,CAACA,EAAED,EAAE,KAAKA,EAAE,KAAK,QAAQC,EAAEF,CAAC,EAAOC,EAAE,KAAK,QAAQD,CAAC,IAArB,KAAyBC,EAAE,KAAKE,EAAEH,EAAEC,EAAE,KAAKA,EAAE,KAAKD,EAAE,GAAGI,GAAEG,CAAC,EAAE,EAAE,EAAEC,CAAC,EAAED,CAAC,EAAEF,GAAE,CAAC,EAAE,EAAEF,IAAI,EAAE,OAAO,CAACH,EAAEE,EAAE,IAAI,CAAC,IAAInd,EAAE,EAAE,CAAC,EAAE,GAAGA,GAAGA,EAAE,KAAK,CAAC,IAAIid,EAAEjd,EAAEod,CAAC,EAAEF,EAAED,GAAGA,EAAE,OAAOA,EAAE,MAAM,WAAW,MAAM,KAAKA,CAAC,GAAGA,EAAEjd,EAAEkd,EAAE,IAAIA,EAAED,GAAa,OAAOA,GAAjB,SAAmBA,EAAE,MAAM,GAAGzM,GAAEyM,EAAE,EAAE,EAAOA,IAAL,GAAO,GAAGA,CAAC,CAAC,OAAOA,EAAEE,GAASnd,GAAE,GAAK,EAAE,EAAE,EAAE,SAASud,GAAE,EAAE,CAAC,IAAIH,EAAE,MAAM,CAAA,EAAGD,EAAE,EAAE,KAAK,EAAEC,EAAE,CAAC,EAAE,EAAE,OAAO3gB,GAAE0gB,EAAE,QAAQA,EAAE,IAAIG,GAAEH,EAAE,CAAA,EAAG,MAAM,KAAK,UAAU,CAAC,EAAEC,EAAE,CAAC,EAAED,EAAE,OAAO,CAACF,EAAEC,IAAI,OAAO,OAAOD,EAAEC,GAAGA,EAAE,KAAKA,EAAEE,EAAE,CAAC,EAAEF,CAAC,EAAE,CAAA,CAAE,EAAEC,EAAED,GAAEE,EAAE,MAAM,EAAEA,EAAE,EAAEA,EAAE,EAAEA,EAAE,CAAC,CAAC,CAAI,IAACI,GAAEC,GAAEC,GAAIH,GAAE,KAAK,CAAC,EAAE,CAAC,CAAC,EAAC,IAACI,GAAEJ,GAAE,KAAK,CAAC,EAAE,CAAC,CAAC,EAAE,SAAStT,GAAE,EAAE,EAAEmT,EAAED,EAAE,CAAC3M,GAAE,EAAE,EAAEgN,GAAE,EAAEC,GAAEL,EAAEM,GAAEP,CAAC,CAAC,SAASS,GAAE,EAAE,EAAE,CAAC,IAAIR,EAAE,MAAM,CAAA,EAAG,OAAO,UAAU,CAAC,IAAID,EAAE,UAAU,SAAS/a,EAAEpC,EAAE,EAAE,CAAC,IAAIqd,EAAE,OAAO,OAAO,CAAA,EAAGrd,CAAC,EAAE8C,EAAEua,EAAE,WAAWjb,EAAE,UAAUgb,EAAE,EAAE,OAAO,OAAO,CAAC,MAAMK,IAAGA,GAAC,CAAE,EAAEJ,CAAC,EAAED,EAAE,EAAE,UAAU,KAAKta,CAAC,EAAEua,EAAE,UAAUE,GAAE,MAAMH,EAAED,CAAC,GAAGra,EAAE,IAAIA,EAAE,IAAiB,IAAIrG,EAAE,EAAE,OAAO,EAAE,CAAC,IAAIA,EAAE4gB,EAAE,IAAI,EAAE,OAAOA,EAAE,IAAIK,IAAGjhB,EAAE,CAAC,GAAGihB,GAAEL,CAAC,EAAEG,GAAE/gB,EAAE4gB,CAAC,CAAC,CAAC,OAAcjb,CAAC,CAAC,CCCvqE,IAAIyb,GAAE,GAAG,OAAO,GAAG,WAAWJ,GAAE,CAAC,EAAE,IAAII,GAAE,CAAC,EAAE,EAAE,CAAC,EAAE,EAAMC,IAAG,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,KAAK,EAAE,GAAG,SAAQ,CAAE,GAAC,EAAIC,IAAG,IAAI,CAAC,IAAI,EAAE,MAAM,IAAI,CAAC,GAAG,IAAI,QAAQ,OAAO,OAAO,IAAI,CAAC,IAAI,EAAE,WAAW,kCAAkC,EAAE,EAAE,CAAC,GAAG,EAAE,OAAO,CAAC,OAAO,CAAC,CAAC,GAAC,EAAoEC,GAAE,GAAOC,GAAE,CAAC,EAAE,IAAI,CAAC,OAAO,EAAE,MAAM,IAAK,GAAE,MAAM,CAAC,GAAG,EAAE,OAAO,CAAC,EAAE,MAAM,GAAG,EAAE,MAAM,EAAE,MAAM,EAAED,EAAC,CAAC,EAAE,IAAK,GAAE,MAAM,CAAC,GAAG,EAAE,OAAO,EAAE,OAAO,IAAIxN,GAAGA,EAAE,KAAK,EAAE,MAAM,GAAG,CAAC,GAAGA,EAAE,GAAG,EAAE,KAAK,EAAEA,CAAC,CAAC,EAAE,IAAK,GAAE,GAAG,CAAC,MAAM4M,CAAC,EAAE,EAAE,OAAOa,GAAE,EAAE,CAAC,KAAK,EAAE,OAAO,KAAKzN,GAAGA,EAAE,KAAK4M,EAAE,EAAE,EAAE,EAAE,EAAE,MAAMA,CAAC,CAAC,EAAE,IAAK,GAAE,GAAG,CAAC,QAAQta,CAAC,EAAE,EAAE,MAAM,CAAC,GAAG,EAAE,OAAO,EAAE,OAAO,IAAI0N,GAAGA,EAAE,KAAK1N,GAAGA,IAAI,OAAO,CAAC,GAAG0N,EAAE,UAAU,GAAG,QAAQ,EAAE,EAAEA,CAAC,CAAC,EAAE,IAAK,GAAE,OAAO,EAAE,UAAU,OAAO,CAAC,GAAG,EAAE,OAAO,CAAA,CAAE,EAAE,CAAC,GAAG,EAAE,OAAO,EAAE,OAAO,OAAOA,GAAGA,EAAE,KAAK,EAAE,OAAO,CAAC,EAAE,IAAK,GAAE,MAAM,CAAC,GAAG,EAAE,SAAS,EAAE,IAAI,EAAE,IAAK,GAAE,IAAIpO,EAAE,EAAE,MAAM,EAAE,UAAU,GAAG,MAAM,CAAC,GAAG,EAAE,SAAS,OAAO,OAAO,EAAE,OAAO,IAAIoO,IAAI,CAAC,GAAGA,EAAE,cAAcA,EAAE,cAAcpO,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE8b,GAAE,GAAGC,GAAE,CAAC,OAAO,CAAA,EAAG,SAAS,MAAM,EAAEZ,GAAE,GAAG,CAACY,GAAEF,GAAEE,GAAE,CAAC,EAAED,GAAE,QAAQ,GAAG,CAAC,EAAEC,EAAC,CAAC,CAAC,CAAC,EAAEC,GAAE,CAAC,MAAM,IAAI,MAAM,IAAI,QAAQ,IAAI,QAAQ,IAAI,OAAO,GAAG,EAAEC,GAAE,CAAC,EAAE,KAAK,CAAC,GAAG,CAAC,EAAEjB,CAAC,EAAEQ,EAAAA,SAAEO,EAAC,EAAErb,EAAEwb,EAAAA,OAAEH,EAAC,EAAEI,EAAAA,UAAE,KAAKzb,EAAE,UAAUqb,IAAGf,EAAEe,EAAC,EAAED,GAAE,KAAKd,CAAC,EAAE,IAAI,CAAC,IAAI5M,EAAE0N,GAAE,QAAQd,CAAC,EAAE5M,EAAE,IAAI0N,GAAE,OAAO1N,EAAE,CAAC,CAAC,GAAG,EAAE,EAAE,IAAIpO,EAAE,EAAE,OAAO,IAAIoO,GAAG,CAAC,IAAIxQ,EAAEvD,EAAE6gB,EAAE,MAAM,CAAC,GAAG,EAAE,GAAG,EAAE9M,EAAE,IAAI,EAAE,GAAGA,EAAE,YAAYA,EAAE,eAAexQ,EAAE,EAAEwQ,EAAE,IAAI,IAAI,KAAK,OAAOxQ,EAAE,eAAe,GAAG,KAAK,OAAO,EAAE,aAAa,SAASwQ,EAAE,YAAY/T,EAAE,EAAE+T,EAAE,IAAI,IAAI,KAAK,OAAO/T,EAAE,YAAY,GAAG,KAAK,OAAO,EAAE,WAAW2hB,GAAE5N,EAAE,IAAI,EAAE,MAAM,CAAC,GAAG,EAAE,MAAM,IAAI8M,EAAE,EAAE9M,EAAE,IAAI,IAAI,KAAK,OAAO8M,EAAE,MAAM,GAAG9M,EAAE,KAAK,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,GAAG,EAAE,OAAOpO,CAAC,CAAC,EAAMoc,GAAE,CAAC,EAAE,EAAE,QAAQpB,KAAK,CAAC,UAAU,KAAK,IAAG,EAAG,QAAQ,GAAG,UAAU,GAAG,KAAK,EAAE,UAAU,CAAC,KAAK,SAAS,YAAY,QAAQ,EAAE,QAAQ,EAAE,cAAc,EAAE,GAAGA,EAAE,IAAIA,GAAG,KAAK,OAAOA,EAAE,KAAKU,GAAC,CAAE,GAAG9G,GAAE,GAAG,CAAC,EAAEoG,IAAI,CAAC,IAAIta,EAAE0b,GAAE,EAAE,EAAEpB,CAAC,EAAE,OAAOG,GAAE,CAAC,KAAK,EAAE,MAAMza,CAAC,CAAC,EAAEA,EAAE,EAAE,EAAEua,EAAE,CAAC,EAAE,IAAIrG,GAAE,OAAO,EAAE,EAAE,CAAC,EAAEqG,EAAE,MAAMrG,GAAE,OAAO,EAAEqG,EAAE,QAAQrG,GAAE,SAAS,EAAEqG,EAAE,QAAQrG,GAAE,SAAS,EAAEqG,EAAE,OAAOrG,GAAE,QAAQ,EAAEqG,EAAE,QAAQ,GAAG,CAACE,GAAE,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC,CAAC,EAAEF,EAAE,OAAO,GAAGE,GAAE,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC,EAAEF,EAAE,QAAQ,CAAC,EAAE,EAAED,IAAI,CAAC,IAAIta,EAAEua,EAAE,QAAQ,EAAE,QAAQ,CAAC,GAAGD,EAAE,GAAGA,GAAG,KAAK,OAAOA,EAAE,OAAO,CAAC,EAAE,OAAO,OAAO,GAAG,aAAa,EAAE,EAAC,GAAI,EAAE,KAAKhb,GAAG,CAAC,IAAIoO,EAAE,EAAE,QAAQiN,GAAE,EAAE,QAAQrb,CAAC,EAAE,OAAO,OAAOoO,EAAE6M,EAAE,QAAQ7M,EAAE,CAAC,GAAG1N,EAAE,GAAGsa,EAAE,GAAGA,GAAG,KAAK,OAAOA,EAAE,OAAO,CAAC,EAAEC,EAAE,QAAQva,CAAC,EAAEV,CAAC,CAAC,EAAE,MAAMA,GAAG,CAAC,IAAIoO,EAAE,EAAE,MAAMiN,GAAE,EAAE,MAAMrb,CAAC,EAAE,OAAOoO,EAAE6M,EAAE,MAAM7M,EAAE,CAAC,GAAG1N,EAAE,GAAGsa,EAAE,GAAGA,GAAG,KAAK,OAAOA,EAAE,KAAK,CAAC,EAAEC,EAAE,QAAQva,CAAC,CAAC,CAAC,EAAE,CAAC,EAAqD,IAAI2b,GAAE,CAAC,EAAE,IAAI,CAAClB,GAAE,CAAC,KAAK,EAAE,MAAM,CAAC,GAAG,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC,EAAEmB,GAAE,IAAI,CAACnB,GAAE,CAAC,KAAK,EAAE,KAAK,KAAK,IAAG,CAAE,CAAC,CAAC,EAAElb,GAAE,IAAI,IAAIsc,GAAE,IAAIC,GAAG,CAAC,EAAE,EAAED,KAAI,CAAC,GAAGtc,GAAE,IAAI,CAAC,EAAE,OAAO,IAAI+a,EAAE,WAAW,IAAI,CAAC/a,GAAE,OAAO,CAAC,EAAEkb,GAAE,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC,CAAC,EAAE,CAAC,EAAElb,GAAE,IAAI,EAAE+a,CAAC,CAAC,EAAEyB,GAAE,GAAG,CAAC,GAAG,CAAC,OAAO,EAAE,SAASzB,CAAC,EAAEiB,GAAE,CAAC,EAAES,EAAAA,UAAE,IAAI,CAAC,GAAG1B,EAAE,OAAO,IAAI5M,EAAE,KAAK,IAAG,EAAGxQ,EAAE,EAAE,IAAIvD,GAAG,CAAC,GAAGA,EAAE,WAAW,IAAI,OAAO,IAAI6gB,GAAG7gB,EAAE,UAAU,GAAGA,EAAE,eAAe+T,EAAE/T,EAAE,WAAW,GAAG6gB,EAAE,EAAE,CAAC7gB,EAAE,SAAS4gB,EAAE,QAAQ5gB,EAAE,EAAE,EAAE,MAAM,CAAC,OAAO,WAAW,IAAI4gB,EAAE,QAAQ5gB,EAAE,EAAE,EAAE6gB,CAAC,CAAC,CAAC,EAAE,MAAM,IAAI,CAACtd,EAAE,QAAQvD,GAAGA,GAAG,aAAaA,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE2gB,CAAC,CAAC,EAAE,IAAIta,EAAEic,EAAAA,YAAE,IAAI,CAAC3B,GAAGG,GAAE,CAAC,KAAK,EAAE,KAAK,KAAK,KAAK,CAAC,CAAC,EAAE,CAACH,CAAC,CAAC,EAAEhb,EAAE2c,EAAAA,YAAE,CAACvO,EAAExQ,IAAI,CAAC,GAAG,CAAC,aAAavD,EAAE,GAAG,OAAO6gB,EAAE,EAAE,gBAAgBE,CAAC,EAAExd,GAAG,CAAA,EAAG,EAAE,EAAE,OAAO,IAAI,EAAE,UAAUwd,MAAMhN,EAAE,UAAUgN,IAAI,EAAE,MAAM,EAAEjZ,EAAE,EAAE,UAAU,GAAG,EAAE,KAAKiM,EAAE,EAAE,EAAEwO,EAAE,EAAE,OAAO,CAAC,EAAEC,IAAIA,EAAE1a,GAAG,EAAE,OAAO,EAAE,OAAO,OAAO,EAAE,OAAO,GAAG,EAAE,OAAO,EAAE,MAAM,GAAG9H,EAAE,CAACuiB,EAAE,CAAC,EAAE,CAAC,EAAEA,CAAC,CAAC,EAAE,OAAO,CAAC,EAAEC,IAAI,GAAGA,EAAE,QAAQ,GAAG3B,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,OAAOwB,EAAAA,UAAE,IAAI,CAAC,EAAE,QAAQtO,GAAG,CAAC,GAAGA,EAAE,UAAUoO,GAAGpO,EAAE,GAAGA,EAAE,WAAW,MAAM,CAAC,IAAIxQ,EAAEqC,GAAE,IAAImO,EAAE,EAAE,EAAExQ,IAAI,aAAaA,CAAC,EAAEqC,GAAE,OAAOmO,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,OAAO,EAAE,SAAS,CAAC,aAAaiO,GAAE,WAAWC,GAAE,SAAS5b,EAAE,gBAAgBV,CAAC,CAAC,CAAC,EAAqM8c,GAAGC;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA,GAQhlHC,GAAGD;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA,GAQHE,GAAGF;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA,GAQHG,GAAEC,GAAG,KAAK;AAAA;AAAA;AAAA;AAAA;AAAA,gBAKG,GAAG,EAAE,SAAS,SAAS;AAAA;AAAA;AAAA;AAAA,eAIxBL,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAOAE,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA,kBAKD,GAAG,EAAE,WAAW,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAQvBC,EAAE;AAAA;AAAA;AAAA;AAAA,EAIoCG,GAAGC;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA,EAOxDC,GAAEC,GAAG,KAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAMM,GAAG,EAAE,WAAW,SAAS;AAAA,wBACnB,GAAG,EAAE,SAAS,SAAS;AAAA,eAChCH,EAAE;AAAA,EACqCI,GAAGC;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA,GAQtDC,GAAGD;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA,GAcHvb,GAAEyb,GAAG,KAAK;AAAA;AAAA;AAAA;AAAA;AAAA,gBAKG,GAAG,EAAE,SAAS,SAAS;AAAA;AAAA;AAAA;AAAA,eAIxBH,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAMAE,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAMC,GAAG,EAAE,WAAW,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAMpCE,GAAGC,GAAE,KAAK;AAAA;AAAA,EAEdC,GAAGD,GAAE,KAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOVE,GAAGC;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA,GAQFC,GAAGJ,GAAE,KAAK;AAAA;AAAA;AAAA;AAAA;AAAA,eAKEE,EAAE;AAAA;AAAA,EAEfG,GAAE,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,EAAE,KAAKlD,EAAE,UAAUta,CAAC,EAAE,EAAE,OAAO,IAAI,OAAO,OAAO,GAAG,SAASyd,EAAAA,cAAgBF,GAAG,KAAK,CAAC,EAAE,EAAEjD,IAAI,QAAQ,KAAKmD,EAAAA,cAAgBL,GAAG,KAAKK,EAAAA,cAAgBb,GAAE,CAAC,GAAG5c,CAAC,CAAC,EAAEsa,IAAI,WAAWmD,EAAAA,cAAgBP,GAAG,KAAK5C,IAAI,QAAQmD,gBAAgBjB,GAAE,CAAC,GAAGxc,CAAC,CAAC,EAAEyd,EAAAA,cAAgBjc,GAAE,CAAC,GAAGxB,CAAC,CAAC,CAAC,CAAC,CAAC,EAAM0d,GAAG,GAAG;AAAA,+BAC7Q,EAAE,IAAI;AAAA;AAAA,EAEnCC,GAAG,GAAG;AAAA;AAAA,iCAEyB,EAAE,IAAI;AAAA,EACrCC,GAAG,kCAAkCC,GAAG,kCAAkCC,GAAGC,GAAE,KAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAYpFC,GAAGD,GAAE,KAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOVE,GAAG,CAAC,EAAE,IAAI,CAAC,IAAI,EAAE,EAAE,SAAS,KAAK,EAAE,EAAE,GAAG,CAAC3e,EAAEoO,CAAC,EAAEuN,GAAC,EAAG,CAAC2C,GAAGC,EAAE,EAAE,CAACH,GAAG,CAAC,EAAEC,GAAG,CAAC,CAAC,EAAE,MAAM,CAAC,UAAU,EAAE,GAAGO,GAAE5e,CAAC,CAAC,+CAA+C,GAAG4e,GAAExQ,CAAC,CAAC,4CAA4C,CAAC,EAAEyQ,GAAEC,EAAAA,KAAO,CAAC,CAAC,MAAM,EAAE,SAAS,EAAE,MAAM9D,EAAE,SAASta,CAAC,IAAI,CAAC,IAAIV,EAAE,EAAE,OAAO2e,GAAG,EAAE,UAAU,GAAG,aAAa,EAAE,OAAO,EAAE,CAAC,QAAQ,CAAC,EAAEvQ,EAAE2Q,EAAAA,cAAgBb,GAAE,CAAC,MAAM,CAAC,CAAC,EAAEtgB,EAAEmhB,gBAAgBL,GAAG,CAAC,GAAG,EAAE,SAAS,EAAErD,GAAE,EAAE,QAAQ,CAAC,CAAC,EAAE,OAAO0D,EAAAA,cAAgBP,GAAG,CAAC,UAAU,EAAE,UAAU,MAAM,CAAC,GAAGxe,EAAE,GAAGgb,EAAE,GAAG,EAAE,KAAK,CAAC,EAAE,OAAOta,GAAG,WAAWA,EAAE,CAAC,KAAK0N,EAAE,QAAQxQ,CAAC,CAAC,EAAEmhB,EAAAA,cAAgBC,EAAAA,SAAW,KAAK5Q,EAAExQ,CAAC,CAAC,CAAC,CAAC,EAAoEqhB,GAAGC,EAAAA,aAAe,EAAE,IAAIC,GAAG,CAAC,CAAC,GAAG,EAAE,UAAU,EAAE,MAAMnE,EAAE,eAAeta,EAAE,SAASV,CAAC,IAAI,CAAC,IAAIoO,EAAEgR,EAAAA,YAAcxhB,GAAG,CAAC,GAAGA,EAAE,CAAC,IAAIvD,EAAE,IAAI,CAAC,IAAI6gB,EAAEtd,EAAE,sBAAqB,EAAG,OAAO8C,EAAE,EAAEwa,CAAC,CAAC,EAAE7gB,IAAI,IAAI,iBAAiBA,CAAC,EAAE,QAAQuD,EAAE,CAAC,QAAQ,GAAG,UAAU,GAAG,cAAc,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE8C,CAAC,CAAC,EAAE,OAAOwe,EAAAA,cAAgB,MAAM,CAAC,IAAI9Q,EAAE,UAAU,EAAE,MAAM4M,CAAC,EAAEhb,CAAC,CAAC,EAAEqf,GAAG,CAAC,EAAE,IAAI,CAAC,IAAIrE,EAAE,EAAE,SAAS,KAAK,EAAEta,EAAEsa,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,OAAO,CAAC,EAAEhb,EAAE,EAAE,SAAS,QAAQ,EAAE,CAAC,eAAe,QAAQ,EAAE,EAAE,SAAS,OAAO,EAAE,CAAC,eAAe,UAAU,EAAE,CAAA,EAAG,MAAM,CAAC,KAAK,EAAE,MAAM,EAAE,QAAQ,OAAO,SAAS,WAAW,WAAW2b,GAAC,EAAG,OAAO,yCAAyC,UAAU,cAAc,GAAGX,EAAE,EAAE,GAAG,MAAM,GAAGta,EAAE,GAAGV,CAAC,CAAC,EAAEsf,GAAGC;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA,EAK7wCC,GAAE,GAAGC,GAAG,CAAC,CAAC,aAAa,EAAE,SAAS,EAAE,aAAa,aAAazE,EAAE,OAAOta,EAAE,SAASV,EAAE,eAAeoO,EAAE,mBAAmBxQ,CAAC,IAAI,CAAC,GAAG,CAAC,OAAOvD,EAAE,SAAS6gB,CAAC,EAAEuB,GAAEzB,CAAC,EAAE,OAAOkE,EAAAA,cAAgB,MAAM,CAAC,GAAG,eAAe,MAAM,CAAC,SAAS,QAAQ,OAAO,KAAK,IAAIM,GAAE,KAAKA,GAAE,MAAMA,GAAE,OAAOA,GAAE,cAAc,OAAO,GAAGpR,CAAC,EAAE,UAAUxQ,EAAE,aAAasd,EAAE,WAAW,aAAaA,EAAE,QAAQ,EAAE7gB,EAAE,IAAI+gB,GAAG,CAAC,IAAI,EAAEA,EAAE,UAAU,EAAEjZ,EAAE+Y,EAAE,gBAAgBE,EAAE,CAAC,aAAa,EAAE,OAAO1a,EAAE,gBAAgB,CAAC,CAAC,EAAEkc,EAAEyC,GAAG,EAAEld,CAAC,EAAE,OAAO+c,EAAAA,cAAgBC,GAAG,CAAC,GAAG/D,EAAE,GAAG,IAAIA,EAAE,GAAG,eAAeF,EAAE,aAAa,UAAUE,EAAE,QAAQkE,GAAG,GAAG,MAAM1C,CAAC,EAAExB,EAAE,OAAO,SAASC,GAAED,EAAE,QAAQA,CAAC,EAAEpb,EAAEA,EAAEob,CAAC,EAAE8D,EAAAA,cAAgBL,GAAE,CAAC,MAAMzD,EAAE,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,ECjLrpB;AAAA;AAAA;AAAA;AAAA;AAAA,GAOA,IAAIsE,GAAoB,CACtB,MAAO,6BACP,MAAO,GACP,OAAQ,GACR,QAAS,YACT,KAAM,OACN,OAAQ,eACR,YAAa,EACb,cAAe,QACf,eAAgB,OAClB,ECjBA;AAAA;AAAA;AAAA;AAAA;AAAA,GAUA,MAAMC,GAAeC,GAAWA,EAAO,QAAQ,qBAAsB,OAAO,EAAE,YAAW,EAAG,KAAI,EAC1FC,EAAmB,CAACC,EAAUC,IAAa,CAC/C,MAAMC,EAAYC,EAAAA,WAChB,CAAC,CAAE,MAAAC,EAAQ,eAAgB,KAAAC,EAAO,GAAI,YAAAC,EAAc,EAAG,oBAAAC,EAAqB,UAAAC,EAAY,GAAI,SAAA9Y,EAAU,GAAG9H,CAAI,EAAI6gB,IAAQC,EAAAA,cACvH,MACA,CACE,IAAAD,EACA,GAAGb,GACH,MAAOS,EACP,OAAQA,EACR,OAAQD,EACR,YAAaG,EAAsB,OAAOD,CAAW,EAAI,GAAK,OAAOD,CAAI,EAAIC,EAC7E,UAAW,CAAC,SAAU,UAAUT,GAAYG,CAAQ,CAAC,GAAIQ,CAAS,EAAE,KAAK,GAAG,EAC5E,GAAG5gB,CACX,EACM,CACE,GAAGqgB,EAAS,IAAI,CAAC,CAACU,EAAKC,CAAK,IAAMF,EAAAA,cAAcC,EAAKC,CAAK,CAAC,EAC3D,GAAG,MAAM,QAAQlZ,CAAQ,EAAIA,EAAW,CAACA,CAAQ,CACzD,CACA,CACA,EACE,OAAAwY,EAAU,YAAc,GAAGF,CAAQ,GAC5BE,CACT,ECjCA;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAMW,GAAgBd,EAAiB,gBAAiB,CACtD,CACE,OACA,CACE,EAAG,4EACH,IAAK,QACX,CACA,EACE,CAAC,OAAQ,CAAE,EAAG,UAAW,IAAK,QAAQ,CAAE,EACxC,CAAC,OAAQ,CAAE,EAAG,aAAc,IAAK,QAAQ,CAAE,CAC7C,CAAC,ECnBD;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAMe,GAAYf,EAAiB,YAAa,CAC9C,CAAC,OAAQ,CAAE,EAAG,iBAAkB,IAAK,QAAQ,CAAE,EAC/C,CAAC,OAAQ,CAAE,EAAG,WAAY,IAAK,QAAQ,CAAE,CAC3C,CAAC,ECZD;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAMgB,GAAQhB,EAAiB,QAAS,CACtC,CAAC,SAAU,CAAE,GAAI,KAAM,GAAI,IAAK,EAAG,IAAK,IAAK,SAAU,EACvD,CAAC,OAAQ,CAAE,EAAG,0CAA2C,IAAK,QAAQ,CAAE,CAC1E,CAAC,ECZD;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAMiB,GAAYjB,EAAiB,YAAa,CAC9C,CAAC,OAAQ,CAAE,EAAG,aAAc,IAAK,QAAQ,CAAE,EAC3C,CAAC,OAAQ,CAAE,EAAG,WAAY,IAAK,QAAQ,CAAE,EACzC,CAAC,OAAQ,CAAE,EAAG,WAAY,IAAK,QAAQ,CAAE,EACzC,CAAC,OAAQ,CAAE,EAAG,WAAY,IAAK,QAAQ,CAAE,CAC3C,CAAC,ECdD;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAMkB,GAAWlB,EAAiB,WAAY,CAC5C,CAAC,OAAQ,CAAE,EAAG,2CAA4C,IAAK,QAAQ,CAAE,EACzE,CAAC,OAAQ,CAAE,EAAG,6CAA8C,IAAK,QAAQ,CAAE,CAC7E,CAAC,ECZD;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAMmB,GAAQnB,EAAiB,QAAS,CACtC,CACE,OACA,CACE,EAAG,oKACH,IAAK,QACX,CACA,EACE,CACE,OACA,CACE,EAAG,sKACH,IAAK,QACX,CACA,CACA,CAAC,ECxBD;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAMoB,GAAcpB,EAAiB,cAAe,CAClD,CAAC,OAAQ,CAAE,EAAG,qCAAsC,IAAK,QAAQ,CAAE,EACnE,CAAC,OAAQ,CAAE,EAAG,iBAAkB,IAAK,QAAQ,CAAE,CACjD,CAAC,ECZD;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAMqB,GAAQrB,EAAiB,QAAS,CACtC,CAAC,SAAU,CAAE,GAAI,KAAM,GAAI,KAAM,EAAG,KAAM,IAAK,SAAU,EACzD,CAAC,WAAY,CAAE,OAAQ,mBAAoB,IAAK,QAAQ,CAAE,CAC5D,CAAC,ECZD;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAMsB,GAAWtB,EAAiB,WAAY,CAC5C,CAAC,OAAQ,CAAE,GAAI,IAAK,GAAI,KAAM,GAAI,KAAM,GAAI,KAAM,IAAK,QAAQ,CAAE,EACjE,CAAC,OAAQ,CAAE,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,KAAM,IAAK,QAAQ,CAAE,EAC/D,CAAC,OAAQ,CAAE,GAAI,KAAM,GAAI,QAAS,GAAI,KAAM,GAAI,KAAM,IAAK,QAAQ,CAAE,EACrE,CAAC,OAAQ,CAAE,GAAI,KAAM,GAAI,QAAS,GAAI,KAAM,GAAI,KAAM,IAAK,QAAQ,CAAE,EACrE,CACE,OACA,CACE,EAAG,6RACH,IAAK,QACX,CACA,CACA,CAAC,ECrBD;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAMuB,GAAavB,EAAiB,aAAc,CAChD,CAAC,SAAU,CAAE,GAAI,KAAM,GAAI,KAAM,EAAG,KAAM,IAAK,SAAU,EACzD,CAAC,OAAQ,CAAE,EAAG,uCAAwC,IAAK,QAAQ,CAAE,EACrE,CAAC,OAAQ,CAAE,EAAG,aAAc,IAAK,QAAQ,CAAE,CAC7C,CAAC,ECbD;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAMwB,GAAOxB,EAAiB,OAAQ,CACpC,CAAC,OAAQ,CAAE,EAAG,iDAAkD,IAAK,QAAQ,CAAE,EAC/E,CAAC,WAAY,CAAE,OAAQ,wBAAyB,IAAK,QAAQ,CAAE,CACjE,CAAC,ECZD;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAMyB,GAAYzB,EAAiB,YAAa,CAC9C,CACE,OACA,CACE,EAAG,uGACH,IAAK,QACX,CACA,EACE,CAAC,OAAQ,CAAE,EAAG,UAAW,IAAK,QAAQ,CAAE,EACxC,CAAC,OAAQ,CAAE,EAAG,WAAY,IAAK,QAAQ,CAAE,CAC3C,CAAC,ECnBD;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAM0B,GAAO1B,EAAiB,OAAQ,CACpC,CAAC,UAAW,CAAE,OAAQ,qBAAsB,IAAK,QAAQ,CAAE,CAC7D,CAAC,ECXD;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAM2B,GAAY3B,EAAiB,YAAa,CAC9C,CAAC,OAAQ,CAAE,EAAG,qDAAsD,IAAK,QAAQ,CAAE,EACnF,CAAC,OAAQ,CAAE,EAAG,aAAc,IAAK,QAAQ,CAAE,EAC3C,CAAC,OAAQ,CAAE,EAAG,sDAAuD,IAAK,QAAQ,CAAE,EACpF,CAAC,OAAQ,CAAE,EAAG,YAAa,IAAK,QAAQ,CAAE,CAC5C,CAAC,ECdD;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAM4B,GAAS5B,EAAiB,SAAU,CACxC,CAAC,OAAQ,CAAE,EAAG,6CAA8C,IAAK,QAAQ,CAAE,CAC7E,CAAC,ECXD;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAM6B,GAAO7B,EAAiB,OAAQ,CACpC,CACE,UACA,CACE,OAAQ,iGACR,IAAK,QACX,CACA,CACA,CAAC,ECjBD;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAM8B,GAAS9B,EAAiB,SAAU,CACxC,CAAC,SAAU,CAAE,GAAI,KAAM,GAAI,KAAM,EAAG,KAAM,IAAK,SAAU,EACzD,CAAC,SAAU,CAAE,GAAI,KAAM,GAAI,KAAM,EAAG,IAAK,IAAK,SAAU,EACxD,CAAC,SAAU,CAAE,GAAI,KAAM,GAAI,KAAM,EAAG,IAAK,IAAK,QAAQ,CAAE,CAC1D,CAAC,ECbD;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAM+B,GAAS/B,EAAiB,SAAU,CACxC,CAAC,OAAQ,CAAE,EAAG,+BAAgC,IAAK,QAAQ,CAAE,EAC7D,CAAC,OAAQ,CAAE,EAAG,iCAAkC,IAAK,QAAQ,CAAE,EAC/D,CAAC,OAAQ,CAAE,EAAG,WAAY,IAAK,QAAQ,CAAE,EACzC,CAAC,OAAQ,CAAE,EAAG,6DAA8D,IAAK,QAAQ,CAAE,EAC3F,CAAC,OAAQ,CAAE,EAAG,8DAA+D,IAAK,QAAQ,CAAE,EAC5F,CAAC,OAAQ,CAAE,EAAG,8BAA+B,IAAK,QAAQ,CAAE,CAC9D,CAAC,EChBD;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAMgC,GAAUhC,EAAiB,UAAW,CAC1C,CAAC,SAAU,CAAE,GAAI,KAAM,GAAI,KAAM,EAAG,KAAM,IAAK,SAAU,EACzD,CAAC,OAAQ,CAAE,EAAG,YAAa,IAAK,QAAQ,CAAE,EAC1C,CAAC,OAAQ,CAAE,EAAG,WAAY,IAAK,QAAQ,CAAE,CAC3C,CAAC,ECbD;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAMvD,GAAIuD,EAAiB,IAAK,CAC9B,CAAC,OAAQ,CAAE,EAAG,aAAc,IAAK,QAAQ,CAAE,EAC3C,CAAC,OAAQ,CAAE,EAAG,aAAc,IAAK,QAAQ,CAAE,CAC7C,CAAC,ECZD;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAMiC,GAAMjC,EAAiB,MAAO,CAClC,CAAC,UAAW,CAAE,OAAQ,yCAA0C,IAAK,QAAQ,CAAE,CACjF,CAAC,ECNKkC,GAAsBC,EAAAA,cAAc,CACtC,mBAAqB9G,GAAMA,EAC3B,SAAU,GACV,cAAe,OACnB,CAAC,ECPK+G,GAAgBD,EAAAA,cAAc,EAAE,ECGhCE,GAAkBF,EAAAA,cAAc,IAAI,ECLpCG,GAAY,OAAO,SAAa,ICGhCpd,GAA4Bod,GAAYC,EAAAA,gBAAkBC,EAAAA,UCD1DC,GAAcN,EAAAA,cAAc,CAAE,OAAQ,EAAK,CAAE,ECC7CO,GAAeC,GAAQA,EAAI,QAAQ,kBAAmB,OAAO,EAAE,YAAW,ECD1EC,GAAwB,iBACxBC,GAA+B,QAAUH,GAAYE,EAAqB,ECKhF,SAASE,GAAiB3C,EAAW4C,EAAaxb,EAAOyb,EAAqB,CAC1E,KAAM,CAAE,cAAeC,GAAWC,EAAAA,WAAWd,EAAa,EACpDe,EAAcD,EAAAA,WAAWT,EAAW,EACpCW,EAAkBF,EAAAA,WAAWb,EAAe,EAC5CgB,EAAsBH,EAAAA,WAAWhB,EAAmB,EAAE,cACtDoB,EAAmBC,EAAAA,OAAM,EAI/BP,EAAsBA,GAAuBG,EAAY,SACrD,CAACG,EAAiB,SAAWN,IAC7BM,EAAiB,QAAUN,EAAoB7C,EAAW,CACtD,YAAA4C,EACA,OAAAE,EACA,MAAA1b,EACA,gBAAA6b,EACA,sBAAuBA,EACjBA,EAAgB,UAAY,GAC5B,GACN,oBAAAC,CACZ,CAAS,GAEL,MAAMG,EAAgBF,EAAiB,QACvCG,EAAAA,mBAAmB,IAAM,CACrBD,GAAiBA,EAAc,OAAOjc,EAAO6b,CAAe,CAChE,CAAC,EAKD,MAAMM,EAAeH,EAAAA,OAAO,GAAQhc,EAAMsb,EAA4B,GAAK,CAAC,OAAO,gBAAgB,EACnG,OAAA3d,GAA0B,IAAM,CACvBse,IAELA,EAAc,OAAM,EAWhBE,EAAa,SAAWF,EAAc,gBACtCA,EAAc,eAAe,eAAc,EAEnD,CAAC,EACDhB,EAAAA,UAAU,IAAM,CACPgB,IAELA,EAAc,eAAc,EACxB,CAACE,EAAa,SAAWF,EAAc,gBACvCA,EAAc,eAAe,eAAc,EAE3CE,EAAa,UACbA,EAAa,QAAU,GAEvB,OAAO,gBAAkB,IAEjC,CAAC,EACMF,CACX,CCvEA,SAASG,GAAYjD,EAAK,CACtB,OAAQA,GACJ,OAAOA,GAAQ,UACf,OAAO,UAAU,eAAe,KAAKA,EAAK,SAAS,CAC3D,CCGA,SAASkD,GAAab,EAAaS,EAAeK,EAAa,CAC3D,OAAOC,EAAAA,YAAaC,GAAa,CAC7BA,GAAYhB,EAAY,OAASA,EAAY,MAAMgB,CAAQ,EACvDP,IACAO,EACMP,EAAc,MAAMO,CAAQ,EAC5BP,EAAc,QAAO,GAE3BK,IACI,OAAOA,GAAgB,WACvBA,EAAYE,CAAQ,EAEfJ,GAAYE,CAAW,IAC5BA,EAAY,QAAUE,GAGlC,EAMA,CAACP,CAAa,CAAC,CACnB,CC3BA,SAASQ,GAAe1hB,EAAG,CACvB,OAAO,OAAOA,GAAM,UAAY,MAAM,QAAQA,CAAC,CACnD,CCLA,SAAS2hB,GAAoB3hB,EAAG,CAC5B,OAAQA,IAAM,MACV,OAAOA,GAAM,UACb,OAAOA,EAAE,OAAU,UAC3B,CCJA,MAAM4hB,GAAuB,CACzB,UACA,cACA,aACA,aACA,WACA,YACA,MACJ,EACMC,GAAe,CAAC,UAAW,GAAGD,EAAoB,ECLxD,SAASE,GAAsB7c,EAAO,CAClC,OAAQ0c,GAAoB1c,EAAM,OAAO,GACrC4c,GAAa,KAAME,GAASL,GAAezc,EAAM8c,CAAI,CAAC,CAAC,CAC/D,CACA,SAASC,GAAc/c,EAAO,CAC1B,MAAO,GAAQ6c,GAAsB7c,CAAK,GAAKA,EAAM,SACzD,CCPA,SAASgd,GAAuBhd,EAAOgO,EAAS,CAC5C,GAAI6O,GAAsB7c,CAAK,EAAG,CAC9B,KAAM,CAAE,QAAAid,EAAS,QAAAC,CAAO,EAAKld,EAC7B,MAAO,CACH,QAASid,IAAY,IAASR,GAAeQ,CAAO,EAC9CA,EACA,OACN,QAASR,GAAeS,CAAO,EAAIA,EAAU,MACzD,CACI,CACA,OAAOld,EAAM,UAAY,GAAQgO,EAAU,CAAA,CAC/C,CCVA,SAASmP,GAAuBnd,EAAO,CACnC,KAAM,CAAE,QAAAid,EAAS,QAAAC,CAAO,EAAKF,GAAuBhd,EAAO2b,EAAAA,WAAWd,EAAa,CAAC,EACpF,OAAOuC,UAAQ,KAAO,CAAE,QAAAH,EAAS,QAAAC,CAAO,GAAK,CAACG,GAA0BJ,CAAO,EAAGI,GAA0BH,CAAO,CAAC,CAAC,CACzH,CACA,SAASG,GAA0BC,EAAM,CACrC,OAAO,MAAM,QAAQA,CAAI,EAAIA,EAAK,KAAK,GAAG,EAAIA,CAClD,CCVA,MAAMC,GAAe,CACjB,UAAW,CACP,UACA,WACA,aACA,WACA,OACA,cACA,aACA,WACR,EACI,KAAM,CAAC,MAAM,EACb,KAAM,CAAC,OAAQ,cAAc,EAC7B,MAAO,CAAC,YAAY,EACpB,MAAO,CAAC,aAAc,eAAgB,YAAY,EAClD,IAAK,CAAC,WAAY,QAAS,aAAc,aAAa,EACtD,IAAK,CAAC,QAAS,aAAc,oBAAqB,UAAU,EAC5D,OAAQ,CAAC,cAAe,kBAAmB,iBAAiB,EAC5D,OAAQ,CAAC,SAAU,UAAU,CACjC,EACMC,GAAqB,CAAA,EAC3B,UAAWrqB,KAAOoqB,GACdC,GAAmBrqB,CAAG,EAAI,CACtB,UAAY6M,GAAUud,GAAapqB,CAAG,EAAE,KAAM2pB,GAAS,CAAC,CAAC9c,EAAM8c,CAAI,CAAC,CAC5E,ECtBA,SAASW,GAAaC,EAAU,CAC5B,UAAWvqB,KAAOuqB,EACdF,GAAmBrqB,CAAG,EAAI,CACtB,GAAGqqB,GAAmBrqB,CAAG,EACzB,GAAGuqB,EAASvqB,CAAG,CAC3B,CAEA,CCPA,MAAMwqB,GAAqB/C,EAAAA,cAAc,EAAE,ECGrCgD,GAA2BhD,EAAAA,cAAc,EAAE,ECL3CiD,GAAwB,OAAO,IAAI,uBAAuB,ECuBhE,SAASC,GAAsB,CAAE,kBAAAC,EAAmB,oBAAAtC,EAAqB,UAAAuC,EAAW,eAAAC,EAAgB,UAAArF,GAAc,CAC9GmF,GAAqBN,GAAaM,CAAiB,EACnD,SAASG,EAAgBle,EAAOsc,EAAa,CAKzC,IAAI6B,EACJ,MAAMC,EAAiB,CACnB,GAAGzC,EAAAA,WAAWhB,EAAmB,EACjC,GAAG3a,EACH,SAAUqe,GAAYre,CAAK,CACvC,EACc,CAAE,SAAAse,CAAQ,EAAKF,EACfpQ,EAAUmP,GAAuBnd,CAAK,EACtCwb,EAAcyC,EAAeje,EAAOse,CAAQ,EAClD,GAAI,CAACA,GAAYvD,GAAW,CAOxB/M,EAAQ,cAAgBuN,GAAiB3C,EAAW4C,EAAa4C,EAAgB3C,CAAmB,EAKpG,MAAM8C,EAA2B5C,EAAAA,WAAWiC,EAAwB,EAC9DY,EAAW7C,EAAAA,WAAWT,EAAW,EAAE,OACrClN,EAAQ,gBACRmQ,EAAgBnQ,EAAQ,cAAc,aAEtCoQ,EAAgBI,EAAUT,EAAmBQ,CAAwB,EAE7E,CAKA,OAAQhf,EAAAA,cAAoBsb,GAAc,SAAU,CAAE,MAAO7M,CAAO,EAChEmQ,GAAiBnQ,EAAQ,cAAiBzO,EAAAA,cAAoB4e,EAAe,CAAE,cAAenQ,EAAQ,cAAe,GAAGoQ,CAAc,CAAE,EAAK,KAC7IJ,EAAUpF,EAAW5Y,EAAOqc,GAAab,EAAaxN,EAAQ,cAAesO,CAAW,EAAGd,EAAa8C,EAAUtQ,EAAQ,aAAa,CAAC,CAChJ,CACA,MAAMyQ,EAAsB5F,EAAAA,WAAWqF,CAAe,EACtD,OAAAO,EAAoBZ,EAAqB,EAAIjF,EACtC6F,CACX,CACA,SAASJ,GAAY,CAAE,SAAAK,GAAY,CAC/B,MAAMC,EAAgBhD,EAAAA,WAAWgC,EAAkB,EAAE,GACrD,OAAOgB,GAAiBD,IAAa,OAC/BC,EAAgB,IAAMD,EACtBA,CACV,CC5DA,SAASE,GAAkBC,EAAc,CACrC,SAASC,EAAOlG,EAAWmG,EAA8B,GAAI,CACzD,OAAOjB,GAAsBe,EAAajG,EAAWmG,CAA2B,CAAC,CACrF,CACA,GAAI,OAAO,MAAU,IACjB,OAAOD,EAMX,MAAME,EAAiB,IAAI,IAC3B,OAAO,IAAI,MAAMF,EAAQ,CAMrB,IAAK,CAACG,EAAS9rB,KAIN6rB,EAAe,IAAI7rB,CAAG,GACvB6rB,EAAe,IAAI7rB,EAAK2rB,EAAO3rB,CAAG,CAAC,EAEhC6rB,EAAe,IAAI7rB,CAAG,EAEzC,CAAK,CACL,CCxCA,MAAM+rB,GAAuB,CACzB,UACA,SACA,OACA,OACA,UACA,IACA,QACA,OACA,SACA,SACA,OACA,WACA,OACA,UACA,UACA,WACA,OACA,OACA,SACA,SACA,MACA,OACA,QACA,MACA,MACJ,EC5BA,SAASC,GAAevG,EAAW,CAC/B,OAKA,OAAOA,GAAc,UAIjBA,EAAU,SAAS,GAAG,EACf,GAMX,GAAAsG,GAAqB,QAAQtG,CAAS,EAAI,IAItC,QAAQ,KAAKA,CAAS,EAI9B,CC3BA,MAAMwG,GAAkB,CAAA,EACxB,SAASC,GAAkBC,EAAY,CACnC,OAAO,OAAOF,GAAiBE,CAAU,CAC7C,CCAA,MAAMC,GAAqB,CACvB,uBACA,IACA,IACA,IACA,aACA,aACA,aACA,QACA,SACA,SACA,SACA,UACA,UACA,UACA,OACA,QACA,OACJ,EAIMC,GAAiB,IAAI,IAAID,EAAkB,ECtBjD,SAASE,GAAoBtsB,EAAK,CAAE,OAAAusB,EAAQ,SAAAhB,CAAQ,EAAI,CACpD,OAAQc,GAAe,IAAIrsB,CAAG,GAC1BA,EAAI,WAAW,QAAQ,IACrBusB,GAAUhB,IAAa,UACpB,CAAC,CAACU,GAAgBjsB,CAAG,GAAKA,IAAQ,UAC/C,CCRA,MAAMwsB,GAAiBvrB,GAAU,GAAQA,GAASA,EAAM,aCElDwrB,GAAiB,CACnB,EAAG,aACH,EAAG,aACH,EAAG,aACH,qBAAsB,aAC1B,EACMC,GAAgBN,GAAmB,OAOzC,SAASO,GAAeC,EAAW,CAAE,2BAAAC,EAA6B,GAAM,mBAAAC,EAAqB,EAAI,EAAKC,EAAoBC,EAAmB,CAEzI,IAAIC,EAAkB,GAKtB,QAASntB,EAAI,EAAGA,EAAI4sB,GAAe5sB,IAAK,CACpC,MAAME,EAAMosB,GAAmBtsB,CAAC,EAChC,GAAI8sB,EAAU5sB,CAAG,IAAM,OAAW,CAC9B,MAAMktB,EAAgBT,GAAezsB,CAAG,GAAKA,EAC7CitB,GAAmB,GAAGC,CAAa,IAAIN,EAAU5sB,CAAG,CAAC,IACzD,CACJ,CACA,OAAI6sB,GAA8B,CAACD,EAAU,IACzCK,GAAmB,iBAEvBA,EAAkBA,EAAgB,KAAI,EAGlCD,EACAC,EAAkBD,EAAkBJ,EAAWG,EAAqB,GAAKE,CAAe,EAEnFH,GAAsBC,IAC3BE,EAAkB,QAEfA,CACX,CC1CA,MAAME,GAAyBC,GAAWptB,GAAQ,OAAOA,GAAQ,UAAYA,EAAI,WAAWotB,CAAK,EAC3FC,GAAoBF,GAAsB,IAAI,EAC9CG,GAAqBH,GAAsB,QAAQ,EACnDI,GAAmB,gFCAnBC,GAAiB,CAACvsB,EAAOkR,IACpBA,GAAQ,OAAOlR,GAAU,SAC1BkR,EAAK,UAAUlR,CAAK,EACpBA,ECNJwsB,GAAQ,CAACC,EAAKhZ,EAAK9M,IAAM,KAAK,IAAI,KAAK,IAAIA,EAAG8lB,CAAG,EAAGhZ,CAAG,ECEvDiZ,GAAS,CACX,KAAO/lB,GAAM,OAAOA,GAAM,SAC1B,MAAO,WACP,UAAYA,GAAMA,CACtB,EACMgmB,GAAQ,CACV,GAAGD,GACH,UAAY/lB,GAAM6lB,GAAM,EAAG,EAAG7lB,CAAC,CACnC,EACMimB,GAAQ,CACV,GAAGF,GACH,QAAS,CACb,ECRMG,GAAYlmB,GAAM,KAAK,MAAMA,EAAI,GAAM,EAAI,IAC3CmmB,GAAa,uBACbC,GAAa,8FACbC,GAAmB,+FACzB,SAASC,GAAStmB,EAAG,CACjB,OAAO,OAAOA,GAAM,QACxB,CCVA,MAAMumB,GAAkBC,IAAU,CAC9B,KAAOxmB,GAAMsmB,GAAStmB,CAAC,GAAKA,EAAE,SAASwmB,CAAI,GAAKxmB,EAAE,MAAM,GAAG,EAAE,SAAW,EACxE,MAAO,WACP,UAAYA,GAAM,GAAGA,CAAC,GAAGwmB,CAAI,EACjC,GACMC,GAAUF,GAAe,KAAK,EAC9BG,GAAUH,GAAe,GAAG,EAC5BI,EAAKJ,GAAe,IAAI,EACxBK,GAAKL,GAAe,IAAI,EACxBM,GAAKN,GAAe,IAAI,EACxBO,GAAqB,CACvB,GAAGJ,GACH,MAAQ1mB,GAAM0mB,GAAQ,MAAM1mB,CAAC,EAAI,IACjC,UAAYA,GAAM0mB,GAAQ,UAAU1mB,EAAI,GAAG,CAC/C,ECdM+mB,GAAM,CACR,GAAGhB,GACH,UAAW,KAAK,KACpB,ECDMiB,GAAmB,CAErB,YAAaL,EACb,eAAgBA,EAChB,iBAAkBA,EAClB,kBAAmBA,EACnB,gBAAiBA,EACjB,aAAcA,EACd,OAAQA,EACR,oBAAqBA,EACrB,qBAAsBA,EACtB,wBAAyBA,EACzB,uBAAwBA,EAExB,MAAOA,EACP,SAAUA,EACV,OAAQA,EACR,UAAWA,EACX,KAAMA,EACN,IAAKA,EACL,MAAOA,EACP,OAAQA,EACR,KAAMA,EAEN,QAASA,EACT,WAAYA,EACZ,aAAcA,EACd,cAAeA,EACf,YAAaA,EACb,OAAQA,EACR,UAAWA,EACX,YAAaA,EACb,aAAcA,EACd,WAAYA,EAEZ,OAAQF,GACR,QAASA,GACT,QAASA,GACT,QAASA,GACT,MAAAR,GACA,OAAQA,GACR,OAAQA,GACR,OAAQA,GACR,KAAMQ,GACN,MAAOA,GACP,MAAOA,GACP,SAAUE,EACV,WAAYA,EACZ,WAAYA,EACZ,WAAYA,EACZ,EAAGA,EACH,EAAGA,EACH,EAAGA,EACH,YAAaA,EACb,qBAAsBA,EACtB,QAASX,GACT,QAASc,GACT,QAASA,GACT,QAASH,EAET,OAAQI,GAER,YAAaf,GACb,cAAeA,GACf,WAAYe,EAChB,EC/DA,SAASE,GAAgBntB,EAAOotB,EAAc1uB,EAAS4sB,EAAmB,CACtE,KAAM,CAAE,MAAA+B,EAAO,KAAAC,EAAM,UAAApC,EAAW,gBAAAqC,CAAe,EAAKvtB,EAEpD,IAAIwtB,EAAe,GACfC,EAAqB,GAErBC,EAAkB,GAOtB,UAAWpvB,KAAO8uB,EAAc,CAC5B,MAAM7tB,EAAQ6tB,EAAa9uB,CAAG,EAI9B,GAAIqtB,GAAkBrtB,CAAG,EAAG,CACxBgvB,EAAKhvB,CAAG,EAAIiB,EACZ,QACJ,CAEA,MAAMouB,EAAYT,GAAiB5uB,CAAG,EAChCsvB,EAAc9B,GAAevsB,EAAOouB,CAAS,EACnD,GAAIhD,GAAe,IAAIrsB,CAAG,EAAG,CAKzB,GAHAkvB,EAAe,GACftC,EAAU5sB,CAAG,EAAIsvB,EAEb,CAACF,EACD,SAEAnuB,KAAWouB,EAAU,SAAW,KAChCD,EAAkB,GAC1B,MACSpvB,EAAI,WAAW,QAAQ,GAE5BmvB,EAAqB,GACrBF,EAAgBjvB,CAAG,EAAIsvB,GAGvBP,EAAM/uB,CAAG,EAAIsvB,CAErB,CAiBA,GAhBKR,EAAa,YACVI,GAAgBlC,EAChB+B,EAAM,UAAYpC,GAAejrB,EAAM,UAAWtB,EAASgvB,EAAiBpC,CAAiB,EAExF+B,EAAM,YAKXA,EAAM,UAAY,SAOtBI,EAAoB,CACpB,KAAM,CAAE,QAAAI,EAAU,MAAO,QAAAC,EAAU,MAAO,QAAAC,EAAU,CAAC,EAAMR,EAC3DF,EAAM,gBAAkB,GAAGQ,CAAO,IAAIC,CAAO,IAAIC,CAAO,EAC5D,CACJ,CCvEA,MAAMC,GAAwB,KAAO,CACjC,MAAO,CAAA,EACP,UAAW,CAAA,EACX,gBAAiB,CAAA,EACjB,KAAM,CAAA,CACV,GCCA,SAASC,GAAkB9vB,EAAQE,EAAQ8M,EAAO,CAC9C,UAAW7M,KAAOD,EACV,CAACysB,GAAczsB,EAAOC,CAAG,CAAC,GAAK,CAACssB,GAAoBtsB,EAAK6M,CAAK,IAC9DhN,EAAOG,CAAG,EAAID,EAAOC,CAAG,EAGpC,CACA,SAAS4vB,GAAuB,CAAE,kBAAA5C,GAAqB3E,EAAa8C,EAAU,CAC1E,OAAOlB,EAAAA,QAAQ,IAAM,CACjB,MAAMvoB,EAAQguB,GAAqB,EACnC,OAAAb,GAAgBntB,EAAO2mB,EAAa,CAAE,2BAA4B,CAAC8C,CAAQ,EAAI6B,CAAiB,EACzF,OAAO,OAAO,CAAA,EAAItrB,EAAM,KAAMA,EAAM,KAAK,CACpD,EAAG,CAAC2mB,CAAW,CAAC,CACpB,CACA,SAASwH,GAAShjB,EAAOwb,EAAa8C,EAAU,CAC5C,MAAM2E,EAAYjjB,EAAM,OAAS,CAAA,EAC3BkiB,EAAQ,CAAA,EAId,OAAAY,GAAkBZ,EAAOe,EAAWjjB,CAAK,EACzC,OAAO,OAAOkiB,EAAOa,GAAuB/iB,EAAOwb,EAAa8C,CAAQ,CAAC,EAClEte,EAAM,gBAAkBA,EAAM,gBAAgBkiB,CAAK,EAAIA,CAClE,CACA,SAASgB,GAAaljB,EAAOwb,EAAa8C,EAAU,CAEhD,MAAM6E,EAAY,CAAA,EACZjB,EAAQc,GAAShjB,EAAOwb,EAAa8C,CAAQ,EACnD,OAAIte,EAAM,MAAQA,EAAM,eAAiB,KAErCmjB,EAAU,UAAY,GAEtBjB,EAAM,WACFA,EAAM,iBACFA,EAAM,mBACF,OAEZA,EAAM,YACFliB,EAAM,OAAS,GACT,OACA,OAAOA,EAAM,OAAS,IAAM,IAAM,GAAG,IAE/CA,EAAM,WAAa,SAClBA,EAAM,OAASA,EAAM,YAAcA,EAAM,YAC1CmjB,EAAU,SAAW,GAEzBA,EAAU,MAAQjB,EACXiB,CACX,CChDA,MAAMC,GAAmB,IAAI,IAAI,CAC7B,UACA,OACA,WACA,UACA,QACA,SACA,WACA,aACA,oBACA,kBACA,SACA,UACA,wBACA,mBACA,sBACA,WACA,cACA,SACA,YACA,2BACA,kBACA,sBACA,SACA,SACA,eACA,aACA,kBACA,kBACA,kBACA,eACA,UACJ,CAAC,EASD,SAASC,GAAkBlwB,EAAK,CAC5B,OAAQA,EAAI,WAAW,OAAO,GACzBA,EAAI,WAAW,MAAM,GAAKA,IAAQ,aACnCA,EAAI,WAAW,QAAQ,GACvBA,EAAI,WAAW,OAAO,GACtBA,EAAI,WAAW,OAAO,GACtBA,EAAI,WAAW,UAAU,GACzBiwB,GAAiB,IAAIjwB,CAAG,CAChC,CCrDA,IAAImwB,GAAiBnwB,GAAQ,CAACkwB,GAAkBlwB,CAAG,EACnD,SAASowB,GAAwBC,EAAa,CACrCA,IAGLF,GAAiBnwB,GAAQA,EAAI,WAAW,IAAI,EAAI,CAACkwB,GAAkBlwB,CAAG,EAAIqwB,EAAYrwB,CAAG,EAC7F,CAcA,GAAI,CAMAowB,GAAwB,QAAQ,wBAAwB,EAAE,OAAO,CACrE,MACW,CAEX,CACA,SAASE,GAAYzjB,EAAO0jB,EAAOC,EAAoB,CACnD,MAAMC,EAAgB,CAAA,EACtB,UAAWzwB,KAAO6M,EAQV7M,IAAQ,UAAY,OAAO6M,EAAM,QAAW,WAE5CsjB,GAAcnwB,CAAG,GAChBwwB,IAAuB,IAAQN,GAAkBlwB,CAAG,GACpD,CAACuwB,GAAS,CAACL,GAAkBlwB,CAAG,GAEhC6M,EAAM,WAAgB7M,EAAI,WAAW,QAAQ,KAC9CywB,EAAczwB,CAAG,EAAI6M,EAAM7M,CAAG,GAGtC,OAAOywB,CACX,CCpDA,SAASC,GAAWC,EAAQC,EAAQhL,EAAM,CACtC,OAAO,OAAO+K,GAAW,SACnBA,EACApC,EAAG,UAAUqC,EAAShL,EAAO+K,CAAM,CAC7C,CAKA,SAASE,GAAuBC,EAAYvB,EAASC,EAAS,CAC1D,MAAMuB,EAAYL,GAAWnB,EAASuB,EAAW,EAAGA,EAAW,KAAK,EAC9DE,EAAYN,GAAWlB,EAASsB,EAAW,EAAGA,EAAW,MAAM,EACrE,MAAO,GAAGC,CAAS,IAAIC,CAAS,EACpC,CCbA,MAAMC,GAAW,CACb,OAAQ,oBACR,MAAO,kBACX,EACMC,GAAY,CACd,OAAQ,mBACR,MAAO,iBACX,EAQA,SAASC,GAAahL,EAAOiL,EAAQC,EAAU,EAAGT,EAAS,EAAGU,EAAc,GAAM,CAE9EnL,EAAM,WAAa,EAGnB,MAAMoL,EAAOD,EAAcL,GAAWC,GAEtC/K,EAAMoL,EAAK,MAAM,EAAIhD,EAAG,UAAU,CAACqC,CAAM,EAEzC,MAAMY,EAAajD,EAAG,UAAU6C,CAAM,EAChCK,EAAclD,EAAG,UAAU8C,CAAO,EACxClL,EAAMoL,EAAK,KAAK,EAAI,GAAGC,CAAU,IAAIC,CAAW,EACpD,CCtBA,SAASC,GAAchwB,EAAO,CAAE,MAAAiwB,EAAO,MAAAC,EAAO,UAAAC,EAAW,QAAAtC,EAAS,QAAAC,EAAS,WAAAgC,EAAY,YAAAC,EAAc,EAAG,WAAAK,EAAa,EAErH,GAAGC,GAAU3xB,EAAS4xB,EAAUhF,EAAmB,CAM/C,GALA6B,GAAgBntB,EAAOqwB,EAAQ3xB,EAAS4sB,CAAiB,EAKrDgF,EAAU,CACNtwB,EAAM,MAAM,UACZA,EAAM,MAAM,QAAUA,EAAM,MAAM,SAEtC,MACJ,CACAA,EAAM,MAAQA,EAAM,MACpBA,EAAM,MAAQ,CAAA,EACd,KAAM,CAAE,MAAAykB,EAAO,MAAA4I,EAAO,WAAA+B,CAAU,EAAKpvB,EAKjCykB,EAAM,YACF2K,IACA/B,EAAM,UAAY5I,EAAM,WAC5B,OAAOA,EAAM,WAGb2K,IACCvB,IAAY,QAAaC,IAAY,QAAaT,EAAM,aACzDA,EAAM,gBAAkB8B,GAAuBC,EAAYvB,IAAY,OAAYA,EAAU,GAAKC,IAAY,OAAYA,EAAU,EAAG,GAGvImC,IAAU,SACVxL,EAAM,EAAIwL,GACVC,IAAU,SACVzL,EAAM,EAAIyL,GACVC,IAAc,SACd1L,EAAM,MAAQ0L,GAEdL,IAAe,QACfL,GAAahL,EAAOqL,EAAYC,EAAaK,EAAY,EAAK,CAEtE,CC/CA,MAAMG,GAAuB,KAAO,CAChC,GAAGvC,GAAqB,EACxB,MAAO,CAAA,CACX,GCLMsC,GAAY9L,GAAQ,OAAOA,GAAQ,UAAYA,EAAI,YAAW,IAAO,MCM3E,SAASgM,GAAYrlB,EAAOwb,EAAa8J,EAAW1M,EAAW,CAC3D,MAAM2M,EAAcnI,EAAAA,QAAQ,IAAM,CAC9B,MAAMvoB,EAAQuwB,GAAoB,EAClC,OAAAP,GAAchwB,EAAO2mB,EAAa,CAAE,2BAA4B,IAAS2J,GAASvM,CAAS,EAAG5Y,EAAM,iBAAiB,EAC9G,CACH,GAAGnL,EAAM,MACT,MAAO,CAAE,GAAGA,EAAM,KAAK,CACnC,CACI,EAAG,CAAC2mB,CAAW,CAAC,EAChB,GAAIxb,EAAM,MAAO,CACb,MAAMwlB,EAAY,CAAA,EAClB1C,GAAkB0C,EAAWxlB,EAAM,MAAOA,CAAK,EAC/CulB,EAAY,MAAQ,CAAE,GAAGC,EAAW,GAAGD,EAAY,KAAK,CAC5D,CACA,OAAOA,CACX,CCdA,SAASE,GAAgB9B,EAAqB,GAAO,CAwBjD,MAvBkB,CAAC/K,EAAW5Y,EAAOmZ,EAAK,CAAE,aAAA8I,CAAY,EAAI3D,IAAa,CAIrE,MAAMiH,GAHiBpG,GAAevG,CAAS,EACzCyM,GACAnC,IAC6BljB,EAAOiiB,EAAc3D,EAAU1F,CAAS,EAErE8M,EAAe,CACjB,GAFkBjC,GAAYzjB,EAAO,OAAO4Y,GAAc,SAAU+K,CAAkB,EAGtF,GAAG4B,EACH,IAAApM,CACZ,EAMc,CAAE,SAAA/Y,CAAQ,EAAKJ,EACf2lB,EAAmBvI,EAAAA,QAAQ,IAAOuC,GAAcvf,CAAQ,EAAIA,EAAS,MAAQA,EAAW,CAACA,CAAQ,CAAC,EACxG,OAAOgZ,EAAAA,cAAcR,EAAW,CAC5B,GAAG8M,EACH,SAAUC,CACtB,CAAS,CACL,CAEJ,CChCA,SAASC,GAAWviB,EAAS,CAAE,MAAA6e,EAAO,KAAAC,CAAI,EAAIc,EAAW4C,EAAY,CACjE,OAAO,OAAOxiB,EAAQ,MAAO6e,EAAO2D,GAAcA,EAAW,oBAAoB5C,CAAS,CAAC,EAE3F,UAAW9vB,KAAOgvB,EACd9e,EAAQ,MAAM,YAAYlQ,EAAKgvB,EAAKhvB,CAAG,CAAC,CAEhD,CCHA,MAAM2yB,GAAsB,IAAI,IAAI,CAChC,gBACA,kBACA,eACA,mBACA,aACA,WACA,oBACA,eACA,cACA,aACA,UACA,UACA,eACA,mBACA,mBACA,eACA,cACA,UACA,oBACA,aACA,cACA,aACA,cACJ,CAAC,ECvBD,SAASC,GAAU1iB,EAAS2iB,EAAaC,EAAYJ,EAAY,CAC7DD,GAAWviB,EAAS2iB,EAAa,OAAWH,CAAU,EACtD,UAAW1yB,KAAO6yB,EAAY,MAC1B3iB,EAAQ,aAAcyiB,GAAoB,IAAI3yB,CAAG,EAAuBA,EAAnBgoB,GAAYhoB,CAAG,EAAS6yB,EAAY,MAAM7yB,CAAG,CAAC,CAE3G,CCNA,SAAS+yB,GAA4BlmB,EAAOmmB,EAAW,CACnD,KAAM,CAAE,MAAAjE,CAAK,EAAKliB,EACZomB,EAAY,CAAA,EAClB,UAAWjzB,KAAO+uB,GACVvC,GAAcuC,EAAM/uB,CAAG,CAAC,GACvBgzB,EAAU,OAASxG,GAAcwG,EAAU,MAAMhzB,CAAG,CAAC,GACtDssB,GAAoBtsB,EAAK6M,CAAK,KAC9BomB,EAAUjzB,CAAG,EAAI+uB,EAAM/uB,CAAG,GAGlC,OAAOizB,CACX,CCVA,SAASF,GAA4BlmB,EAAOmmB,EAAW,CACnD,MAAMC,EAAYC,GAA8BrmB,EAAOmmB,CAAS,EAChE,UAAWhzB,KAAO6M,EACd,GAAI2f,GAAc3f,EAAM7M,CAAG,CAAC,GAAKwsB,GAAcwG,EAAUhzB,CAAG,CAAC,EAAG,CAC5D,MAAMmzB,EAAY/G,GAAmB,QAAQpsB,CAAG,IAAM,GAChD,OAASA,EAAI,OAAO,CAAC,EAAE,cAAgBA,EAAI,UAAU,CAAC,EACtDA,EACNizB,EAAUE,CAAS,EAAItmB,EAAM7M,CAAG,CACpC,CAEJ,OAAOizB,CACX,CCfA,SAASG,GAAwBvmB,EAAOwmB,EAAY1H,EAAQ2H,EAAgB,CAAA,EAAIC,EAAkB,GAAI,CAIlG,OAAI,OAAOF,GAAe,aACtBA,EAAaA,EAAW1H,IAAW,OAAYA,EAAS9e,EAAM,OAAQymB,EAAeC,CAAe,GAMpG,OAAOF,GAAe,WACtBA,EAAaxmB,EAAM,UAAYA,EAAM,SAASwmB,CAAU,GAOxD,OAAOA,GAAe,aACtBA,EAAaA,EAAW1H,IAAW,OAAYA,EAAS9e,EAAM,OAAQymB,EAAeC,CAAe,GAEjGF,CACX,CCdA,SAASG,GAAYC,EAAM,CACvB,MAAMzN,EAAM6C,EAAAA,OAAO,IAAI,EACvB,OAAI7C,EAAI,UAAY,OAChBA,EAAI,QAAUyN,EAAI,GAEfzN,EAAI,OACf,CCfA,MAAM0N,GAAqB9rB,GAChB,MAAM,QAAQA,CAAC,ECCpB+rB,GAAiB/rB,GACZ,GAAQA,GAAK,OAAOA,GAAM,UAAYA,EAAE,KAAOA,EAAE,SAEtDgsB,GAAgChsB,GAE3B8rB,GAAkB9rB,CAAC,EAAIA,EAAEA,EAAE,OAAS,CAAC,GAAK,EAAIA,ECCzD,SAASisB,GAAmB5yB,EAAO,CAC/B,MAAM6yB,EAAiBtH,GAAcvrB,CAAK,EAAIA,EAAM,IAAG,EAAKA,EAC5D,OAAO0yB,GAAcG,CAAc,EAC7BA,EAAe,QAAO,EACtBA,CACV,CCJA,SAASC,GAAU,CAAE,4BAAAhB,EAA6B,kBAAAiB,EAAmB,QAAAC,CAAO,EAAKpnB,EAAOgO,EAAS6N,EAAiB,CAC9G,MAAMhnB,EAAQ,CACV,aAAcwyB,GAAiBrnB,EAAOgO,EAAS6N,EAAiBqK,CAA2B,EAC3F,YAAaiB,EAAiB,CACtC,EACI,OAAIC,IACAvyB,EAAM,MAAS2nB,GAAa4K,EAAQpnB,EAAOwc,EAAU3nB,CAAK,GAEvDA,CACX,CACA,MAAMyyB,GAAsBld,GAAW,CAACpK,EAAOse,IAAa,CACxD,MAAMtQ,EAAU2N,EAAAA,WAAWd,EAAa,EAClCgB,EAAkBF,EAAAA,WAAWb,EAAe,EAC5CyM,EAAO,IAAML,GAAU9c,EAAQpK,EAAOgO,EAAS6N,CAAe,EACpE,OAAOyC,EAAWiJ,IAASZ,GAAYY,CAAI,CAC/C,EACA,SAASF,GAAiBrnB,EAAOgO,EAAS6N,EAAiB2L,EAAoB,CAC3E,MAAMC,EAAS,CAAA,EACTC,EAAeF,EAAmBxnB,EAAO,EAAE,EACjD,UAAW7M,KAAOu0B,EACdD,EAAOt0B,CAAG,EAAI6zB,GAAmBU,EAAav0B,CAAG,CAAC,EAEtD,GAAI,CAAE,QAAA8pB,EAAS,QAAAC,CAAO,EAAKld,EAC3B,MAAM2nB,EAA0B9K,GAAsB7c,CAAK,EACrD4nB,EAAkB7K,GAAc/c,CAAK,EACvCgO,GACA4Z,GACA,CAACD,GACD3nB,EAAM,UAAY,KACdid,IAAY,SACZA,EAAUjP,EAAQ,SAClBkP,IAAY,SACZA,EAAUlP,EAAQ,UAE1B,IAAI6Z,EAA4BhM,EAC1BA,EAAgB,UAAY,GAC5B,GACNgM,EAA4BA,GAA6B5K,IAAY,GACrE,MAAM6K,EAAeD,EAA4B3K,EAAUD,EAC3D,OAAI6K,GACA,OAAOA,GAAiB,WACxB,CAACpL,GAAoBoL,CAAY,IACpB,MAAM,QAAQA,CAAY,EAAIA,EAAe,CAACA,CAAY,GAClE,QAAStB,GAAe,CACzB,MAAMuB,EAAWxB,GAAwBvmB,EAAOwmB,CAAU,EAC1D,GAAI,CAACuB,EACD,OACJ,KAAM,CAAE,cAAAC,EAAe,WAAAC,EAAY,GAAGj1B,CAAM,EAAK+0B,EACjD,UAAW50B,KAAOH,EAAQ,CACtB,IAAIk1B,EAAcl1B,EAAOG,CAAG,EAC5B,GAAI,MAAM,QAAQ+0B,CAAW,EAAG,CAK5B,MAAMvzB,EAAQkzB,EACRK,EAAY,OAAS,EACrB,EACNA,EAAcA,EAAYvzB,CAAK,CACnC,CACIuzB,IAAgB,OAChBT,EAAOt0B,CAAG,EAAI+0B,EAEtB,CACA,UAAW/0B,KAAO60B,EACdP,EAAOt0B,CAAG,EAAI60B,EAAc70B,CAAG,CACvC,CAAC,EAEEs0B,CACX,CC9EA,MAAMjjB,EAAQ2jB,GAAQA,ECAtB,MAAMC,EAAM,CACR,aAAc,CACV,KAAK,MAAQ,CAAA,EACb,KAAK,UAAY,IAAI,GACzB,CACA,IAAIC,EAAS,CACT,GAAI,CAAC,KAAK,UAAU,IAAIA,CAAO,EAC3B,YAAK,UAAU,IAAIA,CAAO,EAC1B,KAAK,MAAM,KAAKA,CAAO,EAChB,EAEf,CACA,OAAOA,EAAS,CACZ,MAAM1zB,EAAQ,KAAK,MAAM,QAAQ0zB,CAAO,EACpC1zB,IAAU,KACV,KAAK,MAAM,OAAOA,EAAO,CAAC,EAC1B,KAAK,UAAU,OAAO0zB,CAAO,EAErC,CACA,OAAQ,CACJ,KAAK,MAAM,OAAS,EACpB,KAAK,UAAU,MAAK,CACxB,CACJ,CACA,SAASC,GAAiBC,EAAc,CAKpC,IAAIC,EAAY,IAAIJ,GAChBK,EAAY,IAAIL,GAChBM,EAAW,EAKXC,EAAe,GACfC,EAAiB,GAIrB,MAAMC,EAAc,IAAI,QAClBC,EAAO,CAIT,SAAU,CAACld,EAAUmd,EAAY,GAAOC,EAAY,KAAU,CAC1D,MAAMC,EAAoBD,GAAaL,EACjCld,EAAQwd,EAAoBT,EAAYC,EAC9C,OAAIM,GACAF,EAAY,IAAIjd,CAAQ,EACxBH,EAAM,IAAIG,CAAQ,GAAKqd,GAAqBN,IAE5CD,EAAWF,EAAU,MAAM,QAExB5c,CACX,EAIA,OAASA,GAAa,CAClB6c,EAAU,OAAO7c,CAAQ,EACzBid,EAAY,OAAOjd,CAAQ,CAC/B,EAIA,QAAUsd,GAAc,CAMpB,GAAIP,EAAc,CACdC,EAAiB,GACjB,MACJ,CAOA,GANAD,EAAe,GACf,CAACH,EAAWC,CAAS,EAAI,CAACA,EAAWD,CAAS,EAE9CC,EAAU,MAAK,EAEfC,EAAWF,EAAU,MAAM,OACvBE,EACA,QAASz1B,EAAI,EAAGA,EAAIy1B,EAAUz1B,IAAK,CAC/B,MAAM2Y,EAAW4c,EAAU,MAAMv1B,CAAC,EAClC2Y,EAASsd,CAAS,EACdL,EAAY,IAAIjd,CAAQ,IACxBkd,EAAK,SAASld,CAAQ,EACtB2c,EAAY,EAEpB,CAEJI,EAAe,GACXC,IACAA,EAAiB,GACjBE,EAAK,QAAQI,CAAS,EAE9B,CACR,EACI,OAAOJ,CACX,CCnGA,MAAMK,GAAa,CACf,UACA,OACA,SACA,YACA,SACA,YACJ,EACMC,GAAa,GACnB,SAASC,GAAoBC,EAAmBC,EAAgB,CAC5D,IAAIhB,EAAe,GACfiB,EAAoB,GACxB,MAAM30B,EAAQ,CACV,MAAO,EACP,UAAW,EACX,aAAc,EACtB,EACU40B,EAAQN,GAAW,OAAO,CAACO,EAAKv2B,KAClCu2B,EAAIv2B,CAAG,EAAIm1B,GAAiB,IAAOC,EAAe,EAAK,EAChDmB,GACR,CAAA,CAAE,EACCC,EAAeC,GAAWH,EAAMG,CAAM,EAAE,QAAQ/0B,CAAK,EACrDg1B,EAAe,IAAM,CACvB,MAAMC,EAAY,YAAY,IAAG,EACjCvB,EAAe,GACf1zB,EAAM,MAAQ20B,EACR,IAAO,GACP,KAAK,IAAI,KAAK,IAAIM,EAAYj1B,EAAM,UAAWu0B,EAAU,EAAG,CAAC,EACnEv0B,EAAM,UAAYi1B,EAClBj1B,EAAM,aAAe,GACrBs0B,GAAW,QAAQQ,CAAW,EAC9B90B,EAAM,aAAe,GACjB0zB,GAAgBgB,IAChBC,EAAoB,GACpBF,EAAkBO,CAAY,EAEtC,EACME,EAAO,IAAM,CACfxB,EAAe,GACfiB,EAAoB,GACf30B,EAAM,cACPy0B,EAAkBO,CAAY,CAEtC,EAWA,MAAO,CAAE,SAVQV,GAAW,OAAO,CAACO,EAAKv2B,IAAQ,CAC7C,MAAM21B,EAAOW,EAAMt2B,CAAG,EACtB,OAAAu2B,EAAIv2B,CAAG,EAAI,CAACk1B,EAASU,EAAY,GAAOC,EAAY,MAC3CT,GACDwB,EAAI,EACDjB,EAAK,SAAST,EAASU,EAAWC,CAAS,GAE/CU,CACX,EAAG,CAAA,CAAE,EAEc,OADHrB,GAAYc,GAAW,QAASh2B,GAAQs2B,EAAMt2B,CAAG,EAAE,OAAOk1B,CAAO,CAAC,EACvD,MAAAxzB,EAAO,MAAA40B,CAAK,CAC3C,CCtDA,KAAM,CAAE,SAAUO,EAAO,OAAQC,GAAa,MAAOf,EAAW,MAAAO,EAAK,EAAMJ,GAAoB,OAAO,sBAA0B,IAAc,sBAAwB7kB,EAAM,EAAI,ECK1K0lB,GAAkB,CACpB,eAAgB5C,GAAmB,CAC/B,4BAA6BpB,GAC7B,kBAAmBd,GACnB,QAAS,CAACplB,EAAOwc,EAAU,CAAE,YAAAwJ,EAAa,aAAA/D,CAAY,IAAO,CACzD+H,EAAM,KAAK,IAAM,CACb,GAAI,CACAhE,EAAY,WACR,OAAOxJ,EAAS,SACZ,WACEA,EAAS,QAAO,EAChBA,EAAS,sBAAqB,CAC5C,MACU,CAENwJ,EAAY,WAAa,CACrB,EAAG,EACH,EAAG,EACH,MAAO,EACP,OAAQ,CAChC,CACgB,CACJ,CAAC,EACDgE,EAAM,OAAO,IAAM,CACfnF,GAAcmB,EAAa/D,EAAc,CAAE,2BAA4B,EAAK,EAAIkD,GAAS3I,EAAS,OAAO,EAAGxc,EAAM,iBAAiB,EACnI+lB,GAAUvJ,EAAUwJ,CAAW,CACnC,CAAC,CACL,CACR,CAAK,CACL,ECjCMmE,GAAmB,CACrB,eAAgB7C,GAAmB,CACvC,4BAAQpB,GACA,kBAAmBrD,EAC3B,CAAK,CACL,ECJA,SAASuH,GAAsBxR,EAAW,CAAE,mBAAA+K,EAAqB,EAAK,EAAI5F,EAAmBtC,EAAqB,CAI9G,MAAO,CACH,GAJe0D,GAAevG,CAAS,EACrCsR,GACAC,GAGF,kBAAApM,EACA,UAAW0H,GAAgB9B,CAAkB,EAC7C,oBAAAlI,EACA,UAAA7C,CACR,CACA,CChBA,SAASyR,GAAYr3B,EAAQs3B,EAAWC,EAASh3B,EAAU,CAAE,QAAS,IAAQ,CAC1E,OAAAP,EAAO,iBAAiBs3B,EAAWC,EAASh3B,CAAO,EAC5C,IAAMP,EAAO,oBAAoBs3B,EAAWC,CAAO,CAC9D,CCHA,MAAMC,GAAoBjb,GAClBA,EAAM,cAAgB,QACf,OAAOA,EAAM,QAAW,UAAYA,EAAM,QAAU,EAWpDA,EAAM,YAAc,GCXnC,SAASkb,GAAiBlb,EAAOmb,EAAY,OAAQ,CACjD,MAAO,CACH,MAAO,CACH,EAAGnb,EAAMmb,EAAY,GAAG,EACxB,EAAGnb,EAAMmb,EAAY,GAAG,CACpC,CACA,CACA,CACA,MAAMC,GAAkBJ,GACZhb,GAAUib,GAAiBjb,CAAK,GAAKgb,EAAQhb,EAAOkb,GAAiBlb,CAAK,CAAC,ECRvF,SAASqb,GAAgB53B,EAAQs3B,EAAWC,EAASh3B,EAAS,CAC1D,OAAO82B,GAAYr3B,EAAQs3B,EAAWK,GAAeJ,CAAO,EAAGh3B,CAAO,CAC1E,CCEA,MAAMs3B,GAAmB,CAACjyB,EAAGC,IAAOkC,GAAMlC,EAAED,EAAEmC,CAAC,CAAC,EAC1C+vB,GAAO,IAAIC,IAAiBA,EAAa,OAAOF,EAAgB,ECRtE,SAASG,GAAWlO,EAAM,CACtB,IAAImO,EAAO,KACX,MAAO,IAAM,CACT,MAAMC,EAAW,IAAM,CACnBD,EAAO,IACX,EACA,OAAIA,IAAS,MACTA,EAAOnO,EACAoO,GAEJ,EACX,CACJ,CACA,MAAMC,GAAuBH,GAAW,gBAAgB,EAClDI,GAAqBJ,GAAW,cAAc,EACpD,SAASK,GAAcC,EAAM,CACzB,IAAIL,EAAO,GACX,GAAIK,IAAS,IACTL,EAAOG,GAAkB,UAEpBE,IAAS,IACdL,EAAOE,GAAoB,MAE1B,CACD,MAAMI,EAAiBJ,GAAoB,EACrCK,EAAeJ,GAAkB,EACnCG,GAAkBC,EAClBP,EAAO,IAAM,CACTM,EAAc,EACdC,EAAY,CAChB,GAIID,GACAA,EAAc,EACdC,GACAA,EAAY,EAExB,CACA,OAAOP,CACX,CACA,SAASQ,IAAe,CAGpB,MAAMC,EAAkBL,GAAc,EAAI,EAC1C,OAAKK,GAELA,EAAe,EACR,IAFI,EAGf,CClDA,MAAMC,EAAQ,CACV,YAAYC,EAAM,CACd,KAAK,UAAY,GACjB,KAAK,KAAOA,CAChB,CACA,QAAS,CAAE,CACf,CCAA,SAASC,GAAcD,EAAM9lB,EAAU,CACnC,MAAMwkB,EAAY,WAAaxkB,EAAW,QAAU,SAC9CgmB,EAAe,WAAahmB,EAAW,QAAU,OACjDimB,EAAc,CAACxc,EAAOyc,IAAS,CACjC,GAAIzc,EAAM,cAAgB,SAAWkc,GAAY,EAC7C,OACJ,MAAMzrB,EAAQ4rB,EAAK,SAAQ,EACvBA,EAAK,gBAAkB5rB,EAAM,YAC7B4rB,EAAK,eAAe,UAAU,aAAc9lB,CAAQ,EAEpD9F,EAAM8rB,CAAY,GAClB9B,EAAM,OAAO,IAAMhqB,EAAM8rB,CAAY,EAAEvc,EAAOyc,CAAI,CAAC,CAE3D,EACA,OAAOpB,GAAgBgB,EAAK,QAAStB,EAAWyB,EAAa,CACzD,QAAS,CAACH,EAAK,SAAQ,EAAGE,CAAY,CAC9C,CAAK,CACL,CACA,MAAMG,WAAqBN,EAAQ,CAC/B,OAAQ,CACJ,KAAK,QAAUb,GAAKe,GAAc,KAAK,KAAM,EAAI,EAAGA,GAAc,KAAK,KAAM,EAAK,CAAC,CACvF,CACA,SAAU,CAAE,CAChB,CCzBA,MAAMK,WAAqBP,EAAQ,CAC/B,aAAc,CACV,MAAM,GAAG,SAAS,EAClB,KAAK,SAAW,EACpB,CACA,SAAU,CACN,IAAIQ,EAAiB,GAOrB,GAAI,CACAA,EAAiB,KAAK,KAAK,QAAQ,QAAQ,gBAAgB,CAC/D,MACU,CACNA,EAAiB,EACrB,CACI,CAACA,GAAkB,CAAC,KAAK,KAAK,iBAElC,KAAK,KAAK,eAAe,UAAU,aAAc,EAAI,EACrD,KAAK,SAAW,GACpB,CACA,QAAS,CACD,CAAC,KAAK,UAAY,CAAC,KAAK,KAAK,iBAEjC,KAAK,KAAK,eAAe,UAAU,aAAc,EAAK,EACtD,KAAK,SAAW,GACpB,CACA,OAAQ,CACJ,KAAK,QAAUrB,GAAKT,GAAY,KAAK,KAAK,QAAS,QAAS,IAAM,KAAK,QAAO,CAAE,EAAGA,GAAY,KAAK,KAAK,QAAS,OAAQ,IAAM,KAAK,OAAM,CAAE,CAAC,CAClJ,CACA,SAAU,CAAE,CAChB,CC/BA,MAAM+B,GAAgB,CAAC1Q,EAAQ2Q,IACtBA,EAGI3Q,IAAW2Q,EACT,GAGAD,GAAc1Q,EAAQ2Q,EAAM,aAAa,EANzC,GCCf,SAASC,GAA0BxP,EAAMyN,EAAS,CAC9C,GAAI,CAACA,EACD,OACJ,MAAMgC,EAAwB,IAAI,aAAa,UAAYzP,CAAI,EAC/DyN,EAAQgC,EAAuB9B,GAAiB8B,CAAqB,CAAC,CAC1E,CACA,MAAMC,WAAqBb,EAAQ,CAC/B,aAAc,CACV,MAAM,GAAG,SAAS,EAClB,KAAK,qBAAuBnnB,EAC5B,KAAK,mBAAqBA,EAC1B,KAAK,0BAA4BA,EACjC,KAAK,kBAAoB,CAACioB,EAAYC,IAAc,CAChD,GAAI,KAAK,WACL,OACJ,KAAK,mBAAkB,EACvB,MAAM1sB,EAAQ,KAAK,KAAK,SAAQ,EAgB1B2sB,EAA0B/B,GAAgB,OAAQ,YAfhC,CAACgC,EAAUC,IAAY,CAC3C,GAAI,CAAC,KAAK,cAAa,EACnB,OACJ,KAAM,CAAE,MAAAC,EAAO,YAAAC,EAAa,gBAAAC,CAAe,EAAK,KAAK,KAAK,SAAQ,EAClEhD,EAAM,OAAO,IAAM,CAKf,CAACgD,GACG,CAACZ,GAAc,KAAK,KAAK,QAASQ,EAAS,MAAM,EAC/CG,GAAeA,EAAYH,EAAUC,CAAO,EAC5CC,GAASA,EAAMF,EAAUC,CAAO,CAC1C,CAAC,CACL,EACsF,CAAE,QAAS,EAAE7sB,EAAM,OAASA,EAAM,YAAe,CAAE,EACnIitB,EAA8BrC,GAAgB,OAAQ,gBAAiB,CAACsC,EAAaC,IAAe,KAAK,YAAYD,EAAaC,CAAU,EAAG,CAAE,QAAS,EAAEntB,EAAM,aAAeA,EAAM,iBAAqB,EAClN,KAAK,mBAAqB8qB,GAAK6B,EAAyBM,CAA2B,EACnF,KAAK,WAAWR,EAAYC,CAAS,CACzC,EACA,KAAK,qBAAuB,IAAM,CAC9B,MAAMU,EAAiBC,GAAiB,CACpC,GAAIA,EAAa,MAAQ,SAAW,KAAK,WACrC,OACJ,MAAMC,EAAeC,GAAe,CAC5BA,EAAW,MAAQ,SAAW,CAAC,KAAK,cAAa,GAErDjB,GAA0B,KAAM,CAAC/c,EAAOyc,IAAS,CAC7C,KAAM,CAAE,MAAAc,CAAK,EAAK,KAAK,KAAK,SAAQ,EAChCA,GACA9C,EAAM,OAAO,IAAM8C,EAAMvd,EAAOyc,CAAI,CAAC,CAE7C,CAAC,CACL,EACA,KAAK,mBAAkB,EACvB,KAAK,mBAAqB3B,GAAY,KAAK,KAAK,QAAS,QAASiD,CAAW,EAC7EhB,GAA0B,OAAQ,CAAC/c,EAAOyc,IAAS,CAC/C,KAAK,WAAWzc,EAAOyc,CAAI,CAC/B,CAAC,CACL,EACMwB,EAAwBnD,GAAY,KAAK,KAAK,QAAS,UAAW+C,CAAa,EAC/EK,EAAa,IAAM,CAChB,KAAK,YAEVnB,GAA0B,SAAU,CAACY,EAAaC,IAAe,KAAK,YAAYD,EAAaC,CAAU,CAAC,CAC9G,EACMO,EAAqBrD,GAAY,KAAK,KAAK,QAAS,OAAQoD,CAAU,EAC5E,KAAK,0BAA4B3C,GAAK0C,EAAuBE,CAAkB,CACnF,CACJ,CACA,WAAWne,EAAOyc,EAAM,CACpB,KAAK,WAAa,GAClB,KAAM,CAAE,WAAA2B,EAAY,SAAAC,CAAQ,EAAK,KAAK,KAAK,SAAQ,EAI/CA,GAAY,KAAK,KAAK,gBACtB,KAAK,KAAK,eAAe,UAAU,WAAY,EAAI,EAEnDD,GACA3D,EAAM,OAAO,IAAM2D,EAAWpe,EAAOyc,CAAI,CAAC,CAElD,CACA,eAAgB,CACZ,YAAK,mBAAkB,EACvB,KAAK,WAAa,GACJ,KAAK,KAAK,SAAQ,EACtB,UAAY,KAAK,KAAK,gBAC5B,KAAK,KAAK,eAAe,UAAU,WAAY,EAAK,EAEjD,CAACP,GAAY,CACxB,CACA,YAAYlc,EAAOyc,EAAM,CACrB,GAAI,CAAC,KAAK,cAAa,EACnB,OACJ,KAAM,CAAE,YAAAe,CAAW,EAAK,KAAK,KAAK,SAAQ,EACtCA,GACA/C,EAAM,OAAO,IAAM+C,EAAYxd,EAAOyc,CAAI,CAAC,CAEnD,CACA,OAAQ,CACJ,MAAMhsB,EAAQ,KAAK,KAAK,SAAQ,EAC1B6tB,EAAwBjD,GAAgB5qB,EAAM,gBAAkB,OAAS,KAAK,KAAK,QAAS,cAAe,KAAK,kBAAmB,CAAE,QAAS,EAAEA,EAAM,YAAcA,EAAM,gBAAoB,EAC9L8tB,EAAsBzD,GAAY,KAAK,KAAK,QAAS,QAAS,KAAK,oBAAoB,EAC7F,KAAK,qBAAuBS,GAAK+C,EAAuBC,CAAmB,CAC/E,CACA,SAAU,CACN,KAAK,qBAAoB,EACzB,KAAK,mBAAkB,EACvB,KAAK,0BAAyB,CAClC,CACJ,CCjHA,MAAMC,GAAoB,IAAI,QAMxBC,GAAY,IAAI,QAChBC,GAAwBC,GAAU,CACpC,MAAMtiB,EAAWmiB,GAAkB,IAAIG,EAAM,MAAM,EACnDtiB,GAAYA,EAASsiB,CAAK,CAC9B,EACMC,GAA4BC,GAAY,CAC1CA,EAAQ,QAAQH,EAAoB,CACxC,EACA,SAASI,GAAyB,CAAE,KAAAC,EAAM,GAAG/6B,GAAW,CACpD,MAAMg7B,EAAaD,GAAQ,SAItBN,GAAU,IAAIO,CAAU,GACzBP,GAAU,IAAIO,EAAY,EAAE,EAEhC,MAAMC,EAAgBR,GAAU,IAAIO,CAAU,EACxCp7B,EAAM,KAAK,UAAUI,CAAO,EAKlC,OAAKi7B,EAAcr7B,CAAG,IAClBq7B,EAAcr7B,CAAG,EAAI,IAAI,qBAAqBg7B,GAA0B,CAAE,KAAAG,EAAM,GAAG/6B,EAAS,GAEzFi7B,EAAcr7B,CAAG,CAC5B,CACA,SAASs7B,GAAoBprB,EAAS9P,EAASqY,EAAU,CACrD,MAAM8iB,EAA4BL,GAAyB96B,CAAO,EAClE,OAAAw6B,GAAkB,IAAI1qB,EAASuI,CAAQ,EACvC8iB,EAA0B,QAAQrrB,CAAO,EAClC,IAAM,CACT0qB,GAAkB,OAAO1qB,CAAO,EAChCqrB,EAA0B,UAAUrrB,CAAO,CAC/C,CACJ,CC3CA,MAAMsrB,GAAiB,CACnB,KAAM,EACN,IAAK,CACT,EACA,MAAMC,WAAsBjD,EAAQ,CAChC,aAAc,CACV,MAAM,GAAG,SAAS,EAClB,KAAK,eAAiB,GACtB,KAAK,SAAW,EACpB,CACA,eAAgB,CACZ,KAAK,QAAO,EACZ,KAAM,CAAE,SAAAkD,EAAW,CAAA,CAAE,EAAK,KAAK,KAAK,SAAQ,EACtC,CAAE,KAAAP,EAAM,OAAQQ,EAAY,OAAAC,EAAS,OAAQ,KAAAC,CAAI,EAAKH,EACtDt7B,EAAU,CACZ,KAAM+6B,EAAOA,EAAK,QAAU,OAC5B,WAAAQ,EACA,UAAW,OAAOC,GAAW,SAAWA,EAASJ,GAAeI,CAAM,CAClF,EACcE,EAAwBf,GAAU,CACpC,KAAM,CAAE,eAAAgB,CAAc,EAAKhB,EAW3B,GAPI,KAAK,WAAagB,IAEtB,KAAK,SAAWA,EAKZF,GAAQ,CAACE,GAAkB,KAAK,gBAChC,OAEKA,IACL,KAAK,eAAiB,IAEtB,KAAK,KAAK,gBACV,KAAK,KAAK,eAAe,UAAU,cAAeA,CAAc,EAMpE,KAAM,CAAE,gBAAAC,EAAiB,gBAAAC,CAAe,EAAK,KAAK,KAAK,SAAQ,EACzDxjB,EAAWsjB,EAAiBC,EAAkBC,EACpDxjB,GAAYA,EAASsiB,CAAK,CAC9B,EACA,OAAOO,GAAoB,KAAK,KAAK,QAASl7B,EAAS07B,CAAoB,CAC/E,CACA,OAAQ,CACJ,KAAK,cAAa,CACtB,CACA,QAAS,CACL,GAAI,OAAO,qBAAyB,IAChC,OACJ,KAAM,CAAE,MAAAjvB,EAAO,UAAAmmB,CAAS,EAAK,KAAK,KACR,CAAC,SAAU,SAAU,MAAM,EAAE,KAAKkJ,GAAyBrvB,EAAOmmB,CAAS,CAAC,GAElG,KAAK,cAAa,CAE1B,CACA,SAAU,CAAE,CAChB,CACA,SAASkJ,GAAyB,CAAE,SAAAR,EAAW,EAAE,EAAI,CAAE,SAAUS,EAAe,EAAE,EAAK,GAAI,CACvF,OAAQxS,GAAS+R,EAAS/R,CAAI,IAAMwS,EAAaxS,CAAI,CACzD,CChEA,MAAMyS,GAAoB,CACtB,OAAQ,CACJ,QAASX,EACjB,EACI,IAAK,CACD,QAASpC,EACjB,EACI,MAAO,CACH,QAASN,EACjB,EACI,MAAO,CACH,QAASD,EACjB,CACA,EClBA,SAASuD,GAAeC,EAAMC,EAAM,CAChC,GAAI,CAAC,MAAM,QAAQA,CAAI,EACnB,MAAO,GACX,MAAMC,EAAaD,EAAK,OACxB,GAAIC,IAAeF,EAAK,OACpB,MAAO,GACX,QAAS,EAAI,EAAG,EAAIE,EAAY,IAC5B,GAAID,EAAK,CAAC,IAAMD,EAAK,CAAC,EAClB,MAAO,GAEf,MAAO,EACX,CCNA,SAASG,GAAW3T,EAAe,CAC/B,MAAMrnB,EAAU,CAAA,EAChB,OAAAqnB,EAAc,OAAO,QAAQ,CAAC7nB,EAAOjB,IAASyB,EAAQzB,CAAG,EAAIiB,EAAM,IAAG,CAAG,EAClEQ,CACX,CAIA,SAASi7B,GAAY5T,EAAe,CAChC,MAAM6T,EAAW,CAAA,EACjB,OAAA7T,EAAc,OAAO,QAAQ,CAAC7nB,EAAOjB,IAAS28B,EAAS38B,CAAG,EAAIiB,EAAM,YAAW,CAAG,EAC3E07B,CACX,CACA,SAASC,GAAe9T,EAAeuK,EAAY1H,EAAQ,CACvD,MAAM9e,EAAQic,EAAc,SAAQ,EACpC,OAAOsK,GAAwBvmB,EAAOwmB,EAAY1H,IAAW,OAAYA,EAAS9e,EAAM,OAAQ4vB,GAAW3T,CAAa,EAAG4T,GAAY5T,CAAa,CAAC,CACzJ,CClBA,IAAI9nB,GAAYqQ,ECGhB,MAAMwrB,GAAyBC,GAAYA,EAAU,IAC/CC,GAAyBC,GAAiBA,EAAe,ICPzDC,GAAwB,CAC1B,QAAS,EACb,ECFMC,GAAsBC,GAAW,MAAM,QAAQA,CAAM,GAAK,OAAOA,EAAO,CAAC,GAAM,SCErF,SAASC,GAAuBD,EAAQ,CACpC,MAAO,GAAQ,CAACA,GACX,OAAOA,GAAW,UAAYE,GAAqBF,CAAM,GAC1DD,GAAmBC,CAAM,GACxB,MAAM,QAAQA,CAAM,GAAKA,EAAO,MAAMC,EAAsB,EACrE,CACA,MAAME,GAAsB,CAAC,CAAC73B,EAAGC,EAAGgb,EAAGG,CAAC,IAAM,gBAAgBpb,CAAC,KAAKC,CAAC,KAAKgb,CAAC,KAAKG,CAAC,IAC3Ewc,GAAuB,CACzB,OAAQ,SACR,KAAM,OACN,OAAQ,UACR,QAAS,WACT,UAAW,cACX,OAAQC,GAAoB,CAAC,EAAG,IAAM,IAAM,CAAC,CAAC,EAC9C,QAASA,GAAoB,CAAC,IAAM,EAAG,EAAG,GAAI,CAAC,EAC/C,OAAQA,GAAoB,CAAC,IAAM,IAAM,IAAM,IAAK,CAAC,EACrD,QAASA,GAAoB,CAAC,IAAM,KAAM,IAAM,GAAI,CAAC,CACzD,EACA,SAASC,GAAwBJ,EAAQ,CACrC,GAAKA,EAEL,OAAOD,GAAmBC,CAAM,EAC1BG,GAAoBH,CAAM,EAC1B,MAAM,QAAQA,CAAM,EAChBA,EAAO,IAAII,EAAuB,EAClCF,GAAqBF,CAAM,CACzC,CC1BA,SAASK,GAAattB,EAASutB,EAAWC,EAAW,CAAE,MAAAxlB,EAAQ,EAAG,SAAAylB,EAAU,OAAAC,EAAS,EAAG,WAAAC,EAAa,OAAQ,KAAAC,EAAM,MAAAC,CAAK,EAAM,GAAI,CAC9H,MAAMC,EAAkB,CAAE,CAACP,CAAS,EAAGC,CAAS,EAC5CK,IACAC,EAAgB,OAASD,GAC7B,MAAMZ,EAASI,GAAwBO,CAAI,EAI3C,OAAI,MAAM,QAAQX,CAAM,IACpBa,EAAgB,OAASb,GACtBjtB,EAAQ,QAAQ8tB,EAAiB,CACpC,MAAA9lB,EACA,SAAAylB,EACA,OAAS,MAAM,QAAQR,CAAM,EAAa,SAATA,EACjC,KAAM,OACN,WAAYS,EAAS,EACrB,UAAWC,IAAe,UAAY,YAAc,QAC5D,CAAK,CACL,CCpBA,SAASI,GAAiBP,EAAW,CAAE,OAAAE,EAAQ,WAAAC,EAAa,MAAM,EAAI,CAClE,MAAMr8B,EAAQo8B,GAAUC,IAAe,QAAUD,EAAS,IAAM,EAC1D,EACAF,EAAU,OAAS,EACzB,OAAOA,EAAUl8B,CAAK,CAC1B,CCeA,MAAM08B,GAAa,CAAC3d,EAAG4d,EAAIC,OAAU,EAAM,EAAMA,EAAK,EAAMD,GAAM5d,GAAK,EAAM6d,EAAK,EAAMD,IAAO5d,EAAI,EAAM4d,GACrG5d,EACE8d,GAAuB,KACvBC,GAA2B,GACjC,SAASC,GAAgBlkB,EAAGmkB,EAAYC,EAAYC,EAAKC,EAAK,CAC1D,IAAIC,EACAC,EACA/+B,EAAI,EACR,GACI++B,EAAWL,GAAcC,EAAaD,GAAc,EACpDI,EAAWV,GAAWW,EAAUH,EAAKC,CAAG,EAAItkB,EACxCukB,EAAW,EACXH,EAAaI,EAGbL,EAAaK,QAEZ,KAAK,IAAID,CAAQ,EAAIP,IAC1B,EAAEv+B,EAAIw+B,IACV,OAAOO,CACX,CACA,SAASC,GAAYJ,EAAKK,EAAKJ,EAAKK,EAAK,CAErC,GAAIN,IAAQK,GAAOJ,IAAQK,EACvB,OAAO3tB,EACX,MAAM4tB,EAAYC,GAAOX,GAAgBW,EAAI,EAAG,EAAGR,EAAKC,CAAG,EAE3D,OAAQpe,GAAMA,IAAM,GAAKA,IAAM,EAAIA,EAAI2d,GAAWe,EAAS1e,CAAC,EAAGwe,EAAKC,CAAG,CAC3E,CC9CA,MAAMG,GAASL,GAAY,IAAM,EAAG,EAAG,CAAC,EAClCM,GAAUN,GAAY,EAAG,EAAG,IAAM,CAAC,EACnCO,GAAYP,GAAY,IAAM,EAAG,IAAM,CAAC,ECJxCQ,GAAiBxB,GACZ,MAAM,QAAQA,CAAI,GAAK,OAAOA,EAAK,CAAC,GAAM,SCC/CyB,GAAgBpC,GAAYxc,GAAMA,GAAK,GAAMwc,EAAO,EAAIxc,CAAC,EAAI,GAAK,EAAIwc,EAAO,GAAK,EAAIxc,EAAE,GAAK,ECA7F6e,GAAiBrC,GAAYxc,GAAM,EAAIwc,EAAO,EAAIxc,CAAC,ECCnD8e,GAAU9e,GAAM,EAAI,KAAK,IAAI,KAAK,KAAKA,CAAC,CAAC,EACzC+e,GAAUF,GAAcC,EAAM,EAC9BE,GAAYJ,GAAaE,EAAM,ECD/BG,GAAUd,GAAY,IAAM,KAAM,IAAM,GAAI,EAC5Ce,GAASL,GAAcI,EAAO,EAC9BE,GAAYP,GAAaM,EAAM,ECJ/BE,GAAcpf,IAAOA,GAAK,GAAK,EAAI,GAAMkf,GAAOlf,CAAC,EAAI,IAAO,EAAI,KAAK,IAAI,EAAG,KAAOA,EAAI,EAAE,GCMzFqf,GAAe,CACjB,OAAQ3uB,EACR,OAAA8tB,GACA,UAAAE,GACA,QAAAD,GACA,OAAAK,GACA,UAAAE,GACA,QAAAD,GACA,OAAAG,GACA,UAAAC,GACA,QAAAF,GACA,WAAAG,EACJ,EACME,GAA8B5M,GAAe,CAC/C,GAAI,MAAM,QAAQA,CAAU,EAAG,CAE3BryB,GAAUqyB,EAAW,SAAW,CAA4D,EAC5F,KAAM,CAAC6M,EAAIC,EAAIC,EAAIC,CAAE,EAAIhN,EACzB,OAAOyL,GAAYoB,EAAIC,EAAIC,EAAIC,CAAE,CACrC,SACS,OAAOhN,GAAe,SAG3B,OAAO2M,GAAa3M,CAAU,EAElC,OAAOA,CACX,EC5BMiN,GAAgB,CAACnuB,EAAMouB,IAAc34B,GAChC,GAASsmB,GAAStmB,CAAC,GAAKqmB,GAAiB,KAAKrmB,CAAC,GAAKA,EAAE,WAAWuK,CAAI,GACvEouB,GAAY,OAAO,UAAU,eAAe,KAAK34B,EAAG24B,CAAQ,GAE/DC,GAAa,CAACC,EAAOC,EAAOC,IAAW/4B,GAAM,CAC/C,GAAI,CAACsmB,GAAStmB,CAAC,EACX,OAAOA,EACX,KAAM,CAACnC,EAAGC,EAAGgb,EAAGkN,CAAK,EAAIhmB,EAAE,MAAMmmB,EAAU,EAC3C,MAAO,CACH,CAAC0S,CAAK,EAAG,WAAWh7B,CAAC,EACrB,CAACi7B,CAAK,EAAG,WAAWh7B,CAAC,EACrB,CAACi7B,CAAK,EAAG,WAAWjgB,CAAC,EACrB,MAAOkN,IAAU,OAAY,WAAWA,CAAK,EAAI,CACzD,CACA,ECfMgT,GAAgBh5B,GAAM6lB,GAAM,EAAG,IAAK7lB,CAAC,EACrCi5B,GAAU,CACZ,GAAGlT,GACH,UAAY/lB,GAAM,KAAK,MAAMg5B,GAAah5B,CAAC,CAAC,CAChD,EACMk5B,GAAO,CACT,KAAMR,GAAc,MAAO,KAAK,EAChC,MAAOE,GAAW,MAAO,QAAS,MAAM,EACxC,UAAW,CAAC,CAAE,IAAAO,EAAK,MAAAC,EAAO,KAAAC,EAAM,MAAOC,EAAU,CAAC,IAAO,QACrDL,GAAQ,UAAUE,CAAG,EACrB,KACAF,GAAQ,UAAUG,CAAK,EACvB,KACAH,GAAQ,UAAUI,CAAI,EACtB,KACAnT,GAASF,GAAM,UAAUsT,CAAO,CAAC,EACjC,GACR,ECnBA,SAASC,GAASv5B,EAAG,CACjB,IAAI6Y,EAAI,GACJM,EAAI,GACJrb,EAAI,GACJD,EAAI,GAER,OAAImC,EAAE,OAAS,GACX6Y,EAAI7Y,EAAE,UAAU,EAAG,CAAC,EACpBmZ,EAAInZ,EAAE,UAAU,EAAG,CAAC,EACpBlC,EAAIkC,EAAE,UAAU,EAAG,CAAC,EACpBnC,EAAImC,EAAE,UAAU,EAAG,CAAC,IAIpB6Y,EAAI7Y,EAAE,UAAU,EAAG,CAAC,EACpBmZ,EAAInZ,EAAE,UAAU,EAAG,CAAC,EACpBlC,EAAIkC,EAAE,UAAU,EAAG,CAAC,EACpBnC,EAAImC,EAAE,UAAU,EAAG,CAAC,EACpB6Y,GAAKA,EACLM,GAAKA,EACLrb,GAAKA,EACLD,GAAKA,GAEF,CACH,IAAK,SAASgb,EAAG,EAAE,EACnB,MAAO,SAASM,EAAG,EAAE,EACrB,KAAM,SAASrb,EAAG,EAAE,EACpB,MAAOD,EAAI,SAASA,EAAG,EAAE,EAAI,IAAM,CAC3C,CACA,CACA,MAAM27B,GAAM,CACR,KAAMd,GAAc,GAAG,EACvB,MAAOa,GACP,UAAWL,GAAK,SACpB,EChCMO,GAAO,CACT,KAAMf,GAAc,MAAO,KAAK,EAChC,MAAOE,GAAW,MAAO,aAAc,WAAW,EAClD,UAAW,CAAC,CAAE,IAAAc,EAAK,WAAAC,EAAY,UAAAC,EAAW,MAAON,EAAU,KAC/C,QACJ,KAAK,MAAMI,CAAG,EACd,KACAhT,GAAQ,UAAUR,GAASyT,CAAU,CAAC,EACtC,KACAjT,GAAQ,UAAUR,GAAS0T,CAAS,CAAC,EACrC,KACA1T,GAASF,GAAM,UAAUsT,CAAO,CAAC,EACjC,GAEZ,ECdMvb,EAAQ,CACV,KAAO/d,GAAMk5B,GAAK,KAAKl5B,CAAC,GAAKw5B,GAAI,KAAKx5B,CAAC,GAAKy5B,GAAK,KAAKz5B,CAAC,EACvD,MAAQA,GACAk5B,GAAK,KAAKl5B,CAAC,EACJk5B,GAAK,MAAMl5B,CAAC,EAEdy5B,GAAK,KAAKz5B,CAAC,EACTy5B,GAAK,MAAMz5B,CAAC,EAGZw5B,GAAI,MAAMx5B,CAAC,EAG1B,UAAYA,GACDsmB,GAAStmB,CAAC,EACXA,EACAA,EAAE,eAAe,KAAK,EAClBk5B,GAAK,UAAUl5B,CAAC,EAChBy5B,GAAK,UAAUz5B,CAAC,CAElC,ECJM65B,EAAM,CAACr4B,EAAMvI,EAAI6gC,IAAa,CAACA,EAAWt4B,EAAOs4B,EAAW7gC,EAAKuI,ECpBvE,SAASu4B,GAAShhB,EAAGc,EAAGlB,EAAG,CAKvB,OAJIA,EAAI,IACJA,GAAK,GACLA,EAAI,IACJA,GAAK,GACLA,EAAI,EAAI,EACDI,GAAKc,EAAId,GAAK,EAAIJ,EACzBA,EAAI,EAAI,EACDkB,EACPlB,EAAI,EAAI,EACDI,GAAKc,EAAId,IAAM,EAAI,EAAIJ,GAAK,EAChCI,CACX,CACA,SAASihB,GAAW,CAAE,IAAAN,EAAK,WAAAC,EAAY,UAAAC,EAAW,MAAA5T,CAAK,EAAI,CACvD0T,GAAO,IACPC,GAAc,IACdC,GAAa,IACb,IAAIT,EAAM,EACNC,EAAQ,EACRC,EAAO,EACX,GAAI,CAACM,EACDR,EAAMC,EAAQC,EAAOO,MAEpB,CACD,MAAM/f,EAAI+f,EAAY,GAChBA,GAAa,EAAID,GACjBC,EAAYD,EAAaC,EAAYD,EACrC5gB,EAAI,EAAI6gB,EAAY/f,EAC1Bsf,EAAMY,GAAShhB,EAAGc,EAAG6f,EAAM,EAAI,CAAC,EAChCN,EAAQW,GAAShhB,EAAGc,EAAG6f,CAAG,EAC1BL,EAAOU,GAAShhB,EAAGc,EAAG6f,EAAM,EAAI,CAAC,CACrC,CACA,MAAO,CACH,IAAK,KAAK,MAAMP,EAAM,GAAG,EACzB,MAAO,KAAK,MAAMC,EAAQ,GAAG,EAC7B,KAAM,KAAK,MAAMC,EAAO,GAAG,EAC3B,MAAArT,CACR,CACA,CC7BA,MAAMiU,GAAiB,CAACz4B,EAAMvI,EAAI+G,IAAM,CACpC,MAAMk6B,EAAW14B,EAAOA,EACxB,OAAO,KAAK,KAAK,KAAK,IAAI,EAAGxB,GAAK/G,EAAKA,EAAKihC,GAAYA,CAAQ,CAAC,CACrE,EACMC,GAAa,CAACX,GAAKN,GAAMO,EAAI,EAC7BW,GAAgBp6B,GAAMm6B,GAAW,KAAM5vB,GAASA,EAAK,KAAKvK,CAAC,CAAC,EAClE,SAASq6B,GAAOtc,EAAO,CACnB,MAAMxT,EAAO6vB,GAAarc,CAAK,EAE/B,IAAIuc,EAAQ/vB,EAAK,MAAMwT,CAAK,EAC5B,OAAIxT,IAASkvB,KAETa,EAAQN,GAAWM,CAAK,GAErBA,CACX,CACA,MAAMC,GAAW,CAAC/4B,EAAMvI,IAAO,CAC3B,MAAMuhC,EAAWH,GAAO74B,CAAI,EACtBi5B,EAASJ,GAAOphC,CAAE,EAClByhC,EAAU,CAAE,GAAGF,CAAQ,EAC7B,OAAQx6B,IACJ06B,EAAQ,IAAMT,GAAeO,EAAS,IAAKC,EAAO,IAAKz6B,CAAC,EACxD06B,EAAQ,MAAQT,GAAeO,EAAS,MAAOC,EAAO,MAAOz6B,CAAC,EAC9D06B,EAAQ,KAAOT,GAAeO,EAAS,KAAMC,EAAO,KAAMz6B,CAAC,EAC3D06B,EAAQ,MAAQb,EAAIW,EAAS,MAAOC,EAAO,MAAOz6B,CAAC,EAC5Ck5B,GAAK,UAAUwB,CAAO,EAErC,EC/BA,SAASC,GAAK36B,EAAG,CACb,IAAIqN,EAAIkF,EACR,OAAQ,MAAMvS,CAAC,GACXsmB,GAAStmB,CAAC,MACPqN,EAAKrN,EAAE,MAAMmmB,EAAU,KAAO,MAAQ9Y,IAAO,OAAS,OAASA,EAAG,SAAW,MACzEkF,EAAKvS,EAAE,MAAMomB,EAAU,KAAO,MAAQ7T,IAAO,OAAS,OAASA,EAAG,SAAW,GAChF,CACZ,CACA,MAAMqoB,GAAkB,CACpB,MAAOjV,GACP,SAAU,OACV,MAAO,OACP,MAAOlc,CACX,EACMoxB,GAAiB,CACnB,MAAOzU,GACP,SAAU,SACV,MAAO,OACP,MAAOrI,EAAM,KACjB,EACM+c,GAAkB,CACpB,MAAO3U,GACP,SAAU,UACV,MAAO,OACP,MAAOJ,GAAO,KAClB,EACA,SAASgV,GAAS9J,EAAM,CAAE,MAAA+J,EAAO,SAAAC,EAAU,MAAAzV,EAAO,MAAA0V,GAAS,CACvD,MAAM7+B,EAAU40B,EAAK,UAAU,MAAM+J,CAAK,EACrC3+B,IAEL40B,EAAK,MAAQgK,CAAQ,EAAI5+B,EAAQ,OACjC40B,EAAK,UAAYA,EAAK,UAAU,QAAQ+J,EAAOxV,CAAK,EACpDyL,EAAK,OAAO,KAAK,GAAG50B,EAAQ,IAAI6+B,CAAK,CAAC,EAC1C,CACA,SAASC,GAAoB9hC,EAAO,CAChC,MAAM+hC,EAAgB/hC,EAAM,SAAQ,EAC9B43B,EAAO,CACT,MAAOmK,EACP,UAAWA,EACX,OAAQ,CAAA,EACR,QAAS,EACT,UAAW,EACX,WAAY,CACpB,EACI,OAAInK,EAAK,MAAM,SAAS,QAAQ,GAC5B8J,GAAS9J,EAAM2J,EAAe,EAClCG,GAAS9J,EAAM4J,EAAc,EAC7BE,GAAS9J,EAAM6J,EAAe,EACvB7J,CACX,CACA,SAASoK,GAAkBr7B,EAAG,CAC1B,OAAOm7B,GAAoBn7B,CAAC,EAAE,MAClC,CACA,SAASs7B,GAAkBnjC,EAAQ,CAC/B,KAAM,CAAE,OAAAu0B,EAAQ,UAAA6O,EAAW,QAAAC,EAAS,UAAAC,CAAS,EAAKN,GAAoBhjC,CAAM,EACtEujC,EAAYhP,EAAO,OACzB,OAAQ1sB,GAAM,CACV,IAAI27B,EAASF,EACb,QAASvjC,EAAI,EAAGA,EAAIwjC,EAAWxjC,IACvBA,EAAIsjC,EACJG,EAASA,EAAO,QAAQf,GAAgB,MAAO56B,EAAE9H,CAAC,CAAC,EAE9CA,EAAIsjC,EAAUD,EACnBI,EAASA,EAAO,QAAQd,GAAe,MAAO9c,EAAM,UAAU/d,EAAE9H,CAAC,CAAC,CAAC,EAGnEyjC,EAASA,EAAO,QAAQb,GAAgB,MAAO5U,GAASlmB,EAAE9H,CAAC,CAAC,CAAC,EAGrE,OAAOyjC,CACX,CACJ,CACA,MAAMC,GAAwB57B,GAAM,OAAOA,GAAM,SAAW,EAAIA,EAChE,SAAS67B,GAAkB77B,EAAG,CAC1B,MAAM87B,EAAST,GAAkBr7B,CAAC,EAElC,OADoBs7B,GAAkBt7B,CAAC,EACpB87B,EAAO,IAAIF,EAAoB,CAAC,CACvD,CACA,MAAMG,GAAU,CACZ,KAAApB,GACA,MAAOU,GACP,kBAAAC,GACJ,kBAAIO,EACJ,EClFMG,GAAe,CAACjT,EAAQ9wB,IAAY8gB,GAAM,GAAGA,EAAI,EAAI9gB,EAAS8wB,CAAM,GAC1E,SAASkT,GAASlT,EAAQ9wB,EAAQ,CAC9B,OAAI,OAAO8wB,GAAW,SACV/oB,GAAM65B,EAAI9Q,EAAQ9wB,EAAQ+H,CAAC,EAE9B+d,EAAM,KAAKgL,CAAM,EACfwR,GAASxR,EAAQ9wB,CAAM,EAGvB8wB,EAAO,WAAW,MAAM,EACzBiT,GAAajT,EAAQ9wB,CAAM,EAC3BikC,GAAWnT,EAAQ9wB,CAAM,CAEvC,CACA,MAAMkkC,GAAW,CAAC36B,EAAMvI,IAAO,CAC3B,MAAM0iC,EAAS,CAAC,GAAGn6B,CAAI,EACjBk6B,EAAYC,EAAO,OACnBS,EAAa56B,EAAK,IAAI,CAAC66B,EAAUnkC,IAAM+jC,GAASI,EAAUpjC,EAAGf,CAAC,CAAC,CAAC,EACtE,OAAQ8H,GAAM,CACV,QAAS9H,EAAI,EAAGA,EAAIwjC,EAAWxjC,IAC3ByjC,EAAOzjC,CAAC,EAAIkkC,EAAWlkC,CAAC,EAAE8H,CAAC,EAE/B,OAAO27B,CACX,CACJ,EACMW,GAAY,CAACvT,EAAQ9wB,IAAW,CAClC,MAAM0jC,EAAS,CAAE,GAAG5S,EAAQ,GAAG9wB,CAAM,EAC/BmkC,EAAa,CAAA,EACnB,UAAWhkC,KAAOujC,EACV5S,EAAO3wB,CAAG,IAAM,QAAaH,EAAOG,CAAG,IAAM,SAC7CgkC,EAAWhkC,CAAG,EAAI6jC,GAASlT,EAAO3wB,CAAG,EAAGH,EAAOG,CAAG,CAAC,GAG3D,OAAQ4H,GAAM,CACV,UAAW5H,KAAOgkC,EACdT,EAAOvjC,CAAG,EAAIgkC,EAAWhkC,CAAG,EAAE4H,CAAC,EAEnC,OAAO27B,CACX,CACJ,EACMO,GAAa,CAACnT,EAAQ9wB,IAAW,CACnC,MAAMskC,EAAWR,GAAQ,kBAAkB9jC,CAAM,EAC3CukC,EAAcrB,GAAoBpS,CAAM,EACxC0T,EAActB,GAAoBljC,CAAM,EAI9C,OAHuBukC,EAAY,UAAYC,EAAY,SACvDD,EAAY,YAAcC,EAAY,WACtCD,EAAY,YAAcC,EAAY,WAE/B1M,GAAKoM,GAASK,EAAY,OAAQC,EAAY,MAAM,EAAGF,CAAQ,EAI/DP,GAAajT,EAAQ9wB,CAAM,CAE1C,ECjDM6hC,GAAW,CAACt4B,EAAMvI,EAAII,IAAU,CAClC,MAAMqjC,EAAmBzjC,EAAKuI,EAC9B,OAAOk7B,IAAqB,EAAI,GAAKrjC,EAAQmI,GAAQk7B,CACzD,ECLMC,GAAY,CAACn7B,EAAMvI,IAAQ8f,GAAM8gB,EAAIr4B,EAAMvI,EAAI8f,CAAC,EACtD,SAAS6jB,GAAmB58B,EAAG,CAC3B,OAAI,OAAOA,GAAM,SACN28B,GAEF,OAAO38B,GAAM,SACX+d,EAAM,KAAK/d,CAAC,EAAIu6B,GAAW2B,GAE7B,MAAM,QAAQl8B,CAAC,EACbm8B,GAEF,OAAOn8B,GAAM,SACXs8B,GAEJK,EACX,CACA,SAASE,GAAalB,EAAQzF,EAAM4G,EAAa,CAC7C,MAAMC,EAAS,CAAA,EACTC,EAAeF,GAAeF,GAAmBjB,EAAO,CAAC,CAAC,EAC1DsB,EAAYtB,EAAO,OAAS,EAClC,QAASzjC,EAAI,EAAGA,EAAI+kC,EAAW/kC,IAAK,CAChC,IAAIglC,EAAQF,EAAarB,EAAOzjC,CAAC,EAAGyjC,EAAOzjC,EAAI,CAAC,CAAC,EACjD,GAAIg+B,EAAM,CACN,MAAMiH,EAAiB,MAAM,QAAQjH,CAAI,EAAIA,EAAKh+B,CAAC,GAAKuR,EAAOysB,EAC/DgH,EAAQnN,GAAKoN,EAAgBD,CAAK,CACtC,CACAH,EAAO,KAAKG,CAAK,CACrB,CACA,OAAOH,CACX,CAoBA,SAASK,GAAYxzB,EAAO+xB,EAAQ,CAAE,MAAO0B,EAAU,GAAM,KAAAnH,EAAM,MAAAgH,CAAK,EAAK,GAAI,CAC7E,MAAMI,EAAc1zB,EAAM,OAM1B,GALAxQ,GAAUkkC,IAAgB3B,EAAO,MAA8D,EAK3F2B,IAAgB,EAChB,MAAO,IAAM3B,EAAO,CAAC,EAErB/xB,EAAM,CAAC,EAAIA,EAAM0zB,EAAc,CAAC,IAChC1zB,EAAQ,CAAC,GAAGA,CAAK,EAAE,QAAO,EAC1B+xB,EAAS,CAAC,GAAGA,CAAM,EAAE,QAAO,GAEhC,MAAMoB,EAASF,GAAalB,EAAQzF,EAAMgH,CAAK,EACzCD,EAAYF,EAAO,OACnBQ,EAAgBv9B,GAAM,CACxB,IAAI9H,EAAI,EACR,GAAI+kC,EAAY,EACZ,KAAO/kC,EAAI0R,EAAM,OAAS,GAClB,EAAA5J,EAAI4J,EAAM1R,EAAI,CAAC,GADMA,IACzB,CAIR,MAAMslC,EAAkB1D,GAASlwB,EAAM1R,CAAC,EAAG0R,EAAM1R,EAAI,CAAC,EAAG8H,CAAC,EAC1D,OAAO+8B,EAAO7kC,CAAC,EAAEslC,CAAe,CACpC,EACA,OAAOH,EACAr9B,GAAMu9B,EAAa1X,GAAMjc,EAAM,CAAC,EAAGA,EAAM0zB,EAAc,CAAC,EAAGt9B,CAAC,CAAC,EAC9Du9B,CACV,CCtFA,SAASE,GAAWzU,EAAQ0U,EAAW,CACnC,MAAM5X,EAAMkD,EAAOA,EAAO,OAAS,CAAC,EACpC,QAAS,EAAI,EAAG,GAAK0U,EAAW,IAAK,CACjC,MAAMC,EAAiB7D,GAAS,EAAG4D,EAAW,CAAC,EAC/C1U,EAAO,KAAK6Q,EAAI/T,EAAK,EAAG6X,CAAc,CAAC,CAC3C,CACJ,CCPA,SAASC,GAAcC,EAAK,CACxB,MAAM7U,EAAS,CAAC,CAAC,EACjB,OAAAyU,GAAWzU,EAAQ6U,EAAI,OAAS,CAAC,EAC1B7U,CACX,CCNA,SAAS8U,GAAqB9U,EAAQ+M,EAAU,CAC5C,OAAO/M,EAAO,IAAK/c,GAAMA,EAAI8pB,CAAQ,CACzC,CCKA,SAASgI,GAAcrR,EAAQ6I,EAAQ,CACnC,OAAO7I,EAAO,IAAI,IAAM6I,GAAUkC,EAAS,EAAE,OAAO,EAAG/K,EAAO,OAAS,CAAC,CAC5E,CACA,SAASoJ,GAAU,CAAE,SAAAC,EAAW,IAAK,UAAWiI,EAAgB,MAAA7H,EAAO,KAAAD,EAAO,aAAgB,CAK1F,MAAM+H,EAAkBvG,GAAcxB,CAAI,EACpCA,EAAK,IAAImC,EAA0B,EACnCA,GAA2BnC,CAAI,EAK/Bp8B,EAAQ,CACV,KAAM,GACN,MAAOkkC,EAAe,CAAC,CAC/B,EAIUE,EAAgBJ,GAGtB3H,GAASA,EAAM,SAAW6H,EAAe,OACnC7H,EACAyH,GAAcI,CAAc,EAAGjI,CAAQ,EACvCoI,EAAoBf,GAAYc,EAAeF,EAAgB,CACjE,KAAM,MAAM,QAAQC,CAAe,EAC7BA,EACAF,GAAcC,EAAgBC,CAAe,CAC3D,CAAK,EACD,MAAO,CACH,mBAAoBlI,EACpB,KAAOpd,IACH7e,EAAM,MAAQqkC,EAAkBxlB,CAAC,EACjC7e,EAAM,KAAO6e,GAAKod,EACXj8B,EAEnB,CACA,CC1CA,SAASskC,GAAkBrJ,EAAUsJ,EAAe,CAChD,OAAOA,EAAgBtJ,GAAY,IAAOsJ,GAAiB,CAC/D,CCNA,MAAMC,GAAyB,EAC/B,SAASC,GAAsBC,EAAc,EAAG3kC,EAAS,CACrD,MAAM4kC,EAAQ,KAAK,IAAI,EAAIH,GAAwB,CAAC,EACpD,OAAOF,GAAkBvkC,EAAU2kC,EAAaC,CAAK,EAAG,EAAIA,CAAK,CACrE,CCFA,MAAMC,GAAU,KACVC,GAAc,IACdC,GAAc,GACdC,GAAa,IACbC,GAAa,EACnB,SAASC,GAAW,CAAE,SAAAhJ,EAAW,IAAK,OAAAiJ,EAAS,IAAM,SAAAjK,EAAW,EAAG,KAAAkK,EAAO,GAAM,CAC5E,IAAIC,EACAC,EAEAC,EAAe,EAAIJ,EAIvBI,EAAevZ,GAAMgZ,GAAYC,GAAYM,CAAY,EACzDrJ,EAAWlQ,GAAM8Y,GAAaC,GAAazJ,GAAsBY,CAAQ,CAAC,EACtEqJ,EAAe,GAIfF,EAAYG,GAAiB,CACzB,MAAMC,EAAmBD,EAAeD,EAClCtkC,EAAQwkC,EAAmBvJ,EAC3Bl4B,EAAIyhC,EAAmBvK,EACvBj3B,EAAIyhC,GAAgBF,EAAcD,CAAY,EAC9CtmB,EAAI,KAAK,IAAI,CAAChe,CAAK,EACzB,OAAO4jC,GAAW7gC,EAAIC,EAAKgb,CAC/B,EACAqmB,EAAcE,GAAiB,CAE3B,MAAMvkC,EADmBukC,EAAeD,EACPrJ,EAC3B9c,EAAIne,EAAQi6B,EAAWA,EACvBrc,EAAI,KAAK,IAAI0mB,EAAc,CAAC,EAAI,KAAK,IAAIC,EAAc,CAAC,EAAItJ,EAC5D7c,EAAI,KAAK,IAAI,CAACpe,CAAK,EACnBqe,EAAIomB,GAAgB,KAAK,IAAIF,EAAc,CAAC,EAAGD,CAAY,EAEjE,OADe,CAACF,EAASG,CAAY,EAAIX,GAAU,EAAI,GAAK,KACzCzlB,EAAIP,GAAKQ,GAAMC,CACtC,IAMA+lB,EAAYG,GAAiB,CACzB,MAAMxhC,EAAI,KAAK,IAAI,CAACwhC,EAAetJ,CAAQ,EACrCj4B,GAAKuhC,EAAetK,GAAYgB,EAAW,EACjD,MAAO,CAAC2I,GAAU7gC,EAAIC,CAC1B,EACAqhC,EAAcE,GAAiB,CAC3B,MAAMxhC,EAAI,KAAK,IAAI,CAACwhC,EAAetJ,CAAQ,EACrCj4B,GAAKi3B,EAAWsK,IAAiBtJ,EAAWA,GAClD,OAAOl4B,EAAIC,CACf,GAEJ,MAAM0hC,EAAe,EAAIzJ,EACnBsJ,EAAeI,GAAgBP,EAAUC,EAAYK,CAAY,EAEvE,GADAzJ,EAAWd,GAAsBc,CAAQ,EACrC,MAAMsJ,CAAY,EAClB,MAAO,CACH,UAAW,IACX,QAAS,GACT,SAAAtJ,CACZ,EAES,CACD,MAAM2J,EAAY,KAAK,IAAIL,EAAc,CAAC,EAAIJ,EAC9C,MAAO,CACH,UAAAS,EACA,QAASN,EAAe,EAAI,KAAK,KAAKH,EAAOS,CAAS,EACtD,SAAA3J,CACZ,CACI,CACJ,CACA,MAAM4J,GAAiB,GACvB,SAASF,GAAgBP,EAAUC,EAAYK,EAAc,CACzD,IAAI7hC,EAAS6hC,EACb,QAAStnC,EAAI,EAAGA,EAAIynC,GAAgBznC,IAChCyF,EAASA,EAASuhC,EAASvhC,CAAM,EAAIwhC,EAAWxhC,CAAM,EAE1D,OAAOA,CACX,CACA,SAAS4hC,GAAgBF,EAAcD,EAAc,CACjD,OAAOC,EAAe,KAAK,KAAK,EAAID,EAAeA,CAAY,CACnE,CClFA,MAAMQ,GAAe,CAAC,WAAY,QAAQ,EACpCC,GAAc,CAAC,YAAa,UAAW,MAAM,EACnD,SAASC,GAAatnC,EAASmxB,EAAM,CACjC,OAAOA,EAAK,KAAMvxB,GAAQI,EAAQJ,CAAG,IAAM,MAAS,CACxD,CACA,SAAS2nC,GAAiBvnC,EAAS,CAC/B,IAAIwnC,EAAgB,CAChB,SAAU,EACV,UAAW,IACX,QAAS,GACT,KAAM,EACN,uBAAwB,GACxB,GAAGxnC,CACX,EAEI,GAAI,CAACsnC,GAAatnC,EAASqnC,EAAW,GAClCC,GAAatnC,EAASonC,EAAY,EAAG,CACrC,MAAMK,EAAUlB,GAAWvmC,CAAO,EAClCwnC,EAAgB,CACZ,GAAGA,EACH,GAAGC,EACH,KAAM,CAClB,EACQD,EAAc,uBAAyB,EAC3C,CACA,OAAOA,CACX,CACA,SAASE,GAAO,CAAE,UAAApK,EAAW,UAAAqK,EAAW,UAAAC,EAAW,GAAG5nC,CAAO,EAAI,CAC7D,MAAMuwB,EAAS+M,EAAU,CAAC,EACpB79B,EAAS69B,EAAUA,EAAU,OAAS,CAAC,EAKvCh8B,EAAQ,CAAE,KAAM,GAAO,MAAOivB,CAAM,EACpC,CAAE,UAAA2W,EAAW,QAAAW,EAAS,KAAApB,EAAM,SAAAlJ,EAAU,SAAAhB,EAAU,uBAAAuL,CAAsB,EAAMP,GAAiB,CAC/F,GAAGvnC,EACH,SAAU,CAAC28B,GAAsB38B,EAAQ,UAAY,CAAC,CAC9D,CAAK,EACK+nC,EAAkBxL,GAAY,EAC9BqK,EAAeiB,GAAW,EAAI,KAAK,KAAKX,EAAYT,CAAI,GACxDuB,EAAevoC,EAAS8wB,EACxB0X,EAAsBtL,GAAsB,KAAK,KAAKuK,EAAYT,CAAI,CAAC,EAQvEyB,EAAkB,KAAK,IAAIF,CAAY,EAAI,EACjDJ,IAAcA,EAAYM,EAAkB,IAAO,GACnDP,IAAcA,EAAYO,EAAkB,KAAQ,IACpD,IAAIC,EACJ,GAAIvB,EAAe,EAAG,CAClB,MAAMwB,EAAcrB,GAAgBkB,EAAqBrB,CAAY,EAErEuB,EAAiBhoB,GAAM,CACnB,MAAMumB,EAAW,KAAK,IAAI,CAACE,EAAeqB,EAAsB9nB,CAAC,EACjE,OAAQ1gB,EACJinC,IACOqB,EACCnB,EAAeqB,EAAsBD,GACrCI,EACA,KAAK,IAAIA,EAAcjoB,CAAC,EACxB6nB,EAAe,KAAK,IAAII,EAAcjoB,CAAC,EACvD,CACJ,SACSymB,IAAiB,EAEtBuB,EAAiBhoB,GAAM1gB,EACnB,KAAK,IAAI,CAACwoC,EAAsB9nB,CAAC,GAC5B6nB,GACID,EAAkBE,EAAsBD,GAAgB7nB,OAEpE,CAED,MAAMkoB,EAAoBJ,EAAsB,KAAK,KAAKrB,EAAeA,EAAe,CAAC,EACzFuB,EAAiBhoB,GAAM,CACnB,MAAMumB,EAAW,KAAK,IAAI,CAACE,EAAeqB,EAAsB9nB,CAAC,EAE3DmoB,EAAW,KAAK,IAAID,EAAoBloB,EAAG,GAAG,EACpD,OAAQ1gB,EACHinC,IACKqB,EACEnB,EAAeqB,EAAsBD,GACrC,KAAK,KAAKM,CAAQ,EAClBD,EACIL,EACA,KAAK,KAAKM,CAAQ,GAC1BD,CACZ,CACJ,CACA,MAAO,CACH,mBAAoBP,GAAyBvK,GAAY,KACzD,KAAOpd,GAAM,CACT,MAAM9e,EAAU8mC,EAAchoB,CAAC,EAC/B,GAAK2nB,EAqBDxmC,EAAM,KAAO6e,GAAKod,MArBO,CACzB,IAAIpK,EAAkB4U,EAClB5nB,IAAM,IAMFymB,EAAe,EACfzT,EAAkB4S,GAAsBoC,EAAehoB,EAAG9e,CAAO,EAGjE8xB,EAAkB,GAG1B,MAAMoV,EAA2B,KAAK,IAAIpV,CAAe,GAAKyU,EACxDY,EAA+B,KAAK,IAAI/oC,EAAS4B,CAAO,GAAKsmC,EACnErmC,EAAM,KACFinC,GAA4BC,CACpC,CAIA,OAAAlnC,EAAM,MAAQA,EAAM,KAAO7B,EAAS4B,EAC7BC,CACX,CACR,CACA,CC7HA,SAASmnC,GAAQ,CAAE,UAAAnL,EAAW,SAAAf,EAAW,EAAK,MAAAmM,EAAQ,GAAK,aAAAC,EAAe,IAAK,cAAAC,EAAgB,GAAI,gBAAAC,EAAkB,IAAK,aAAAC,EAAc,IAAAxb,EAAK,IAAAhZ,EAAK,UAAAqzB,EAAY,GAAK,UAAAC,GAAc,CAC7K,MAAMrX,EAAS+M,EAAU,CAAC,EACpBh8B,EAAQ,CACV,KAAM,GACN,MAAOivB,CACf,EACUwY,EAAiBvhC,GAAO8lB,IAAQ,QAAa9lB,EAAI8lB,GAAShZ,IAAQ,QAAa9M,EAAI8M,EACnF00B,EAAmBxhC,GACjB8lB,IAAQ,OACDhZ,EACPA,IAAQ,QAEL,KAAK,IAAIgZ,EAAM9lB,CAAC,EAAI,KAAK,IAAI8M,EAAM9M,CAAC,EADhC8lB,EAC0ChZ,EAEzD,IAAI20B,EAAYP,EAAQnM,EACxB,MAAM2M,EAAQ3Y,EAAS0Y,EACjBxpC,EAASqpC,IAAiB,OAAYI,EAAQJ,EAAaI,CAAK,EAKlEzpC,IAAWypC,IACXD,EAAYxpC,EAAS8wB,GACzB,MAAM4Y,EAAahpB,GAAM,CAAC8oB,EAAY,KAAK,IAAI,CAAC9oB,EAAIwoB,CAAY,EAC1DS,EAAcjpB,GAAM1gB,EAAS0pC,EAAUhpB,CAAC,EACxCkpB,EAAiBlpB,GAAM,CACzB,MAAM7d,EAAQ6mC,EAAUhpB,CAAC,EACnBwR,EAASyX,EAAWjpB,CAAC,EAC3B7e,EAAM,KAAO,KAAK,IAAIgB,CAAK,GAAKqlC,EAChCrmC,EAAM,MAAQA,EAAM,KAAO7B,EAASkyB,CACxC,EAOA,IAAI2X,EACAC,EACJ,MAAMC,EAAsBrpB,GAAM,CACzB4oB,EAAcznC,EAAM,KAAK,IAE9BgoC,EAAsBnpB,EACtBopB,EAAW7B,GAAO,CACd,UAAW,CAACpmC,EAAM,MAAO0nC,EAAgB1nC,EAAM,KAAK,CAAC,EACrD,SAAUykC,GAAsBqD,EAAYjpB,EAAG7e,EAAM,KAAK,EAC1D,QAASsnC,EACT,UAAWC,EACX,UAAAlB,EACA,UAAAC,CACZ,CAAS,EACL,EACA,OAAA4B,EAAmB,CAAC,EACb,CACH,mBAAoB,KACpB,KAAOrpB,GAAM,CAOT,IAAIspB,EAAkB,GAUtB,MATI,CAACF,GAAYD,IAAwB,SACrCG,EAAkB,GAClBJ,EAAclpB,CAAC,EACfqpB,EAAmBrpB,CAAC,GAMpBmpB,IAAwB,QAAanpB,EAAImpB,EAClCC,EAAS,KAAKppB,EAAImpB,CAAmB,GAG5C,CAACG,GAAmBJ,EAAclpB,CAAC,EAC5B7e,EAEf,CACR,CACA,CClFA,MAAMooC,GAAmBC,GAAW,CAChC,MAAMC,EAAgB,CAAC,CAAE,UAAArT,CAAS,IAAOoT,EAAOpT,CAAS,EACzD,MAAO,CACH,MAAO,IAAME,EAAM,OAAOmT,EAAe,EAAI,EAC7C,KAAM,IAAMlT,GAAYkT,CAAa,EAKrC,IAAK,IAAMjU,EAAU,aAAeA,EAAU,UAAY,YAAY,IAAG,CACjF,CACA,ECTMkU,GAAuB,IAC7B,SAASC,GAAsBC,EAAW,CACtC,IAAIxM,EAAW,EACf,MAAMyM,EAAW,GACjB,IAAI1oC,EAAQyoC,EAAU,KAAKxM,CAAQ,EACnC,KAAO,CAACj8B,EAAM,MAAQi8B,EAAWsM,IAC7BtM,GAAYyM,EACZ1oC,EAAQyoC,EAAU,KAAKxM,CAAQ,EAEnC,OAAOA,GAAYsM,GAAuB,IAAWtM,CACzD,CCJA,MAAM0M,GAAQ,CACV,MAAOxB,GACP,QAAAA,GACA,MAAOnL,GACP,UAAAA,GACA,OAAAoK,EACJ,EAQA,SAASwC,GAAa,CAAE,SAAAC,EAAW,GAAM,MAAAryB,EAAQ,EAAG,OAAAsyB,EAASV,GAAiB,UAAWW,EAAa,KAAAt4B,EAAO,YAAa,OAAAyrB,EAAS,EAAG,YAAA8M,EAAc,EAAG,WAAA7M,EAAa,OAAQ,OAAA8M,EAAQ,OAAAC,EAAQ,WAAAC,EAAY,SAAAC,EAAU,GAAG1qC,CAAA,EAAW,CAC5N,IAAI2qC,EAAQ,EACRC,EAAa,GACbC,EACAC,EAKJ,MAAMC,EAAwB,IAAM,CAChCD,EAAyB,IAAI,QAAS/2B,GAAY,CAC9C82B,EAAyB92B,CAC7B,CAAC,CACL,EAEAg3B,EAAA,EACA,IAAIC,EACJ,MAAMC,EAAmBhB,GAAMl4B,CAAI,GAAKurB,GAKxC,IAAI4N,EACAD,IAAqB3N,IACrB,OAAO+M,EAAY,CAAC,GAAM,WAI1Ba,EAAwBtG,GAAY,CAAC,EAAG,GAAG,EAAGyF,EAAa,CACvD,MAAO,EAAA,CACV,EACDA,EAAc,CAAC,EAAG,GAAG,GAEzB,MAAMN,EAAYkB,EAAiB,CAAE,GAAGjrC,EAAS,UAAWqqC,EAAa,EACzE,IAAIc,EACA1N,IAAe,WACf0N,EAAoBF,EAAiB,CACjC,GAAGjrC,EACH,UAAW,CAAC,GAAGqqC,CAAW,EAAE,QAAA,EAC5B,SAAU,EAAErqC,EAAQ,UAAY,EAAA,CACnC,GAEL,IAAIorC,EAAY,OACZC,EAAW,KACXC,EAAY,KACZC,EAAa,KASbxB,EAAU,qBAAuB,MAAQvM,IACzCuM,EAAU,mBAAqBD,GAAsBC,CAAS,GAElE,KAAM,CAAE,mBAAAyB,GAAuBzB,EAC/B,IAAI0B,GAAmB,IACnBC,GAAgB,IAChBF,IAAuB,OACvBC,GAAmBD,EAAqBlB,EACxCoB,GAAgBD,IAAoBjO,EAAS,GAAK8M,GAEtD,IAAIqB,EAAc,EAClB,MAAMC,GAAQrV,GAAc,CACxB,GAAI+U,IAAc,KACd,OAOAX,EAAQ,IACRW,EAAY,KAAK,IAAIA,EAAW/U,CAAS,GACzCoU,EAAQ,IACRW,EAAY,KAAK,IAAI/U,EAAYmV,GAAgBf,EAAOW,CAAS,GACjED,IAAa,KACbM,EAAcN,EAMdM,EAAc,KAAK,MAAMpV,EAAY+U,CAAS,EAAIX,EAGtD,MAAMkB,GAAmBF,EAAc7zB,GAAS6yB,GAAS,EAAI,EAAI,IAC3DmB,GAAiBnB,GAAS,EAAIkB,GAAmB,EAAIA,GAAmBH,GAC9EC,EAAc,KAAK,IAAIE,GAAkB,CAAC,EAKtCT,IAAc,YAAcC,IAAa,OACzCM,EAAcD,IAElB,IAAIK,GAAUJ,EACVK,GAAiBjC,EACrB,GAAIvM,EAAQ,CAMR,MAAM8D,GAAW,KAAK,IAAIqK,EAAaD,EAAa,EAAID,GAKxD,IAAIQ,GAAmB,KAAK,MAAM3K,EAAQ,EAKtC4K,GAAoB5K,GAAW,EAK/B,CAAC4K,IAAqB5K,IAAY,IAClC4K,GAAoB,GAExBA,KAAsB,GAAKD,KAC3BA,GAAmB,KAAK,IAAIA,GAAkBzO,EAAS,CAAC,EAIjC,GAAQyO,GAAmB,KAE1CxO,IAAe,WACfyO,GAAoB,EAAIA,GACpB5B,IACA4B,IAAqB5B,EAAcmB,KAGlChO,IAAe,WACpBuO,GAAiBb,IAGzBY,GAAU1e,GAAM,EAAG,EAAG6e,EAAiB,EAAIT,EAC/C,CAMA,MAAMnqC,GAAQwqC,GACR,CAAE,KAAM,GAAO,MAAOzB,EAAY,CAAC,CAAA,EACnC2B,GAAe,KAAKD,EAAO,EAC7Bb,IACA5pC,GAAM,MAAQ4pC,EAAsB5pC,GAAM,KAAK,GAEnD,GAAI,CAAE,KAAA6qC,IAAS7qC,GACX,CAACwqC,IAAkBN,IAAuB,OAC1CW,GAAOxB,GAAS,EAAIgB,GAAeD,GAAgBC,GAAe,GAEtE,MAAMS,GAAsBf,IAAa,OACpCD,IAAc,YAAeA,IAAc,WAAae,IAC7D,OAAIzB,GACAA,EAASppC,GAAM,KAAK,EAEpB8qC,IACAC,EAAA,EAEG/qC,EACX,EACMgrC,EAAsB,IAAM,CAC9BtB,GAAmBA,EAAgB,KAAA,EACnCA,EAAkB,MACtB,EACM/zB,GAAS,IAAM,CACjBm0B,EAAY,OACZkB,EAAA,EACAzB,EAAA,EACAE,EAAA,EACAO,EAAYC,EAAa,IAC7B,EACMc,EAAS,IAAM,CACjBjB,EAAY,WACZX,GAAcA,EAAA,EACd6B,EAAA,EACAzB,EAAA,CACJ,EACM0B,EAAO,IAAM,CACf,GAAI3B,EACA,OACCI,IACDA,EAAkBZ,EAAOwB,EAAI,GACjC,MAAMY,EAAMxB,EAAgB,IAAA,EAC5BT,GAAUA,EAAA,EACNc,IAAa,KACbC,EAAYkB,EAAMnB,GAEb,CAACC,GAAaF,IAAc,cACjCE,EAAYkB,GAEZpB,IAAc,YACdL,EAAA,EAEJQ,EAAaD,EACbD,EAAW,KAKXD,EAAY,UACZJ,EAAgB,MAAA,CACpB,EACIb,GACAoC,EAAA,EAEJ,MAAME,GAAW,CACb,KAAK14B,EAASkC,GAAQ,CAClB,OAAO60B,EAAuB,KAAK/2B,EAASkC,EAAM,CACtD,EACA,IAAI,MAAO,CACP,OAAO0mB,GAAsBgP,CAAW,CAC5C,EACA,IAAI,KAAKe,EAAS,CACdA,EAAUjQ,GAAsBiQ,CAAO,EACvCf,EAAce,EACVrB,IAAa,MAAQ,CAACL,GAAmBL,IAAU,EACnDU,EAAWqB,EAGXpB,EAAYN,EAAgB,IAAA,EAAQ0B,EAAU/B,CAEtD,EACA,IAAI,UAAW,CACX,MAAMpN,EAAWwM,EAAU,qBAAuB,KAC5CD,GAAsBC,CAAS,EAC/BA,EAAU,mBAChB,OAAOpN,GAAsBY,CAAQ,CACzC,EACA,IAAI,OAAQ,CACR,OAAOoN,CACX,EACA,IAAI,MAAMgC,EAAU,CACZA,IAAahC,GAAS,CAACK,IAE3BL,EAAQgC,EACRF,GAAS,KAAO9P,GAAsBgP,CAAW,EACrD,EACA,IAAI,OAAQ,CACR,OAAOP,CACX,EACA,KAAAmB,EACA,MAAO,IAAM,CACTnB,EAAY,SACZC,EAAWM,CACf,EACA,KAAM,IAAM,CACRf,EAAa,GACTQ,IAAc,SAElBA,EAAY,OACZZ,GAAUA,EAAA,EACVvzB,GAAA,EACJ,EACA,OAAQ,IAAM,CACNs0B,IAAe,MACfK,GAAKL,CAAU,EACnBt0B,GAAA,CACJ,EACA,SAAU,IAAM,CACZm0B,EAAY,UAChB,EACA,OAASW,IACLT,EAAY,EACLM,GAAKG,CAAO,EACvB,EAEJ,OAAOU,EACX,CC3SA,SAASxlC,GAAKoR,EAAU,CACpB,IAAIlT,EACJ,MAAO,KACCA,IAAW,SACXA,EAASkT,EAAQ,GACdlT,EAEf,CCEA,MAAMynC,GAAgB3lC,GAAK,IAAM,OAAO,eAAe,KAAK,QAAQ,UAAW,SAAS,CAAC,EAInF4lC,GAAoB,IAAI,IAAI,CAC9B,UACA,WACA,SACA,YACA,iBACJ,CAAC,EAMKC,GAAc,GAKd1G,GAAc,IACd2G,GAAgC,CAAC1P,EAAWr9B,IAAYA,EAAQ,OAAS,UAC3Eq9B,IAAc,mBACd,CAACL,GAAuBh9B,EAAQ,IAAI,EACxC,SAASgtC,GAA2BnsC,EAAOw8B,EAAW,CAAE,SAAAqN,EAAU,WAAAD,EAAY,GAAGzqC,GAAW,CAOxF,GAAI,EAN2B4sC,GAAa,GACxCC,GAAkB,IAAIxP,CAAS,GAC/B,CAACr9B,EAAQ,aACTA,EAAQ,aAAe,UACvBA,EAAQ,UAAY,GACpBA,EAAQ,OAAS,WAEjB,MAAO,GAIX,IAAI4qC,EAAa,GACbC,EACAC,EAMAmC,EAAgB,GAKpB,MAAMlC,EAAwB,IAAM,CAChCD,EAAyB,IAAI,QAAS/2B,GAAY,CAC9C82B,EAAyB92B,CAC7B,CAAC,CACL,EAEAg3B,EAAqB,EACrB,GAAI,CAAE,UAAAzN,EAAW,SAAAC,EAAW,IAAK,KAAAG,EAAM,MAAAC,CAAK,EAAK39B,EAIjD,GAAI+sC,GAA8B1P,EAAWr9B,CAAO,EAAG,CACnD,MAAMktC,EAAkBhD,GAAa,CACjC,GAAGlqC,EACH,OAAQ,EACR,MAAO,CACnB,CAAS,EACD,IAAIsB,EAAQ,CAAE,KAAM,GAAO,MAAOg8B,EAAU,CAAC,CAAC,EAC9C,MAAM6P,EAAwB,CAAA,EAK9B,IAAIhtB,EAAI,EACR,KAAO,CAAC7e,EAAM,MAAQ6e,EAAIimB,IACtB9kC,EAAQ4rC,EAAgB,OAAO/sB,CAAC,EAChCgtB,EAAsB,KAAK7rC,EAAM,KAAK,EACtC6e,GAAK2sB,GAETnP,EAAQ,OACRL,EAAY6P,EACZ5P,EAAWpd,EAAI2sB,GACfpP,EAAO,QACX,CACA,MAAM0P,EAAYhQ,GAAav8B,EAAM,MAAM,QAASw8B,EAAWC,EAAW,CACtE,GAAGt9B,EACH,SAAAu9B,EASA,KAAMG,EACN,MAAAC,CACR,CAAK,EACK0P,EAAkB,IAAM,CAC1BJ,EAAgB,GAChBG,EAAU,OAAM,CACpB,EACME,EAAa,IAAM,CACrBL,EAAgB,GAChBxW,EAAM,OAAO4W,CAAe,EAC5BxC,EAAsB,EACtBE,EAAqB,CACzB,EASA,OAAAqC,EAAU,SAAW,IAAM,CACnBH,IAEJpsC,EAAM,IAAIg9B,GAAiBP,EAAWt9B,CAAO,CAAC,EAC9CyqC,GAAcA,EAAU,EACxB6C,EAAU,EACd,EAIiB,CACb,KAAKv5B,EAASkC,EAAQ,CAClB,OAAO60B,EAAuB,KAAK/2B,EAASkC,CAAM,CACtD,EACA,eAAes3B,EAAU,CACrB,OAAAH,EAAU,SAAWG,EACrBH,EAAU,SAAW,KACdn8B,CACX,EACA,IAAI,MAAO,CACP,OAAO0rB,GAAsByQ,EAAU,aAAe,CAAC,CAC3D,EACA,IAAI,KAAKV,EAAS,CACdU,EAAU,YAAc3Q,GAAsBiQ,CAAO,CACzD,EACA,IAAI,OAAQ,CACR,OAAOU,EAAU,YACrB,EACA,IAAI,MAAMT,EAAU,CAChBS,EAAU,aAAeT,CAC7B,EACA,IAAI,UAAW,CACX,OAAOhQ,GAAsBY,CAAQ,CACzC,EACA,KAAM,IAAM,CACJqN,IAEJwC,EAAU,KAAI,EAId1W,GAAY2W,CAAe,EAC/B,EACA,MAAO,IAAMD,EAAU,MAAK,EAC5B,KAAM,IAAM,CAER,GADAxC,EAAa,GACTwC,EAAU,YAAc,OACxB,OASJ,KAAM,CAAE,YAAAzB,CAAW,EAAKyB,EACxB,GAAIzB,EAAa,CACb,MAAMuB,EAAkBhD,GAAa,CACjC,GAAGlqC,EACH,SAAU,EAC9B,CAAiB,EACDa,EAAM,gBAAgBqsC,EAAgB,OAAOvB,EAAcmB,EAAW,EAAE,MAAOI,EAAgB,OAAOvB,CAAW,EAAE,MAAOmB,EAAW,CACzI,CACAQ,EAAU,CACd,EACA,SAAU,IAAM,CACRL,GAEJG,EAAU,OAAM,CACpB,EACA,OAAQE,CAChB,CAEA,CCpMA,SAASE,GAAuB,CAAE,UAAAlQ,EAAW,MAAAxlB,EAAO,SAAA4yB,EAAU,WAAAD,CAAU,EAAK,CACzE,MAAMgD,EAAW,KACb/C,GAAYA,EAASpN,EAAUA,EAAU,OAAS,CAAC,CAAC,EACpDmN,GAAcA,EAAU,EAQjB,CACH,KAAM,EACN,MAAO,EACP,SAAU,EACV,KAAOx5B,EACP,MAAQA,EACR,KAAOA,EACP,KAAO8C,IACHA,EAAO,EACA,QAAQ,QAAO,GAE1B,OAAS9C,EACT,SAAWA,CACvB,GAEI,OAAO6G,EACDoyB,GAAa,CACX,UAAW,CAAC,EAAG,CAAC,EAChB,SAAU,EACV,MAAApyB,EACA,WAAY21B,CACxB,CAAS,EACCA,EAAQ,CAClB,CCnCA,MAAMC,GAAoB,CACtB,KAAM,SACN,UAAW,IACX,QAAS,GACT,UAAW,EACf,EACMC,GAA0BluC,IAAY,CACxC,KAAM,SACN,UAAW,IACX,QAASA,IAAW,EAAI,EAAI,KAAK,KAAK,GAAG,EAAI,GAC7C,UAAW,EACf,GACMmuC,GAAsB,CACxB,KAAM,YACN,SAAU,EACd,EAKMlQ,GAAO,CACT,KAAM,YACN,KAAM,CAAC,IAAM,GAAK,IAAM,CAAC,EACzB,SAAU,EACd,EACMmQ,GAAuB,CAACC,EAAU,CAAE,UAAAxQ,KAClCA,EAAU,OAAS,EACZsQ,GAEF3hB,GAAe,IAAI6hB,CAAQ,EACzBA,EAAS,WAAW,OAAO,EAC5BH,GAAuBrQ,EAAU,CAAC,CAAC,EACnCoQ,GAEHhQ,GCzBLqQ,GAAe,CAACnuC,EAAKiB,IAEnBjB,IAAQ,SACD,GAIP,UAAOiB,GAAU,UAAY,MAAM,QAAQA,CAAK,GAEhD,OAAOA,GAAU,WAChB0iC,GAAQ,KAAK1iC,CAAK,GAAKA,IAAU,MAClC,CAACA,EAAM,WAAW,MAAM,GChB1BmtC,GAAc,IAAI,IAAI,CAAC,aAAc,WAAY,WAAY,SAAS,CAAC,EAC7E,SAASC,GAAmBzmC,EAAG,CAC3B,KAAM,CAAC+hB,EAAM1oB,CAAK,EAAI2G,EAAE,MAAM,EAAG,EAAE,EAAE,MAAM,GAAG,EAC9C,GAAI+hB,IAAS,cACT,OAAO/hB,EACX,KAAM,CAAC+lB,CAAM,EAAI1sB,EAAM,MAAM8sB,EAAU,GAAK,CAAA,EAC5C,GAAI,CAACJ,EACD,OAAO/lB,EACX,MAAMwmB,EAAOntB,EAAM,QAAQ0sB,EAAQ,EAAE,EACrC,IAAI2gB,EAAeF,GAAY,IAAIzkB,CAAI,EAAI,EAAI,EAC/C,OAAIgE,IAAW1sB,IACXqtC,GAAgB,KACb3kB,EAAO,IAAM2kB,EAAelgB,EAAO,GAC9C,CACA,MAAMmgB,GAAgB,oBAChBC,GAAS,CACX,GAAG7K,GACH,kBAAoB/7B,GAAM,CACtB,MAAM6mC,EAAY7mC,EAAE,MAAM2mC,EAAa,EACvC,OAAOE,EAAYA,EAAU,IAAIJ,EAAkB,EAAE,KAAK,GAAG,EAAIzmC,CACrE,CACJ,ECpBM8mC,GAAoB,CACtB,GAAG9f,GAEH,MAAAjJ,EACA,gBAAiBA,EACjB,aAAcA,EACd,KAAMA,EACN,OAAQA,EAER,YAAaA,EACb,eAAgBA,EAChB,iBAAkBA,EAClB,kBAAmBA,EACnB,gBAAiBA,EACjB,OAAA6oB,GACA,aAAcA,EAClB,EAIMG,GAAuB3uC,GAAQ0uC,GAAkB1uC,CAAG,ECvB1D,SAASyjC,GAAkBzjC,EAAKiB,EAAO,CACnC,IAAI2tC,EAAmBD,GAAoB3uC,CAAG,EAC9C,OAAI4uC,IAAqBJ,KACrBI,EAAmBjL,IAEhBiL,EAAiB,kBAClBA,EAAiB,kBAAkB3tC,CAAK,EACxC,MACV,CCTA,MAAM4tC,GAAqBjnC,GAAM,aAAa,KAAKA,CAAC,ECDpD,SAASknC,GAAO7tC,EAAO,CACnB,GAAI,OAAOA,GAAU,SACjB,OAAOA,IAAU,EAEhB,GAAIA,IAAU,KACf,OAAOA,IAAU,QAAUA,IAAU,KAAO4tC,GAAkB5tC,CAAK,CAE3E,CCLA,SAAS8tC,GAAa9tC,EAAOw8B,EAAW59B,EAAQi1B,EAAY,CACxD,MAAMka,EAAqBb,GAAa1Q,EAAW59B,CAAM,EACzD,IAAI69B,EACA,MAAM,QAAQ79B,CAAM,EACpB69B,EAAY,CAAC,GAAG79B,CAAM,EAGtB69B,EAAY,CAAC,KAAM79B,CAAM,EAE7B,MAAMovC,EAAgBna,EAAW,OAAS,OAAYA,EAAW,KAAO7zB,EAAM,IAAG,EACjF,IAAIiuC,EACJ,MAAMC,EAAsB,CAAA,EAC5B,QAASrvC,EAAI,EAAGA,EAAI49B,EAAU,OAAQ59B,IAI9B49B,EAAU59B,CAAC,IAAM,OACjB49B,EAAU59B,CAAC,EAAIA,IAAM,EAAImvC,EAAgBvR,EAAU59B,EAAI,CAAC,GAExDgvC,GAAOpR,EAAU59B,CAAC,CAAC,GACnBqvC,EAAoB,KAAKrvC,CAAC,EAG1B,OAAO49B,EAAU59B,CAAC,GAAM,UACxB49B,EAAU59B,CAAC,IAAM,QACjB49B,EAAU59B,CAAC,IAAM,MACjBovC,EAA0BxR,EAAU59B,CAAC,GAG7C,GAAIkvC,GACAG,EAAoB,QACpBD,EACA,QAASpvC,EAAI,EAAGA,EAAIqvC,EAAoB,OAAQrvC,IAAK,CACjD,MAAM0B,EAAQ2tC,EAAoBrvC,CAAC,EACnC49B,EAAUl8B,CAAK,EAAIiiC,GAAkBhG,EAAWyR,CAAuB,CAC3E,CAEJ,OAAOxR,CACX,CCrCA,SAAS0R,GAAoB,CAAE,KAAAC,EAAM,MAAOC,EAAQ,cAAAC,EAAe,gBAAAC,EAAiB,iBAAAC,EAAkB,OAAA7R,EAAQ,WAAAC,EAAY,YAAA6M,EAAa,KAAAthC,EAAM,QAAA+iC,EAAS,GAAGrX,CAAU,EAAI,CACnK,MAAO,CAAC,CAAC,OAAO,KAAKA,CAAU,EAAE,MACrC,CACA,SAAS4a,GAAmB5a,EAAY90B,EAAK,CACzC,OAAO80B,EAAW90B,CAAG,GAAK80B,EAAW,SAAcA,CACvD,CCVA,MAAM6a,GAAqB,CACvB,eAAgB,EACpB,ECUMC,GAAqB,CAACnS,EAAWx8B,EAAOpB,EAAQi1B,EAAa,CAAA,IACvD+V,GAAe,CACnB,MAAMgF,EAAkBH,GAAmB5a,EAAY2I,CAAS,GAAK,CAAA,EAM/DvlB,EAAQ23B,EAAgB,OAAS/a,EAAW,OAAS,EAK3D,GAAI,CAAE,QAAAqX,EAAU,CAAC,EAAKrX,EACtBqX,EAAUA,EAAUtP,GAAsB3kB,CAAK,EAC/C,MAAMwlB,EAAYqR,GAAa9tC,EAAOw8B,EAAW59B,EAAQgwC,CAAe,EAMlEC,EAAiBpS,EAAU,CAAC,EAC5BqS,EAAiBrS,EAAUA,EAAU,OAAS,CAAC,EAC/CsS,EAAqB7B,GAAa1Q,EAAWqS,CAAc,EAC3Dd,EAAqBb,GAAa1Q,EAAWsS,CAAc,EAEjE,IAAI3vC,EAAU,CACV,UAAAs9B,EACA,SAAUz8B,EAAM,YAAW,EAC3B,KAAM,UACN,GAAG4uC,EACH,MAAO,CAAC1D,EACR,SAAWvkC,GAAM,CACb3G,EAAM,IAAI2G,CAAC,EACXioC,EAAgB,UAAYA,EAAgB,SAASjoC,CAAC,CAC1D,EACA,WAAY,IAAM,CACdijC,EAAU,EACVgF,EAAgB,YAAcA,EAAgB,WAAU,CAC5D,CACZ,EAsBQ,GAjBKT,GAAoBS,CAAe,IACpCzvC,EAAU,CACN,GAAGA,EACH,GAAG6tC,GAAqBxQ,EAAWr9B,CAAO,CAC1D,GAOYA,EAAQ,WACRA,EAAQ,SAAWy8B,GAAsBz8B,EAAQ,QAAQ,GAEzDA,EAAQ,cACRA,EAAQ,YAAcy8B,GAAsBz8B,EAAQ,WAAW,GAE/D,CAAC4vC,GACD,CAAChB,GACD/R,GAAsB,SACtB4S,EAAgB,OAAS,IACzBF,GAAmB,eAKnB,OAAO/B,GAEDxtC,CAAO,EAKjB,GAMA,CAAC00B,EAAW,WACR7zB,EAAM,OACNA,EAAM,MAAM,mBAAmB,aAK/B,CAACA,EAAM,MAAM,SAAQ,EAAG,SAAU,CAClC,MAAMgvC,EAAuB7C,GAA2BnsC,EAAOw8B,EAAWr9B,CAAO,EACjF,GAAI6vC,EACA,OAAOA,CACf,CAIA,OAAO3F,GAAalqC,CAAO,CAC/B,EC9GJ,SAAS8vC,GAAwBjvC,EAAO,CACpC,MAAO,GAAQurB,GAAcvrB,CAAK,GAAKA,EAAM,IACjD,CCDA,MAAMkvC,GAAqBvoC,GAAM,iBAAiB,KAAKA,CAAC,ECHxD,SAASwoC,GAAc3K,EAAKhxB,EAAM,CAC1BgxB,EAAI,QAAQhxB,CAAI,IAAM,IACtBgxB,EAAI,KAAKhxB,CAAI,CACrB,CACA,SAAS47B,GAAW5K,EAAKhxB,EAAM,CAC3B,MAAMjT,EAAQikC,EAAI,QAAQhxB,CAAI,EAC1BjT,EAAQ,IACRikC,EAAI,OAAOjkC,EAAO,CAAC,CAC3B,CCNA,MAAM8uC,EAAoB,CACtB,aAAc,CACV,KAAK,cAAgB,CAAA,CACzB,CACA,IAAIlZ,EAAS,CACT,OAAAgZ,GAAc,KAAK,cAAehZ,CAAO,EAClC,IAAMiZ,GAAW,KAAK,cAAejZ,CAAO,CACvD,CACA,OAAO3xB,EAAGC,EAAGgb,EAAG,CACZ,MAAM6vB,EAAmB,KAAK,cAAc,OAC5C,GAAKA,EAEL,GAAIA,IAAqB,EAIrB,KAAK,cAAc,CAAC,EAAE9qC,EAAGC,EAAGgb,CAAC,MAG7B,SAAS5gB,EAAI,EAAGA,EAAIywC,EAAkBzwC,IAAK,CAKvC,MAAMs3B,EAAU,KAAK,cAAct3B,CAAC,EACpCs3B,GAAWA,EAAQ3xB,EAAGC,EAAGgb,CAAC,CAC9B,CAER,CACA,SAAU,CACN,OAAO,KAAK,cAAc,MAC9B,CACA,OAAQ,CACJ,KAAK,cAAc,OAAS,CAChC,CACJ,CChCA,MAAM8vB,GAAWvvC,GACN,CAAC,MAAM,WAAWA,CAAK,CAAC,EAUnC,MAAMwvC,EAAY,CASd,YAAYhd,EAAMrzB,EAAU,GAAI,CAK5B,KAAK,QAAU,UAMf,KAAK,UAAY,EAMjB,KAAK,YAAc,EAQnB,KAAK,iBAAmB,GAIxB,KAAK,OAAS,CAAA,EACd,KAAK,gBAAkB,CAACwH,EAAG8oC,EAAS,KAAS,CACzC,KAAK,KAAO,KAAK,QACjB,KAAK,QAAU9oC,EAEf,KAAM,CAAE,MAAAlF,EAAO,UAAAi0B,CAAA,EAAcZ,EACzB,KAAK,cAAgBY,IACrB,KAAK,UAAYj0B,EACjB,KAAK,YAAci0B,EACnBE,EAAM,WAAW,KAAK,qBAAqB,GAG3C,KAAK,OAAS,KAAK,SAAW,KAAK,OAAO,QAC1C,KAAK,OAAO,OAAO,OAAO,KAAK,OAAO,EAGtC,KAAK,OAAO,gBACZ,KAAK,OAAO,eAAe,OAAO,KAAK,aAAa,EAGpD6Z,GAAU,KAAK,OAAO,eACtB,KAAK,OAAO,cAAc,OAAO,KAAK,OAAO,CAErD,EASA,KAAK,sBAAwB,IAAM7Z,EAAM,WAAW,KAAK,aAAa,EAUtE,KAAK,cAAgB,CAAC,CAAE,UAAAF,KAAgB,CAChCA,IAAc,KAAK,cACnB,KAAK,KAAO,KAAK,QACb,KAAK,OAAO,gBACZ,KAAK,OAAO,eAAe,OAAO,KAAK,aAAa,EAGhE,EACA,KAAK,YAAc,GACnB,KAAK,KAAO,KAAK,QAAUlD,EAC3B,KAAK,iBAAmB+c,GAAQ,KAAK,OAAO,EAC5C,KAAK,MAAQpwC,EAAQ,KACzB,CAyCA,SAASuwC,EAAc,CAInB,OAAO,KAAK,GAAG,SAAUA,CAAY,CACzC,CACA,GAAGxZ,EAAW1e,EAAU,CACf,KAAK,OAAO0e,CAAS,IACtB,KAAK,OAAOA,CAAS,EAAI,IAAImZ,IAEjC,MAAMM,EAAc,KAAK,OAAOzZ,CAAS,EAAE,IAAI1e,CAAQ,EACvD,OAAI0e,IAAc,SACP,IAAM,CACTyZ,EAAA,EAKA/Z,EAAM,KAAK,IAAM,CACR,KAAK,OAAO,OAAO,WACpB,KAAK,KAAA,CAEb,CAAC,CACL,EAEG+Z,CACX,CACA,gBAAiB,CACb,UAAWC,KAAiB,KAAK,OAC7B,KAAK,OAAOA,CAAa,EAAE,MAAA,CAEnC,CAMA,OAAOC,EAAeC,EAAmB,CACrC,KAAK,cAAgBD,EACrB,KAAK,kBAAoBC,CAC7B,CAgBA,IAAInpC,EAAG8oC,EAAS,GAAM,CACd,CAACA,GAAU,CAAC,KAAK,cACjB,KAAK,gBAAgB9oC,EAAG8oC,CAAM,EAG9B,KAAK,cAAc9oC,EAAG,KAAK,eAAe,CAElD,CACA,gBAAgB20B,EAAM96B,EAASiB,EAAO,CAClC,KAAK,IAAIjB,CAAO,EAChB,KAAK,KAAO86B,EACZ,KAAK,UAAY75B,CACrB,CAKA,KAAKkF,EAAG,CACJ,KAAK,gBAAgBA,CAAC,EACtB,KAAK,KAAOA,EACZ,KAAK,KAAA,EACD,KAAK,mBACL,KAAK,kBAAA,CACb,CAQA,KAAM,CAIF,OAAO,KAAK,OAChB,CAIA,aAAc,CACV,OAAO,KAAK,IAChB,CAQA,aAAc,CAEV,OAAO,KAAK,iBAEJo+B,GAAkB,WAAW,KAAK,OAAO,EACrC,WAAW,KAAK,IAAI,EAAG,KAAK,SAAS,EAC3C,CACV,CAaA,MAAMgL,EAAgB,CAClB,YAAK,KAAA,EACE,IAAI,QAAS78B,GAAY,CAC5B,KAAK,YAAc,GACnB,KAAK,UAAY68B,EAAe78B,CAAO,EACnC,KAAK,OAAO,gBACZ,KAAK,OAAO,eAAe,OAAA,CAEnC,CAAC,EAAE,KAAK,IAAM,CACN,KAAK,OAAO,mBACZ,KAAK,OAAO,kBAAkB,OAAA,EAElC,KAAK,eAAA,CACT,CAAC,CACL,CAMA,MAAO,CACC,KAAK,YACL,KAAK,UAAU,KAAA,EACX,KAAK,OAAO,iBACZ,KAAK,OAAO,gBAAgB,OAAA,GAGpC,KAAK,eAAA,CACT,CAMA,aAAc,CACV,MAAO,CAAC,CAAC,KAAK,SAClB,CACA,gBAAiB,CACb,OAAO,KAAK,SAChB,CAUA,SAAU,CACN,KAAK,eAAA,EACL,KAAK,KAAA,EACD,KAAK,mBACL,KAAK,kBAAA,CAEb,CACJ,CACA,SAAS88B,GAAYxd,EAAMrzB,EAAS,CAChC,OAAO,IAAIqwC,GAAYhd,EAAMrzB,CAAO,CACxC,CC3UA,MAAM8wC,GAAiBtpC,GAAOuK,GAASA,EAAK,KAAKvK,CAAC,ECA5CupC,GAAO,CACT,KAAOvpC,GAAMA,IAAM,OACnB,MAAQA,GAAMA,CAClB,ECEMwpC,GAAsB,CAACzjB,GAAQY,EAAID,GAASD,GAASI,GAAID,GAAI2iB,EAAI,EAIjEE,GAA0BzpC,GAAMwpC,GAAoB,KAAKF,GAActpC,CAAC,CAAC,ECJzE0pC,GAAa,CAAC,GAAGF,GAAqBzrB,EAAOge,EAAO,EAIpD4N,GAAiB3pC,GAAM0pC,GAAW,KAAKJ,GAActpC,CAAC,CAAC,ECC7D,SAAS4pC,GAAe1oB,EAAe9oB,EAAKiB,EAAO,CAC3C6nB,EAAc,SAAS9oB,CAAG,EAC1B8oB,EAAc,SAAS9oB,CAAG,EAAE,IAAIiB,CAAK,EAGrC6nB,EAAc,SAAS9oB,EAAKixC,GAAYhwC,CAAK,CAAC,CAEtD,CACA,SAASwwC,GAAU3oB,EAAeuK,EAAY,CAC1C,MAAMuB,EAAWgI,GAAe9T,EAAeuK,CAAU,EACzD,GAAI,CAAE,cAAAwB,EAAgB,CAAA,EAAI,WAAAC,EAAa,CAAA,EAAI,GAAGj1B,GAAW+0B,EAAW9L,EAAc,qBAAqB8L,EAAU,EAAK,EAAI,CAAA,EAC1H/0B,EAAS,CAAE,GAAGA,EAAQ,GAAGg1B,CAAa,EACtC,UAAW70B,KAAOH,EAAQ,CACtB,MAAMoB,EAAQ2yB,GAA6B/zB,EAAOG,CAAG,CAAC,EACtDwxC,GAAe1oB,EAAe9oB,EAAKiB,CAAK,CAC5C,CACJ,CAwBA,SAASywC,GAAwB5oB,EAAejpB,EAAQ8wB,EAAQ,CAC5D,IAAI1b,EAAIkF,EACR,MAAMw3B,EAAe,OAAO,KAAK9xC,CAAM,EAAE,OAAQG,GAAQ,CAAC8oB,EAAc,SAAS9oB,CAAG,CAAC,EAC/E4xC,EAAeD,EAAa,OAClC,GAAKC,EAEL,QAAS9xC,EAAI,EAAGA,EAAI8xC,EAAc9xC,IAAK,CACnC,MAAME,EAAM2xC,EAAa7xC,CAAC,EACpB+xC,EAAchyC,EAAOG,CAAG,EAC9B,IAAIiB,EAAQ,KAKR,MAAM,QAAQ4wC,CAAW,IACzB5wC,EAAQ4wC,EAAY,CAAC,GAOrB5wC,IAAU,OACVA,GAASkZ,GAAMlF,EAAK0b,EAAO3wB,CAAG,KAAO,MAAQiV,IAAO,OAASA,EAAK6T,EAAc,UAAU9oB,CAAG,KAAO,MAAQma,IAAO,OAASA,EAAKta,EAAOG,CAAG,GAMpHiB,GAAU,OAEjC,OAAOA,GAAU,WAChBkvC,GAAkBlvC,CAAK,GAAK4tC,GAAkB5tC,CAAK,GAEpDA,EAAQ,WAAWA,CAAK,EAEnB,CAACswC,GAActwC,CAAK,GAAK0iC,GAAQ,KAAKkO,CAAW,IACtD5wC,EAAQwiC,GAAkBzjC,EAAK6xC,CAAW,GAE9C/oB,EAAc,SAAS9oB,EAAKixC,GAAYhwC,EAAO,CAAE,MAAO6nB,CAAa,CAAE,CAAC,EACpE6H,EAAO3wB,CAAG,IAAM,SAChB2wB,EAAO3wB,CAAG,EAAIiB,GAEdA,IAAU,MACV6nB,EAAc,cAAc9oB,EAAKiB,CAAK,EAC9C,CACJ,CACA,SAAS6wC,GAAwB9xC,EAAK80B,EAAY,CAC9C,OAAKA,GAEmBA,EAAW90B,CAAG,GAAK80B,EAAW,SAAcA,GAC7C,KAFnB,MAGR,CACA,SAASid,GAAUlyC,EAAQi1B,EAAYhM,EAAe,CAClD,MAAM6H,EAAS,CAAA,EACf,UAAW3wB,KAAOH,EAAQ,CACtB,MAAMmyC,EAAmBF,GAAwB9xC,EAAK80B,CAAU,EAChE,GAAIkd,IAAqB,OACrBrhB,EAAO3wB,CAAG,EAAIgyC,MAEb,CACD,MAAM/wC,EAAQ6nB,EAAc,SAAS9oB,CAAG,EACpCiB,IACA0vB,EAAO3wB,CAAG,EAAIiB,EAAM,IAAG,EAE/B,CACJ,CACA,OAAO0vB,CACX,CC3GA,SAASshB,GAAqB,CAAE,cAAAC,EAAe,eAAAC,CAAc,EAAInyC,EAAK,CAClE,MAAMoyC,EAAcF,EAAc,eAAelyC,CAAG,GAAKmyC,EAAenyC,CAAG,IAAM,GACjF,OAAAmyC,EAAenyC,CAAG,EAAI,GACfoyC,CACX,CACA,SAASC,GAAoBpxC,EAAOpB,EAAQ,CACxC,MAAM4B,EAAUR,EAAM,IAAG,EACzB,GAAI,MAAM,QAAQpB,CAAM,GACpB,QAAS,EAAI,EAAG,EAAIA,EAAO,OAAQ,IAC/B,GAAIA,EAAO,CAAC,IAAM4B,EACd,MAAO,OAIf,QAAOA,IAAY5B,CAE3B,CACA,SAASyyC,GAAcxpB,EAAeuK,EAAY,CAAE,MAAAnb,EAAQ,EAAG,mBAAAq6B,EAAoB,KAAApgC,CAAI,EAAK,GAAI,CAC5F,GAAI,CAAE,WAAA2iB,EAAahM,EAAc,uBAAwB,cAAA+L,EAAe,GAAGh1B,GAAWipB,EAAc,qBAAqBuK,CAAU,EACnI,MAAMmf,EAAa1pB,EAAc,SAAS,YAAY,EAClDypB,IACAzd,EAAayd,GACjB,MAAME,EAAa,CAAA,EACbC,EAAqBvgC,GACvB2W,EAAc,gBACdA,EAAc,eAAe,SAAQ,EAAG3W,CAAI,EAChD,UAAWnS,KAAOH,EAAQ,CACtB,MAAMoB,EAAQ6nB,EAAc,SAAS9oB,CAAG,EAClC+0B,EAAcl1B,EAAOG,CAAG,EAC9B,GAAI,CAACiB,GACD8zB,IAAgB,QACf2d,GACGT,GAAqBS,EAAoB1yC,CAAG,EAChD,SAEJ,MAAM6vC,EAAkB,CACpB,MAAA33B,EACA,QAAS,EACT,GAAGw3B,GAAmB5a,GAAc,CAAA,EAAI90B,CAAG,CACvD,EAKQ,GAAI,OAAO,wBAAyB,CAChC,MAAM2yC,EAAW7pB,EAAc,SAAQ,EAAGX,EAA4B,EACtE,GAAIwqB,EAAU,CACV,MAAMxG,EAAU,OAAO,wBAAwBwG,EAAU3yC,EAAKiB,EAAO41B,CAAK,EACtEsV,IAAY,OACZ0D,EAAgB,QAAU1D,EAC1B0D,EAAgB,UAAY,GAEpC,CACJ,CACA,IAAI+C,EAAU,CAAC/C,EAAgB,WAC3B,CAACwC,GAAoBpxC,EAAO8zB,CAAW,EAa3C,GAZI8a,EAAgB,OAAS,WACxB5uC,EAAM,YAAW,GAAM4uC,EAAgB,YACxC+C,EAAU,IAOV3xC,EAAM,YACN2xC,EAAU,IAEVA,EACA,SACJ3xC,EAAM,MAAM2uC,GAAmB5vC,EAAKiB,EAAO8zB,EAAajM,EAAc,oBAAsBuD,GAAe,IAAIrsB,CAAG,EAC5G,CAAE,KAAM,EAAK,EACb6vC,CAAe,CAAC,EACtB,MAAMrC,EAAYvsC,EAAM,UACpBivC,GAAwBsC,CAAU,IAClCA,EAAW,IAAIxyC,CAAG,EAClBwtC,EAAU,KAAK,IAAMgF,EAAW,OAAOxyC,CAAG,CAAC,GAE/CyyC,EAAW,KAAKjF,CAAS,CAC7B,CACA,OAAI3Y,GACA,QAAQ,IAAI4d,CAAU,EAAE,KAAK,IAAM,CAC/B5d,GAAiB4c,GAAU3oB,EAAe+L,CAAa,CAC3D,CAAC,EAEE4d,CACX,CCjGA,SAASI,GAAe/pB,EAAegqB,EAAS1yC,EAAU,CAAA,EAAI,CAC1D,MAAMw0B,EAAWgI,GAAe9T,EAAegqB,EAAS1yC,EAAQ,MAAM,EACtE,GAAI,CAAE,WAAA00B,EAAahM,EAAc,qBAAoB,GAAM,CAAA,CAAE,EAAK8L,GAAY,CAAA,EAC1Ex0B,EAAQ,qBACR00B,EAAa10B,EAAQ,oBAMzB,MAAM2yC,EAAene,EACf,IAAM,QAAQ,IAAI0d,GAAcxpB,EAAe8L,EAAUx0B,CAAO,CAAC,EACjE,IAAM,QAAQ,QAAO,EAKrB4yC,EAAqBlqB,EAAc,iBAAmBA,EAAc,gBAAgB,KACpF,CAACmqB,EAAe,IAAM,CACpB,KAAM,CAAE,cAAA1D,EAAgB,EAAG,gBAAAC,EAAiB,iBAAAC,CAAgB,EAAM3a,EAClE,OAAOoe,GAAgBpqB,EAAegqB,EAASvD,EAAgB0D,EAAczD,EAAiBC,EAAkBrvC,CAAO,CAC3H,EACE,IAAM,QAAQ,QAAO,EAKrB,CAAE,KAAAivC,CAAI,EAAKva,EACjB,GAAIua,EAAM,CACN,KAAM,CAACnqC,EAAOiuC,CAAI,EAAI9D,IAAS,iBACzB,CAAC0D,EAAcC,CAAkB,EACjC,CAACA,EAAoBD,CAAY,EACvC,OAAO7tC,EAAK,EAAG,KAAK,IAAMiuC,EAAI,CAAE,CACpC,KAEI,QAAO,QAAQ,IAAI,CAACJ,EAAY,EAAIC,EAAmB5yC,EAAQ,KAAK,CAAC,CAAC,CAE9E,CACA,SAAS8yC,GAAgBpqB,EAAegqB,EAASvD,EAAgB,EAAGC,EAAkB,EAAGC,EAAmB,EAAGrvC,EAAS,CACpH,MAAMqyC,EAAa,CAAA,EACbW,GAAsBtqB,EAAc,gBAAgB,KAAO,GAAK0mB,EAChE6D,EAA0B5D,IAAqB,EAC/C,CAAC3vC,EAAI,IAAMA,EAAI0vC,EACf,CAAC1vC,EAAI,IAAMszC,EAAqBtzC,EAAI0vC,EAC1C,aAAM,KAAK1mB,EAAc,eAAe,EACnC,KAAKwqB,EAAe,EACpB,QAAQ,CAACpa,EAAOp5B,IAAM,CACvBo5B,EAAM,OAAO,iBAAkB4Z,CAAO,EACtCL,EAAW,KAAKI,GAAe3Z,EAAO4Z,EAAS,CAC3C,GAAG1yC,EACH,MAAOmvC,EAAgB8D,EAAwBvzC,CAAC,CAC5D,CAAS,EAAE,KAAK,IAAMo5B,EAAM,OAAO,oBAAqB4Z,CAAO,CAAC,CAAC,CAC7D,CAAC,EACM,QAAQ,IAAIL,CAAU,CACjC,CACA,SAASa,GAAgB7tC,EAAGC,EAAG,CAC3B,OAAOD,EAAE,iBAAiBC,CAAC,CAC/B,CCxDA,SAAS6tC,GAAqBzqB,EAAeuK,EAAYjzB,EAAU,CAAA,EAAI,CACnE0oB,EAAc,OAAO,iBAAkBuK,CAAU,EACjD,IAAIma,EACJ,GAAI,MAAM,QAAQna,CAAU,EAAG,CAC3B,MAAMof,EAAapf,EAAW,IAAKyf,GAAYD,GAAe/pB,EAAegqB,EAAS1yC,CAAO,CAAC,EAC9FotC,EAAY,QAAQ,IAAIiF,CAAU,CACtC,SACS,OAAOpf,GAAe,SAC3Bma,EAAYqF,GAAe/pB,EAAeuK,EAAYjzB,CAAO,MAE5D,CACD,MAAMozC,EAAqB,OAAOngB,GAAe,WAC3CuJ,GAAe9T,EAAeuK,EAAYjzB,EAAQ,MAAM,EACxDizB,EACNma,EAAY,QAAQ,IAAI8E,GAAcxpB,EAAe0qB,EAAoBpzC,CAAO,CAAC,CACrF,CACA,OAAOotC,EAAU,KAAK,IAAM1kB,EAAc,OAAO,oBAAqBuK,CAAU,CAAC,CACrF,CCbA,MAAMogB,GAAuB,CAAC,GAAGjqB,EAAoB,EAAE,QAAO,EACxDkqB,GAAoBlqB,GAAqB,OAC/C,SAASmqB,GAAY7qB,EAAe,CAChC,OAAQ2pB,GAAe,QAAQ,IAAIA,EAAW,IAAI,CAAC,CAAE,UAAAjF,EAAW,QAAAptC,CAAO,IAAOmzC,GAAqBzqB,EAAe0kB,EAAWptC,CAAO,CAAC,CAAC,CAC1I,CACA,SAASwzC,GAAqB9qB,EAAe,CACzC,IAAIiB,EAAU4pB,GAAY7qB,CAAa,EACvC,MAAMpnB,EAAQmyC,GAAW,EACzB,IAAIC,EAAkB,GAKtB,MAAMC,EAA0B,CAACxd,EAAKlD,IAAe,CACjD,MAAMuB,EAAWgI,GAAe9T,EAAeuK,CAAU,EACzD,GAAIuB,EAAU,CACV,KAAM,CAAE,WAAAE,EAAY,cAAAD,EAAe,GAAGh1B,CAAM,EAAK+0B,EACjD2B,EAAM,CAAE,GAAGA,EAAK,GAAG12B,EAAQ,GAAGg1B,CAAa,CAC/C,CACA,OAAO0B,CACX,EAKA,SAASyd,EAAmBC,EAAc,CACtClqB,EAAUkqB,EAAanrB,CAAa,CACxC,CAWA,SAASorB,EAAe9zC,EAAS+zC,EAAmB,CAChD,MAAMtnC,EAAQic,EAAc,SAAQ,EAC9BjO,EAAUiO,EAAc,kBAAkB,EAAI,GAAK,CAAA,EAKnD2pB,EAAa,CAAA,EAKb2B,EAAc,IAAI,IAMxB,IAAIC,EAAkB,CAAA,EAKlBC,EAAsB,IAO1B,QAASx0C,EAAI,EAAGA,EAAI4zC,GAAmB5zC,IAAK,CACxC,MAAMqS,EAAOshC,GAAqB3zC,CAAC,EAC7By0C,EAAY7yC,EAAMyQ,CAAI,EACtBgY,EAAOtd,EAAMsF,CAAI,IAAM,OAAYtF,EAAMsF,CAAI,EAAI0I,EAAQ1I,CAAI,EAC7DqiC,EAAgBlrB,GAAea,CAAI,EAKnCsqB,EAActiC,IAASgiC,EAAoBI,EAAU,SAAW,KAClEE,IAAgB,KAChBH,EAAsBx0C,GAO1B,IAAI40C,EAAcvqB,IAAStP,EAAQ1I,CAAI,GAAKgY,IAAStd,EAAMsF,CAAI,GAAKqiC,EAepE,GAXIE,GACAZ,GACAhrB,EAAc,yBACd4rB,EAAc,IAMlBH,EAAU,cAAgB,CAAE,GAAGF,CAAe,EAI7C,CAACE,EAAU,UAAYE,IAAgB,MAEnC,CAACtqB,GAAQ,CAACoqB,EAAU,UAErBhrB,GAAoBY,CAAI,GACxB,OAAOA,GAAS,UAChB,SAQJ,IAAIwqB,EADqBC,GAAuBL,EAAU,SAAUpqB,CAAI,GAGnEhY,IAASgiC,GACNI,EAAU,UACV,CAACG,GACDF,GAEH10C,EAAIw0C,GAAuBE,EAC5BK,EAAuB,GAK3B,MAAMC,EAAiB,MAAM,QAAQ3qB,CAAI,EAAIA,EAAO,CAACA,CAAI,EAKzD,IAAI4qB,GAAiBD,EAAe,OAAOf,EAAyB,CAAA,CAAE,EAClEU,IAAgB,KAChBM,GAAiB,CAAA,GAUrB,KAAM,CAAE,mBAAAC,GAAqB,CAAA,CAAE,EAAKT,EAC9BU,EAAU,CACZ,GAAGD,GACH,GAAGD,EACnB,EACkBG,GAAiBl1C,GAAQ,CAC3B20C,EAAoB,GAChBP,EAAY,IAAIp0C,CAAG,IACnB60C,EAAuB,GACvBT,EAAY,OAAOp0C,CAAG,GAE1Bu0C,EAAU,eAAev0C,CAAG,EAAI,EACpC,EACA,UAAWA,KAAOi1C,EAAS,CACvB,MAAM3Y,GAAOyY,GAAe/0C,CAAG,EACzBu8B,EAAOyY,GAAmBh1C,CAAG,EAEnC,GAAIq0C,EAAgB,eAAer0C,CAAG,EAClC,SAIJ,IAAIm1C,EAAkB,GAClBzhB,GAAkB4I,EAAI,GAAK5I,GAAkB6I,CAAI,EACjD4Y,EAAkB,CAAC9Y,GAAeC,GAAMC,CAAI,EAG5C4Y,EAAkB7Y,KAASC,EAE3B4Y,EACI7Y,KAAS,OAET4Y,GAAcl1C,CAAG,EAIjBo0C,EAAY,IAAIp0C,CAAG,EAGlBs8B,KAAS,QAAa8X,EAAY,IAAIp0C,CAAG,EAK9Ck1C,GAAcl1C,CAAG,EAOjBu0C,EAAU,cAAcv0C,CAAG,EAAI,EAEvC,CAKAu0C,EAAU,SAAWpqB,EACrBoqB,EAAU,mBAAqBQ,GAI3BR,EAAU,WACVF,EAAkB,CAAE,GAAGA,EAAiB,GAAGU,EAAc,GAEzDjB,GAAmBhrB,EAAc,wBACjC6rB,EAAoB,IAKpBA,IAAsB,CAACD,GAAeG,IACtCpC,EAAW,KAAK,GAAGqC,EAAe,IAAKtH,IAAe,CAClD,UAAWA,EACX,QAAS,CAAE,KAAAr7B,EAAM,GAAG/R,CAAO,CAC/C,EAAkB,CAAC,CAEX,CAMA,GAAIg0C,EAAY,KAAM,CAClB,MAAMgB,EAAoB,CAAA,EAC1BhB,EAAY,QAASp0C,GAAQ,CACzB,MAAMq1C,EAAiBvsB,EAAc,cAAc9oB,CAAG,EAClDq1C,IAAmB,SACnBD,EAAkBp1C,CAAG,EAAIq1C,EAEjC,CAAC,EACD5C,EAAW,KAAK,CAAE,UAAW2C,CAAiB,CAAE,CACpD,CACA,IAAIE,EAAgB,EAAQ7C,EAAW,OACvC,OAAIqB,IACCjnC,EAAM,UAAY,IAASA,EAAM,UAAYA,EAAM,UACpD,CAACic,EAAc,yBACfwsB,EAAgB,IAEpBxB,EAAkB,GACXwB,EAAgBvrB,EAAQ0oB,CAAU,EAAI,QAAQ,QAAO,CAChE,CAIA,SAAS8C,EAAUpjC,EAAMQ,EAAUvS,EAAS,CACxC,IAAI6U,EAEJ,GAAIvT,EAAMyQ,CAAI,EAAE,WAAaQ,EACzB,OAAO,QAAQ,QAAO,GAEzBsC,EAAK6T,EAAc,mBAAqB,MAAQ7T,IAAO,QAAkBA,EAAG,QAASikB,GAAU,CAAE,IAAIjkB,EAAI,OAAQA,EAAKikB,EAAM,kBAAoB,MAAQjkB,IAAO,OAAS,OAASA,EAAG,UAAU9C,EAAMQ,CAAQ,CAAG,CAAC,EACjNjR,EAAMyQ,CAAI,EAAE,SAAWQ,EACvB,MAAM8/B,EAAayB,EAAe9zC,EAAS+R,CAAI,EAC/C,UAAWnS,KAAO0B,EACdA,EAAM1B,CAAG,EAAE,cAAgB,CAAA,EAE/B,OAAOyyC,CACX,CACA,MAAO,CACH,eAAAyB,EACA,UAAAqB,EACA,mBAAAvB,EACA,SAAU,IAAMtyC,CACxB,CACA,CACA,SAASkzC,GAAuBrY,EAAMD,EAAM,CACxC,OAAI,OAAOA,GAAS,SACTA,IAASC,EAEX,MAAM,QAAQD,CAAI,EAChB,CAACD,GAAeC,EAAMC,CAAI,EAE9B,EACX,CACA,SAASiZ,GAAgB7iC,EAAW,GAAO,CACvC,MAAO,CACH,SAAAA,EACA,cAAe,CAAA,EACf,eAAgB,CAAA,EAChB,mBAAoB,CAAA,CAC5B,CACA,CACA,SAASkhC,IAAc,CACnB,MAAO,CACH,QAAS2B,GAAgB,EAAI,EAC7B,YAAaA,GAAe,EAC5B,WAAYA,GAAe,EAC3B,SAAUA,GAAe,EACzB,UAAWA,GAAe,EAC1B,WAAYA,GAAe,EAC3B,KAAMA,GAAe,CAC7B,CACA,CCjTA,MAAMC,WAAyBjd,EAAQ,CAMnC,YAAYC,EAAM,CACd,MAAMA,CAAI,EACVA,EAAK,iBAAmBA,EAAK,eAAiBmb,GAAqBnb,CAAI,EAC3E,CACA,qCAAsC,CAClC,KAAM,CAAE,QAAA1O,CAAO,EAAK,KAAK,KAAK,SAAQ,EACtC,KAAK,QAAO,EACRR,GAAoBQ,CAAO,IAC3B,KAAK,QAAUA,EAAQ,UAAU,KAAK,IAAI,EAElD,CAIA,OAAQ,CACJ,KAAK,oCAAmC,CAC5C,CACA,QAAS,CACL,KAAM,CAAE,QAAAA,CAAO,EAAK,KAAK,KAAK,SAAQ,EAChC,CAAE,QAAS2rB,CAAW,EAAK,KAAK,KAAK,WAAa,CAAA,EACpD3rB,IAAY2rB,GACZ,KAAK,oCAAmC,CAEhD,CACA,SAAU,CAAE,CAChB,CCjCA,IAAI7mC,GAAK,EACT,MAAM8mC,WAA6Bnd,EAAQ,CACvC,aAAc,CACV,MAAM,GAAG,SAAS,EAClB,KAAK,GAAK3pB,IACd,CACA,QAAS,CACL,GAAI,CAAC,KAAK,KAAK,gBACX,OACJ,KAAM,CAAE,UAAA+mC,EAAW,eAAAC,EAAgB,OAAAlqB,CAAM,EAAK,KAAK,KAAK,gBAClD,CAAE,UAAWmqB,CAAa,EAAK,KAAK,KAAK,qBAAuB,CAAA,EACtE,GAAI,CAAC,KAAK,KAAK,gBAAkBF,IAAcE,EAC3C,OAEJ,MAAMC,EAAgB,KAAK,KAAK,eAAe,UAAU,OAAQ,CAACH,EAAW,CAAE,OAAQjqB,GAAgD,KAAK,KAAK,WAAW,OAAQ,EAChKkqB,GAAkB,CAACD,GACnBG,EAAc,KAAK,IAAMF,EAAe,KAAK,EAAE,CAAC,CAExD,CACA,OAAQ,CACJ,KAAM,CAAE,SAAAG,CAAQ,EAAK,KAAK,KAAK,iBAAmB,CAAA,EAC9CA,IACA,KAAK,QAAUA,EAAS,KAAK,EAAE,EAEvC,CACA,SAAU,CAAE,CAChB,CCzBA,MAAMvD,GAAa,CACf,UAAW,CACP,QAASgD,EACjB,EACI,KAAM,CACF,QAASE,EACjB,CACA,ECVMM,GAAW,CAACxwC,EAAGC,IAAM,KAAK,IAAID,EAAIC,CAAC,EACzC,SAASwwC,GAAWzwC,EAAGC,EAAG,CAEtB,MAAMywC,EAASF,GAASxwC,EAAE,EAAGC,EAAE,CAAC,EAC1B0wC,EAASH,GAASxwC,EAAE,EAAGC,EAAE,CAAC,EAChC,OAAO,KAAK,KAAKywC,GAAU,EAAIC,GAAU,CAAC,CAC9C,CCKA,MAAMC,EAAW,CACb,YAAYj6B,EAAOk6B,EAAU,CAAE,mBAAAC,EAAoB,cAAAC,EAAe,iBAAAC,EAAmB,EAAK,EAAK,GAAI,CAgE/F,GA5DA,KAAK,WAAa,KAIlB,KAAK,cAAgB,KAIrB,KAAK,kBAAoB,KAIzB,KAAK,SAAW,CAAA,EAIhB,KAAK,cAAgB,OACrB,KAAK,YAAc,IAAM,CACrB,GAAI,EAAE,KAAK,eAAiB,KAAK,mBAC7B,OACJ,MAAM5d,EAAO6d,GAAW,KAAK,kBAAmB,KAAK,OAAO,EACtDC,EAAe,KAAK,aAAe,KAInCC,EAA0BV,GAAWrd,EAAK,OAAQ,CAAE,EAAG,EAAG,EAAG,CAAC,CAAE,GAAK,EAC3E,GAAI,CAAC8d,GAAgB,CAACC,EAClB,OACJ,KAAM,CAAE,MAAAC,CAAK,EAAKhe,EACZ,CAAE,UAAAlC,CAAS,EAAKZ,EACtB,KAAK,QAAQ,KAAK,CAAE,GAAG8gB,EAAO,UAAAlgB,CAAS,CAAE,EACzC,KAAM,CAAE,QAAAmgB,EAAS,OAAAC,CAAM,EAAK,KAAK,SAC5BJ,IACDG,GAAWA,EAAQ,KAAK,cAAeje,CAAI,EAC3C,KAAK,WAAa,KAAK,eAE3Bke,GAAUA,EAAO,KAAK,cAAele,CAAI,CAC7C,EACA,KAAK,kBAAoB,CAACzc,EAAOyc,IAAS,CACtC,KAAK,cAAgBzc,EACrB,KAAK,kBAAoB46B,GAAene,EAAM,KAAK,kBAAkB,EAErEhC,EAAM,OAAO,KAAK,YAAa,EAAI,CACvC,EACA,KAAK,gBAAkB,CAACza,EAAOyc,IAAS,CACpC,KAAK,IAAG,EACR,KAAM,CAAE,MAAAoe,EAAO,aAAAC,EAAc,gBAAAC,CAAe,EAAK,KAAK,SAGtD,GAFI,KAAK,kBACLA,GAAmBA,EAAe,EAClC,EAAE,KAAK,eAAiB,KAAK,mBAC7B,OACJ,MAAMC,EAAUV,GAAWt6B,EAAM,OAAS,gBACpC,KAAK,kBACL46B,GAAene,EAAM,KAAK,kBAAkB,EAAG,KAAK,OAAO,EAC7D,KAAK,YAAcoe,GACnBA,EAAM76B,EAAOg7B,CAAO,EAExBF,GAAgBA,EAAa96B,EAAOg7B,CAAO,CAC/C,EAEI,CAAC/f,GAAiBjb,CAAK,EACvB,OACJ,KAAK,iBAAmBq6B,EACxB,KAAK,SAAWH,EAChB,KAAK,mBAAqBC,EAC1B,KAAK,cAAgBC,GAAiB,OACtC,MAAM3d,EAAOvB,GAAiBlb,CAAK,EAC7Bi7B,EAAcL,GAAene,EAAM,KAAK,kBAAkB,EAC1D,CAAE,MAAAge,CAAK,EAAKQ,EACZ,CAAE,UAAA1gB,CAAS,EAAKZ,EACtB,KAAK,QAAU,CAAC,CAAE,GAAG8gB,EAAO,UAAAlgB,CAAS,CAAE,EACvC,KAAM,CAAE,eAAA2gB,CAAc,EAAKhB,EAC3BgB,GACIA,EAAel7B,EAAOs6B,GAAWW,EAAa,KAAK,OAAO,CAAC,EAC/D,KAAK,gBAAkB1f,GAAKF,GAAgB,KAAK,cAAe,cAAe,KAAK,iBAAiB,EAAGA,GAAgB,KAAK,cAAe,YAAa,KAAK,eAAe,EAAGA,GAAgB,KAAK,cAAe,gBAAiB,KAAK,eAAe,CAAC,CAC9P,CACA,eAAe6e,EAAU,CACrB,KAAK,SAAWA,CACpB,CACA,KAAM,CACF,KAAK,iBAAmB,KAAK,gBAAe,EAC5Cxf,GAAY,KAAK,WAAW,CAChC,CACJ,CACA,SAASkgB,GAAene,EAAM0d,EAAoB,CAC9C,OAAOA,EAAqB,CAAE,MAAOA,EAAmB1d,EAAK,KAAK,CAAC,EAAKA,CAC5E,CACA,SAAS0e,GAAc9xC,EAAGC,EAAG,CACzB,MAAO,CAAE,EAAGD,EAAE,EAAIC,EAAE,EAAG,EAAGD,EAAE,EAAIC,EAAE,CAAC,CACvC,CACA,SAASgxC,GAAW,CAAE,MAAAG,CAAK,EAAIl0C,EAAS,CACpC,MAAO,CACH,MAAAk0C,EACA,MAAOU,GAAcV,EAAOW,GAAgB70C,CAAO,CAAC,EACpD,OAAQ40C,GAAcV,EAAOY,GAAiB90C,CAAO,CAAC,EACtD,SAAU+5B,GAAY/5B,EAAS,EAAG,CAC1C,CACA,CACA,SAAS80C,GAAiB90C,EAAS,CAC/B,OAAOA,EAAQ,CAAC,CACpB,CACA,SAAS60C,GAAgB70C,EAAS,CAC9B,OAAOA,EAAQA,EAAQ,OAAS,CAAC,CACrC,CACA,SAAS+5B,GAAY/5B,EAAS+0C,EAAW,CACrC,GAAI/0C,EAAQ,OAAS,EACjB,MAAO,CAAE,EAAG,EAAG,EAAG,CAAC,EAEvB,IAAI7C,EAAI6C,EAAQ,OAAS,EACrBg1C,EAAmB,KACvB,MAAMC,EAAYJ,GAAgB70C,CAAO,EACzC,KAAO7C,GAAK,IACR63C,EAAmBh1C,EAAQ7C,CAAC,EACxB,EAAA83C,EAAU,UAAYD,EAAiB,UACvC9a,GAAsB6a,CAAS,KAGnC53C,IAEJ,GAAI,CAAC63C,EACD,MAAO,CAAE,EAAG,EAAG,EAAG,CAAC,EAEvB,MAAME,EAAO9a,GAAsB6a,EAAU,UAAYD,EAAiB,SAAS,EACnF,GAAIE,IAAS,EACT,MAAO,CAAE,EAAG,EAAG,EAAG,CAAC,EAEvB,MAAMtkB,EAAkB,CACpB,GAAIqkB,EAAU,EAAID,EAAiB,GAAKE,EACxC,GAAID,EAAU,EAAID,EAAiB,GAAKE,CAChD,EACI,OAAItkB,EAAgB,IAAM,MACtBA,EAAgB,EAAI,GAEpBA,EAAgB,IAAM,MACtBA,EAAgB,EAAI,GAEjBA,CACX,CCvJA,SAASukB,GAAWC,EAAM,CACtB,OAAOA,EAAK,IAAMA,EAAK,GAC3B,CACA,SAASC,GAAO/2C,EAAOpB,EAAS,EAAGo4C,EAAc,IAAM,CACnD,OAAO,KAAK,IAAIh3C,EAAQpB,CAAM,GAAKo4C,CACvC,CACA,SAASC,GAAcx1C,EAAO3C,EAAQF,EAAQ8wB,EAAS,GAAK,CACxDjuB,EAAM,OAASiuB,EACfjuB,EAAM,YAAc++B,EAAI1hC,EAAO,IAAKA,EAAO,IAAK2C,EAAM,MAAM,EAC5DA,EAAM,MAAQo1C,GAAWj4C,CAAM,EAAIi4C,GAAW/3C,CAAM,GAChDi4C,GAAOt1C,EAAM,MAAO,EAAG,IAAM,GAAK,MAAMA,EAAM,KAAK,KACnDA,EAAM,MAAQ,GAClBA,EAAM,UACF++B,EAAI5hC,EAAO,IAAKA,EAAO,IAAK6C,EAAM,MAAM,EAAIA,EAAM,aAClDs1C,GAAOt1C,EAAM,SAAS,GAAK,MAAMA,EAAM,SAAS,KAChDA,EAAM,UAAY,EAC1B,CACA,SAASy1C,GAAaz1C,EAAO3C,EAAQF,EAAQ8wB,EAAQ,CACjDunB,GAAcx1C,EAAM,EAAG3C,EAAO,EAAGF,EAAO,EAAG8wB,EAASA,EAAO,QAAU,MAAS,EAC9EunB,GAAcx1C,EAAM,EAAG3C,EAAO,EAAGF,EAAO,EAAG8wB,EAASA,EAAO,QAAU,MAAS,CAClF,CACA,SAASynB,GAAiBv4C,EAAQw4C,EAAU9vB,EAAQ,CAChD1oB,EAAO,IAAM0oB,EAAO,IAAM8vB,EAAS,IACnCx4C,EAAO,IAAMA,EAAO,IAAMi4C,GAAWO,CAAQ,CACjD,CACA,SAASC,GAAgBz4C,EAAQw4C,EAAU9vB,EAAQ,CAC/C6vB,GAAiBv4C,EAAO,EAAGw4C,EAAS,EAAG9vB,EAAO,CAAC,EAC/C6vB,GAAiBv4C,EAAO,EAAGw4C,EAAS,EAAG9vB,EAAO,CAAC,CACnD,CACA,SAASgwB,GAAyB14C,EAAQ0sB,EAAQhE,EAAQ,CACtD1oB,EAAO,IAAM0sB,EAAO,IAAMhE,EAAO,IACjC1oB,EAAO,IAAMA,EAAO,IAAMi4C,GAAWvrB,CAAM,CAC/C,CACA,SAASisB,GAAqB34C,EAAQ0sB,EAAQhE,EAAQ,CAClDgwB,GAAyB14C,EAAO,EAAG0sB,EAAO,EAAGhE,EAAO,CAAC,EACrDgwB,GAAyB14C,EAAO,EAAG0sB,EAAO,EAAGhE,EAAO,CAAC,CACzD,CC5BA,SAASkwB,GAAiB5B,EAAO,CAAE,IAAAnpB,EAAK,IAAAhZ,CAAG,EAAIgkC,EAAS,CACpD,OAAIhrB,IAAQ,QAAampB,EAAQnpB,EAE7BmpB,EAAQ6B,EAAUjX,EAAI/T,EAAKmpB,EAAO6B,EAAQ,GAAG,EAAI,KAAK,IAAI7B,EAAOnpB,CAAG,EAE/DhZ,IAAQ,QAAamiC,EAAQniC,IAElCmiC,EAAQ6B,EAAUjX,EAAI/sB,EAAKmiC,EAAO6B,EAAQ,GAAG,EAAI,KAAK,IAAI7B,EAAOniC,CAAG,GAEjEmiC,CACX,CAMA,SAAS8B,GAA4BZ,EAAMrqB,EAAKhZ,EAAK,CACjD,MAAO,CACH,IAAKgZ,IAAQ,OAAYqqB,EAAK,IAAMrqB,EAAM,OAC1C,IAAKhZ,IAAQ,OACPqjC,EAAK,IAAMrjC,GAAOqjC,EAAK,IAAMA,EAAK,KAClC,MACd,CACA,CAKA,SAASa,GAAwBC,EAAW,CAAE,IAAAC,EAAK,KAAAC,EAAM,OAAAC,EAAQ,MAAAC,GAAS,CACtE,MAAO,CACH,EAAGN,GAA4BE,EAAU,EAAGE,EAAME,CAAK,EACvD,EAAGN,GAA4BE,EAAU,EAAGC,EAAKE,CAAM,CAC/D,CACA,CAIA,SAASE,GAA4BC,EAAYC,EAAiB,CAC9D,IAAI1rB,EAAM0rB,EAAgB,IAAMD,EAAW,IACvCzkC,EAAM0kC,EAAgB,IAAMD,EAAW,IAG3C,OAAIC,EAAgB,IAAMA,EAAgB,IACtCD,EAAW,IAAMA,EAAW,MAC5B,CAACzrB,EAAKhZ,CAAG,EAAI,CAACA,EAAKgZ,CAAG,GAEnB,CAAE,IAAAA,EAAK,IAAAhZ,CAAG,CACrB,CAIA,SAAS2kC,GAAwBR,EAAWS,EAAgB,CACxD,MAAO,CACH,EAAGJ,GAA4BL,EAAU,EAAGS,EAAe,CAAC,EAC5D,EAAGJ,GAA4BL,EAAU,EAAGS,EAAe,CAAC,CACpE,CACA,CAKA,SAAS5oB,GAAW3wB,EAAQF,EAAQ,CAChC,IAAI8wB,EAAS,GACb,MAAM4oB,EAAezB,GAAW/3C,CAAM,EAChCy5C,EAAe1B,GAAWj4C,CAAM,EACtC,OAAI25C,EAAeD,EACf5oB,EAAS+Q,GAAS7hC,EAAO,IAAKA,EAAO,IAAM05C,EAAcx5C,EAAO,GAAG,EAE9Dw5C,EAAeC,IACpB7oB,EAAS+Q,GAAS3hC,EAAO,IAAKA,EAAO,IAAMy5C,EAAc35C,EAAO,GAAG,GAEhE4tB,GAAM,EAAG,EAAGkD,CAAM,CAC7B,CAIA,SAAS8oB,GAAsBltB,EAAQmtB,EAAa,CAChD,MAAMC,EAAsB,CAAA,EAC5B,OAAID,EAAY,MAAQ,SACpBC,EAAoB,IAAMD,EAAY,IAAMntB,EAAO,KAEnDmtB,EAAY,MAAQ,SACpBC,EAAoB,IAAMD,EAAY,IAAMntB,EAAO,KAEhDotB,CACX,CACA,MAAMC,GAAiB,IAIvB,SAASC,GAAmBC,EAAcF,GAAgB,CACtD,OAAIE,IAAgB,GAChBA,EAAc,EAETA,IAAgB,KACrBA,EAAcF,IAEX,CACH,EAAGG,GAAmBD,EAAa,OAAQ,OAAO,EAClD,EAAGC,GAAmBD,EAAa,MAAO,QAAQ,CAC1D,CACA,CACA,SAASC,GAAmBD,EAAaE,EAAUC,EAAU,CACzD,MAAO,CACH,IAAKC,GAAoBJ,EAAaE,CAAQ,EAC9C,IAAKE,GAAoBJ,EAAaG,CAAQ,CACtD,CACA,CACA,SAASC,GAAoBJ,EAAaK,EAAO,CAC7C,OAAO,OAAOL,GAAgB,SACxBA,EACAA,EAAYK,CAAK,GAAK,CAChC,CC1HA,MAAMC,GAAkB,KAAO,CAC3B,UAAW,EACX,MAAO,EACP,OAAQ,EACR,YAAa,CACjB,GACMC,GAAc,KAAO,CACvB,EAAGD,GAAe,EAClB,EAAGA,GAAe,CACtB,GACME,GAAa,KAAO,CAAE,IAAK,EAAG,IAAK,CAAC,GACpCC,EAAY,KAAO,CACrB,EAAGD,GAAU,EACb,EAAGA,GAAU,CACjB,GCdA,SAASE,GAAS/hC,EAAU,CACxB,MAAO,CAACA,EAAS,GAAG,EAAGA,EAAS,GAAG,CAAC,CACxC,CCGA,SAASgiC,GAAwB,CAAE,IAAA3B,EAAK,KAAAC,EAAM,MAAAE,EAAO,OAAAD,CAAM,EAAK,CAC5D,MAAO,CACH,EAAG,CAAE,IAAKD,EAAM,IAAKE,CAAK,EAC1B,EAAG,CAAE,IAAKH,EAAK,IAAKE,CAAM,CAClC,CACA,CACA,SAAS0B,GAAwB,CAAE,EAAArgC,EAAG,EAAAmH,GAAK,CACvC,MAAO,CAAE,IAAKA,EAAE,IAAK,MAAOnH,EAAE,IAAK,OAAQmH,EAAE,IAAK,KAAMnH,EAAE,GAAG,CACjE,CAMA,SAASsgC,GAAmB9D,EAAOG,EAAgB,CAC/C,GAAI,CAACA,EACD,OAAOH,EACX,MAAM+D,EAAU5D,EAAe,CAAE,EAAGH,EAAM,KAAM,EAAGA,EAAM,IAAK,EACxDgE,EAAc7D,EAAe,CAAE,EAAGH,EAAM,MAAO,EAAGA,EAAM,OAAQ,EACtE,MAAO,CACH,IAAK+D,EAAQ,EACb,KAAMA,EAAQ,EACd,OAAQC,EAAY,EACpB,MAAOA,EAAY,CAC3B,CACA,CC9BA,SAASC,GAAgBjtB,EAAO,CAC5B,OAAOA,IAAU,QAAaA,IAAU,CAC5C,CACA,SAASktB,GAAS,CAAE,MAAAltB,EAAO,OAAAmtB,EAAQ,OAAAC,CAAM,EAAI,CACzC,MAAQ,CAACH,GAAgBjtB,CAAK,GAC1B,CAACitB,GAAgBE,CAAM,GACvB,CAACF,GAAgBG,CAAM,CAC/B,CACA,SAAS/rB,GAAaoF,EAAQ,CAC1B,OAAQymB,GAASzmB,CAAM,GACnB4mB,GAAe5mB,CAAM,GACrBA,EAAO,GACPA,EAAO,QACPA,EAAO,SACPA,EAAO,OACf,CACA,SAAS4mB,GAAe5mB,EAAQ,CAC5B,OAAO6mB,GAAc7mB,EAAO,CAAC,GAAK6mB,GAAc7mB,EAAO,CAAC,CAC5D,CACA,SAAS6mB,GAAcl6C,EAAO,CAC1B,OAAOA,GAASA,IAAU,IAC9B,CCfA,SAASm6C,GAAWvE,EAAOhpB,EAAOwtB,EAAa,CAC3C,MAAMC,EAAqBzE,EAAQwE,EAC7BE,EAAS1tB,EAAQytB,EACvB,OAAOD,EAAcE,CACzB,CAIA,SAASC,GAAgB3E,EAAO4E,EAAW5tB,EAAOwtB,EAAaK,EAAU,CACrE,OAAIA,IAAa,SACb7E,EAAQuE,GAAWvE,EAAO6E,EAAUL,CAAW,GAE5CD,GAAWvE,EAAOhpB,EAAOwtB,CAAW,EAAII,CACnD,CAIA,SAASE,GAAe5D,EAAM0D,EAAY,EAAG5tB,EAAQ,EAAGwtB,EAAaK,EAAU,CAC3E3D,EAAK,IAAMyD,GAAgBzD,EAAK,IAAK0D,EAAW5tB,EAAOwtB,EAAaK,CAAQ,EAC5E3D,EAAK,IAAMyD,GAAgBzD,EAAK,IAAK0D,EAAW5tB,EAAOwtB,EAAaK,CAAQ,CAChF,CAIA,SAASE,GAAcC,EAAK,CAAE,EAAAxhC,EAAG,EAAAmH,CAAC,EAAI,CAClCm6B,GAAeE,EAAI,EAAGxhC,EAAE,UAAWA,EAAE,MAAOA,EAAE,WAAW,EACzDshC,GAAeE,EAAI,EAAGr6B,EAAE,UAAWA,EAAE,MAAOA,EAAE,WAAW,CAC7D,CAOA,SAASs6B,GAAgBD,EAAKE,EAAW3rC,EAAU4rC,EAAqB,GAAO,CAC3E,MAAMC,EAAa7rC,EAAS,OAC5B,GAAI,CAAC6rC,EACD,OAEJF,EAAU,EAAIA,EAAU,EAAI,EAC5B,IAAItjB,EACA/1B,EACJ,QAAS5C,EAAI,EAAGA,EAAIm8C,EAAYn8C,IAAK,CACjC24B,EAAOroB,EAAStQ,CAAC,EACjB4C,EAAQ+1B,EAAK,gBAKb,MAAMpP,EAAWoP,EAAK,SAClBpP,GACAA,EAAS,OACTA,EAAS,MAAM,UAAY,aAG3B2yB,GACAvjB,EAAK,QAAQ,cACbA,EAAK,QACLA,IAASA,EAAK,MACdyjB,GAAaL,EAAK,CACd,EAAG,CAACpjB,EAAK,OAAO,OAAO,EACvB,EAAG,CAACA,EAAK,OAAO,OAAO,CACvC,CAAa,EAED/1B,IAEAq5C,EAAU,GAAKr5C,EAAM,EAAE,MACvBq5C,EAAU,GAAKr5C,EAAM,EAAE,MAEvBk5C,GAAcC,EAAKn5C,CAAK,GAExBs5C,GAAsB9sB,GAAauJ,EAAK,YAAY,GACpDyjB,GAAaL,EAAKpjB,EAAK,YAAY,EAE3C,CAKAsjB,EAAU,EAAII,GAAcJ,EAAU,CAAC,EACvCA,EAAU,EAAII,GAAcJ,EAAU,CAAC,CAC3C,CACA,SAASI,GAActuB,EAAO,CAC1B,OAAI,OAAO,UAAUA,CAAK,GAEnBA,EAAQ,iBAAmBA,EAAQ,cAD/BA,EACwD,CACvE,CACA,SAASuuB,GAAcrE,EAAM9B,EAAU,CACnC8B,EAAK,IAAMA,EAAK,IAAM9B,EACtB8B,EAAK,IAAMA,EAAK,IAAM9B,CAC1B,CAMA,SAASoG,GAActE,EAAMuE,EAAY,CAACt8C,EAAKu8C,EAAUC,CAAS,EAAG,CACjE,MAAMC,EAAaH,EAAWE,CAAS,IAAM,OAAYF,EAAWE,CAAS,EAAI,GAC3EnB,EAAc5Z,EAAIsW,EAAK,IAAKA,EAAK,IAAK0E,CAAU,EAEtDd,GAAe5D,EAAMuE,EAAWt8C,CAAG,EAAGs8C,EAAWC,CAAQ,EAAGlB,EAAaiB,EAAW,KAAK,CAC7F,CAIA,MAAMI,GAAQ,CAAC,IAAK,SAAU,SAAS,EACjCC,GAAQ,CAAC,IAAK,SAAU,SAAS,EAIvC,SAAST,GAAaL,EAAKjvB,EAAW,CAClCyvB,GAAcR,EAAI,EAAGjvB,EAAW8vB,EAAK,EACrCL,GAAcR,EAAI,EAAGjvB,EAAW+vB,EAAK,CACzC,CCpHA,SAASC,GAAmBvzB,EAAU2tB,EAAgB,CAClD,OAAOyD,GAAwBE,GAAmBtxB,EAAS,sBAAqB,EAAI2tB,CAAc,CAAC,CACvG,CACA,SAAS6F,GAAe3sC,EAAS4sC,EAAoBvG,EAAoB,CACrE,MAAMwG,EAAcH,GAAmB1sC,EAASqmC,CAAkB,EAC5D,CAAE,OAAAyG,CAAM,EAAKF,EACnB,OAAIE,IACAZ,GAAcW,EAAY,EAAGC,EAAO,OAAO,CAAC,EAC5CZ,GAAcW,EAAY,EAAGC,EAAO,OAAO,CAAC,GAEzCD,CACX,CCbA,MAAME,GAAmB,CAAC,CAAE,QAAAx7C,KACjBA,EAAUA,EAAQ,cAAc,YAAc,KCiBnDy7C,GAAsB,IAAI,QAKhC,MAAMC,EAA0B,CAC5B,YAAYr0B,EAAe,CAIvB,KAAK,eAAiB,KACtB,KAAK,WAAa,GAClB,KAAK,iBAAmB,KACxB,KAAK,YAAc,CAAE,EAAG,EAAG,EAAG,CAAC,EAI/B,KAAK,YAAc,GACnB,KAAK,sBAAwB,GAI7B,KAAK,QAAUyxB,EAAS,EACxB,KAAK,cAAgBzxB,CACzB,CACA,MAAMs0B,EAAa,CAAE,aAAAC,EAAe,EAAK,EAAK,CAAA,EAAI,CAI9C,KAAM,CAAE,gBAAA30B,GAAoB,KAAK,cACjC,GAAIA,GAAmBA,EAAgB,YAAc,GACjD,OACJ,MAAM4uB,EAAkBl7B,GAAU,CAC9B,KAAM,CAAE,iBAAAq6B,CAAgB,EAAK,KAAK,SAAQ,EAG1CA,EAAmB,KAAK,iBAAmB,KAAK,cAAa,EACzD4G,GACA,KAAK,aAAa/lB,GAAiBlb,EAAO,MAAM,EAAE,KAAK,CAE/D,EACM06B,EAAU,CAAC16B,EAAOyc,IAAS,CAE7B,KAAM,CAAE,KAAAV,EAAM,gBAAAmlB,EAAiB,YAAAC,CAAW,EAAK,KAAK,SAAQ,EAC5D,GAAIplB,GAAQ,CAACmlB,IACL,KAAK,gBACL,KAAK,eAAc,EACvB,KAAK,eAAiBplB,GAAcC,CAAI,EAEpC,CAAC,KAAK,gBACN,OAER,KAAK,WAAa,GAClB,KAAK,iBAAmB,KACxB,KAAK,mBAAkB,EACnB,KAAK,cAAc,aACnB,KAAK,cAAc,WAAW,mBAAqB,GACnD,KAAK,cAAc,WAAW,OAAS,QAK3CqiB,GAAUzC,GAAS,CACf,IAAIt2C,EAAU,KAAK,mBAAmBs2C,CAAI,EAAE,IAAG,GAAM,EAIrD,GAAIzpB,GAAQ,KAAK7sB,CAAO,EAAG,CACvB,KAAM,CAAE,WAAAixB,GAAe,KAAK,cAC5B,GAAIA,GAAcA,EAAW,OAAQ,CACjC,MAAM8qB,EAAe9qB,EAAW,OAAO,UAAUqlB,CAAI,EACjDyF,IAEA/7C,EADeq2C,GAAW0F,CAAY,GAClB,WAAW/7C,CAAO,EAAI,KAElD,CACJ,CACA,KAAK,YAAYs2C,CAAI,EAAIt2C,CAC7B,CAAC,EAEG87C,GACA1mB,EAAM,OAAO,IAAM0mB,EAAYnhC,EAAOyc,CAAI,EAAG,GAAO,EAAI,EAE5D,KAAM,CAAE,eAAA4kB,GAAmB,KAAK,cAChCA,GAAkBA,EAAe,UAAU,YAAa,EAAI,CAChE,EACM1G,EAAS,CAAC36B,EAAOyc,IAAS,CAE5B,KAAM,CAAE,gBAAAykB,EAAiB,kBAAAI,EAAmB,gBAAAC,EAAiB,OAAAC,CAAM,EAAM,KAAK,SAAQ,EAEtF,GAAI,CAACN,GAAmB,CAAC,KAAK,eAC1B,OACJ,KAAM,CAAE,OAAA1sB,CAAM,EAAKiI,EAEnB,GAAI6kB,GAAqB,KAAK,mBAAqB,KAAM,CACrD,KAAK,iBAAmBG,GAAoBjtB,CAAM,EAE9C,KAAK,mBAAqB,MAC1B+sB,GAAmBA,EAAgB,KAAK,gBAAgB,EAE5D,MACJ,CAEA,KAAK,WAAW,IAAK9kB,EAAK,MAAOjI,CAAM,EACvC,KAAK,WAAW,IAAKiI,EAAK,MAAOjI,CAAM,EAOvC,KAAK,cAAc,OAAM,EAKzBgtB,GAAUA,EAAOxhC,EAAOyc,CAAI,CAChC,EACMqe,EAAe,CAAC96B,EAAOyc,IAAS,KAAK,KAAKzc,EAAOyc,CAAI,EACrDse,EAAkB,IAAMqD,GAAUzC,GAAS,CAC7C,IAAI9iC,EACJ,OAAO,KAAK,kBAAkB8iC,CAAI,IAAM,YAClC9iC,EAAK,KAAK,mBAAmB8iC,CAAI,EAAE,aAAe,MAAQ9iC,IAAO,OAAS,OAASA,EAAG,KAAI,EACpG,CAAC,EACK,CAAE,iBAAAwhC,CAAgB,EAAK,KAAK,SAAQ,EAC1C,KAAK,WAAa,IAAIJ,GAAW+G,EAAa,CAC1C,eAAA9F,EACA,QAAAR,EACA,OAAAC,EACA,aAAAG,EACA,gBAAAC,CACZ,EAAW,CACC,mBAAoB,KAAK,cAAc,sBAAqB,EAC5D,iBAAAV,EACA,cAAewG,GAAiB,KAAK,aAAa,CAC9D,CAAS,CACL,CACA,KAAK7gC,EAAOyc,EAAM,CACd,MAAMilB,EAAa,KAAK,WAExB,GADA,KAAK,OAAM,EACP,CAACA,EACD,OACJ,KAAM,CAAE,SAAAnhB,CAAQ,EAAK9D,EACrB,KAAK,eAAe8D,CAAQ,EAC5B,KAAM,CAAE,UAAAohB,CAAS,EAAK,KAAK,SAAQ,EAC/BA,GACAlnB,EAAM,OAAO,IAAMknB,EAAU3hC,EAAOyc,CAAI,CAAC,CAEjD,CACA,QAAS,CACL,KAAK,WAAa,GAClB,KAAM,CAAE,WAAAnG,EAAY,eAAA+qB,CAAc,EAAK,KAAK,cACxC/qB,IACAA,EAAW,mBAAqB,IAEpC,KAAK,YAAc,KAAK,WAAW,IAAG,EACtC,KAAK,WAAa,OAClB,KAAM,CAAE,gBAAA4qB,CAAe,EAAK,KAAK,SAAQ,EACrC,CAACA,GAAmB,KAAK,iBACzB,KAAK,eAAc,EACnB,KAAK,eAAiB,MAE1BG,GAAkBA,EAAe,UAAU,YAAa,EAAK,CACjE,CACA,WAAW1F,EAAMiG,EAAQptB,EAAQ,CAC7B,KAAM,CAAE,KAAAuH,CAAI,EAAK,KAAK,SAAQ,EAE9B,GAAI,CAACvH,GAAU,CAACqtB,GAAWlG,EAAM5f,EAAM,KAAK,gBAAgB,EACxD,OACJ,MAAM+lB,EAAY,KAAK,mBAAmBnG,CAAI,EAC9C,IAAIzb,EAAO,KAAK,YAAYyb,CAAI,EAAInnB,EAAOmnB,CAAI,EAE3C,KAAK,aAAe,KAAK,YAAYA,CAAI,IACzCzb,EAAOmc,GAAiBnc,EAAM,KAAK,YAAYyb,CAAI,EAAG,KAAK,QAAQA,CAAI,CAAC,GAE5EmG,EAAU,IAAI5hB,CAAI,CACtB,CACA,oBAAqB,CACjB,IAAIrnB,EACJ,KAAM,CAAE,gBAAAkpC,EAAiB,YAAArE,GAAgB,KAAK,SAAQ,EAChDvtB,EAAS,KAAK,cAAc,YAC9B,CAAC,KAAK,cAAc,WAAW,OAC7B,KAAK,cAAc,WAAW,QAAQ,EAAK,GAC1CtX,EAAK,KAAK,cAAc,cAAgB,MAAQA,IAAO,OAAS,OAASA,EAAG,OAC7EmpC,EAAkB,KAAK,YACzBD,GAAmBl1B,GAAYk1B,CAAe,EACzC,KAAK,cACN,KAAK,YAAc,KAAK,sBAAqB,GAI7CA,GAAmB5xB,EACnB,KAAK,YAAcqsB,GAAwBrsB,EAAO,UAAW4xB,CAAe,EAG5E,KAAK,YAAc,GAG3B,KAAK,QAAUtE,GAAmBC,CAAW,EAKzCsE,IAAoB,KAAK,aACzB7xB,GACA,KAAK,aACL,CAAC,KAAK,uBACNiuB,GAAUzC,GAAS,CACX,KAAK,mBAAmBA,CAAI,IAC5B,KAAK,YAAYA,CAAI,EAAI0B,GAAsBltB,EAAO,UAAUwrB,CAAI,EAAG,KAAK,YAAYA,CAAI,CAAC,EAErG,CAAC,CAET,CACA,uBAAwB,CACpB,KAAM,CAAE,gBAAiB2B,EAAa,yBAAA2E,CAAwB,EAAK,KAAK,SAAQ,EAChF,GAAI,CAAC3E,GAAe,CAACzwB,GAAYywB,CAAW,EACxC,MAAO,GACX,MAAM4E,EAAqB5E,EAAY,QAEjC,CAAE,WAAAhnB,GAAe,KAAK,cAE5B,GAAI,CAACA,GAAc,CAACA,EAAW,OAC3B,MAAO,GACX,MAAM4mB,EAAiBuD,GAAeyB,EAAoB5rB,EAAW,KAAM,KAAK,cAAc,uBAAuB,EACrH,IAAI6rB,EAAsBlF,GAAwB3mB,EAAW,OAAO,UAAW4mB,CAAc,EAK7F,GAAI+E,EAA0B,CAC1B,MAAMG,EAAkBH,EAAyB3D,GAAwB6D,CAAmB,CAAC,EAC7F,KAAK,sBAAwB,CAAC,CAACC,EAC3BA,IACAD,EAAsB9D,GAAwB+D,CAAe,EAErE,CACA,OAAOD,CACX,CACA,eAAe5hB,EAAU,CACrB,KAAM,CAAE,KAAAxE,EAAM,aAAAsmB,EAAc,YAAA3E,EAAa,eAAA4E,EAAgB,iBAAAjI,EAAkB,oBAAAkI,CAAmB,EAAM,KAAK,SAAQ,EAC3GjF,EAAc,KAAK,aAAe,CAAA,EAClCkF,EAAqBpE,GAAUzC,GAAS,CAC1C,GAAI,CAACkG,GAAWlG,EAAM5f,EAAM,KAAK,gBAAgB,EAC7C,OAEJ,IAAIrD,EAAc4kB,GAAeA,EAAY3B,CAAI,GAAM,CAAA,EACnDtB,IACA3hB,EAAa,CAAE,IAAK,EAAG,IAAK,CAAC,GAOjC,MAAMmU,EAAkB6Q,EAAc,IAAM,IACtC9Q,EAAgB8Q,EAAc,GAAK,IACnCjR,EAAU,CACZ,KAAM,UACN,SAAU4V,EAAe9hB,EAASob,CAAI,EAAI,EAC1C,gBAAA9O,EACA,cAAAD,EACA,aAAc,IACd,UAAW,EACX,UAAW,GACX,GAAG0V,EACH,GAAG5pB,CACnB,EAIY,OAAO,KAAK,wBAAwBijB,EAAMlP,CAAO,CACrD,CAAC,EAED,OAAO,QAAQ,IAAI+V,CAAkB,EAAE,KAAKD,CAAmB,CACnE,CACA,wBAAwB5G,EAAMjjB,EAAY,CACtC,MAAMopB,EAAY,KAAK,mBAAmBnG,CAAI,EAC9C,OAAOmG,EAAU,MAAMtO,GAAmBmI,EAAMmG,EAAW,EAAGppB,CAAU,CAAC,CAC7E,CACA,eAAgB,CACZ0lB,GAAUzC,GAAS,KAAK,mBAAmBA,CAAI,EAAE,MAAM,CAC3D,CACA,gBAAiB,CACbyC,GAAUzC,GAAS,CAAE,IAAI9iC,EAAI,OAAQA,EAAK,KAAK,mBAAmB8iC,CAAI,EAAE,aAAe,MAAQ9iC,IAAO,OAAS,OAASA,EAAG,OAAS,CAAC,CACzI,CACA,kBAAkB8iC,EAAM,CACpB,IAAI9iC,EACJ,OAAQA,EAAK,KAAK,mBAAmB8iC,CAAI,EAAE,aAAe,MAAQ9iC,IAAO,OAAS,OAASA,EAAG,KAClG,CAOA,mBAAmB8iC,EAAM,CACrB,MAAM8G,EAAU,QAAU9G,EAAK,YAAW,EACpClrC,EAAQ,KAAK,cAAc,SAAQ,EACnCiyC,EAAsBjyC,EAAMgyC,CAAO,EACzC,OAAOC,GAED,KAAK,cAAc,SAAS/G,GAAOlrC,EAAM,QAAUA,EAAM,QAAQkrC,CAAI,EAAI,SAAc,CAAC,CAClG,CACA,aAAalB,EAAO,CAChB2D,GAAUzC,GAAS,CACf,KAAM,CAAE,KAAA5f,CAAI,EAAK,KAAK,SAAQ,EAE9B,GAAI,CAAC8lB,GAAWlG,EAAM5f,EAAM,KAAK,gBAAgB,EAC7C,OACJ,KAAM,CAAE,WAAAzF,GAAe,KAAK,cACtBwrB,EAAY,KAAK,mBAAmBnG,CAAI,EAC9C,GAAIrlB,GAAcA,EAAW,OAAQ,CACjC,KAAM,CAAE,IAAAhF,EAAK,IAAAhZ,CAAG,EAAKge,EAAW,OAAO,UAAUqlB,CAAI,EACrDmG,EAAU,IAAIrH,EAAMkB,CAAI,EAAItW,EAAI/T,EAAKhZ,EAAK,EAAG,CAAC,CAClD,CACJ,CAAC,CACL,CAMA,gCAAiC,CAC7B,GAAI,CAAC,KAAK,cAAc,QACpB,OACJ,KAAM,CAAE,KAAAyjB,EAAM,gBAAAgmB,GAAoB,KAAK,SAAQ,EACzC,CAAE,WAAAzrB,GAAe,KAAK,cAC5B,GAAI,CAACzJ,GAAYk1B,CAAe,GAAK,CAACzrB,GAAc,CAAC,KAAK,YACtD,OAKJ,KAAK,cAAa,EAKlB,MAAMqsB,EAAc,CAAE,EAAG,EAAG,EAAG,CAAC,EAChCvE,GAAUzC,GAAS,CACf,MAAMmG,EAAY,KAAK,mBAAmBnG,CAAI,EAC9C,GAAImG,EAAW,CACX,MAAMnsB,EAASmsB,EAAU,IAAG,EAC5Ba,EAAYhH,CAAI,EAAIrnB,GAAW,CAAE,IAAKqB,EAAQ,IAAKA,CAAM,EAAI,KAAK,YAAYgmB,CAAI,CAAC,CACvF,CACJ,CAAC,EAID,KAAM,CAAE,kBAAA/qB,CAAiB,EAAK,KAAK,cAAc,SAAQ,EACzD,KAAK,cAAc,QAAQ,MAAM,UAAYA,EACvCA,EAAkB,CAAA,EAAI,EAAE,EACxB,OACN0F,EAAW,MAAQA,EAAW,KAAK,aAAY,EAC/CA,EAAW,aAAY,EACvB,KAAK,mBAAkB,EAKvB8nB,GAAUzC,GAAS,CACf,GAAI,CAACkG,GAAWlG,EAAM5f,EAAM,IAAI,EAC5B,OAIJ,MAAM+lB,EAAY,KAAK,mBAAmBnG,CAAI,EACxC,CAAE,IAAArqB,EAAK,IAAAhZ,CAAG,EAAK,KAAK,YAAYqjC,CAAI,EAC1CmG,EAAU,IAAIzc,EAAI/T,EAAKhZ,EAAKqqC,EAAYhH,CAAI,CAAC,CAAC,CAClD,CAAC,CACL,CACA,cAAe,CACX,GAAI,CAAC,KAAK,cAAc,QACpB,OACJmF,GAAoB,IAAI,KAAK,cAAe,IAAI,EAChD,MAAMhtC,EAAU,KAAK,cAAc,QAI7B8uC,EAAsBvnB,GAAgBvnB,EAAS,cAAgBkM,GAAU,CAC3E,KAAM,CAAE,KAAA+b,EAAM,aAAA8mB,EAAe,EAAI,EAAK,KAAK,SAAQ,EACnD9mB,GAAQ8mB,GAAgB,KAAK,MAAM7iC,CAAK,CAC5C,CAAC,EACK8iC,EAAyB,IAAM,CACjC,KAAM,CAAE,gBAAAf,CAAe,EAAK,KAAK,SAAQ,EACrCl1B,GAAYk1B,CAAe,IAC3B,KAAK,YAAc,KAAK,sBAAqB,EAErD,EACM,CAAE,WAAAzrB,GAAe,KAAK,cACtBysB,EAA4BzsB,EAAW,iBAAiB,UAAWwsB,CAAsB,EAC3FxsB,GAAc,CAACA,EAAW,SAC1BA,EAAW,MAAQA,EAAW,KAAK,aAAY,EAC/CA,EAAW,aAAY,GAE3BwsB,EAAsB,EAKtB,MAAME,EAAqBloB,GAAY,OAAQ,SAAU,IAAM,KAAK,gCAAgC,EAK9FmoB,EAA2B3sB,EAAW,iBAAiB,YAAc,CAAC,CAAE,MAAAhwB,EAAO,iBAAA48C,KAAuB,CACpG,KAAK,YAAcA,IACnB9E,GAAUzC,GAAS,CACf,MAAM9G,EAAc,KAAK,mBAAmB8G,CAAI,EAC3C9G,IAEL,KAAK,YAAY8G,CAAI,GAAKr1C,EAAMq1C,CAAI,EAAE,UACtC9G,EAAY,IAAIA,EAAY,IAAG,EAAKvuC,EAAMq1C,CAAI,EAAE,SAAS,EAC7D,CAAC,EACD,KAAK,cAAc,OAAM,EAEjC,CAAC,EACD,MAAO,IAAM,CACTqH,EAAkB,EAClBJ,EAAmB,EACnBG,EAAyB,EACzBE,GAA4BA,EAAwB,CACxD,CACJ,CACA,UAAW,CACP,MAAMxyC,EAAQ,KAAK,cAAc,SAAQ,EACnC,CAAE,KAAAsrB,EAAO,GAAO,kBAAAulB,EAAoB,GAAO,gBAAAJ,EAAkB,GAAO,gBAAAa,EAAkB,GAAO,YAAArE,EAAcF,GAAgB,aAAA6E,EAAe,EAAI,EAAM5xC,EAC1J,MAAO,CACH,GAAGA,EACH,KAAAsrB,EACA,kBAAAulB,EACA,gBAAAJ,EACA,gBAAAa,EACA,YAAArE,EACA,aAAA2E,CACZ,CACI,CACJ,CACA,SAASR,GAAW9/B,EAAWga,EAAMonB,EAAkB,CACnD,OAASpnB,IAAS,IAAQA,IAASha,KAC9BohC,IAAqB,MAAQA,IAAqBphC,EAC3D,CAQA,SAAS0/B,GAAoBjtB,EAAQ4uB,EAAgB,GAAI,CACrD,IAAIrhC,EAAY,KAChB,OAAI,KAAK,IAAIyS,EAAO,CAAC,EAAI4uB,EACrBrhC,EAAY,IAEP,KAAK,IAAIyS,EAAO,CAAC,EAAI4uB,IAC1BrhC,EAAY,KAETA,CACX,CC1dA,MAAMshC,WAAoBjnB,EAAQ,CAC9B,YAAYC,EAAM,CACd,MAAMA,CAAI,EACV,KAAK,oBAAsBpnB,EAC3B,KAAK,gBAAkBA,EACvB,KAAK,SAAW,IAAI8rC,GAA0B1kB,CAAI,CACtD,CACA,OAAQ,CAGJ,KAAM,CAAE,aAAAinB,CAAY,EAAK,KAAK,KAAK,SAAQ,EACvCA,IACA,KAAK,oBAAsBA,EAAa,UAAU,KAAK,QAAQ,GAEnE,KAAK,gBAAkB,KAAK,SAAS,aAAY,GAAMruC,CAC3D,CACA,SAAU,CACN,KAAK,oBAAmB,EACxB,KAAK,gBAAe,CACxB,CACJ,CCjBA,MAAMsuC,GAAgBvoB,GAAY,CAAChb,EAAOyc,IAAS,CAC3CzB,GACAP,EAAM,OAAO,IAAMO,EAAQhb,EAAOyc,CAAI,CAAC,CAE/C,EACA,MAAM+mB,WAAmBpnB,EAAQ,CAC7B,aAAc,CACV,MAAM,GAAG,SAAS,EAClB,KAAK,0BAA4BnnB,CACrC,CACA,cAAcwuC,EAAkB,CAC5B,KAAK,QAAU,IAAIxJ,GAAWwJ,EAAkB,KAAK,oBAAqB,CACtE,mBAAoB,KAAK,KAAK,sBAAqB,EACnD,cAAe5C,GAAiB,KAAK,IAAI,CACrD,CAAS,CACL,CACA,mBAAoB,CAChB,KAAM,CAAE,kBAAA6C,EAAmB,WAAAC,EAAY,MAAAC,EAAO,SAAAC,CAAQ,EAAK,KAAK,KAAK,SAAQ,EAC7E,MAAO,CACH,eAAgBN,GAAaG,CAAiB,EAC9C,QAASH,GAAaI,CAAU,EAChC,OAAQC,EACR,MAAO,CAAC5jC,EAAOyc,IAAS,CACpB,OAAO,KAAK,QACRonB,GACAppB,EAAM,OAAO,IAAMopB,EAAS7jC,EAAOyc,CAAI,CAAC,CAEhD,CACZ,CACI,CACA,OAAQ,CACJ,KAAK,0BAA4BpB,GAAgB,KAAK,KAAK,QAAS,cAAgBrb,GAAU,KAAK,cAAcA,CAAK,CAAC,CAC3H,CACA,QAAS,CACL,KAAK,SAAW,KAAK,QAAQ,eAAe,KAAK,mBAAmB,CACxE,CACA,SAAU,CACN,KAAK,0BAAyB,EAC9B,KAAK,SAAW,KAAK,QAAQ,IAAG,CACpC,CACJ,CCrBA,SAAS8jC,IAAc,CACnB,MAAMrlC,EAAU2N,EAAAA,WAAWb,EAAe,EAC1C,GAAI9M,IAAY,KACZ,MAAO,CAAC,GAAM,IAAI,EACtB,KAAM,CAAE,UAAA+6B,EAAW,eAAAC,EAAgB,SAAAG,CAAQ,EAAKn7B,EAG1ChM,EAAKsxC,EAAAA,MAAK,EAChBr4B,OAAAA,EAAAA,UAAU,IAAMkuB,EAASnnC,CAAE,EAAG,CAAA,CAAE,EAEzB,CAAC+mC,GAAaC,EAAiB,CAAC,GADlB,IAAMA,GAAkBA,EAAehnC,CAAE,CACJ,EAAI,CAAC,EAAI,CACvE,CChCA,MAAMuxC,GAAwB,CAK1B,uBAAwB,GAKxB,eAAgB,EACpB,ECdA,SAASC,GAAgBC,EAAQvI,EAAM,CACnC,OAAIA,EAAK,MAAQA,EAAK,IACX,EACHuI,GAAUvI,EAAK,IAAMA,EAAK,KAAQ,GAC9C,CAQA,MAAMwI,GAAsB,CACxB,QAAS,CAACxuB,EAAQ0G,IAAS,CACvB,GAAI,CAACA,EAAK,OACN,OAAO1G,EAKX,GAAI,OAAOA,GAAW,SAClB,GAAIxD,EAAG,KAAKwD,CAAM,EACdA,EAAS,WAAWA,CAAM,MAG1B,QAAOA,EAOf,MAAM1X,EAAIgmC,GAAgBtuB,EAAQ0G,EAAK,OAAO,CAAC,EACzCjX,EAAI6+B,GAAgBtuB,EAAQ0G,EAAK,OAAO,CAAC,EAC/C,MAAO,GAAGpe,CAAC,KAAKmH,CAAC,GACrB,CACJ,ECnCMg/B,GAAmB,CACrB,QAAS,CAACzuB,EAAQ,CAAE,UAAAgqB,EAAW,gBAAA0E,CAAe,IAAO,CACjD,MAAMC,EAAW3uB,EACX4uB,EAAShd,GAAQ,MAAM5R,CAAM,EAEnC,GAAI4uB,EAAO,OAAS,EAChB,OAAOD,EACX,MAAMvc,EAAWR,GAAQ,kBAAkB5R,CAAM,EAC3CnB,EAAS,OAAO+vB,EAAO,CAAC,GAAM,SAAW,EAAI,EAE7CC,EAASH,EAAgB,EAAE,MAAQ1E,EAAU,EAC7C8E,EAASJ,EAAgB,EAAE,MAAQ1E,EAAU,EACnD4E,EAAO,EAAI/vB,CAAM,GAAKgwB,EACtBD,EAAO,EAAI/vB,CAAM,GAAKiwB,EAOtB,MAAMC,EAAerf,EAAImf,EAAQC,EAAQ,EAAG,EAE5C,OAAI,OAAOF,EAAO,EAAI/vB,CAAM,GAAM,WAC9B+vB,EAAO,EAAI/vB,CAAM,GAAKkwB,GAEtB,OAAOH,EAAO,EAAI/vB,CAAM,GAAM,WAC9B+vB,EAAO,EAAI/vB,CAAM,GAAKkwB,GACnB3c,EAASwc,CAAM,CAC1B,CACJ,ECtBA,MAAMI,WAAiCC,GAAe,SAAU,CAM5D,mBAAoB,CAChB,KAAM,CAAE,cAAAl4B,EAAe,YAAAm4B,EAAa,kBAAAC,EAAmB,SAAA31B,CAAQ,EAAK,KAAK,MACnE,CAAE,WAAAmH,CAAU,EAAK5J,EACvBoD,GAAkBi1B,EAAsB,EACpCzuB,IACIuuB,EAAY,OACZA,EAAY,MAAM,IAAIvuB,CAAU,EAChCwuB,GAAqBA,EAAkB,UAAY31B,GACnD21B,EAAkB,SAASxuB,CAAU,EAEzCA,EAAW,KAAK,UAAS,EACzBA,EAAW,iBAAiB,oBAAqB,IAAM,CACnD,KAAK,aAAY,CACrB,CAAC,EACDA,EAAW,WAAW,CAClB,GAAGA,EAAW,QACd,eAAgB,IAAM,KAAK,aAAY,CACvD,CAAa,GAEL0tB,GAAsB,eAAiB,EAC3C,CACA,wBAAwBptB,EAAW,CAC/B,KAAM,CAAE,iBAAAouB,EAAkB,cAAAt4B,EAAe,KAAAqP,EAAM,UAAAyd,CAAS,EAAK,KAAK,MAC5DljB,EAAa5J,EAAc,WACjC,OAAK4J,IASLA,EAAW,UAAYkjB,EACnBzd,GACAnF,EAAU,mBAAqBouB,GAC/BA,IAAqB,OACrB1uB,EAAW,WAAU,EAGrB,KAAK,aAAY,EAEjBM,EAAU,YAAc4iB,IACpBA,EACAljB,EAAW,QAAO,EAEZA,EAAW,YAMjBmE,EAAM,WAAW,IAAM,CACnB,MAAMtqB,EAAQmmB,EAAW,SAAQ,GAC7B,CAACnmB,GAAS,CAACA,EAAM,QAAQ,SACzB,KAAK,aAAY,CAEzB,CAAC,IAGF,IACX,CACA,oBAAqB,CACjB,KAAM,CAAE,WAAAmmB,CAAU,EAAK,KAAK,MAAM,cAC9BA,IACAA,EAAW,KAAK,UAAS,EACzB,eAAe,IAAM,CACb,CAACA,EAAW,kBAAoBA,EAAW,OAAM,GACjD,KAAK,aAAY,CAEzB,CAAC,EAET,CACA,sBAAuB,CACnB,KAAM,CAAE,cAAA5J,EAAe,YAAAm4B,EAAa,kBAAmBI,CAAc,EAAM,KAAK,MAC1E,CAAE,WAAA3uB,CAAU,EAAK5J,EACnB4J,IACAA,EAAW,0BAAyB,EAChCuuB,GAAeA,EAAY,OAC3BA,EAAY,MAAM,OAAOvuB,CAAU,EACnC2uB,GAAkBA,EAAe,YACjCA,EAAe,WAAW3uB,CAAU,EAEhD,CACA,cAAe,CACX,KAAM,CAAE,aAAA4uB,GAAiB,KAAK,MAC9BA,GAAgBA,EAAY,CAChC,CACA,QAAS,CACL,OAAO,IACX,CACJ,CACA,SAASt2B,GAAcne,EAAO,CAC1B,KAAM,CAAC+oC,EAAW0L,CAAY,EAAIpB,GAAW,EACvCe,EAAcz4B,EAAAA,WAAWgC,EAAkB,EACjD,OAAQw2B,GAAe,cAAcD,GAA0B,CAAE,GAAGl0C,EAAO,YAAao0C,EAAa,kBAAmBz4B,EAAAA,WAAWiC,EAAwB,EAAG,UAAWmrB,EAAW,aAAc0L,EAAc,CACpN,CACA,MAAMH,GAAyB,CAC3B,aAAc,CACV,GAAGZ,GACH,QAAS,CACL,sBACA,uBACA,yBACA,yBACZ,CACA,EACI,oBAAqBA,GACrB,qBAAsBA,GACtB,uBAAwBA,GACxB,wBAAyBA,GACzB,UAAWC,EACf,EC1HMe,GAAU,CAAC,UAAW,WAAY,aAAc,aAAa,EAC7DC,GAAaD,GAAQ,OACrBE,GAAYxgD,GAAU,OAAOA,GAAU,SAAW,WAAWA,CAAK,EAAIA,EACtEygD,GAAQzgD,GAAU,OAAOA,GAAU,UAAYstB,EAAG,KAAKttB,CAAK,EAClE,SAAS0gD,GAAU9hD,EAAQ+hD,EAAQC,EAAMngB,EAAUogB,EAAwBC,EAAc,CACjFD,GACAjiD,EAAO,QAAU4hC,EAAI,EAErBogB,EAAK,UAAY,OAAYA,EAAK,QAAU,EAAGG,GAAgBtgB,CAAQ,CAAC,EACxE7hC,EAAO,YAAc4hC,EAAImgB,EAAO,UAAY,OAAYA,EAAO,QAAU,EAAG,EAAGK,GAAiBvgB,CAAQ,CAAC,GAEpGqgB,IACLliD,EAAO,QAAU4hC,EAAImgB,EAAO,UAAY,OAAYA,EAAO,QAAU,EAAGC,EAAK,UAAY,OAAYA,EAAK,QAAU,EAAGngB,CAAQ,GAKnI,QAAS5hC,EAAI,EAAGA,EAAI0hD,GAAY1hD,IAAK,CACjC,MAAMoiD,EAAc,SAASX,GAAQzhD,CAAC,CAAC,SACvC,IAAIqiD,EAAeC,GAAUR,EAAQM,CAAW,EAC5CG,EAAaD,GAAUP,EAAMK,CAAW,EAC5C,GAAIC,IAAiB,QAAaE,IAAe,OAC7C,SACJF,IAAiBA,EAAe,GAChCE,IAAeA,EAAa,GACbF,IAAiB,GAC5BE,IAAe,GACfX,GAAKS,CAAY,IAAMT,GAAKW,CAAU,GAEtCxiD,EAAOqiD,CAAW,EAAI,KAAK,IAAIzgB,EAAIggB,GAASU,CAAY,EAAGV,GAASY,CAAU,EAAG3gB,CAAQ,EAAG,CAAC,GACzFpT,GAAQ,KAAK+zB,CAAU,GAAK/zB,GAAQ,KAAK6zB,CAAY,KACrDtiD,EAAOqiD,CAAW,GAAK,MAI3BriD,EAAOqiD,CAAW,EAAIG,CAE9B,EAIIT,EAAO,QAAUC,EAAK,UACtBhiD,EAAO,OAAS4hC,EAAImgB,EAAO,QAAU,EAAGC,EAAK,QAAU,EAAGngB,CAAQ,EAE1E,CACA,SAAS0gB,GAAU9tB,EAAQguB,EAAY,CACnC,OAAOhuB,EAAOguB,CAAU,IAAM,OACxBhuB,EAAOguB,CAAU,EACjBhuB,EAAO,YACjB,CAwBA,MAAM0tB,GAAkBO,GAAS,EAAG,GAAK7iB,EAAO,EAC1CuiB,GAAmBM,GAAS,GAAK,IAAMlxC,CAAI,EACjD,SAASkxC,GAAS70B,EAAKhZ,EAAKyoB,EAAQ,CAChC,OAAQxc,GAEAA,EAAI+M,EACG,EACP/M,EAAIjM,EACG,EACJyoB,EAAOuE,GAAShU,EAAKhZ,EAAKiM,CAAC,CAAC,CAE3C,CCrFA,SAAS6hC,GAAazK,EAAM0K,EAAY,CACpC1K,EAAK,IAAM0K,EAAW,IACtB1K,EAAK,IAAM0K,EAAW,GAC1B,CAMA,SAASC,GAAY7G,EAAK8G,EAAW,CACjCH,GAAa3G,EAAI,EAAG8G,EAAU,CAAC,EAC/BH,GAAa3G,EAAI,EAAG8G,EAAU,CAAC,CACnC,CCVA,SAASC,GAAiB/L,EAAO4E,EAAW5tB,EAAOwtB,EAAaK,EAAU,CACtE,OAAA7E,GAAS4E,EACT5E,EAAQuE,GAAWvE,EAAO,EAAIhpB,EAAOwtB,CAAW,EAC5CK,IAAa,SACb7E,EAAQuE,GAAWvE,EAAO,EAAI6E,EAAUL,CAAW,GAEhDxE,CACX,CAIA,SAASgM,GAAgB9K,EAAM0D,EAAY,EAAG5tB,EAAQ,EAAG8C,EAAS,GAAK+qB,EAAU+G,EAAa1K,EAAM+K,EAAa/K,EAAM,CAMnH,GALIzpB,GAAQ,KAAKmtB,CAAS,IACtBA,EAAY,WAAWA,CAAS,EAEhCA,EADyBha,EAAIqhB,EAAW,IAAKA,EAAW,IAAKrH,EAAY,GAAG,EAC7CqH,EAAW,KAE1C,OAAOrH,GAAc,SACrB,OACJ,IAAIJ,EAAc5Z,EAAIghB,EAAW,IAAKA,EAAW,IAAK9xB,CAAM,EACxDonB,IAAS0K,IACTpH,GAAeI,GACnB1D,EAAK,IAAM6K,GAAiB7K,EAAK,IAAK0D,EAAW5tB,EAAOwtB,EAAaK,CAAQ,EAC7E3D,EAAK,IAAM6K,GAAiB7K,EAAK,IAAK0D,EAAW5tB,EAAOwtB,EAAaK,CAAQ,CACjF,CAKA,SAASqH,GAAqBhL,EAAMuE,EAAY,CAACt8C,EAAKu8C,EAAUC,CAAS,EAAG7rB,EAAQmyB,EAAY,CAC5FD,GAAgB9K,EAAMuE,EAAWt8C,CAAG,EAAGs8C,EAAWC,CAAQ,EAAGD,EAAWE,CAAS,EAAGF,EAAW,MAAO3rB,EAAQmyB,CAAU,CAC5H,CAIA,MAAMpG,GAAQ,CAAC,IAAK,SAAU,SAAS,EACjCC,GAAQ,CAAC,IAAK,SAAU,SAAS,EAKvC,SAASqG,GAAoBnH,EAAKS,EAAYqG,EAAWM,EAAW,CAChEF,GAAqBlH,EAAI,EAAGS,EAAYI,GAAOiG,EAAYA,EAAU,EAAI,OAAWM,EAAYA,EAAU,EAAI,MAAS,EACvHF,GAAqBlH,EAAI,EAAGS,EAAYK,GAAOgG,EAAYA,EAAU,EAAI,OAAWM,EAAYA,EAAU,EAAI,MAAS,CAC3H,CCjDA,SAASC,GAAgBxgD,EAAO,CAC5B,OAAOA,EAAM,YAAc,GAAKA,EAAM,QAAU,CACpD,CACA,SAASygD,GAAYzgD,EAAO,CACxB,OAAOwgD,GAAgBxgD,EAAM,CAAC,GAAKwgD,GAAgBxgD,EAAM,CAAC,CAC9D,CACA,SAAS0gD,GAAU39C,EAAGC,EAAG,CACrB,OAAQD,EAAE,EAAE,MAAQC,EAAE,EAAE,KACpBD,EAAE,EAAE,MAAQC,EAAE,EAAE,KAChBD,EAAE,EAAE,MAAQC,EAAE,EAAE,KAChBD,EAAE,EAAE,MAAQC,EAAE,EAAE,GACxB,CACA,SAAS29C,GAAiB59C,EAAGC,EAAG,CAC5B,OAAQ,KAAK,MAAMD,EAAE,EAAE,GAAG,IAAM,KAAK,MAAMC,EAAE,EAAE,GAAG,GAC9C,KAAK,MAAMD,EAAE,EAAE,GAAG,IAAM,KAAK,MAAMC,EAAE,EAAE,GAAG,GAC1C,KAAK,MAAMD,EAAE,EAAE,GAAG,IAAM,KAAK,MAAMC,EAAE,EAAE,GAAG,GAC1C,KAAK,MAAMD,EAAE,EAAE,GAAG,IAAM,KAAK,MAAMC,EAAE,EAAE,GAAG,CAClD,CACA,SAAS49C,GAAYzH,EAAK,CACtB,OAAO/D,GAAW+D,EAAI,CAAC,EAAI/D,GAAW+D,EAAI,CAAC,CAC/C,CCpBA,MAAM0H,EAAU,CACZ,aAAc,CACV,KAAK,QAAU,CAAA,CACnB,CACA,IAAI9qB,EAAM,CACN2X,GAAc,KAAK,QAAS3X,CAAI,EAChCA,EAAK,eAAc,CACvB,CACA,OAAOA,EAAM,CAKT,GAJA4X,GAAW,KAAK,QAAS5X,CAAI,EACzBA,IAAS,KAAK,WACd,KAAK,SAAW,QAEhBA,IAAS,KAAK,KAAM,CACpB,MAAM+qB,EAAW,KAAK,QAAQ,KAAK,QAAQ,OAAS,CAAC,EACjDA,GACA,KAAK,QAAQA,CAAQ,CAE7B,CACJ,CACA,SAAS/qB,EAAM,CACX,MAAMgrB,EAAc,KAAK,QAAQ,UAAWC,GAAWjrB,IAASirB,CAAM,EACtE,GAAID,IAAgB,EAChB,MAAO,GAIX,IAAID,EACJ,QAAS1jD,EAAI2jD,EAAa3jD,GAAK,EAAGA,IAAK,CACnC,MAAM4jD,EAAS,KAAK,QAAQ5jD,CAAC,EAC7B,GAAI4jD,EAAO,YAAc,GAAO,CAC5BF,EAAWE,EACX,KACJ,CACJ,CACA,OAAIF,GACA,KAAK,QAAQA,CAAQ,EACd,IAGA,EAEf,CACA,QAAQ/qB,EAAMkrB,EAAuB,CACjC,MAAMH,EAAW,KAAK,KACtB,GAAI/qB,IAAS+qB,IAEb,KAAK,SAAWA,EAChB,KAAK,KAAO/qB,EACZA,EAAK,KAAI,EACL+qB,GAAU,CACVA,EAAS,UAAYA,EAAS,eAAc,EAC5C/qB,EAAK,eAAc,EACnBA,EAAK,WAAa+qB,EACdG,IACAlrB,EAAK,WAAW,gBAAkB,IAElC+qB,EAAS,WACT/qB,EAAK,SAAW+qB,EAAS,SACzB/qB,EAAK,SAAS,aACV+qB,EAAS,iBAAmBA,EAAS,cAEzC/qB,EAAK,MAAQA,EAAK,KAAK,aACvBA,EAAK,cAAgB,IAEzB,KAAM,CAAE,UAAAmrB,GAAcnrB,EAAK,QACvBmrB,IAAc,IACdJ,EAAS,KAAI,CAcrB,CACJ,CACA,uBAAwB,CACpB,KAAK,QAAQ,QAAS/qB,GAAS,CAC3B,KAAM,CAAE,QAAAr4B,EAAS,aAAAyjD,CAAY,EAAKprB,EAClCr4B,EAAQ,gBAAkBA,EAAQ,eAAc,EAC5CyjD,GACAA,EAAa,QAAQ,gBACjBA,EAAa,QAAQ,eAAc,CAE/C,CAAC,CACL,CACA,gBAAiB,CACb,KAAK,QAAQ,QAASprB,GAAS,CAC3BA,EAAK,UAAYA,EAAK,eAAe,EAAK,CAC9C,CAAC,CACL,CAKA,oBAAqB,CACb,KAAK,MAAQ,KAAK,KAAK,WACvB,KAAK,KAAK,SAAW,OAE7B,CACJ,CC7GA,SAASqrB,GAAyBphD,EAAOq5C,EAAWgI,EAAiB,CACjE,IAAIn3B,EAAY,GAOhB,MAAMo3B,EAAathD,EAAM,EAAE,UAAYq5C,EAAU,EAC3CkI,EAAavhD,EAAM,EAAE,UAAYq5C,EAAU,EAWjD,IAVIiI,GAAcC,KACdr3B,EAAY,eAAeo3B,CAAU,OAAOC,CAAU,YAMtDlI,EAAU,IAAM,GAAKA,EAAU,IAAM,KACrCnvB,GAAa,SAAS,EAAImvB,EAAU,CAAC,KAAK,EAAIA,EAAU,CAAC,MAEzDgI,EAAiB,CACjB,KAAM,CAAE,OAAAG,EAAQ,QAAAC,EAAS,QAAAC,CAAO,EAAKL,EACjCG,IACAt3B,GAAa,UAAUs3B,CAAM,SAC7BC,IACAv3B,GAAa,WAAWu3B,CAAO,SAC/BC,IACAx3B,GAAa,WAAWw3B,CAAO,QACvC,CAKA,MAAMC,EAAgB3hD,EAAM,EAAE,MAAQq5C,EAAU,EAC1CuI,EAAgB5hD,EAAM,EAAE,MAAQq5C,EAAU,EAChD,OAAIsI,IAAkB,GAAKC,IAAkB,KACzC13B,GAAa,SAASy3B,CAAa,KAAKC,CAAa,KAElD13B,GAAa,MACxB,CCvCA,MAAM23B,GAAiB,CAAC9+C,EAAGC,IAAMD,EAAE,MAAQC,EAAE,MCG7C,MAAM8+C,EAAS,CACX,aAAc,CACV,KAAK,SAAW,CAAA,EAChB,KAAK,QAAU,EACnB,CACA,IAAItrB,EAAO,CACPkX,GAAc,KAAK,SAAUlX,CAAK,EAClC,KAAK,QAAU,EACnB,CACA,OAAOA,EAAO,CACVmX,GAAW,KAAK,SAAUnX,CAAK,EAC/B,KAAK,QAAU,EACnB,CACA,QAAQzgB,EAAU,CACd,KAAK,SAAW,KAAK,SAAS,KAAK8rC,EAAc,EACjD,KAAK,QAAU,GACf,KAAK,SAAS,QAAQ9rC,CAAQ,CAClC,CACJ,CChBA,SAASP,GAAMO,EAAUvE,EAAS,CAC9B,MAAMuwC,EAAQ,YAAY,IAAG,EACvBC,EAAe,CAAC,CAAE,UAAA/tB,KAAgB,CACpC,MAAMwV,EAAUxV,EAAY8tB,EACxBtY,GAAWj4B,IACX4iB,GAAY4tB,CAAY,EACxBjsC,EAAS0zB,EAAUj4B,CAAO,EAElC,EACA,OAAA2iB,EAAM,KAAK6tB,EAAc,EAAI,EACtB,IAAM5tB,GAAY4tB,CAAY,CACzC,CChBA,SAASC,GAAOrwC,EAAM,CACd,OAAO,aACP,OAAO,YAAY,OAAOA,CAAI,CAEtC,CCJA,SAASswC,GAAa10C,EAAS,CAC3B,OAAOA,aAAmB,YAAcA,EAAQ,UAAY,KAChE,CCEA,SAAS20C,GAAmB5jD,EAAOy8B,EAAWt9B,EAAS,CACnD,MAAM0kD,EAAgBt4B,GAAcvrB,CAAK,EAAIA,EAAQgwC,GAAYhwC,CAAK,EACtE,OAAA6jD,EAAc,MAAMlV,GAAmB,GAAIkV,EAAepnB,EAAWt9B,CAAO,CAAC,EACtE0kD,EAAc,SACzB,CCkBA,MAAMC,GAAgB,CAAC,GAAI,IAAK,IAAK,GAAG,EAClCC,GAAmB,CAAE,WAAY,QAAQ,EAKzCC,GAAkB,IACxB,IAAIp2C,GAAK,EAKT,MAAMq2C,GAAsB,CACxB,KAAM,kBACN,WAAY,EACZ,qBAAsB,EACtB,uBAAwB,CAC5B,EACA,SAASC,GAAqB,CAAE,qBAAAC,EAAsB,cAAAC,EAAe,cAAAC,EAAe,kBAAAC,EAAmB,eAAAC,GAAmB,CACtH,OAAO,KAAqB,CACxB,YAAY12B,EAAe,GAAIvG,EAAS88B,GAAkB,KAAmC,OAASA,IAAiB,CAInH,KAAK,GAAKx2C,KAIV,KAAK,YAAc,EAOnB,KAAK,SAAW,IAAI,IAKpB,KAAK,QAAU,CAAA,EAMf,KAAK,gBAAkB,GACvB,KAAK,mBAAqB,GAO1B,KAAK,cAAgB,GAKrB,KAAK,kBAAoB,GAKzB,KAAK,wBAA0B,GAK/B,KAAK,iBAAmB,GAIxB,KAAK,sBAAwB,GAC7B,KAAK,sBAAwB,GAK7B,KAAK,WAAa,GAIlB,KAAK,MAAQ,GAKb,KAAK,WAAa,GAIlB,KAAK,qBAAuB,GAS5B,KAAK,UAAY,CAAE,EAAG,EAAG,EAAG,CAAC,EAI7B,KAAK,cAAgB,IAAI,IACzB,KAAK,gBAAkB,GAEvB,KAAK,gBAAkB,GACvB,KAAK,0BAA4B,GACjC,KAAK,kBAAoB,IAAM,CACvB,KAAK,aACL,KAAK,WAAa,GAClB,KAAK,kBAAiB,EAE9B,EAMA,KAAK,iBAAmB,IAAM,CAC1B,KAAK,0BAA4B,GAKjCq2C,GAAoB,WAChBA,GAAoB,qBAChBA,GAAoB,uBAChB,EACZ,KAAK,MAAM,QAAQO,EAAmB,EACtC,KAAK,MAAM,QAAQC,EAAkB,EACrC,KAAK,MAAM,QAAQC,EAAc,EACjC,KAAK,MAAM,QAAQC,EAAe,EAClCjB,GAAOO,EAAmB,CAC9B,EACA,KAAK,aAAe,GACpB,KAAK,UAAY,GACjB,KAAK,kBAAoB,EAKzB,KAAK,YAAc,IAAI,IACvB,KAAK,aAAep2B,EACpB,KAAK,KAAOvG,EAASA,EAAO,MAAQA,EAAS,KAC7C,KAAK,KAAOA,EAAS,CAAC,GAAGA,EAAO,KAAMA,CAAM,EAAI,CAAA,EAChD,KAAK,OAASA,EACd,KAAK,MAAQA,EAASA,EAAO,MAAQ,EAAI,EACzC,QAASzoB,EAAI,EAAGA,EAAI,KAAK,KAAK,OAAQA,IAClC,KAAK,KAAKA,CAAC,EAAE,qBAAuB,GAEpC,KAAK,OAAS,OACd,KAAK,MAAQ,IAAI0kD,GACzB,CACA,iBAAiB76B,EAAMyN,EAAS,CAC5B,OAAK,KAAK,cAAc,IAAIzN,CAAI,GAC5B,KAAK,cAAc,IAAIA,EAAM,IAAI2mB,EAAqB,EAEnD,KAAK,cAAc,IAAI3mB,CAAI,EAAE,IAAIyN,CAAO,CACnD,CACA,gBAAgBzN,KAAS5Q,EAAM,CAC3B,MAAM8sC,EAAsB,KAAK,cAAc,IAAIl8B,CAAI,EACvDk8B,GAAuBA,EAAoB,OAAO,GAAG9sC,CAAI,CAC7D,CACA,aAAa4Q,EAAM,CACf,OAAO,KAAK,cAAc,IAAIA,CAAI,CACtC,CAIA,MAAMN,EAAUy8B,EAAgB,KAAK,KAAK,gBAAiB,CACvD,GAAI,KAAK,SACL,OACJ,KAAK,MAAQlB,GAAav7B,CAAQ,EAClC,KAAK,SAAWA,EAChB,KAAM,CAAE,SAAAkC,EAAU,OAAAgB,EAAQ,cAAAzD,CAAa,EAAK,KAAK,QASjD,GARIA,GAAiB,CAACA,EAAc,SAChCA,EAAc,MAAMO,CAAQ,EAEhC,KAAK,KAAK,MAAM,IAAI,IAAI,EACxB,KAAK,QAAU,KAAK,OAAO,SAAS,IAAI,IAAI,EACxCy8B,IAAkBv5B,GAAUhB,KAC5B,KAAK,cAAgB,IAErB65B,EAAsB,CACtB,IAAIW,EACJ,MAAMC,EAAsB,IAAO,KAAK,KAAK,sBAAwB,GACrEZ,EAAqB/7B,EAAU,IAAM,CACjC,KAAK,KAAK,sBAAwB,GAClC08B,GAAeA,EAAW,EAC1BA,EAAc7tC,GAAM8tC,EAAqB,GAAG,EACxC5F,GAAsB,yBACtBA,GAAsB,uBAAyB,GAC/C,KAAK,MAAM,QAAQ6F,EAAe,EAE1C,CAAC,CACL,CACI16B,GACA,KAAK,KAAK,mBAAmBA,EAAU,IAAI,EAG3C,KAAK,QAAQ,UAAY,IACzBzC,IACCyC,GAAYgB,IACb,KAAK,iBAAiB,YAAa,CAAC,CAAE,MAAA7pB,EAAO,iBAAA48C,EAAkB,yBAAA4G,EAA0B,OAAQC,KAAiB,CAC9G,GAAI,KAAK,yBAA0B,CAC/B,KAAK,OAAS,OACd,KAAK,eAAiB,OACtB,MACJ,CAEA,MAAMC,EAAmB,KAAK,QAAQ,YAClCt9B,EAAc,qBAAoB,GAClCu9B,GACE,CAAE,uBAAAC,EAAwB,0BAAAC,GAA+Bz9B,EAAc,SAAQ,EAK/E09B,EAAgB,CAAC,KAAK,cACxB,CAACnD,GAAiB,KAAK,aAAc8C,CAAS,GAC9CD,EAMEO,EAA+B,CAACnH,GAAoB4G,EAC1D,GAAI,KAAK,QAAQ,YACZ,KAAK,YAAc,KAAK,WAAW,UACpCO,GACCnH,IACIkH,GAAiB,CAAC,KAAK,kBAAoB,CAC5C,KAAK,aACL,KAAK,aAAe,KAAK,WACzB,KAAK,aAAa,aAAe,QAErC,KAAK,mBAAmB9jD,EAAO+jD,CAA4B,EAC3D,MAAMC,EAAmB,CACrB,GAAGhX,GAAmB0W,EAAkB,QAAQ,EAChD,OAAQE,EACR,WAAYC,CACxC,GAC4Bz9B,EAAc,oBACd,KAAK,QAAQ,cACb49B,EAAiB,MAAQ,EACzBA,EAAiB,KAAO,IAE5B,KAAK,eAAeA,CAAgB,CACxC,MAOSpH,GACD2G,GAAgB,IAAI,EAEpB,KAAK,OAAM,GAAM,KAAK,QAAQ,gBAC9B,KAAK,QAAQ,eAAc,EAGnC,KAAK,aAAeE,CACxB,CAAC,CAET,CACA,SAAU,CACN,KAAK,QAAQ,UAAY,KAAK,WAAU,EACxC,KAAK,KAAK,MAAM,OAAO,IAAI,EAC3B,MAAM55C,EAAQ,KAAK,SAAQ,EAC3BA,GAASA,EAAM,OAAO,IAAI,EAC1B,KAAK,QAAU,KAAK,OAAO,SAAS,OAAO,IAAI,EAC/C,KAAK,SAAW,OAChBuqB,GAAY,KAAK,gBAAgB,CACrC,CAEA,aAAc,CACV,KAAK,sBAAwB,EACjC,CACA,eAAgB,CACZ,KAAK,sBAAwB,EACjC,CACA,iBAAkB,CACd,OAAO,KAAK,uBAAyB,KAAK,qBAC9C,CACA,wBAAyB,CACrB,OAAQ,KAAK,oBACR,KAAK,QAAU,KAAK,OAAO,uBAAsB,GAClD,EACR,CAEA,aAAc,CACN,KAAK,gBAAe,IAExB,KAAK,WAAa,GAClB,KAAK,OAAS,KAAK,MAAM,QAAQ6vB,EAAa,EAC9C,KAAK,cACT,CACA,sBAAuB,CACnB,KAAM,CAAE,cAAA79B,GAAkB,KAAK,QAC/B,OAAOA,GAAiBA,EAAc,SAAQ,EAAG,iBACrD,CACA,WAAW89B,EAAwB,GAAM,CAErC,GADA,KAAK,KAAK,gBAAkB,GACxB,KAAK,KAAK,kBAAmB,CAC7B,KAAK,QAAQ,gBAAkB,KAAK,QAAQ,eAAc,EAC1D,MACJ,CAEA,GADA,CAAC,KAAK,KAAK,YAAc,KAAK,KAAK,YAAW,EAC1C,KAAK,cACL,OACJ,KAAK,cAAgB,GACrB,QAAS9mD,EAAI,EAAGA,EAAI,KAAK,KAAK,OAAQA,IAAK,CACvC,MAAM24B,EAAO,KAAK,KAAK34B,CAAC,EACxB24B,EAAK,qBAAuB,GAC5BA,EAAK,aAAa,UAAU,EACxBA,EAAK,QAAQ,YACbA,EAAK,WAAW,EAAK,CAE7B,CACA,KAAM,CAAE,SAAAlN,EAAU,OAAAgB,CAAM,EAAK,KAAK,QAClC,GAAIhB,IAAa,QAAa,CAACgB,EAC3B,OACJ,MAAMS,EAAoB,KAAK,qBAAoB,EACnD,KAAK,2BAA6BA,EAC5BA,EAAkB,KAAK,aAAc,EAAE,EACvC,OACN,KAAK,eAAc,EACnB45B,GAAyB,KAAK,gBAAgB,YAAY,CAC9D,CACA,QAAS,CAML,GALA,KAAK,gBAAkB,GACE,KAAK,gBAAe,EAIvB,CAClB,KAAK,cAAa,EAClB,KAAK,kBAAiB,EACtB,KAAK,MAAM,QAAQC,EAAiB,EACpC,MACJ,CACK,KAAK,YACN,KAAK,MAAM,QAAQC,EAAkB,EAEzC,KAAK,WAAa,GAIlB,KAAK,MAAM,QAAQC,EAAmB,EAKtC,KAAK,MAAM,QAAQC,EAAY,EAK/B,KAAK,MAAM,QAAQC,EAAkB,EACrC,KAAK,kBAAiB,EAMtB,MAAMra,EAAM,YAAY,IAAG,EAC3B7W,EAAU,MAAQtI,GAAM,EAAG,IAAO,GAAImf,EAAM7W,EAAU,SAAS,EAC/DA,EAAU,UAAY6W,EACtB7W,EAAU,aAAe,GACzBO,GAAM,OAAO,QAAQP,CAAS,EAC9BO,GAAM,UAAU,QAAQP,CAAS,EACjCO,GAAM,OAAO,QAAQP,CAAS,EAC9BA,EAAU,aAAe,EAC7B,CACA,WAAY,CACH,KAAK,kBACN,KAAK,gBAAkB,GACvB,eAAe,IAAM,KAAK,QAAQ,EAE1C,CACA,mBAAoB,CAChB,KAAK,MAAM,QAAQmxB,EAAa,EAChC,KAAK,YAAY,QAAQC,EAAmB,CAChD,CACA,0BAA2B,CAClB,KAAK,4BACN,KAAK,0BAA4B,GACjCtwB,EAAM,UAAU,KAAK,iBAAkB,GAAO,EAAI,EAE1D,CACA,2BAA4B,CAMxBA,EAAM,WAAW,IAAM,CACf,KAAK,cACL,KAAK,KAAK,UAAS,EAGnB,KAAK,KAAK,kBAAiB,CAEnC,CAAC,CACL,CAIA,gBAAiB,CACT,KAAK,UAAY,CAAC,KAAK,WAE3B,KAAK,SAAW,KAAK,QAAO,EAChC,CACA,cAAe,CAKX,GAJI,CAAC,KAAK,WAGV,KAAK,aAAY,EACb,EAAE,KAAK,QAAQ,qBAAuB,KAAK,OAAM,IACjD,CAAC,KAAK,eACN,OASJ,GAAI,KAAK,YAAc,CAAC,KAAK,WAAW,SACpC,QAAS/2B,EAAI,EAAGA,EAAI,KAAK,KAAK,OAAQA,IACrB,KAAK,KAAKA,CAAC,EACnB,aAAY,EAGzB,MAAMsnD,EAAa,KAAK,OACxB,KAAK,OAAS,KAAK,QAAQ,EAAK,EAChC,KAAK,gBAAkB7M,EAAS,EAChC,KAAK,cAAgB,GACrB,KAAK,gBAAkB,OACvB,KAAK,gBAAgB,UAAW,KAAK,OAAO,SAAS,EACrD,KAAM,CAAE,cAAAzxB,GAAkB,KAAK,QAC/BA,GACIA,EAAc,OAAO,gBAAiB,KAAK,OAAO,UAAWs+B,EAAaA,EAAW,UAAY,MAAS,CAClH,CACA,aAAaC,EAAQ,UAAW,CAC5B,IAAIC,EAAmB,GAAQ,KAAK,QAAQ,cAAgB,KAAK,UAC7D,KAAK,QACL,KAAK,OAAO,cAAgB,KAAK,KAAK,aACtC,KAAK,OAAO,QAAUD,IACtBC,EAAmB,IAEnBA,IACA,KAAK,OAAS,CACV,YAAa,KAAK,KAAK,YACvB,MAAAD,EACA,OAAQ9B,EAAkB,KAAK,QAAQ,EACvC,OAAQD,EAAc,KAAK,QAAQ,CACvD,EAEQ,CACA,gBAAiB,CACb,GAAI,CAACE,EACD,OACJ,MAAM+B,EAAmB,KAAK,eAAiB,KAAK,qBAC9CC,EAAgB,KAAK,iBAAmB,CAACrE,GAAY,KAAK,eAAe,EACzEn2B,EAAoB,KAAK,qBAAoB,EAC7Cy6B,EAAyBz6B,EACzBA,EAAkB,KAAK,aAAc,EAAE,EACvC,OACA06B,EAA8BD,IAA2B,KAAK,2BAChEF,IACCC,GACGt4B,GAAa,KAAK,YAAY,GAC9Bw4B,KACJlC,EAAe,KAAK,SAAUiC,CAAsB,EACpD,KAAK,qBAAuB,GAC5B,KAAK,eAAc,EAE3B,CACA,QAAQE,EAAkB,GAAM,CAC5B,MAAMC,EAAU,KAAK,eAAc,EACnC,IAAI/O,EAAY,KAAK,oBAAoB+O,CAAO,EAMhD,OAAID,IACA9O,EAAY,KAAK,gBAAgBA,CAAS,GAE9CgP,GAAShP,CAAS,EACX,CACH,YAAa,KAAK,KAAK,YACvB,YAAa+O,EACb,UAAA/O,EACA,aAAc,CAAA,EACd,OAAQ,KAAK,EAC7B,CACQ,CACA,gBAAiB,CACb,KAAM,CAAE,cAAA/vB,GAAkB,KAAK,QAC/B,GAAI,CAACA,EACD,OAAOyxB,EAAS,EACpB,MAAMsB,EAAM/yB,EAAc,mBAAkB,EAEtC,CAAE,OAAAk0B,GAAW,KAAK,KACxB,OAAIA,IACAZ,GAAcP,EAAI,EAAGmB,EAAO,OAAO,CAAC,EACpCZ,GAAcP,EAAI,EAAGmB,EAAO,OAAO,CAAC,GAEjCnB,CACX,CACA,oBAAoBA,EAAK,CACrB,MAAMiM,EAAmBvN,EAAS,EAClCmI,GAAYoF,EAAkBjM,CAAG,EAKjC,QAAS/7C,EAAI,EAAGA,EAAI,KAAK,KAAK,OAAQA,IAAK,CACvC,MAAM24B,EAAO,KAAK,KAAK34B,CAAC,EAClB,CAAE,OAAAk9C,EAAQ,QAAA58C,CAAO,EAAKq4B,EAC5B,GAAIA,IAAS,KAAK,MAAQukB,GAAU58C,EAAQ,aAAc,CAKtD,GAAI48C,EAAO,OAAQ,CACf0F,GAAYoF,EAAkBjM,CAAG,EACjC,KAAM,CAAE,OAAQkM,CAAU,EAAK,KAAK,KAKhCA,IACA3L,GAAc0L,EAAiB,EAAG,CAACC,EAAW,OAAO,CAAC,EACtD3L,GAAc0L,EAAiB,EAAG,CAACC,EAAW,OAAO,CAAC,EAE9D,CACA3L,GAAc0L,EAAiB,EAAG9K,EAAO,OAAO,CAAC,EACjDZ,GAAc0L,EAAiB,EAAG9K,EAAO,OAAO,CAAC,CACrD,CACJ,CACA,OAAO8K,CACX,CACA,eAAejM,EAAKmM,EAAgB,GAAO,CACvC,MAAMC,EAAiB1N,EAAS,EAChCmI,GAAYuF,EAAgBpM,CAAG,EAC/B,QAAS/7C,EAAI,EAAGA,EAAI,KAAK,KAAK,OAAQA,IAAK,CACvC,MAAM24B,EAAO,KAAK,KAAK34B,CAAC,EACpB,CAACkoD,GACDvvB,EAAK,QAAQ,cACbA,EAAK,QACLA,IAASA,EAAK,MACdyjB,GAAa+L,EAAgB,CACzB,EAAG,CAACxvB,EAAK,OAAO,OAAO,EACvB,EAAG,CAACA,EAAK,OAAO,OAAO,CAC/C,CAAqB,EAEAvJ,GAAauJ,EAAK,YAAY,GAEnCyjB,GAAa+L,EAAgBxvB,EAAK,YAAY,CAClD,CACA,OAAIvJ,GAAa,KAAK,YAAY,GAC9BgtB,GAAa+L,EAAgB,KAAK,YAAY,EAE3CA,CACX,CACA,gBAAgBpM,EAAK,CACjB,MAAMqM,EAAsB3N,EAAS,EACrCmI,GAAYwF,EAAqBrM,CAAG,EACpC,QAAS/7C,EAAI,EAAGA,EAAI,KAAK,KAAK,OAAQA,IAAK,CACvC,MAAM24B,EAAO,KAAK,KAAK34B,CAAC,EAGxB,GAFI,CAAC24B,EAAK,UAEN,CAACvJ,GAAauJ,EAAK,YAAY,EAC/B,SACJsiB,GAAStiB,EAAK,YAAY,GAAKA,EAAK,eAAc,EAClD,MAAMwqB,EAAY1I,EAAS,EACrB4N,EAAU1vB,EAAK,eAAc,EACnCiqB,GAAYO,EAAWkF,CAAO,EAC9BnF,GAAoBkF,EAAqBzvB,EAAK,aAAcA,EAAK,SAAWA,EAAK,SAAS,UAAY,OAAWwqB,CAAS,CAC9H,CACA,OAAI/zB,GAAa,KAAK,YAAY,GAC9B8zB,GAAoBkF,EAAqB,KAAK,YAAY,EAEvDA,CACX,CACA,eAAexlD,EAAO,CAClB,KAAK,YAAcA,EACnB,KAAK,KAAK,yBAAwB,EAClC,KAAK,kBAAoB,EAC7B,CACA,WAAWtC,EAAS,CAChB,KAAK,QAAU,CACX,GAAG,KAAK,QACR,GAAGA,EACH,UAAWA,EAAQ,YAAc,OAAYA,EAAQ,UAAY,EACjF,CACQ,CACA,mBAAoB,CAChB,KAAK,OAAS,OACd,KAAK,OAAS,OACd,KAAK,SAAW,OAChB,KAAK,2BAA6B,OAClC,KAAK,YAAc,OACnB,KAAK,OAAS,OACd,KAAK,cAAgB,EACzB,CACA,oCAAqC,CAC5B,KAAK,gBAQN,KAAK,eAAe,2BACpB21B,EAAU,WACV,KAAK,eAAe,mBAAmB,EAAI,CAEnD,CACA,mBAAmBqyB,EAAqB,GAAO,CAC3C,IAAInzC,EAMJ,MAAM4sC,EAAO,KAAK,QAAO,EACzB,KAAK,oBAAsB,KAAK,kBAAoBA,EAAK,mBACzD,KAAK,mBAAqB,KAAK,iBAAmBA,EAAK,kBACvD,KAAK,0BAA4B,KAAK,wBAA0BA,EAAK,yBACrE,MAAMwG,EAAW,EAAQ,KAAK,cAAiB,OAASxG,EAUxD,GALgB,EAAEuG,GACbC,GAAY,KAAK,yBAClB,KAAK,mBACH,GAAApzC,EAAK,KAAK,UAAY,MAAQA,IAAO,SAAkBA,EAAG,mBAC5D,KAAK,gCAEL,OACJ,KAAM,CAAE,OAAAsX,EAAQ,SAAAhB,CAAQ,EAAK,KAAK,QAIlC,GAAI,GAAC,KAAK,QAAU,EAAEgB,GAAUhB,IAShC,IAPA,KAAK,yBAA2BwK,EAAU,UAOtC,CAAC,KAAK,aAAe,CAAC,KAAK,eAAgB,CAE3C,MAAMuyB,EAAiB,KAAK,2BAA0B,EAClDA,GACAA,EAAe,QACf,KAAK,oBAAsB,GAC3B,KAAK,eAAiBA,EACtB,KAAK,mCAAkC,EACvC,KAAK,eAAiB/N,EAAS,EAC/B,KAAK,qBAAuBA,EAAS,EACrC/B,GAAqB,KAAK,qBAAsB,KAAK,OAAO,UAAW8P,EAAe,OAAO,SAAS,EACtG5F,GAAY,KAAK,eAAgB,KAAK,oBAAoB,GAG1D,KAAK,eAAiB,KAAK,eAAiB,MAEpD,CAKA,GAAI,GAAC,KAAK,gBAAkB,CAAC,KAAK,aAyClC,IApCK,KAAK,SACN,KAAK,OAASnI,EAAS,EACvB,KAAK,qBAAuBA,EAAS,GAKrC,KAAK,gBACL,KAAK,sBACL,KAAK,gBACL,KAAK,eAAe,QACpB,KAAK,mCAAkC,EACvCjC,GAAgB,KAAK,OAAQ,KAAK,eAAgB,KAAK,eAAe,MAAM,GAKvE,KAAK,aACE,KAAK,aAEb,KAAK,OAAS,KAAK,eAAe,KAAK,OAAO,SAAS,EAGvDoK,GAAY,KAAK,OAAQ,KAAK,OAAO,SAAS,EAElD9G,GAAc,KAAK,OAAQ,KAAK,WAAW,GAM3C8G,GAAY,KAAK,OAAQ,KAAK,OAAO,SAAS,EAK9C,KAAK,+BAAgC,CACrC,KAAK,+BAAiC,GACtC,MAAM4F,EAAiB,KAAK,2BAA0B,EAClDA,GACA,EAAQA,EAAe,cACnB,EAAQ,KAAK,cACjB,CAACA,EAAe,QAAQ,cACxBA,EAAe,QACf,KAAK,oBAAsB,GAC3B,KAAK,eAAiBA,EACtB,KAAK,mCAAkC,EACvC,KAAK,eAAiB/N,EAAS,EAC/B,KAAK,qBAAuBA,EAAS,EACrC/B,GAAqB,KAAK,qBAAsB,KAAK,OAAQ8P,EAAe,MAAM,EAClF5F,GAAY,KAAK,eAAgB,KAAK,oBAAoB,GAG1D,KAAK,eAAiB,KAAK,eAAiB,MAEpD,CAIAwC,GAAoB,wBACxB,CACA,4BAA6B,CACzB,GAAI,GAAC,KAAK,QACNnK,GAAS,KAAK,OAAO,YAAY,GACjCG,GAAe,KAAK,OAAO,YAAY,GAG3C,OAAI,KAAK,OAAO,eACL,KAAK,OAGL,KAAK,OAAO,2BAA0B,CAErD,CACA,cAAe,CACX,MAAO,IAAS,KAAK,gBACjB,KAAK,aACL,KAAK,QAAQ,aACb,KAAK,OACb,CACA,gBAAiB,CACb,IAAIjmC,EACJ,MAAM4sC,EAAO,KAAK,QAAO,EACnBwG,EAAW,EAAQ,KAAK,cAAiB,OAASxG,EACxD,IAAIjP,EAAU,GAuBd,IAlBI,KAAK,mBAAuB,GAAA39B,EAAK,KAAK,UAAY,MAAQA,IAAO,SAAkBA,EAAG,qBACtF29B,EAAU,IAMVyV,IACC,KAAK,yBAA2B,KAAK,oBACtCzV,EAAU,IAMV,KAAK,2BAA6B7c,EAAU,YAC5C6c,EAAU,IAEVA,EACA,OACJ,KAAM,CAAE,OAAArmB,EAAQ,SAAAhB,CAAQ,EAAK,KAAK,QAWlC,GANA,KAAK,gBAAkB,GAAS,KAAK,QAAU,KAAK,OAAO,iBACvD,KAAK,kBACL,KAAK,kBACJ,KAAK,kBACN,KAAK,YAAc,KAAK,eAAiB,QAEzC,CAAC,KAAK,QAAU,EAAEgB,GAAUhB,GAC5B,OAKJm3B,GAAY,KAAK,gBAAiB,KAAK,OAAO,SAAS,EAIvD,MAAM6F,EAAiB,KAAK,UAAU,EAChCC,EAAiB,KAAK,UAAU,EAKtC1M,GAAgB,KAAK,gBAAiB,KAAK,UAAW,KAAK,KAAMuM,CAAQ,EAKrExG,EAAK,QACL,CAACA,EAAK,SACL,KAAK,UAAU,IAAM,GAAK,KAAK,UAAU,IAAM,KAChDA,EAAK,OAASA,EAAK,OAAO,WAE9B,KAAM,CAAE,OAAAhiD,CAAM,EAAKgiD,EACnB,GAAI,CAAChiD,EAAQ,CAML,KAAK,sBACL,KAAK,gBAAkBw6C,GAAW,EAClC,KAAK,oBAAsB,OAC3B,KAAK,eAAc,GAEvB,MACJ,CACK,KAAK,kBACN,KAAK,gBAAkBA,GAAW,EAClC,KAAK,6BAA+BA,GAAW,GAEnD,MAAMoO,EAA0B,KAAK,oBAUrCtQ,GAAa,KAAK,gBAAiB,KAAK,gBAAiBt4C,EAAQ,KAAK,YAAY,EAClF,KAAK,oBAAsBikD,GAAyB,KAAK,gBAAiB,KAAK,SAAS,GACpF,KAAK,sBAAwB2E,GAC7B,KAAK,UAAU,IAAMF,GACrB,KAAK,UAAU,IAAMC,KACrB,KAAK,aAAe,GACpB,KAAK,eAAc,EACnB,KAAK,gBAAgB,mBAAoB3oD,CAAM,GAKnDqlD,GAAoB,wBACxB,CACA,MAAO,CACH,KAAK,UAAY,EAErB,CACA,MAAO,CACH,KAAK,UAAY,EAErB,CACA,eAAewD,EAAY,GAAM,CAE7B,GADA,KAAK,QAAQ,gBAAkB,KAAK,QAAQ,eAAc,EACtDA,EAAW,CACX,MAAMn8C,EAAQ,KAAK,SAAQ,EAC3BA,GAASA,EAAM,eAAc,CACjC,CACI,KAAK,cAAgB,CAAC,KAAK,aAAa,WACxC,KAAK,aAAe,OAE5B,CACA,mBAAmB7J,EAAO+jD,EAA+B,GAAO,CAC5D,MAAMkC,EAAW,KAAK,SAChBC,EAAuBD,EACvBA,EAAS,aACT,CAAA,EACAE,EAAc,CAAE,GAAG,KAAK,YAAY,EACpCC,EAAczO,GAAW,GAC3B,CAAC,KAAK,gBACN,CAAC,KAAK,eAAe,QAAQ,cAC7B,KAAK,eAAiB,KAAK,qBAAuB,QAEtD,KAAK,+BAAiC,CAACoM,EACvC,MAAMsC,EAAiBxO,EAAS,EAC1ByO,EAAiBL,EAAWA,EAAS,OAAS,OAC9CM,EAAe,KAAK,OAAS,KAAK,OAAO,OAAS,OAClDC,EAA0BF,IAAmBC,EAC7C18C,EAAQ,KAAK,SAAQ,EACrBw1C,EAAe,CAACx1C,GAASA,EAAM,QAAQ,QAAU,EACjDu1C,EAAyB,GAAQoH,GACnC,CAACnH,GACD,KAAK,QAAQ,YAAc,IAC3B,CAAC,KAAK,KAAK,KAAKoH,EAAmB,GACvC,KAAK,kBAAoB,EACzB,IAAIC,EACJ,KAAK,eAAkBr3B,GAAW,CAC9B,MAAM2P,EAAW3P,EAAS,IAC1Bs3B,GAAaP,EAAY,EAAGpmD,EAAM,EAAGg/B,CAAQ,EAC7C2nB,GAAaP,EAAY,EAAGpmD,EAAM,EAAGg/B,CAAQ,EAC7C,KAAK,eAAeonB,CAAW,EAC3B,KAAK,gBACL,KAAK,sBACL,KAAK,QACL,KAAK,gBACL,KAAK,eAAe,SACpBtQ,GAAqBuQ,EAAgB,KAAK,OAAO,UAAW,KAAK,eAAe,OAAO,SAAS,EAChGO,GAAO,KAAK,eAAgB,KAAK,qBAAsBP,EAAgBrnB,CAAQ,EAK3E0nB,GACAhG,GAAU,KAAK,eAAgBgG,CAAkB,IACjD,KAAK,kBAAoB,IAExBA,IACDA,EAAqB7O,EAAS,GAClCmI,GAAY0G,EAAoB,KAAK,cAAc,GAEnDF,IACA,KAAK,gBAAkBL,EACvBlH,GAAUkH,EAAaD,EAAsB,KAAK,aAAclnB,EAAUogB,EAAwBC,CAAY,GAElH,KAAK,KAAK,yBAAwB,EAClC,KAAK,eAAc,EACnB,KAAK,kBAAoBrgB,CAC7B,EACA,KAAK,eAAe,KAAK,QAAQ,WAAa,IAAO,CAAC,CAC1D,CACA,eAAethC,EAAS,CACpB,KAAK,gBAAgB,gBAAgB,EACrC,KAAK,kBAAoB,KAAK,iBAAiB,KAAI,EAC/C,KAAK,cAAgB,KAAK,aAAa,kBACvC,KAAK,aAAa,iBAAiB,KAAI,EAEvC,KAAK,mBACL02B,GAAY,KAAK,gBAAgB,EACjC,KAAK,iBAAmB,QAO5B,KAAK,iBAAmBD,EAAM,OAAO,IAAM,CACvCupB,GAAsB,uBAAyB,GAC/C,KAAK,iBAAmByE,GAAmB,EAAGI,GAAiB,CAC3D,GAAG7kD,EACH,SAAW2xB,GAAW,CAClB,KAAK,eAAeA,CAAM,EAC1B3xB,EAAQ,UAAYA,EAAQ,SAAS2xB,CAAM,CAC/C,EACA,WAAY,IAAM,CACd3xB,EAAQ,YAAcA,EAAQ,WAAU,EACxC,KAAK,kBAAiB,CAC1B,CACpB,CAAiB,EACG,KAAK,eACL,KAAK,aAAa,iBAAmB,KAAK,kBAE9C,KAAK,iBAAmB,MAC5B,CAAC,CACL,CACA,mBAAoB,CACZ,KAAK,eACL,KAAK,aAAa,iBAAmB,OACrC,KAAK,aAAa,gBAAkB,QAExC,MAAMmM,EAAQ,KAAK,SAAQ,EAC3BA,GAASA,EAAM,sBAAqB,EACpC,KAAK,aACD,KAAK,iBACD,KAAK,gBACD,OACZ,KAAK,gBAAgB,mBAAmB,CAC5C,CACA,iBAAkB,CACV,KAAK,mBACL,KAAK,gBAAkB,KAAK,eAAe04C,EAAe,EAC1D,KAAK,iBAAiB,KAAI,GAE9B,KAAK,kBAAiB,CAC1B,CACA,yBAA0B,CACtB,MAAMpD,EAAO,KAAK,QAAO,EACzB,GAAI,CAAE,qBAAA0H,EAAsB,OAAA1pD,EAAQ,OAAA0sB,EAAQ,aAAAuC,CAAY,EAAK+yB,EAC7D,GAAI,GAAC0H,GAAwB,CAAC1pD,GAAU,CAAC0sB,GAOzC,IAAI,OAASs1B,GACT,KAAK,QACLt1B,GACAi9B,GAA0B,KAAK,QAAQ,cAAe,KAAK,OAAO,UAAWj9B,EAAO,SAAS,EAAG,CAChG1sB,EAAS,KAAK,QAAU06C,EAAS,EACjC,MAAMkP,EAAU3R,GAAW,KAAK,OAAO,UAAU,CAAC,EAClDj4C,EAAO,EAAE,IAAMgiD,EAAK,OAAO,EAAE,IAC7BhiD,EAAO,EAAE,IAAMA,EAAO,EAAE,IAAM4pD,EAC9B,MAAMC,EAAU5R,GAAW,KAAK,OAAO,UAAU,CAAC,EAClDj4C,EAAO,EAAE,IAAMgiD,EAAK,OAAO,EAAE,IAC7BhiD,EAAO,EAAE,IAAMA,EAAO,EAAE,IAAM6pD,CAClC,CACAhH,GAAY6G,EAAsB1pD,CAAM,EAMxCq8C,GAAaqN,EAAsBz6B,CAAY,EAO/CqpB,GAAa,KAAK,6BAA8B,KAAK,gBAAiBoR,EAAsBz6B,CAAY,EAC5G,CACA,mBAAmBvD,EAAUkN,EAAM,CAC1B,KAAK,YAAY,IAAIlN,CAAQ,GAC9B,KAAK,YAAY,IAAIA,EAAU,IAAIg4B,EAAW,EAEpC,KAAK,YAAY,IAAIh4B,CAAQ,EACrC,IAAIkN,CAAI,EACd,MAAMxhB,EAASwhB,EAAK,QAAQ,uBAC5BA,EAAK,QAAQ,CACT,WAAYxhB,EAASA,EAAO,WAAa,OACzC,sBAAuBA,GAAUA,EAAO,4BAClCA,EAAO,4BAA4BwhB,CAAI,EACvC,MACtB,CAAa,CACL,CACA,QAAS,CACL,MAAMlsB,EAAQ,KAAK,SAAQ,EAC3B,OAAOA,EAAQA,EAAM,OAAS,KAAO,EACzC,CACA,SAAU,CACN,IAAI0I,EACJ,KAAM,CAAE,SAAAsW,GAAa,KAAK,QAC1B,OAAOA,IAAatW,EAAK,KAAK,SAAQ,KAAQ,MAAQA,IAAO,OAAS,OAASA,EAAG,OAAS,KAAO,IACtG,CACA,aAAc,CACV,IAAIA,EACJ,KAAM,CAAE,SAAAsW,GAAa,KAAK,QAC1B,OAAOA,GAAYtW,EAAK,KAAK,SAAQ,KAAQ,MAAQA,IAAO,OAAS,OAASA,EAAG,SAAW,MAChG,CACA,UAAW,CACP,KAAM,CAAE,SAAAsW,GAAa,KAAK,QAC1B,GAAIA,EACA,OAAO,KAAK,KAAK,YAAY,IAAIA,CAAQ,CACjD,CACA,QAAQ,CAAE,WAAAo+B,EAAY,WAAA70B,EAAY,sBAAA6uB,CAAqB,EAAM,CAAA,EAAI,CAC7D,MAAMp3C,EAAQ,KAAK,SAAQ,EACvBA,GACAA,EAAM,QAAQ,KAAMo3C,CAAqB,EACzCgG,IACA,KAAK,gBAAkB,OACvB,KAAK,WAAa,IAElB70B,GACA,KAAK,WAAW,CAAE,WAAAA,EAAY,CACtC,CACA,UAAW,CACP,MAAMvoB,EAAQ,KAAK,SAAQ,EAC3B,OAAIA,EACOA,EAAM,SAAS,IAAI,EAGnB,EAEf,CACA,eAAgB,CACZ,KAAM,CAAE,cAAAuc,GAAkB,KAAK,QAC/B,GAAI,CAACA,EACD,OAEJ,IAAI8gC,EAAY,GAKhB,KAAM,CAAE,aAAA96B,CAAY,EAAKhG,EAQzB,IAPIgG,EAAa,QACbA,EAAa,SACbA,EAAa,SACbA,EAAa,WACb86B,EAAY,IAGZ,CAACA,EACD,OACJ,MAAMC,EAAc,CAAA,EAEpB,QAAS/pD,EAAI,EAAGA,EAAIilD,GAAc,OAAQjlD,IAAK,CAC3C,MAAME,EAAM,SAAW+kD,GAAcjlD,CAAC,EAElCgvB,EAAa9uB,CAAG,IAChB6pD,EAAY7pD,CAAG,EAAI8uB,EAAa9uB,CAAG,EACnC8oB,EAAc,eAAe9oB,EAAK,CAAC,EAE3C,CAGA8oB,EAAc,OAAM,EAEpB,UAAW9oB,KAAO6pD,EACd/gC,EAAc,eAAe9oB,EAAK6pD,EAAY7pD,CAAG,CAAC,EAItD8oB,EAAc,eAAc,CAChC,CACA,oBAAoBgH,EAAW,CAC3B,IAAI7a,EAAIkF,EACR,GAAI,CAAC,KAAK,UAAY,KAAK,MACvB,OACJ,GAAI,CAAC,KAAK,UACN,OAAO6qC,GAEX,MAAM8E,EAAS,CACX,WAAY,EAC5B,EACkB98B,EAAoB,KAAK,qBAAoB,EACnD,GAAI,KAAK,WACL,YAAK,WAAa,GAClB88B,EAAO,QAAU,GACjBA,EAAO,cACHj2B,GAAmB/D,GAAc,KAA+B,OAASA,EAAU,aAAa,GAAK,GACzGg6B,EAAO,UAAY98B,EACbA,EAAkB,KAAK,aAAc,EAAE,EACvC,OACC88B,EAEX,MAAMjI,EAAO,KAAK,QAAO,EACzB,GAAI,CAAC,KAAK,iBAAmB,CAAC,KAAK,QAAU,CAACA,EAAK,OAAQ,CACvD,MAAMkI,EAAc,CAAA,EACpB,OAAI,KAAK,QAAQ,WACbA,EAAY,QACR,KAAK,aAAa,UAAY,OACxB,KAAK,aAAa,QAClB,EACVA,EAAY,cACRl2B,GAAmB/D,GAAc,KAA+B,OAASA,EAAU,aAAa,GAAK,IAEzG,KAAK,cAAgB,CAACZ,GAAa,KAAK,YAAY,IACpD66B,EAAY,UAAY/8B,EAClBA,EAAkB,CAAA,EAAI,EAAE,EACxB,OACN,KAAK,aAAe,IAEjB+8B,CACX,CACA,MAAMC,EAAiBnI,EAAK,iBAAmBA,EAAK,aACpD,KAAK,wBAAuB,EAC5BiI,EAAO,UAAYhG,GAAyB,KAAK,6BAA8B,KAAK,UAAWkG,CAAc,EACzGh9B,IACA88B,EAAO,UAAY98B,EAAkBg9B,EAAgBF,EAAO,SAAS,GAEzE,KAAM,CAAE,EAAAzvC,EAAG,EAAAmH,CAAC,EAAK,KAAK,gBACtBsoC,EAAO,gBAAkB,GAAGzvC,EAAE,OAAS,GAAG,KAAKmH,EAAE,OAAS,GAAG,MACzDqgC,EAAK,gBAKLiI,EAAO,QACHjI,IAAS,MACF1nC,GAAMlF,EAAK+0C,EAAe,WAAa,MAAQ/0C,IAAO,OAASA,EAAK,KAAK,aAAa,WAAa,MAAQkF,IAAO,OAASA,EAAK,EACjI,KAAK,gBACD,KAAK,aAAa,QAClB6vC,EAAe,YAO7BF,EAAO,QACHjI,IAAS,KACHmI,EAAe,UAAY,OACvBA,EAAe,QACf,GACJA,EAAe,cAAgB,OAC3BA,EAAe,YACf,EAKlB,UAAWhqD,KAAOisB,GAAiB,CAC/B,GAAI+9B,EAAehqD,CAAG,IAAM,OACxB,SACJ,KAAM,CAAE,QAAAiqD,EAAS,QAAAC,GAAYj+B,GAAgBjsB,CAAG,EAO1CmqD,EAAYL,EAAO,YAAc,OACjCE,EAAehqD,CAAG,EAClBiqD,EAAQD,EAAehqD,CAAG,EAAG6hD,CAAI,EACvC,GAAIqI,EAAS,CACT,MAAME,EAAMF,EAAQ,OACpB,QAASpqD,EAAI,EAAGA,EAAIsqD,EAAKtqD,IACrBgqD,EAAOI,EAAQpqD,CAAC,CAAC,EAAIqqD,CAE7B,MAEIL,EAAO9pD,CAAG,EAAImqD,CAEtB,CAMA,OAAI,KAAK,QAAQ,WACbL,EAAO,cACHjI,IAAS,KACHhuB,GAAmB/D,GAAc,KAA+B,OAASA,EAAU,aAAa,GAAK,GACrG,QAEPg6B,CACX,CACA,eAAgB,CACZ,KAAK,WAAa,KAAK,SAAW,MACtC,CAEA,WAAY,CACR,KAAK,KAAK,MAAM,QAASrxB,GAAS,CAAE,IAAIxjB,EAAI,OAAQA,EAAKwjB,EAAK,oBAAsB,MAAQxjB,IAAO,OAAS,OAASA,EAAG,MAAQ,CAAC,EACjI,KAAK,KAAK,MAAM,QAAQ4xC,EAAiB,EACzC,KAAK,KAAK,YAAY,MAAK,CAC/B,CACR,CACA,CACA,SAASG,GAAavuB,EAAM,CACxBA,EAAK,aAAY,CACrB,CACA,SAASwuB,GAAmBxuB,EAAM,CAC9B,IAAIxjB,EACJ,MAAM0zC,IAAa1zC,EAAKwjB,EAAK,cAAgB,MAAQxjB,IAAO,OAAS,OAASA,EAAG,WAAawjB,EAAK,SACnG,GAAIA,EAAK,OAAM,GACXA,EAAK,QACLkwB,GACAlwB,EAAK,aAAa,WAAW,EAAG,CAChC,KAAM,CAAE,UAAWlM,EAAQ,YAAa89B,CAAc,EAAK5xB,EAAK,OAC1D,CAAE,cAAA6xB,GAAkB7xB,EAAK,QACzB4vB,EAAWM,EAAS,SAAWlwB,EAAK,OAAO,OAG7C6xB,IAAkB,OAClB9P,GAAUzC,GAAS,CACf,MAAMwS,EAAelC,EACfM,EAAS,YAAY5Q,CAAI,EACzB4Q,EAAS,UAAU5Q,CAAI,EACvB3mB,EAAS0mB,GAAWyS,CAAY,EACtCA,EAAa,IAAMh+B,EAAOwrB,CAAI,EAAE,IAChCwS,EAAa,IAAMA,EAAa,IAAMn5B,CAC1C,CAAC,EAEIo4B,GAA0Bc,EAAe3B,EAAS,UAAWp8B,CAAM,GACxEiuB,GAAUzC,GAAS,CACf,MAAMwS,EAAelC,EACfM,EAAS,YAAY5Q,CAAI,EACzB4Q,EAAS,UAAU5Q,CAAI,EACvB3mB,EAAS0mB,GAAWvrB,EAAOwrB,CAAI,CAAC,EACtCwS,EAAa,IAAMA,EAAa,IAAMn5B,EAIlCqH,EAAK,gBAAkB,CAACA,EAAK,mBAC7BA,EAAK,kBAAoB,GACzBA,EAAK,eAAesf,CAAI,EAAE,IACtBtf,EAAK,eAAesf,CAAI,EAAE,IAAM3mB,EAE5C,CAAC,EAEL,MAAMo5B,EAAcnQ,GAAW,EAC/BlC,GAAaqS,EAAaj+B,EAAQo8B,EAAS,SAAS,EACpD,MAAM8B,EAAcpQ,GAAW,EAC3BgO,EACAlQ,GAAasS,EAAahyB,EAAK,eAAe4xB,EAAgB,EAAI,EAAG1B,EAAS,WAAW,EAGzFxQ,GAAasS,EAAal+B,EAAQo8B,EAAS,SAAS,EAExD,MAAMrJ,EAAmB,CAAC6D,GAAYqH,CAAW,EACjD,IAAItE,EAA2B,GAC/B,GAAI,CAACztB,EAAK,WAAY,CAClB,MAAM6vB,EAAiB7vB,EAAK,2BAA0B,EAKtD,GAAI6vB,GAAkB,CAACA,EAAe,WAAY,CAC9C,KAAM,CAAE,SAAUoC,EAAgB,OAAQC,CAAY,EAAKrC,EAC3D,GAAIoC,GAAkBC,EAAc,CAChC,MAAMC,EAAmBrQ,EAAS,EAClC/B,GAAqBoS,EAAkBjC,EAAS,UAAW+B,EAAe,SAAS,EACnF,MAAM3B,EAAiBxO,EAAS,EAChC/B,GAAqBuQ,EAAgBx8B,EAAQo+B,EAAa,SAAS,EAC9DtH,GAAiBuH,EAAkB7B,CAAc,IAClD7C,EAA2B,IAE3BoC,EAAe,QAAQ,aACvB7vB,EAAK,eAAiBswB,EACtBtwB,EAAK,qBAAuBmyB,EAC5BnyB,EAAK,eAAiB6vB,EAE9B,CACJ,CACJ,CACA7vB,EAAK,gBAAgB,YAAa,CAC9B,OAAAlM,EACA,SAAAo8B,EACA,MAAO8B,EACP,YAAAD,EACA,iBAAAlL,EACA,yBAAA4G,CACZ,CAAS,CACL,SACSztB,EAAK,SAAU,CACpB,KAAM,CAAE,eAAAod,GAAmBpd,EAAK,QAChCod,GAAkBA,EAAc,CACpC,CAMApd,EAAK,QAAQ,WAAa,MAC9B,CACA,SAASgtB,GAAoBhtB,EAAM,CAI/BysB,GAAoB,aACfzsB,EAAK,SAQLA,EAAK,iBACNA,EAAK,kBAAoBA,EAAK,OAAO,mBAOzCA,EAAK,0BAA4BA,EAAK,wBAA0B,GAAQA,EAAK,mBACzEA,EAAK,OAAO,mBACZA,EAAK,OAAO,0BAChBA,EAAK,mBAAqBA,EAAK,iBAAmBA,EAAK,OAAO,kBAClE,CACA,SAASmtB,GAAgBntB,EAAM,CAC3BA,EAAK,kBACDA,EAAK,wBACDA,EAAK,iBACD,EAChB,CACA,SAASyuB,GAAczuB,EAAM,CACzBA,EAAK,cAAa,CACtB,CACA,SAASouB,GAAkBpuB,EAAM,CAC7BA,EAAK,kBAAiB,CAC1B,CACA,SAASquB,GAAmBruB,EAAM,CAC9BA,EAAK,cAAgB,EACzB,CACA,SAASsuB,GAAoBtuB,EAAM,CAC/B,KAAM,CAAE,cAAA3P,GAAkB2P,EAAK,QAC3B3P,GAAiBA,EAAc,SAAQ,EAAG,uBAC1CA,EAAc,OAAO,qBAAqB,EAE9C2P,EAAK,eAAc,CACvB,CACA,SAASwtB,GAAgBxtB,EAAM,CAC3BA,EAAK,gBAAe,EACpBA,EAAK,YAAcA,EAAK,eAAiBA,EAAK,OAAS,OACvDA,EAAK,kBAAoB,EAC7B,CACA,SAASitB,GAAmBjtB,EAAM,CAC9BA,EAAK,mBAAkB,CAC3B,CACA,SAASktB,GAAeltB,EAAM,CAC1BA,EAAK,eAAc,CACvB,CACA,SAASkuB,GAAcluB,EAAM,CACzBA,EAAK,cAAa,CACtB,CACA,SAAS0uB,GAAoB56C,EAAO,CAChCA,EAAM,mBAAkB,CAC5B,CACA,SAAS88C,GAAa9lB,EAAQ7gC,EAAOie,EAAG,CACpC4iB,EAAO,UAAY9B,EAAI/+B,EAAM,UAAW,EAAGie,CAAC,EAC5C4iB,EAAO,MAAQ9B,EAAI/+B,EAAM,MAAO,EAAGie,CAAC,EACpC4iB,EAAO,OAAS7gC,EAAM,OACtB6gC,EAAO,YAAc7gC,EAAM,WAC/B,CACA,SAASmoD,GAAQtnB,EAAQn6B,EAAMvI,EAAI8f,EAAG,CAClC4iB,EAAO,IAAM9B,EAAIr4B,EAAK,IAAKvI,EAAG,IAAK8f,CAAC,EACpC4iB,EAAO,IAAM9B,EAAIr4B,EAAK,IAAKvI,EAAG,IAAK8f,CAAC,CACxC,CACA,SAAS2oC,GAAO/lB,EAAQn6B,EAAMvI,EAAI8f,EAAG,CACjCkqC,GAAQtnB,EAAO,EAAGn6B,EAAK,EAAGvI,EAAG,EAAG8f,CAAC,EACjCkqC,GAAQtnB,EAAO,EAAGn6B,EAAK,EAAGvI,EAAG,EAAG8f,CAAC,CACrC,CACA,SAASwoC,GAAoB1wB,EAAM,CAC/B,OAAQA,EAAK,iBAAmBA,EAAK,gBAAgB,cAAgB,MACzE,CACA,MAAM4tB,GAA0B,CAC5B,SAAU,IACV,KAAM,CAAC,GAAK,EAAG,GAAK,CAAC,CACzB,EACMyE,GAAqBzlC,GAAW,OAAO,UAAc,KACvD,UAAU,UAAU,cAAc,SAASA,CAAM,EAM/C0lC,GAAaD,GAAkB,cAAc,GAAK,CAACA,GAAkB,SAAS,EAC9E,KAAK,MACLz5C,EACN,SAAS25C,GAAUjT,EAAM,CAErBA,EAAK,IAAMgT,GAAWhT,EAAK,GAAG,EAC9BA,EAAK,IAAMgT,GAAWhT,EAAK,GAAG,CAClC,CACA,SAAS8P,GAAShM,EAAK,CACnBmP,GAAUnP,EAAI,CAAC,EACfmP,GAAUnP,EAAI,CAAC,CACnB,CACA,SAAS2N,GAA0Bc,EAAe3B,EAAUp8B,EAAQ,CAChE,OAAQ+9B,IAAkB,YACrBA,IAAkB,mBACf,CAACtS,GAAOsL,GAAYqF,CAAQ,EAAGrF,GAAY/2B,CAAM,EAAG,EAAG,CACnE,CCp9CA,MAAM0+B,GAAyB9F,GAAqB,CAChD,qBAAsB,CAACn/B,EAAKklC,IAAWh0B,GAAYlR,EAAK,SAAUklC,CAAM,EACxE,cAAe,KAAO,CAClB,EAAG,SAAS,gBAAgB,YAAc,SAAS,KAAK,WACxD,EAAG,SAAS,gBAAgB,WAAa,SAAS,KAAK,SAC/D,GACI,kBAAmB,IAAM,EAC7B,CAAC,ECPKpO,GAAqB,CACvB,QAAS,MACb,EACMqO,GAAqBhG,GAAqB,CAC5C,cAAgB97B,IAAc,CAC1B,EAAGA,EAAS,WACZ,EAAGA,EAAS,SACpB,GACI,cAAe,IAAM,CACjB,GAAI,CAACyzB,GAAmB,QAAS,CAC7B,MAAMsO,EAAe,IAAIH,GAAuB,EAAE,EAClDG,EAAa,MAAM,MAAM,EACzBA,EAAa,WAAW,CAAE,aAAc,EAAI,CAAE,EAC9CtO,GAAmB,QAAUsO,CACjC,CACA,OAAOtO,GAAmB,OAC9B,EACA,eAAgB,CAACzzB,EAAUpoB,IAAU,CACjCooB,EAAS,MAAM,UAAYpoB,IAAU,OAAYA,EAAQ,MAC7D,EACA,kBAAoBooB,GAAqB,OAAO,iBAAiBA,CAAQ,EAAE,WAAa,OAC5F,CAAC,ECnBK8O,GAAO,CACT,IAAK,CACD,QAASynB,EACjB,EACI,KAAM,CACF,QAASH,GACT,eAAgB0L,GAChB,cAAAngC,EACR,CACA,ECDMqgC,GAAwB,uDAC9B,SAASC,GAAiB7pD,EAAS,CAC/B,MAAMmF,EAAQykD,GAAsB,KAAK5pD,CAAO,EAChD,GAAI,CAACmF,EACD,MAAO,CAAA,CAAA,EACX,KAAM,CAAA,CAAGwmB,EAAOm+B,CAAQ,EAAI3kD,EAC5B,MAAO,CAACwmB,EAAOm+B,CAAQ,CAC3B,CAEA,SAASC,GAAiB/pD,EAASyO,EAASu7C,EAAQ,EAAG,CAEnD,KAAM,CAACr+B,EAAOm+B,CAAQ,EAAID,GAAiB7pD,CAAO,EAElD,GAAI,CAAC2rB,EACD,OAEJ,MAAMwH,EAAW,OAAO,iBAAiB1kB,CAAO,EAAE,iBAAiBkd,CAAK,EACxE,GAAIwH,EAAU,CACV,MAAM82B,EAAU92B,EAAS,KAAI,EAC7B,OAAOub,GAAkBub,CAAO,EAAI,WAAWA,CAAO,EAAIA,CAC9D,KACK,QAAIp+B,GAAmBi+B,CAAQ,EAEzBC,GAAiBD,EAAUr7C,EAASu7C,EAAQ,CAAC,EAG7CF,CAEf,CAMA,SAASI,GAAoB7iC,EAAe,CAAE,GAAGjpB,CAAM,EAAIg1B,EAAe,CACtE,MAAM3kB,EAAU4Y,EAAc,QAC9B,GAAI,EAAE5Y,aAAmB,SACrB,MAAO,CAAE,OAAArQ,EAAQ,cAAAg1B,CAAa,EAG9BA,IACAA,EAAgB,CAAE,GAAGA,CAAa,GAGtC/L,EAAc,OAAO,QAAS7nB,GAAU,CACpC,MAAMQ,EAAUR,EAAM,IAAG,EACzB,GAAI,CAACqsB,GAAmB7rB,CAAO,EAC3B,OACJ,MAAMmzB,EAAW42B,GAAiB/pD,EAASyO,CAAO,EAC9C0kB,GACA3zB,EAAM,IAAI2zB,CAAQ,CAC1B,CAAC,EAGD,UAAW50B,KAAOH,EAAQ,CACtB,MAAM4B,EAAU5B,EAAOG,CAAG,EAC1B,GAAI,CAACstB,GAAmB7rB,CAAO,EAC3B,SACJ,MAAMmzB,EAAW42B,GAAiB/pD,EAASyO,CAAO,EAC7C0kB,IAGL/0B,EAAOG,CAAG,EAAI40B,EACTC,IACDA,EAAgB,CAAA,GAIhBA,EAAc70B,CAAG,IAAM,SACvB60B,EAAc70B,CAAG,EAAIyB,GAE7B,CACA,MAAO,CAAE,OAAA5B,EAAQ,cAAAg1B,CAAa,CAClC,CC9EA,MAAM+2B,GAAiB,IAAI,IAAI,CAC3B,QACA,SACA,MACA,OACA,QACA,SACA,IACA,IACA,aACA,YACJ,CAAC,EACKC,GAAmB7rD,GAAQ4rD,GAAe,IAAI5rD,CAAG,EACjD8rD,GAAoBjsD,GACf,OAAO,KAAKA,CAAM,EAAE,KAAKgsD,EAAe,EAE7CE,GAAiBnkD,GAAMA,IAAM+lB,IAAU/lB,IAAM2mB,EAC7Cy9B,GAAmB,CAACC,EAAQC,IAAQ,WAAWD,EAAO,MAAM,IAAI,EAAEC,CAAG,CAAC,EACtEC,GAAyB,CAACC,EAAMC,IAAS,CAACC,EAAO,CAAE,UAAA1/B,KAAgB,CACrE,GAAIA,IAAc,QAAU,CAACA,EACzB,MAAO,GACX,MAAM2/B,EAAW3/B,EAAU,MAAM,oBAAoB,EACrD,GAAI2/B,EACA,OAAOP,GAAiBO,EAAS,CAAC,EAAGF,CAAI,EAExC,CACD,MAAMJ,EAASr/B,EAAU,MAAM,kBAAkB,EACjD,OAAIq/B,EACOD,GAAiBC,EAAO,CAAC,EAAGG,CAAI,EAGhC,CAEf,CACJ,EACMI,GAAgB,IAAI,IAAI,CAAC,IAAK,IAAK,GAAG,CAAC,EACvCC,GAAgCrgC,GAAmB,OAAQpsB,GAAQ,CAACwsD,GAAc,IAAIxsD,CAAG,CAAC,EAChG,SAAS0sD,GAAgC5jC,EAAe,CACpD,MAAM6jC,EAAoB,CAAA,EAC1B,OAAAF,GAA8B,QAASzsD,GAAQ,CAC3C,MAAMiB,EAAQ6nB,EAAc,SAAS9oB,CAAG,EACpCiB,IAAU,SACV0rD,EAAkB,KAAK,CAAC3sD,EAAKiB,EAAM,IAAG,CAAE,CAAC,EACzCA,EAAM,IAAIjB,EAAI,WAAW,OAAO,EAAI,EAAI,CAAC,EAEjD,CAAC,EAEG2sD,EAAkB,QAClB7jC,EAAc,OAAM,EACjB6jC,CACX,CACA,MAAMC,GAAmB,CAErB,MAAO,CAAC,CAAE,EAAAvyC,CAAC,EAAI,CAAE,YAAAwyC,EAAc,IAAK,aAAAC,EAAe,GAAG,IAAOzyC,EAAE,IAAMA,EAAE,IAAM,WAAWwyC,CAAW,EAAI,WAAWC,CAAY,EAC9H,OAAQ,CAAC,CAAE,EAAAtrC,CAAC,EAAI,CAAE,WAAAurC,EAAa,IAAK,cAAAC,EAAgB,GAAG,IAAOxrC,EAAE,IAAMA,EAAE,IAAM,WAAWurC,CAAU,EAAI,WAAWC,CAAa,EAC/H,IAAK,CAACV,EAAO,CAAE,IAAAxT,CAAG,IAAO,WAAWA,CAAG,EACvC,KAAM,CAACwT,EAAO,CAAE,KAAAvT,CAAI,IAAO,WAAWA,CAAI,EAC1C,OAAQ,CAAC,CAAE,EAAAv3B,CAAC,EAAI,CAAE,IAAAs3B,CAAG,IAAO,WAAWA,CAAG,GAAKt3B,EAAE,IAAMA,EAAE,KACzD,MAAO,CAAC,CAAE,EAAAnH,CAAC,EAAI,CAAE,KAAA0+B,CAAI,IAAO,WAAWA,CAAI,GAAK1+B,EAAE,IAAMA,EAAE,KAE1D,EAAG8xC,GAAuB,EAAG,EAAE,EAC/B,EAAGA,GAAuB,EAAG,EAAE,CACnC,EAEAS,GAAiB,WAAaA,GAAiB,EAC/CA,GAAiB,WAAaA,GAAiB,EAC/C,MAAMK,GAA2B,CAACptD,EAAQipB,EAAeokC,IAAgB,CACrE,MAAMC,EAAarkC,EAAc,mBAAkB,EAC7C5Y,EAAU4Y,EAAc,QACxBskC,EAAuB,iBAAiBl9C,CAAO,EAC/C,CAAE,QAAAm9C,CAAO,EAAKD,EACdz8B,EAAS,CAAA,EAGX08B,IAAY,QACZvkC,EAAc,eAAe,UAAWjpB,EAAO,SAAW,OAAO,EAKrEqtD,EAAY,QAASltD,GAAQ,CACzB2wB,EAAO3wB,CAAG,EAAI4sD,GAAiB5sD,CAAG,EAAEmtD,EAAYC,CAAoB,CACxE,CAAC,EAEDtkC,EAAc,OAAM,EACpB,MAAMwkC,EAAaxkC,EAAc,mBAAkB,EACnD,OAAAokC,EAAY,QAASltD,GAAQ,CAGzB,MAAMiB,EAAQ6nB,EAAc,SAAS9oB,CAAG,EACxCiB,GAASA,EAAM,KAAK0vB,EAAO3wB,CAAG,CAAC,EAC/BH,EAAOG,CAAG,EAAI4sD,GAAiB5sD,CAAG,EAAEstD,EAAYF,CAAoB,CACxE,CAAC,EACMvtD,CACX,EACM0tD,GAAmC,CAACzkC,EAAejpB,EAAQ8wB,EAAS,CAAA,EAAIkE,EAAgB,KAAO,CACjGh1B,EAAS,CAAE,GAAGA,CAAM,EACpBg1B,EAAgB,CAAE,GAAGA,CAAa,EAClC,MAAM24B,EAAuB,OAAO,KAAK3tD,CAAM,EAAE,OAAOgsD,EAAe,EAGvE,IAAI4B,EAAyB,CAAA,EACzBC,EAAsC,GAC1C,MAAMC,EAAuB,CAAA,EAkF7B,GAjFAH,EAAqB,QAASxtD,GAAQ,CAClC,MAAMiB,EAAQ6nB,EAAc,SAAS9oB,CAAG,EACxC,GAAI,CAAC8oB,EAAc,SAAS9oB,CAAG,EAC3B,OACJ,IAAIoJ,EAAOunB,EAAO3wB,CAAG,EACjB4tD,EAAWvc,GAAuBjoC,CAAI,EAC1C,MAAMvI,EAAKhB,EAAOG,CAAG,EACrB,IAAI6tD,EAKJ,GAAIn6B,GAAkB7yB,CAAE,EAAG,CACvB,MAAMitD,EAAejtD,EAAG,OAClBktD,EAAYltD,EAAG,CAAC,IAAM,KAAO,EAAI,EACvCuI,EAAOvI,EAAGktD,CAAS,EACnBH,EAAWvc,GAAuBjoC,CAAI,EACtC,QAAStJ,EAAIiuD,EAAWjuD,EAAIguD,GAKpBjtD,EAAGf,CAAC,IAAM,KALwBA,IAOjC+tD,EAMD7sD,GAAUqwC,GAAuBxwC,EAAGf,CAAC,CAAC,IAAM+tD,CAAgD,EAL5FA,EAASxc,GAAuBxwC,EAAGf,CAAC,CAAC,CAQjD,MAEI+tD,EAASxc,GAAuBxwC,CAAE,EAEtC,GAAI+sD,IAAaC,EAGb,GAAI9B,GAAc6B,CAAQ,GAAK7B,GAAc8B,CAAM,EAAG,CAClD,MAAMpsD,EAAUR,EAAM,IAAG,EACrB,OAAOQ,GAAY,UACnBR,EAAM,IAAI,WAAWQ,CAAO,CAAC,EAE7B,OAAOZ,GAAO,SACdhB,EAAOG,CAAG,EAAI,WAAWa,CAAE,EAEtB,MAAM,QAAQA,CAAE,GAAKgtD,IAAWt/B,IACrC1uB,EAAOG,CAAG,EAAIa,EAAG,IAAI,UAAU,EAEvC,MACU+sD,GAAa,MAAuCA,EAAS,YAClEC,GAAW,MAAqCA,EAAO,aACvDzkD,IAAS,GAAKvI,IAAO,GAGlBuI,IAAS,EACTnI,EAAM,IAAI4sD,EAAO,UAAUzkD,CAAI,CAAC,EAGhCvJ,EAAOG,CAAG,EAAI4tD,EAAS,UAAU/sD,CAAE,GAMlC6sD,IACDD,EACIf,GAAgC5jC,CAAa,EACjD4kC,EAAsC,IAE1CC,EAAqB,KAAK3tD,CAAG,EAC7B60B,EAAc70B,CAAG,EACb60B,EAAc70B,CAAG,IAAM,OACjB60B,EAAc70B,CAAG,EACjBH,EAAOG,CAAG,EACpBiB,EAAM,KAAKJ,CAAE,EAGzB,CAAC,EACG8sD,EAAqB,OAAQ,CAC7B,MAAMK,EAAUL,EAAqB,QAAQ,QAAQ,GAAK,EACpD,OAAO,YACP,KACAM,EAAkBhB,GAAyBptD,EAAQipB,EAAe6kC,CAAoB,EAE5F,OAAIF,EAAuB,QACvBA,EAAuB,QAAQ,CAAC,CAACztD,EAAKiB,CAAK,IAAM,CAC7C6nB,EAAc,SAAS9oB,CAAG,EAAE,IAAIiB,CAAK,CACzC,CAAC,EAGL6nB,EAAc,OAAM,EAEhBlB,IAAaomC,IAAY,MACzB,OAAO,SAAS,CAAE,IAAKA,CAAO,CAAE,EAE7B,CAAE,OAAQC,EAAiB,cAAAp5B,CAAa,CACnD,KAEI,OAAO,CAAE,OAAAh1B,EAAQ,cAAAg1B,CAAa,CAEtC,EAQA,SAASq5B,GAAeplC,EAAejpB,EAAQ8wB,EAAQkE,EAAe,CAClE,OAAOi3B,GAAiBjsD,CAAM,EACxB0tD,GAAiCzkC,EAAejpB,EAAQ8wB,EAAQkE,CAAa,EAC7E,CAAE,OAAAh1B,EAAQ,cAAAg1B,CAAa,CACjC,CC5NA,MAAMs5B,GAAkB,CAACrlC,EAAejpB,EAAQ8wB,EAAQkE,IAAkB,CACtE,MAAMD,EAAW+2B,GAAoB7iC,EAAejpB,EAAQg1B,CAAa,EACzE,OAAAh1B,EAAS+0B,EAAS,OAClBC,EAAgBD,EAAS,cAClBs5B,GAAeplC,EAAejpB,EAAQ8wB,EAAQkE,CAAa,CACtE,ECXMu5B,GAAuB,CAAE,QAAS,IAAI,EACtCC,GAA2B,CAAE,QAAS,EAAK,ECCjD,SAASC,IAA2B,CAEhC,GADAD,GAAyB,QAAU,GAC/B,EAACzmC,GAEL,GAAI,OAAO,WAAY,CACnB,MAAM2mC,EAAmB,OAAO,WAAW,0BAA0B,EAC/DC,EAA8B,IAAOJ,GAAqB,QAAUG,EAAiB,QAC3FA,EAAiB,YAAYC,CAA2B,EACxDA,EAA2B,CAC/B,MAEIJ,GAAqB,QAAU,EAEvC,CCXA,SAASK,GAA4Bv+C,EAASosB,EAAMC,EAAM,CACtD,KAAM,CAAE,WAAAiW,GAAelW,EACvB,UAAWt8B,KAAOs8B,EAAM,CACpB,MAAMoyB,EAAYpyB,EAAKt8B,CAAG,EACpB2uD,EAAYpyB,EAAKv8B,CAAG,EAC1B,GAAIwsB,GAAckiC,CAAS,EAKvBx+C,EAAQ,SAASlQ,EAAK0uD,CAAS,EAC3Bxe,GAAwBsC,CAAU,GAClCA,EAAW,IAAIxyC,CAAG,UAUjBwsB,GAAcmiC,CAAS,EAK5Bz+C,EAAQ,SAASlQ,EAAKixC,GAAYyd,EAAW,CAAE,MAAOx+C,CAAA,CAAS,CAAC,EAC5DggC,GAAwBsC,CAAU,GAClCA,EAAW,OAAOxyC,CAAG,UAGpB2uD,IAAcD,EAMnB,GAAIx+C,EAAQ,SAASlQ,CAAG,EAAG,CACvB,MAAM4uD,EAAgB1+C,EAAQ,SAASlQ,CAAG,EAE1C,CAAC4uD,EAAc,aAAeA,EAAc,IAAIF,CAAS,CAC7D,KACK,CACD,MAAMG,EAAc3+C,EAAQ,eAAelQ,CAAG,EAC9CkQ,EAAQ,SAASlQ,EAAKixC,GAAY4d,IAAgB,OAAYA,EAAcH,EAAW,CAAE,MAAOx+C,CAAA,CAAS,CAAC,CAC9G,CAER,CAEA,UAAWlQ,KAAOu8B,EACVD,EAAKt8B,CAAG,IAAM,QACdkQ,EAAQ,YAAYlQ,CAAG,EAE/B,OAAOs8B,CACX,CC5DA,MAAMwyB,GAAqB,IAAI,QCoBzBC,GAAe,OAAO,KAAK1kC,EAAkB,EAC7C2kC,GAAcD,GAAa,OAC3BE,GAAoB,CACtB,iBACA,oBACA,SACA,sBACA,gBACA,uBACA,yBACJ,EACMC,GAAkBzlC,GAAa,OAKrC,MAAM0lC,EAAc,CAChB,YAAY,CAAE,OAAA5mC,EAAQ,MAAA1b,EAAO,gBAAA6b,EAAiB,oBAAAC,EAAqB,YAAAN,CAAA,EAAgBjoB,EAAU,GAAI,CAK7F,KAAK,QAAU,KAIf,KAAK,aAAe,IAIpB,KAAK,cAAgB,GACrB,KAAK,sBAAwB,GAQ7B,KAAK,mBAAqB,KAM1B,KAAK,WAAa,IAIlB,KAAK,SAAW,CAAA,EAKhB,KAAK,uBAAyB,IAM9B,KAAK,iBAAmB,CAAA,EAIxB,KAAK,OAAS,CAAA,EAMd,KAAK,uBAAyB,CAAA,EAC9B,KAAK,aAAe,IAAM,KAAK,OAAO,SAAU,KAAK,YAAY,EACjE,KAAK,OAAS,IAAM,CACX,KAAK,UAEV,KAAK,aAAA,EACL,KAAK,eAAe,KAAK,QAAS,KAAK,YAAa,KAAK,MAAM,MAAO,KAAK,UAAU,EACzF,EACA,KAAK,eAAiB,IAAMy2B,EAAM,OAAO,KAAK,OAAQ,GAAO,EAAI,EACjE,KAAM,CAAE,aAAA/H,EAAc,YAAA+D,CAAA,EAAgBxK,EACtC,KAAK,aAAeyG,EACpB,KAAK,WAAa,CAAE,GAAGA,CAAA,EACvB,KAAK,cAAgBjiB,EAAM,QAAU,CAAE,GAAGiiB,CAAA,EAAiB,CAAA,EAC3D,KAAK,YAAc+D,EACnB,KAAK,OAAStK,EACd,KAAK,MAAQ1b,EACb,KAAK,gBAAkB6b,EACvB,KAAK,MAAQH,EAASA,EAAO,MAAQ,EAAI,EACzC,KAAK,oBAAsBI,EAC3B,KAAK,QAAUvoB,EACf,KAAK,sBAAwBspB,GAAsB7c,CAAK,EACxD,KAAK,cAAgB+c,GAAc/c,CAAK,EACpC,KAAK,gBACL,KAAK,oBAAsB,KAE/B,KAAK,uBAAyB,GAAQ0b,GAAUA,EAAO,SAWvD,KAAM,CAAE,WAAAiqB,EAAY,GAAG4c,CAAA,EAAwB,KAAK,4BAA4BviD,EAAO,EAAE,EACzF,UAAW7M,KAAOovD,EAAqB,CACnC,MAAMnuD,EAAQmuD,EAAoBpvD,CAAG,EACjC8uB,EAAa9uB,CAAG,IAAM,QAAawsB,GAAcvrB,CAAK,IACtDA,EAAM,IAAI6tB,EAAa9uB,CAAG,EAAG,EAAK,EAC9BkwC,GAAwBsC,CAAU,GAClCA,EAAW,IAAIxyC,CAAG,EAG9B,CACJ,CAQA,4BAA4BmP,EAAQkgD,EAAY,CAC5C,MAAO,CAAA,CACX,CACA,MAAMhmC,EAAU,CACZ,KAAK,QAAUA,EACfylC,GAAmB,IAAIzlC,EAAU,IAAI,EACjC,KAAK,YAAc,CAAC,KAAK,WAAW,UACpC,KAAK,WAAW,MAAMA,CAAQ,EAE9B,KAAK,QAAU,KAAK,eAAiB,CAAC,KAAK,wBAC3C,KAAK,sBAAwB,KAAK,OAAO,gBAAgB,IAAI,GAEjE,KAAK,OAAO,QAAQ,CAACpoB,EAAOjB,IAAQ,KAAK,kBAAkBA,EAAKiB,CAAK,CAAC,EACjEotD,GAAyB,SAC1BC,GAAA,EAEJ,KAAK,mBACD,KAAK,sBAAwB,QACvB,GACA,KAAK,sBAAwB,SACzB,GACAF,GAAqB,QAI/B,KAAK,QACL,KAAK,OAAO,SAAS,IAAI,IAAI,EACjC,KAAK,OAAO,KAAK,MAAO,KAAK,eAAe,CAChD,CACA,SAAU,CACNU,GAAmB,OAAO,KAAK,OAAO,EACtC,KAAK,YAAc,KAAK,WAAW,QAAA,EACnCh4B,GAAY,KAAK,YAAY,EAC7BA,GAAY,KAAK,MAAM,EACvB,KAAK,mBAAmB,QAASw4B,GAAWA,GAAQ,EACpD,KAAK,uBAAyB,KAAK,sBAAA,EACnC,KAAK,QAAU,KAAK,OAAO,SAAS,OAAO,IAAI,EAC/C,UAAWtvD,KAAO,KAAK,OACnB,KAAK,OAAOA,CAAG,EAAE,MAAA,EAErB,UAAWA,KAAO,KAAK,SACnB,KAAK,SAASA,CAAG,EAAE,QAAA,EAEvB,KAAK,QAAU,IACnB,CACA,kBAAkBA,EAAKiB,EAAO,CAC1B,MAAMsuD,EAAmBljC,GAAe,IAAIrsB,CAAG,EACzCwvD,EAAiBvuD,EAAM,GAAG,SAAW4tD,GAAgB,CACvD,KAAK,aAAa7uD,CAAG,EAAI6uD,EACzB,KAAK,MAAM,UACPh4B,EAAM,OAAO,KAAK,aAAc,GAAO,EAAI,EAC3C04B,GAAoB,KAAK,aACzB,KAAK,WAAW,iBAAmB,GAE3C,CAAC,EACKE,EAAwBxuD,EAAM,GAAG,gBAAiB,KAAK,cAAc,EAC3E,KAAK,mBAAmB,IAAIjB,EAAK,IAAM,CACnCwvD,EAAA,EACAC,EAAA,CACJ,CAAC,CACL,CACA,iBAAiBC,EAAO,CAIpB,MAAI,CAAC,KAAK,SACN,CAAC,KAAK,0BACN,KAAK,OAASA,EAAM,KACb,EAEJ,KAAK,yBAAyB,KAAK,QAASA,EAAM,OAAO,CACpE,CACA,aAAa,CAAE,SAAAziD,EAAU,GAAG0iD,GAAiBtkC,EAAUT,EAAmBQ,EAA0B,CAChG,IAAIwkC,EACA5kC,EAaJ,QAASlrB,EAAI,EAAGA,EAAIkvD,GAAalvD,IAAK,CAClC,MAAM6pB,EAAOolC,GAAajvD,CAAC,EACrB,CAAE,UAAA+vD,EAAW,QAASC,EAAoB,eAAAC,EAAgB,cAAeC,CAAA,EAA4B3lC,GAAmBV,CAAI,EAC9HomC,IACAH,EAA4BG,GAC5BF,EAAUF,CAAa,IACnB,CAAC,KAAK,SAAShmC,CAAI,GAAKmmC,IACxB,KAAK,SAASnmC,CAAI,EAAI,IAAImmC,EAAmB,IAAI,GAEjDE,IACAhlC,EAAgBglC,GAG5B,CACA,IAAK,KAAK,OAAS,QAAU,KAAK,OAAS,QACvC,CAAC,KAAK,YACNJ,EAA2B,CAC3B,KAAK,WAAa,IAAIA,EAA0B,KAAK,aAAc,KAAK,QAAU,KAAK,OAAO,UAAU,EACxG,KAAM,CAAE,SAAArkC,EAAU,OAAAgB,EAAQ,KAAA4L,EAAM,gBAAAgmB,EAAiB,aAAA8R,EAAc,WAAAC,GAAgBP,EAC/E,KAAK,WAAW,WAAW,CACvB,SAAApkC,EACA,OAAAgB,EACA,oBAAqB,EAAQ4L,GACxBgmB,GAAmBl1B,GAAYk1B,CAAe,EACnD,cAAe,KACf,eAAgB,IAAM,KAAK,eAAA,EAQ3B,cAAe,OAAO5xB,GAAW,SAAWA,EAAS,OACrD,uBAAwBnB,EACxB,aAAA6kC,EACA,WAAAC,CAAA,CACH,CACL,CACA,OAAOllC,CACX,CACA,gBAAiB,CACb,UAAWhrB,KAAO,KAAK,SAAU,CAC7B,MAAMmwD,EAAU,KAAK,SAASnwD,CAAG,EAC7BmwD,EAAQ,UACRA,EAAQ,OAAA,GAGRA,EAAQ,MAAA,EACRA,EAAQ,UAAY,GAE5B,CACJ,CACA,cAAe,CACX,KAAK,MAAM,KAAK,YAAa,KAAK,aAAc,KAAK,QAAS,KAAK,KAAK,CAC5E,CAMA,oBAAqB,CACjB,OAAO,KAAK,QACN,KAAK,2BAA2B,KAAK,QAAS,KAAK,KAAK,EACxD5V,EAAA,CACV,CACA,eAAev6C,EAAK,CAChB,OAAO,KAAK,aAAaA,CAAG,CAChC,CACA,eAAeA,EAAKiB,EAAO,CACvB,KAAK,aAAajB,CAAG,EAAIiB,CAC7B,CAQA,qBAAqBpB,EAAQuwD,EAAY,GAAM,CAC3C,OAAO,KAAK,iCAAiCvwD,EAAQ,KAAK,MAAOuwD,CAAS,CAC9E,CAKA,OAAOvjD,EAAO6b,EAAiB,EACvB7b,EAAM,mBAAqB,KAAK,MAAM,oBACtC,KAAK,eAAA,EAET,KAAK,UAAY,KAAK,MACtB,KAAK,MAAQA,EACb,KAAK,oBAAsB,KAAK,gBAChC,KAAK,gBAAkB6b,EAIvB,QAAS,EAAI,EAAG,EAAIumC,GAAkB,OAAQ,IAAK,CAC/C,MAAMjvD,EAAMivD,GAAkB,CAAC,EAC3B,KAAK,uBAAuBjvD,CAAG,IAC/B,KAAK,uBAAuBA,CAAG,EAAA,EAC/B,OAAO,KAAK,uBAAuBA,CAAG,GAE1C,MAAMsC,EAAWuK,EAAM,KAAO7M,CAAG,EAC7BsC,IACA,KAAK,uBAAuBtC,CAAG,EAAI,KAAK,GAAGA,EAAKsC,CAAQ,EAEhE,CACA,KAAK,iBAAmBmsD,GAA4B,KAAM,KAAK,4BAA4B5hD,EAAO,KAAK,SAAS,EAAG,KAAK,gBAAgB,EACpI,KAAK,wBACL,KAAK,uBAAA,CAEb,CACA,UAAW,CACP,OAAO,KAAK,KAChB,CAIA,WAAW8c,EAAM,CACb,OAAO,KAAK,MAAM,SAAW,KAAK,MAAM,SAASA,CAAI,EAAI,MAC7D,CAIA,sBAAuB,CACnB,OAAO,KAAK,MAAM,UACtB,CACA,uBAAwB,CACpB,OAAO,KAAK,MAAM,kBACtB,CACA,uBAAwB,CACpB,OAAO,KAAK,cACN,KACA,KAAK,OACD,KAAK,OAAO,wBACZ,MACd,CACA,kBAAkB0mC,EAAgB,GAAO,CACrC,GAAIA,EACA,OAAO,KAAK,OAAS,KAAK,OAAO,oBAAsB,OAE3D,GAAI,CAAC,KAAK,sBAAuB,CAC7B,MAAMx1C,EAAU,KAAK,OACf,KAAK,OAAO,kBAAA,GAAuB,CAAA,EACnC,CAAA,EACN,OAAI,KAAK,MAAM,UAAY,SACvBA,EAAQ,QAAU,KAAK,MAAM,SAE1BA,CACX,CACA,MAAMA,EAAU,CAAA,EAChB,QAAS,EAAI,EAAG,EAAIq0C,GAAiB,IAAK,CACtC,MAAMvlC,EAAOF,GAAa,CAAC,EACrBU,EAAO,KAAK,MAAMR,CAAI,GACxBL,GAAea,CAAI,GAAKA,IAAS,MACjCtP,EAAQ8O,CAAI,EAAIQ,EAExB,CACA,OAAOtP,CACX,CAIA,gBAAgBqe,EAAO,CACnB,MAAMo3B,EAAqB,KAAK,sBAAA,EAChC,GAAIA,EACA,OAAAA,EAAmB,iBACfA,EAAmB,gBAAgB,IAAIp3B,CAAK,EACzC,IAAMo3B,EAAmB,gBAAgB,OAAOp3B,CAAK,CAEpE,CAIA,SAASl5B,EAAKiB,EAAO,CAEbA,IAAU,KAAK,OAAO,IAAIjB,CAAG,IAC7B,KAAK,YAAYA,CAAG,EACpB,KAAK,kBAAkBA,EAAKiB,CAAK,GAErC,KAAK,OAAO,IAAIjB,EAAKiB,CAAK,EAC1B,KAAK,aAAajB,CAAG,EAAIiB,EAAM,IAAA,CACnC,CAIA,YAAYjB,EAAK,CACb,KAAK,OAAO,OAAOA,CAAG,EACtB,MAAM4wC,EAAc,KAAK,mBAAmB,IAAI5wC,CAAG,EAC/C4wC,IACAA,EAAA,EACA,KAAK,mBAAmB,OAAO5wC,CAAG,GAEtC,OAAO,KAAK,aAAaA,CAAG,EAC5B,KAAK,2BAA2BA,EAAK,KAAK,WAAW,CACzD,CAIA,SAASA,EAAK,CACV,OAAO,KAAK,OAAO,IAAIA,CAAG,CAC9B,CACA,SAASA,EAAKsuC,EAAc,CACxB,GAAI,KAAK,MAAM,QAAU,KAAK,MAAM,OAAOtuC,CAAG,EAC1C,OAAO,KAAK,MAAM,OAAOA,CAAG,EAEhC,IAAIiB,EAAQ,KAAK,OAAO,IAAIjB,CAAG,EAC/B,OAAIiB,IAAU,QAAaqtC,IAAiB,SACxCrtC,EAAQgwC,GAAY3C,EAAc,CAAE,MAAO,KAAM,EACjD,KAAK,SAAStuC,EAAKiB,CAAK,GAErBA,CACX,CAMA,UAAUjB,EAAK,CACX,IAAIiV,EACJ,OAAO,KAAK,aAAajV,CAAG,IAAM,QAAa,CAAC,KAAK,QAC/C,KAAK,aAAaA,CAAG,GACpBiV,EAAK,KAAK,uBAAuB,KAAK,MAAOjV,CAAG,KAAO,MAAQiV,IAAO,OAASA,EAAK,KAAK,sBAAsB,KAAK,QAASjV,EAAK,KAAK,OAAO,CACzJ,CAKA,cAAcA,EAAKiB,EAAO,CACtB,KAAK,WAAWjB,CAAG,EAAIiB,CAC3B,CAKA,cAAcjB,EAAK,CACf,IAAIiV,EACJ,KAAM,CAAE,QAAA6U,GAAY,KAAK,MACnBymC,EAAmB,OAAOzmC,GAAY,UAAY,OAAOA,GAAY,UACpE7U,EAAKme,GAAwB,KAAK,MAAOtJ,CAAO,KAAO,MAAQ7U,IAAO,OAAS,OAASA,EAAGjV,CAAG,EAC/F,OAIN,GAAI8pB,GAAWymC,IAAqB,OAChC,OAAOA,EAMX,MAAM1wD,EAAS,KAAK,uBAAuB,KAAK,MAAOG,CAAG,EAC1D,OAAIH,IAAW,QAAa,CAAC2sB,GAAc3sB,CAAM,EACtCA,EAKJ,KAAK,cAAcG,CAAG,IAAM,QAC/BuwD,IAAqB,OACnB,OACA,KAAK,WAAWvwD,CAAG,CAC7B,CACA,GAAGm3B,EAAW1e,EAAU,CACpB,OAAK,KAAK,OAAO0e,CAAS,IACtB,KAAK,OAAOA,CAAS,EAAI,IAAImZ,IAE1B,KAAK,OAAOnZ,CAAS,EAAE,IAAI1e,CAAQ,CAC9C,CACA,OAAO0e,KAAcpe,EAAM,CACnB,KAAK,OAAOoe,CAAS,GACrB,KAAK,OAAOA,CAAS,EAAE,OAAO,GAAGpe,CAAI,CAE7C,CACJ,CCtfA,MAAMy3C,WAAyBrB,EAAc,CACzC,yBAAyB1pD,EAAGC,EAAG,CAM3B,OAAOD,EAAE,wBAAwBC,CAAC,EAAI,EAAI,EAAI,EAClD,CACA,uBAAuBmH,EAAO7M,EAAK,CAC/B,OAAO6M,EAAM,MAAQA,EAAM,MAAM7M,CAAG,EAAI,MAC5C,CACA,2BAA2BA,EAAK,CAAE,KAAAgvB,EAAM,MAAAD,CAAK,EAAI,CAC7C,OAAOC,EAAKhvB,CAAG,EACf,OAAO+uB,EAAM/uB,CAAG,CACpB,CACA,iCAAiC,CAAE,WAAA80B,EAAY,cAAAD,EAAe,GAAGh1B,CAAM,EAAI,CAAE,gBAAA4wD,CAAe,EAAIC,EAAW,CACvG,IAAI//B,EAASohB,GAAUlyC,EAAQi1B,GAAc,CAAA,EAAI,IAAI,EAYrD,GARI27B,IACI57B,IACAA,EAAgB47B,EAAgB57B,CAAa,GAC7Ch1B,IACAA,EAAS4wD,EAAgB5wD,CAAM,GAC/B8wB,IACAA,EAAS8/B,EAAgB9/B,CAAM,IAEnC+/B,EAAW,CACXhf,GAAwB,KAAM7xC,EAAQ8wB,CAAM,EAC5C,MAAM+S,EAASyqB,GAAgB,KAAMtuD,EAAQ8wB,EAAQkE,CAAa,EAClEA,EAAgB6O,EAAO,cACvB7jC,EAAS6jC,EAAO,MACpB,CACA,MAAO,CACH,WAAA5O,EACA,cAAAD,EACA,GAAGh1B,CACf,CACI,CACJ,CCnCA,SAAS8wD,GAAiBzgD,EAAS,CAC/B,OAAO,OAAO,iBAAiBA,CAAO,CAC1C,CACA,MAAM0gD,WAA0BJ,EAAiB,CAC7C,aAAc,CACV,MAAM,GAAG,SAAS,EAClB,KAAK,KAAO,MAChB,CACA,sBAAsBnnC,EAAUrpB,EAAK,CACjC,GAAIqsB,GAAe,IAAIrsB,CAAG,EAAG,CACzB,MAAM6wD,EAAcliB,GAAoB3uC,CAAG,EAC3C,OAAO6wD,GAAcA,EAAY,SAAW,CAChD,KACK,CACD,MAAMC,EAAgBH,GAAiBtnC,CAAQ,EACzCpoB,GAASosB,GAAkBrtB,CAAG,EAC9B8wD,EAAc,iBAAiB9wD,CAAG,EAClC8wD,EAAc9wD,CAAG,IAAM,EAC7B,OAAO,OAAOiB,GAAU,SAAWA,EAAM,KAAI,EAAKA,CACtD,CACJ,CACA,2BAA2BooB,EAAU,CAAE,mBAAAktB,GAAsB,CACzD,OAAOqG,GAAmBvzB,EAAUktB,CAAkB,CAC1D,CACA,MAAM1jB,EAAa/D,EAAc1uB,EAASyM,EAAO,CAC7CgiB,GAAgBgE,EAAa/D,EAAc1uB,EAASyM,EAAM,iBAAiB,CAC/E,CACA,4BAA4BA,EAAOmmB,EAAW,CAC1C,OAAOD,GAA4BlmB,EAAOmmB,CAAS,CACvD,CACA,wBAAyB,CACjB,KAAK,oBACL,KAAK,kBAAiB,EACtB,OAAO,KAAK,mBAEhB,KAAM,CAAE,SAAA/lB,GAAa,KAAK,MACtBuf,GAAcvf,CAAQ,IACtB,KAAK,kBAAoBA,EAAS,GAAG,SAAW8kB,GAAW,CACnD,KAAK,UACL,KAAK,QAAQ,YAAc,GAAGA,CAAM,GAC5C,CAAC,EAET,CACA,eAAe1I,EAAUwJ,EAAa/C,EAAW4C,EAAY,CACzDD,GAAWpJ,EAAUwJ,EAAa/C,EAAW4C,CAAU,CAC3D,CACJ,CC7CA,MAAMq+B,WAAyBP,EAAiB,CAC5C,aAAc,CACV,MAAM,GAAG,SAAS,EAClB,KAAK,KAAO,MACZ,KAAK,SAAW,EACpB,CACA,uBAAuB3jD,EAAO7M,EAAK,CAC/B,OAAO6M,EAAM7M,CAAG,CACpB,CACA,sBAAsBqpB,EAAUrpB,EAAK,CACjC,GAAIqsB,GAAe,IAAIrsB,CAAG,EAAG,CACzB,MAAM6wD,EAAcliB,GAAoB3uC,CAAG,EAC3C,OAAO6wD,GAAcA,EAAY,SAAW,CAChD,CACA,OAAA7wD,EAAO2yB,GAAoB,IAAI3yB,CAAG,EAAuBA,EAAnBgoB,GAAYhoB,CAAG,EAC9CqpB,EAAS,aAAarpB,CAAG,CACpC,CACA,4BAA6B,CACzB,OAAOu6C,EAAS,CACpB,CACA,4BAA4B1tC,EAAOmmB,EAAW,CAC1C,OAAOD,GAA4BlmB,EAAOmmB,CAAS,CACvD,CACA,MAAMH,EAAa/D,EAAc1uB,EAASyM,EAAO,CAC7C6kB,GAAcmB,EAAa/D,EAAc1uB,EAAS,KAAK,SAAUyM,EAAM,iBAAiB,CAC5F,CACA,eAAewc,EAAUwJ,EAAa/C,EAAW4C,EAAY,CACzDE,GAAUvJ,EAAUwJ,EAAa/C,EAAW4C,CAAU,CAC1D,CACA,MAAMrJ,EAAU,CACZ,KAAK,SAAW2I,GAAS3I,EAAS,OAAO,EACzC,MAAM,MAAMA,CAAQ,CACxB,CACJ,CCxCA,MAAM2nC,GAAyB,CAACvrC,EAAWrlB,IAChC4rB,GAAevG,CAAS,EACzB,IAAIsrC,GAAiB3wD,EAAS,CAAE,2BAA4B,EAAK,CAAE,EACnE,IAAIwwD,GAAkBxwD,EAAS,CAAE,2BAA4B,EAAI,CAAE,ECJvEmsB,GAAS,CACX,OAAQ,CACJ,eAAgB4+B,GAChB,cAAAngC,EACR,CACA,ECCMJ,GAAoB,CACtB,GAAG6nB,GACH,GAAGrW,GACH,GAAGjE,GACH,GAAG5L,EACP,EAOM0kC,EAAuBxlC,GAAkB,CAAChG,EAAWxO,IAAWggB,GAAsBxR,EAAWxO,EAAQ2T,GAAmBomC,EAAsB,CAAC,EClBzJ,SAASE,IAAe,CACpB,MAAMR,EAAY7nC,EAAAA,OAAO,EAAK,EAC9B,OAAAre,GAA0B,KACtBkmD,EAAU,QAAU,GACb,IAAM,CACTA,EAAU,QAAU,EACxB,GACD,CAAA,CAAE,EACEA,CACX,CCRA,SAASS,IAAiB,CACtB,MAAMT,EAAYQ,GAAY,EACxB,CAACE,EAAmBC,CAAoB,EAAIC,EAAAA,SAAS,CAAC,EACtDC,EAAcnoC,EAAAA,YAAY,IAAM,CAClCsnC,EAAU,SAAWW,EAAqBD,EAAoB,CAAC,CACnE,EAAG,CAACA,CAAiB,CAAC,EAMtB,MAAO,CADqBhoC,EAAAA,YAAY,IAAMyN,EAAM,WAAW06B,CAAW,EAAG,CAACA,CAAW,CAAC,EAC7DH,CAAiB,CAClD,CCTA,MAAMI,WAAwB5kD,EAAAA,SAAgB,CAC1C,wBAAwBomB,EAAW,CAC/B,MAAM9iB,EAAU,KAAK,MAAM,SAAS,QACpC,GAAIA,GAAW8iB,EAAU,WAAa,CAAC,KAAK,MAAM,UAAW,CACzD,MAAMpN,EAAO,KAAK,MAAM,QAAQ,QAChCA,EAAK,OAAS1V,EAAQ,cAAgB,EACtC0V,EAAK,MAAQ1V,EAAQ,aAAe,EACpC0V,EAAK,IAAM1V,EAAQ,UACnB0V,EAAK,KAAO1V,EAAQ,UACxB,CACA,OAAO,IACX,CAIA,oBAAqB,CAAE,CACvB,QAAS,CACL,OAAO,KAAK,MAAM,QACtB,CACJ,CACA,SAASuhD,GAAS,CAAE,SAAAxkD,EAAU,UAAA2oC,GAAa,CACvC,MAAM/mC,EAAKsxC,EAAAA,MAAK,EACVn6B,EAAM6C,EAAAA,OAAO,IAAI,EACjBjD,EAAOiD,EAAAA,OAAO,CAChB,MAAO,EACP,OAAQ,EACR,IAAK,EACL,KAAM,CACd,CAAK,EAUDE,OAAAA,EAAAA,mBAAmB,IAAM,CACrB,KAAM,CAAE,MAAA2oC,EAAO,OAAAC,EAAQ,IAAA7Y,EAAK,KAAAC,CAAI,EAAKnzB,EAAK,QAC1C,GAAIgwB,GAAa,CAAC5vB,EAAI,SAAW,CAAC0rC,GAAS,CAACC,EACxC,OACJ3rC,EAAI,QAAQ,QAAQ,YAAcnX,EAClC,MAAMkgB,EAAQ,SAAS,cAAc,OAAO,EAC5C,gBAAS,KAAK,YAAYA,CAAK,EAC3BA,EAAM,OACNA,EAAM,MAAM,WAAW;AAAA,iCACFlgB,CAAE;AAAA;AAAA,qBAEd6iD,CAAK;AAAA,sBACJC,CAAM;AAAA,mBACT7Y,CAAG;AAAA,oBACFC,CAAI;AAAA;AAAA,SAEf,EAEM,IAAM,CACT,SAAS,KAAK,YAAYhqB,CAAK,CACnC,CACJ,EAAG,CAAC6mB,CAAS,CAAC,EACNxpC,EAAAA,cAAoBolD,GAAiB,CAAE,UAAW5b,EAAW,SAAU5vB,EAAK,QAASJ,CAAI,EAAIgsC,EAAAA,aAAmB3kD,EAAU,CAAE,IAAA+Y,CAAG,CAAE,CAAC,CAC9I,CC9DA,MAAM6rC,GAAgB,CAAC,CAAE,SAAA5kD,EAAU,QAAA6c,EAAS,UAAA8rB,EAAW,eAAAC,EAAgB,OAAAlqB,EAAQ,sBAAAmmC,EAAuB,KAAAC,KAAY,CAC9G,MAAMC,EAAmBx+B,GAAYy+B,EAAc,EAC7CpjD,EAAKsxC,EAAAA,MAAK,EACVtlC,EAAUoP,EAAAA,QAAQ,KAAO,CAC3B,GAAApb,EACA,QAAAib,EACA,UAAA8rB,EACA,OAAAjqB,EACA,eAAiBumC,GAAY,CACzBF,EAAiB,IAAIE,EAAS,EAAI,EAClC,UAAWC,KAAcH,EAAiB,SACtC,GAAI,CAACG,EACD,OAERtc,GAAkBA,EAAc,CACpC,EACA,SAAWqc,IACPF,EAAiB,IAAIE,EAAS,EAAK,EAC5B,IAAMF,EAAiB,OAAOE,CAAO,EAExD,GAMIJ,EAAwB,OAAY,CAAClc,CAAS,CAAC,EAC/C3rB,OAAAA,EAAAA,QAAQ,IAAM,CACV+nC,EAAiB,QAAQ,CAACrqD,EAAG3H,IAAQgyD,EAAiB,IAAIhyD,EAAK,EAAK,CAAC,CACzE,EAAG,CAAC41C,CAAS,CAAC,EAKd3kC,EAAAA,UAAgB,IAAM,CAClB,CAAC2kC,GACG,CAACoc,EAAiB,MAClBnc,GACAA,EAAc,CACtB,EAAG,CAACD,CAAS,CAAC,EACVmc,IAAS,cACT9kD,EAAWb,EAAAA,cAAoBqlD,GAAU,CAAE,UAAW7b,CAAS,EAAI3oC,CAAQ,GAEvEb,EAAAA,cAAoBub,GAAgB,SAAU,CAAE,MAAO9M,CAAO,EAAI5N,CAAQ,CACtF,EACA,SAASglD,IAAiB,CACtB,OAAO,IAAI,GACf,CCnDA,SAASG,GAAiB35C,EAAU,CAChC,OAAOqP,YAAU,IAAM,IAAMrP,EAAQ,EAAI,CAAA,CAAE,CAC/C,CCMA,MAAM45C,GAAen5B,GAAUA,EAAM,KAAO,GAC5C,SAASo5B,GAAkBrlD,EAAUslD,EAAa,CAC9CtlD,EAAS,QAASisB,GAAU,CACxB,MAAMl5B,EAAMqyD,GAAYn5B,CAAK,EAC7Bq5B,EAAY,IAAIvyD,EAAKk5B,CAAK,CAC9B,CAAC,CACL,CACA,SAASs5B,GAAavlD,EAAU,CAC5B,MAAMwlD,EAAW,CAAA,EAEjBC,OAAAA,EAAAA,SAAS,QAAQzlD,EAAWisB,GAAU,CAC9By5B,EAAAA,eAAez5B,CAAK,GACpBu5B,EAAS,KAAKv5B,CAAK,CAC3B,CAAC,EACMu5B,CACX,CAkCA,MAAMG,GAAkB,CAAC,CAAE,SAAA3lD,EAAU,OAAA0e,EAAQ,QAAA7B,EAAU,GAAM,eAAA+rB,EAAgB,gBAAAgd,EAAiB,sBAAAf,EAAwB,GAAM,KAAAC,EAAO,UAAc,CAI7I,MAAMR,EAAc/oC,EAAAA,WAAWgC,EAAkB,EAAE,aAAe2mC,GAAA,EAAiB,CAAC,EAC9ET,EAAYQ,GAAA,EAEZ4B,EAAmBN,GAAavlD,CAAQ,EAC9C,IAAI8lD,EAAmBD,EACvB,MAAME,EAAkBnqC,EAAAA,OAAO,IAAI,GAAK,EAAE,QAGpCoqC,EAAkBpqC,EAAAA,OAAOkqC,CAAgB,EAEzCR,EAAc1pC,EAAAA,OAAO,IAAI,GAAK,EAAE,QAGhCirB,EAAkBjrB,EAAAA,OAAO,EAAI,EAWnC,GAVAre,GAA0B,IAAM,CAC5BspC,EAAgB,QAAU,GAC1Bwe,GAAkBQ,EAAkBP,CAAW,EAC/CU,EAAgB,QAAUF,CAC9B,CAAC,EACDX,GAAiB,IAAM,CACnBte,EAAgB,QAAU,GAC1Bye,EAAY,MAAA,EACZS,EAAgB,MAAA,CACpB,CAAC,EACGlf,EAAgB,QAChB,OAAQ1nC,gBAAoBK,EAAAA,SAAgB,KAAMsmD,EAAiB,IAAK75B,GAAW9sB,EAAAA,cAAoBylD,GAAe,CAAE,IAAKQ,GAAYn5B,CAAK,EAAG,UAAW,GAAM,QAASpP,EAAU,OAAY,GAAO,sBAAAgoC,EAA8C,KAAAC,GAAc74B,CAAK,CAAE,CAAC,EAGhR65B,EAAmB,CAAC,GAAGA,CAAgB,EAGvC,MAAMG,EAAcD,EAAgB,QAAQ,IAAIZ,EAAW,EACrDc,EAAaL,EAAiB,IAAIT,EAAW,EAE7Ce,EAAaF,EAAY,OAC/B,QAASpzD,EAAI,EAAGA,EAAIszD,EAAYtzD,IAAK,CACjC,MAAME,EAAMkzD,EAAYpzD,CAAC,EACrBqzD,EAAW,QAAQnzD,CAAG,IAAM,IAAM,CAACgzD,EAAgB,IAAIhzD,CAAG,GAC1DgzD,EAAgB,IAAIhzD,EAAK,MAAS,CAE1C,CAGA,OAAI+xD,IAAS,QAAUiB,EAAgB,OACnCD,EAAmB,CAAA,GAIvBC,EAAgB,QAAQ,CAACK,EAAWrzD,IAAQ,CAExC,GAAImzD,EAAW,QAAQnzD,CAAG,IAAM,GAC5B,OACJ,MAAMk5B,EAAQq5B,EAAY,IAAIvyD,CAAG,EACjC,GAAI,CAACk5B,EACD,OACJ,MAAMo6B,EAAiBJ,EAAY,QAAQlzD,CAAG,EAC9C,IAAIuzD,EAAmBF,EACvB,GAAI,CAACE,EAAkB,CACnB,MAAMC,EAAS,IAAM,CAEjBR,EAAgB,OAAOhzD,CAAG,EAI1B,MAAMyzD,EAAe,MAAM,KAAKlB,EAAY,MAAM,EAAE,OAAQmB,GAAa,CAACP,EAAW,SAASO,CAAQ,CAAC,EAavG,GAXAD,EAAa,QAASE,GAAgBpB,EAAY,OAAOoB,CAAW,CAAC,EAErEV,EAAgB,QAAUH,EAAiB,OAAQc,GAAiB,CAChE,MAAMC,EAAkBxB,GAAYuB,CAAY,EAChD,OAEAC,IAAoB7zD,GAEhByzD,EAAa,SAASI,CAAe,CAC7C,CAAC,EAEG,CAACb,EAAgB,KAAM,CACvB,GAAItC,EAAU,UAAY,GACtB,OACJa,EAAA,EACA1b,GAAkBA,EAAA,CACtB,CACJ,EACA0d,EAAoBnnD,EAAAA,cAAoBylD,GAAe,CAAE,IAAKQ,GAAYn5B,CAAK,EAAG,UAAW,GAAO,eAAgBs6B,EAAQ,OAAA7nC,EAAgB,sBAAAmmC,EAA8C,KAAAC,CAAA,EAAc74B,CAAK,EAC7M85B,EAAgB,IAAIhzD,EAAKuzD,CAAgB,CAC7C,CACAR,EAAiB,OAAOO,EAAgB,EAAGC,CAAgB,CAC/D,CAAC,EAGDR,EAAmBA,EAAiB,IAAK75B,GAAU,CAC/C,MAAMl5B,EAAMk5B,EAAM,IAClB,OAAO85B,EAAgB,IAAIhzD,CAAG,EAAKk5B,EAAU9sB,EAAAA,cAAoBylD,GAAe,CAAE,IAAKQ,GAAYn5B,CAAK,EAAG,UAAW,GAAM,sBAAA44B,EAA8C,KAAAC,CAAA,EAAc74B,CAAK,CACjM,CAAC,EAMO9sB,EAAAA,cAAoBK,EAAAA,SAAgB,KAAMumD,EAAgB,KAC5DD,EACAA,EAAiB,IAAK75B,GAAU46B,EAAAA,aAAa56B,CAAK,CAAC,CAAC,CAC9D,ECjKM66B,GAA4C,CAAC,CAAE,OAAAC,EAAQ,QAAAC,EAAS,gBAAAC,EAAiB,YAAAC,KAChFH,EAGH3zC,EAAAA,IAAC4wC,EAAO,IAAP,CACC,QAAS,CAAE,QAAS,CAAA,EACpB,QAAS,CAAE,QAAS,CAAA,EACpB,KAAM,CAAE,QAAS,CAAA,EACjB,UAAU,uFAEV,SAAAmD,EAAAA,KAACnD,EAAO,IAAP,CACC,QAAS,CAAE,MAAO,GAAK,QAAS,CAAA,EAChC,QAAS,CAAE,MAAO,EAAG,QAAS,CAAA,EAC9B,KAAM,CAAE,MAAO,GAAK,QAAS,CAAA,EAC7B,UAAU,+DAGV,SAAA,CAAAmD,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAA/zC,EAAAA,IAACoG,GAAA,CAAM,UAAU,uBAAA,CAAwB,EACzCpG,EAAAA,IAAC,KAAA,CAAG,UAAU,gCAAgC,SAAA,wBAAA,CAAsB,CAAA,EACtE,EACAA,EAAAA,IAAC,SAAA,CAAO,QAAS4zC,EAAS,UAAU,mDAClC,SAAA5zC,EAAAA,IAAC0B,GAAA,CAAE,UAAU,SAAA,CAAU,CAAA,CACzB,CAAA,EACF,EAGAqyC,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,OAAC,UAAA,CACC,SAAA,CAAA/zC,EAAAA,IAAC,KAAA,CAAG,UAAU,wCAAwC,SAAA,cAAW,EACjE+zC,EAAAA,KAAC,MAAA,CAAI,UAAU,0CACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAA/zC,EAAAA,IAAC,MAAA,CAAI,UAAU,uCAAA,CAAwC,EACvDA,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAgB,SAAA,yEAAA,CAAuE,CAAA,EACtG,EACA+zC,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAA/zC,EAAAA,IAAC,MAAA,CAAI,UAAU,uCAAA,CAAwC,EACvDA,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAgB,SAAA,2DAAA,CAAyD,CAAA,EACxF,EACA+zC,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAA/zC,EAAAA,IAAC,MAAA,CAAI,UAAU,uCAAA,CAAwC,EACvDA,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAgB,SAAA,oEAAA,CAAkE,CAAA,EACjG,EACA+zC,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAA/zC,EAAAA,IAAC,MAAA,CAAI,UAAU,uCAAA,CAAwC,EACvDA,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAgB,SAAA,qEAAA,CAAmE,CAAA,CAAA,CAClG,CAAA,CAAA,CACF,CAAA,EACF,SAEY,UAAA,CACT,SAAA,CAAAA,EAAAA,IAAC,KAAA,CAAG,UAAU,wCAAwC,SAAA,cAAW,EACjE+zC,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,4DACb,SAAA,CAAA/zC,EAAAA,IAAC,KAAA,CAAG,UAAU,4CAA4C,SAAA,eAAY,EACtEA,EAAAA,IAAC,IAAA,CAAE,UAAU,yBAAyB,SAAA,aAAA,CAAW,CAAA,EACnD,EACA+zC,EAAAA,KAAC,MAAA,CAAI,UAAU,8DACb,SAAA,CAAA/zC,EAAAA,IAAC,KAAA,CAAG,UAAU,6CAA6C,SAAA,gBAAa,EACxEA,EAAAA,IAAC,IAAA,CAAE,UAAU,0BAA0B,SAAA,mBAAA,CAAiB,CAAA,EAC1D,EACA+zC,EAAAA,KAAC,MAAA,CAAI,UAAU,wDACb,SAAA,CAAA/zC,EAAAA,IAAC,KAAA,CAAG,UAAU,0CAA0C,SAAA,aAAU,EAClEA,EAAAA,IAAC,IAAA,CAAE,UAAU,uBAAuB,SAAA,cAAA,CAAY,CAAA,CAAA,CAClD,CAAA,CAAA,CACF,CAAA,EACF,SAEA,UAAA,CACC,SAAA,CAAAA,EAAAA,IAAC,KAAA,CAAG,UAAU,wCAAwC,SAAA,iBAAc,EACpE+zC,EAAAA,KAAC,MAAA,CAAI,UAAU,0CACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAA/zC,EAAAA,IAAC,MAAA,CAAI,UAAU,yCAAA,CAA0C,EACzDA,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAgB,SAAA,gCAAA,CAA8B,CAAA,EAC7D,EACA+zC,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAA/zC,EAAAA,IAAC,MAAA,CAAI,UAAU,yCAAA,CAA0C,EACzDA,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAgB,SAAA,4DAAA,CAA0D,CAAA,EACzF,EACA+zC,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAA/zC,EAAAA,IAAC,MAAA,CAAI,UAAU,yCAAA,CAA0C,EACzDA,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAgB,SAAA,2DAAA,CAAyD,CAAA,EACxF,EACA+zC,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAA/zC,EAAAA,IAAC,MAAA,CAAI,UAAU,yCAAA,CAA0C,EACzDA,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAgB,SAAA,2CAAA,CAAyC,CAAA,EACxE,EACA+zC,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAA/zC,EAAAA,IAAC,MAAA,CAAI,UAAU,yCAAA,CAA0C,EACzDA,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAgB,SAAA,6CAAA,CAA2C,CAAA,EAC1E,EACA+zC,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAA/zC,EAAAA,IAAC,MAAA,CAAI,UAAU,yCAAA,CAA0C,EACzDA,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAgB,SAAA,6DAAA,CAA2D,CAAA,CAAA,CAC1F,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,QAGC,MAAA,CAAI,UAAU,iDACb,SAAA+zC,EAAAA,KAAC,MAAA,CAAI,UAAU,iDACZ,SAAA,CAAAF,GACC7zC,EAAAA,IAAC4wC,EAAO,OAAP,CACC,WAAY,CAAE,MAAO,IAAA,EACrB,SAAU,CAAE,MAAO,GAAA,EACnB,QAASiD,EACT,UAAU,8CACX,SAAA,sBAAA,CAAA,EAIFC,GACC9zC,EAAAA,IAAC4wC,EAAO,OAAP,CACC,WAAY,CAAE,MAAO,IAAA,EACrB,SAAU,CAAE,MAAO,GAAA,EACnB,QAASkD,EACT,UAAU,8CACX,SAAA,YAAA,CAAA,EAIH9zC,EAAAA,IAAC4wC,EAAO,OAAP,CACC,WAAY,CAAE,MAAO,IAAA,EACrB,SAAU,CAAE,MAAO,GAAA,EACnB,QAASgD,EACT,UAAU,8CACX,SAAA,OAAA,CAAA,CAED,CAAA,CACF,CAAA,CACF,CAAA,CAAA,CAAA,CACF,CAAA,EApIgB,KCNtBI,GAAe,mDCITC,GAA4C,CAAC,CAAE,KAAA1uC,EAAO,GAAI,UAAAG,EAAY,MAExE1F,EAAAA,IAAC,MAAA,CACC,UAAW,uBAAuB0F,CAAS,GAC3C,MAAO,CAAE,MAAOH,EAAM,OAAQA,CAAA,EAE9B,SAAAvF,EAAAA,IAAC,MAAA,CACC,IAAKg0C,GACL,IAAI,2BACJ,MAAO,CACL,WAAY,sBAAA,CACd,CAAA,CACF,CAAA,ECTAE,GAAqB,IAAM,CAC/B,MAAMC,EAAW7pD,GAAA,EACX,CAAC8pD,EAAcC,CAAe,EAAIpD,EAAAA,SAAS,EAAK,EAChD,CAACqD,EAAaC,CAAc,EAAItD,EAAAA,SAAS,EAAI,EAEnDxpC,EAAAA,UAAU,IAAM,CAEd8sC,EAAe,EAAI,CACrB,EAAG,CAAA,CAAE,EAEL,MAAMC,EAAkB,IAAM,CAC5BL,EAAS,OAAO,CAClB,EAEMM,EAAsB,IAAM,CAChCJ,EAAgB,EAAK,EAErB,QAAQ,IAAI,kCAAkC,CAChD,EAEA,OACEN,EAAAA,KAAC,MAAA,CAAI,UAAU,wEAEb,SAAA,CAAA/zC,EAAAA,IAAC,SAAA,CAAO,UAAU,wDAChB,SAAAA,EAAAA,IAAC,MAAA,CAAI,UAAU,yCACb,SAAA+zC,OAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAA/zC,EAAAA,IAAC,OAAI,UAAU,oGACb,eAAC6G,GAAA,CAAO,UAAU,qBAAqB,CAAA,CACzC,EACA7G,EAAAA,IAAC,KAAA,CAAG,UAAU,gCAAgC,SAAA,eAAA,CAAa,CAAA,EAC7D,EACA+zC,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAA/zC,EAAAA,IAAC,OAAA,CAAK,UAAU,wBAAwB,SAAA,IAAC,EACzCA,EAAAA,IAACi0C,GAAA,CAAa,UAAU,SAAA,CAAU,EAClCj0C,EAAAA,IAAC,OAAA,CAAK,UAAU,oCAAoC,SAAA,UAAA,CAAQ,CAAA,CAAA,CAC9D,CAAA,EACF,EAEA+zC,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAA,EAAAA,KAAC,SAAA,CACC,QAAS,IAAMM,EAAgB,EAAI,EACnC,UAAU,4DAEV,SAAA,CAAAr0C,EAAAA,IAACwG,GAAA,CAAW,UAAU,SAAA,CAAU,EAAE,aAAA,CAAA,CAAA,EAGpCutC,EAAAA,KAAC,IAAA,CACC,KAAK,wBACL,OAAO,SACP,IAAI,sBACJ,UAAU,kEACX,SAAA,CAAA,WAEC/zC,EAAAA,IAAC,OAAI,UAAU,2DAA2D,KAAK,OAAO,OAAO,eAAe,QAAQ,YAClH,eAAC,OAAA,CAAK,cAAc,QAAQ,eAAe,QAAQ,YAAa,EAAG,EAAE,+EAA+E,CAAA,CACtJ,CAAA,CAAA,CAAA,CACF,CAAA,CACF,CAAA,CAAA,CACF,EACF,EACF,QAGC,UAAA,CAAQ,UAAU,sCACjB,SAAA+zC,EAAAA,KAAC,MAAA,CAAI,UAAU,gCAEZ,SAAA,CAAAO,GACCP,EAAAA,KAACnD,EAAO,IAAP,CACC,QAAS,CAAE,QAAS,EAAG,EAAG,EAAA,EAC1B,QAAS,CAAE,QAAS,EAAG,EAAG,CAAA,EAC1B,UAAU,wEAGV,SAAA,CAAA5wC,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMu0C,EAAe,EAAK,EACnC,UAAU,6EACV,aAAW,wBAEX,SAAAv0C,EAAAA,IAAC,OAAI,UAAU,UAAU,KAAK,OAAO,OAAO,eAAe,QAAQ,YACjE,eAAC,OAAA,CAAK,cAAc,QAAQ,eAAe,QAAQ,YAAa,EAAG,EAAE,uBAAuB,CAAA,CAC9F,CAAA,CAAA,EAGF+zC,EAAAA,KAAC,MAAA,CAAI,UAAU,8CACb,SAAA,CAAA/zC,EAAAA,IAAC6G,GAAA,CAAO,UAAU,uBAAA,CAAwB,EAC1C7G,EAAAA,IAAC,KAAA,CAAG,UAAU,mCAAmC,SAAA,2BAAA,CAAyB,CAAA,EAC5E,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,qJAAA,CAGrC,CAAA,CAAA,CAAA,EAIJ+zC,EAAAA,KAAC,KAAA,CAAG,UAAU,iDAAiD,SAAA,CAAA,wBAE7D/zC,EAAAA,IAAC,OAAA,CAAK,UAAU,iFAAiF,SAAA,oBAAA,CAEjG,CAAA,EACF,EAEAA,EAAAA,IAAC,IAAA,CAAE,UAAU,+CAA+C,SAAA,8JAG5D,EAEA+zC,EAAAA,KAAC,MAAA,CAAI,UAAU,8DACb,SAAA,CAAAA,EAAAA,KAAC,SAAA,CACC,QAAS,IAAMS,EAAA,EACf,UAAU,8EAEV,SAAA,CAAAx0C,EAAAA,IAAC2G,GAAA,CAAK,UAAU,SAAA,CAAU,EAAE,mBAAA,CAAA,CAAA,EAI9BotC,EAAAA,KAAC,SAAA,CACC,QAAS,IAAMM,EAAgB,EAAI,EACnC,UAAU,8EAEV,SAAA,CAAAr0C,EAAAA,IAACmG,GAAA,CAAS,UAAU,SAAA,CAAU,EAAE,mBAAA,CAAA,CAAA,CAElC,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,QAGC,UAAA,CAAQ,UAAU,yCACjB,SAAA4tC,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAA/zC,EAAAA,IAAC,KAAA,CAAG,UAAU,iDAAiD,SAAA,qBAE/D,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,0CAA0C,SAAA,4GAAA,CAGvD,CAAA,EACF,EAEA+zC,EAAAA,KAAC,MAAA,CAAI,UAAU,uDAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,gCACb,SAAA,CAAA/zC,EAAAA,IAAC,OAAI,UAAU,qHACb,eAACoG,GAAA,CAAM,UAAU,qBAAqB,CAAA,CACxC,EACApG,EAAAA,IAAC,KAAA,CAAG,UAAU,oCAAoC,SAAA,uBAAoB,EACtEA,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAgB,SAAA,oHAAA,CAG7B,CAAA,EACF,EAGA+zC,EAAAA,KAAC,MAAA,CAAI,UAAU,gCACb,SAAA,CAAA/zC,EAAAA,IAAC,OAAI,UAAU,mHACb,eAAC+G,GAAA,CAAO,UAAU,qBAAqB,CAAA,CACzC,EACA/G,EAAAA,IAAC,KAAA,CAAG,UAAU,oCAAoC,SAAA,yBAAsB,EACxEA,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAgB,SAAA,wGAAA,CAG7B,CAAA,EACF,EAGA+zC,EAAAA,KAAC,MAAA,CAAI,UAAU,gCACb,SAAA,CAAA/zC,EAAAA,IAAC,OAAI,UAAU,uHACb,eAACkH,GAAA,CAAI,UAAU,qBAAqB,CAAA,CACtC,EACAlH,EAAAA,IAAC,KAAA,CAAG,UAAU,oCAAoC,SAAA,mBAAgB,EAClEA,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAgB,SAAA,yFAAA,CAG7B,CAAA,EACF,EAGA+zC,EAAAA,KAAC,MAAA,CAAI,UAAU,gCACb,SAAA,CAAA/zC,EAAAA,IAAC,OAAI,UAAU,uHACb,eAACgH,GAAA,CAAO,UAAU,qBAAqB,CAAA,CACzC,EACAhH,EAAAA,IAAC,KAAA,CAAG,UAAU,oCAAoC,SAAA,qBAAkB,EACpEA,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAgB,SAAA,6EAAA,CAE7B,CAAA,EACF,EAGA+zC,EAAAA,KAAC,MAAA,CAAI,UAAU,gCACb,SAAA,CAAA/zC,EAAAA,IAAC,OAAI,UAAU,iHACb,eAAC+F,GAAA,CAAc,UAAU,qBAAqB,CAAA,CAChD,EACA/F,EAAAA,IAAC,KAAA,CAAG,UAAU,oCAAoC,SAAA,iBAAc,EAChEA,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAgB,SAAA,+FAAA,CAG7B,CAAA,EACF,EAGA+zC,EAAAA,KAAC,MAAA,CAAI,UAAU,gCACb,SAAA,CAAA/zC,EAAAA,IAAC,OAAI,UAAU,mHACb,eAAC6G,GAAA,CAAO,UAAU,qBAAqB,CAAA,CACzC,EACA7G,EAAAA,IAAC,KAAA,CAAG,UAAU,oCAAoC,SAAA,mBAAgB,EAClEA,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAgB,SAAA,kGAAA,CAG7B,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,QAGC,UAAA,CAAQ,UAAU,6BACjB,SAAA+zC,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAA/zC,EAAAA,IAAC,KAAA,CAAG,UAAU,iDAAiD,SAAA,iCAE/D,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,0CAA0C,SAAA,iFAAA,CAEvD,CAAA,EACF,QAEC,MAAA,CAAI,UAAU,oBAEb,SAAA+zC,EAAAA,KAAC,MAAA,CAAI,UAAU,gCACb,SAAA,CAAA/zC,EAAAA,IAAC,OAAI,UAAU,mHACb,eAACoG,GAAA,CAAM,UAAU,uBAAuB,CAAA,CAC1C,EACApG,EAAAA,IAAC,KAAA,CAAG,UAAU,qCAAqC,SAAA,8BAA2B,EAC9EA,EAAAA,IAAC,IAAA,CAAE,UAAU,qBAAqB,SAAA,6MAGlC,EACA+zC,EAAAA,KAAC,KAAA,CAAG,UAAU,2DACZ,SAAA,CAAAA,EAAAA,KAAC,KAAA,CAAG,UAAU,0BACZ,SAAA,CAAA/zC,EAAAA,IAAC,MAAA,CAAI,UAAU,kCAAA,CAAmC,EAAM,oDAAA,EAE1D,EACA+zC,EAAAA,KAAC,KAAA,CAAG,UAAU,0BACZ,SAAA,CAAA/zC,EAAAA,IAAC,MAAA,CAAI,UAAU,kCAAA,CAAmC,EAAM,kDAAA,EAE1D,EACA+zC,EAAAA,KAAC,KAAA,CAAG,UAAU,0BACZ,SAAA,CAAA/zC,EAAAA,IAAC,MAAA,CAAI,UAAU,kCAAA,CAAmC,EAAM,sCAAA,EAE1D,EACA+zC,EAAAA,KAAC,KAAA,CAAG,UAAU,0BACZ,SAAA,CAAA/zC,EAAAA,IAAC,MAAA,CAAI,UAAU,kCAAA,CAAmC,EAAM,+CAAA,EAE1D,EACA+zC,EAAAA,KAAC,KAAA,CAAG,UAAU,0BACZ,SAAA,CAAA/zC,EAAAA,IAAC,MAAA,CAAI,UAAU,kCAAA,CAAmC,EAAM,4CAAA,CAAA,CAE1D,CAAA,EACF,EACAA,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMw0C,EAAA,EACf,UAAU,sDACX,SAAA,wBAAA,CAAA,CAED,CAAA,CACF,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,QAGC,UAAA,CAAQ,UAAU,8EACjB,SAAAT,EAAAA,KAAC,MAAA,CAAI,UAAU,gCACb,SAAA,CAAA/zC,EAAAA,IAAC,KAAA,CAAG,UAAU,iDAAiD,SAAA,kCAE/D,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,8EAE1C,EACA+zC,EAAAA,KAAC,MAAA,CAAI,UAAU,iDACb,SAAA,CAAA/zC,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMw0C,EAAA,EACf,UAAU,sDACX,SAAA,4BAAA,CAAA,EAGDx0C,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMq0C,EAAgB,EAAI,EACnC,UAAU,sDACX,SAAA,YAAA,CAAA,CAED,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,QAIC,SAAA,CAAO,UAAU,wDAChB,SAAAN,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAA/zC,EAAAA,IAACi0C,GAAA,CAAa,UAAU,SAAA,CAAU,SACjC,MAAA,CACC,SAAA,CAAAj0C,EAAAA,IAAC,KAAA,CAAG,UAAU,oBAAoB,SAAA,gBAAa,EAC/CA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,8CAAA,CAErC,CAAA,CAAA,CACF,CAAA,EACF,EACA+zC,EAAAA,KAAC,MAAA,CAAI,UAAU,gDACb,SAAA,CAAA/zC,MAAC,IAAA,CAAE,KAAK,IAAI,UAAU,qCAAqC,SAAA,QAE3D,QACC,IAAA,CAAE,KAAK,IAAI,UAAU,qCAAqC,SAAA,iBAE3D,EACA+zC,EAAAA,KAAC,IAAA,CACC,KAAK,wBACL,OAAO,SACP,IAAI,sBACJ,UAAU,mEACX,SAAA,CAAA,WAEC/zC,EAAAA,IAAC,OAAI,UAAU,2DAA2D,KAAK,OAAO,OAAO,eAAe,QAAQ,YAClH,eAAC,OAAA,CAAK,cAAc,QAAQ,eAAe,QAAQ,YAAa,EAAG,EAAE,+EAA+E,CAAA,CACtJ,CAAA,CAAA,CAAA,CACF,CAAA,CACF,CAAA,EACF,QACC,MAAA,CAAI,UAAU,uEACb,SAAA+zC,EAAAA,KAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,CAAA,kCACL,IAChC/zC,EAAAA,IAAC,IAAA,CACC,KAAK,2BACL,OAAO,SACP,IAAI,sBACJ,UAAU,kDACX,SAAA,kBAAA,CAAA,EAGA,IAAI,yBAAA,CAAA,CACP,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,EAGAA,EAAAA,IAAC0zC,GAAA,CACC,OAAQU,EACR,QAAS,IAAMC,EAAgB,EAAK,EACpC,gBAAiBI,EACjB,YAAaD,CAAA,CAAA,CACf,EACF,CAEJ,EC3WaE,GAAsB,IAAM,CACvC,KAAM,CAACC,EAAUC,CAAW,EAAI3D,EAAAA,SAAS,EAAK,EACxC,CAAC4D,EAAUC,CAAW,EAAI7D,EAAAA,SAAS,EAAK,EACxC,CAAC8D,EAAWC,CAAY,EAAI/D,EAAAA,SAAS,EAAK,EAC1C,CAACgE,EAAeC,CAAgB,EAAIjE,EAAAA,SAAS,EAAK,EAClD,CAACkE,EAAeC,CAAgB,EAAInE,EAAAA,SAAS,EAAK,EAClD,CAACoE,EAAaC,CAAc,EAAIrE,EAAAA,SAAS,CAAC,EAC1C,CAACsE,EAAcC,CAAe,EAAIvE,EAAAA,SAAS,CAAC,EAElDxpC,OAAAA,EAAAA,UAAU,IAAM,CACd,MAAMguC,EAAkB,IAAM,CAC5B,MAAMpE,EAAQ,OAAO,WACfC,EAAS,OAAO,YAEtBgE,EAAejE,CAAK,EACpBmE,EAAgBlE,CAAM,EAGtB4D,EAAiB7D,EAAQ,GAAG,EAG5B+D,EAAiB/D,GAAS,KAAOA,EAAQ,GAAG,EAG5CuD,EAAYvD,EAAQ,GAAG,EAGvByD,EAAYzD,GAAS,KAAOA,EAAQ,IAAI,EAGxC2D,EAAa3D,GAAS,IAAI,CAC5B,EAGA,OAAAoE,EAAA,EAGA,OAAO,iBAAiB,SAAUA,CAAe,EAG1C,IAAM,OAAO,oBAAoB,SAAUA,CAAe,CACnE,EAAG,CAAA,CAAE,EAEE,CACL,SAAAd,EACA,SAAAE,EACA,UAAAE,EACA,cAAAE,EACA,cAAAE,EACA,YAAAE,EACA,aAAAE,CAAA,CAEJ,EChDMG,GAA4D,CAAC,CACjE,OAAAC,EACA,aAAAC,EACA,UAAAC,EACA,gBAAAC,EACA,cAAAC,CACF,IAAM,CACJ,KAAM,CAACC,EAAcC,CAAe,EAAIhF,EAAAA,SAAS,EAAI,EAC/C,CAAE,SAAA0D,EAAU,cAAAM,CAAA,EAAkBP,GAAA,EAC9B,CAACwB,EAAsBC,CAAuB,EAAIlF,EAAAA,SAAS,EAAK,EAChE,CAACmF,EAAoBC,CAAqB,EAAIpF,EAAAA,SAA6C,QAAQ,EACnG,CAACqF,EAAcC,CAAe,EAAItF,EAAAA,SAA+C,IAAI,EAGrFuF,EAAgB5sC,EAAAA,QAAQ,IACrB+rC,EAAO,OAAOc,GAAS,CAACA,EAAM,SAAS,EAC7C,CAACd,CAAM,CAAC,EAGLe,EAAmB3tC,cAAa0tC,GAAiB,CAChDA,EAAM,WACTb,EAAaa,CAAK,CAEtB,EAAG,CAACb,CAAY,CAAC,EAGjBzlD,GAAM,UAAU,IAAM,CACpB,IAAIwmD,EAA4D,SAShE,GAPId,EAAU,gBAAkB,IAAMA,EAAU,eAAiB,EAC/Dc,EAAwB,WACfd,EAAU,gBAAkB,IAAMA,EAAU,eAAiB,IACtEc,EAAwB,YAItBA,IAA0BP,GAAsBO,IAA0B,SAAU,CACtF,QAAQ,IAAI,mCAAmCP,CAAkB,MAAMO,CAAqB,EAAE,EAG1FL,GACF,aAAaA,CAAY,EAG3BH,EAAwB,EAAI,EAC5BE,EAAsBM,CAAqB,EAG3C,MAAMC,EAAQ,WAAW,IAAM,CAC7B,QAAQ,IAAI,4CAA4C,EACxDT,EAAwB,EAAK,CAC/B,EAAG,GAAI,EAEPI,EAAgBK,CAAK,CACvB,CAGA,MAAO,IAAM,CACPN,GACF,aAAaA,CAAY,CAE7B,CACF,EAAG,CAACT,EAAU,eAAgBO,EAAoBE,CAAY,CAAC,EAG/DnmD,GAAM,UAAU,IACP,IAAM,CACPmmD,GACF,aAAaA,CAAY,CAE7B,EACC,CAACA,CAAY,CAAC,EAGjB,MAAMO,EAAiBJ,GAEjBA,EAAM,OAAS,EAEVA,EAAM,aAAe,OAAS,SAAW,SACvCA,EAAM,OAAS,GAEjBA,EAAM,aAAe,SAAW,SAAW,SAG3CA,EAAM,aAAe,OAAS,OAAW,QAK9CK,EAAgBL,GAChBX,IAAoBW,EAAM,GACrB,QAEF,KAWT,OACE1C,EAAAA,KAAC,MAAA,CAAI,UAAU,6DAEZ,SAAA,CAAA/zC,EAAAA,IAAC,MAAA,CAAI,UAAW,iBACdi1C,EAAgB,gBAChBN,EAAW,gBACX,eACF,GACE,SAAAZ,EAAAA,KAAC,MAAA,CAAI,UAAU,oFACb,SAAA,CAAAA,EAAAA,KAAC,SAAA,CACC,QAAS,IAAMkC,EAAgB,CAACD,CAAY,EAC5C,UAAW,2HACTf,EAAgB,oBAAsB,WACxC,GAEA,SAAA,CAAAlB,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAA/zC,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,KAAE,EACjC,CAACi1C,GAAiB,aAAA,EACrB,QACC,OAAA,CAAK,UAAU,gBAAiB,SAAAe,EAAe,IAAM,GAAA,CAAI,CAAA,CAAA,CAAA,EAGjDA,GACTjC,EAAAA,KAAC,MAAA,CAAI,UAAW,aACdkB,EAAgB,yBAChBN,EAAW,yBACX,wBACF,GAEE,SAAA,CAAAZ,OAAC,OAAI,UAAW,mEACdkB,EAAgB,MAAQ,KAC1B,GACE,SAAA,CAAAj1C,EAAAA,IAAC,OAAI,UAAW,oCACdi1C,EAAgB,UAAY,SAC9B,GAAI,SAAA,OAAA,CAAK,EACTj1C,EAAAA,IAAC,OAAI,UAAW,wBACdi1C,EAAgB,UAAY,UAC9B,GAAK,SAAAY,EAAU,YAAA,CAAa,CAAA,EAC9B,EAGD9B,EAAAA,KAAC,MAAA,CAAI,UAAU,wEACb,SAAA,CAAA/zC,EAAAA,IAAC,MAAA,CAAI,UAAU,4CAA4C,SAAA,kBAAe,EAC1E+zC,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACZ,SAAA,CAAA8B,EAAU,gBAAkB,GAAK,KAAOA,EAAU,gBAAkB,GAAK,KAAO,KAAK,IAAEA,EAAU,eAAe,GAAA,CAAA,CACnH,CAAA,EACF,EAGA9B,EAAAA,KAAC,MAAA,CAAI,UAAU,0EACb,SAAA,CAAA/zC,EAAAA,IAAC,MAAA,CAAI,UAAU,6CAA6C,SAAA,oBAAiB,EAC7E+zC,EAAAA,KAAC,MAAA,CAAI,UAAU,+BACZ,SAAA,CAAA8B,EAAU,kBAAkB,IAAEA,EAAU,qBAAA,EAC3C,EACA71C,EAAAA,IAAC,MAAA,CAAI,UAAU,0BAA0B,SAAA,kBAAA,CAAgB,CAAA,EAC3D,EAGA+zC,EAAAA,KAAC,MAAA,CAAI,UAAU,0EACb,SAAA,CAAA/zC,EAAAA,IAAC,MAAA,CAAI,UAAU,6CAA6C,SAAA,aAAU,EACtEA,EAAAA,IAAC,MAAA,CAAI,UAAU,0CACZ,WAAU,iBAAA,CACb,CAAA,EACF,EAGA+zC,EAAAA,KAAC,MAAA,CAAI,UAAU,0DACb,SAAA,CAAA/zC,EAAAA,IAAC,MAAA,CAAI,UAAU,2CAA2C,SAAA,eAAY,EACtE+zC,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAA/zC,EAAAA,IAAC,MAAA,CAAI,UAAU,8BAAA,CAA+B,EAC9CA,EAAAA,IAAC,OAAA,CAAK,UAAU,iBAAiB,SAAA,qBAAA,CAAmB,CAAA,EACtD,EACA+zC,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAA/zC,EAAAA,IAAC,MAAA,CAAI,UAAU,+BAAA,CAAgC,EAC/CA,EAAAA,IAAC,OAAA,CAAK,UAAU,kBAAkB,SAAA,4BAAA,CAA0B,CAAA,EAC9D,EACA+zC,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAA/zC,EAAAA,IAAC,MAAA,CAAI,UAAU,4BAAA,CAA6B,EAC5CA,EAAAA,IAAC,OAAA,CAAK,UAAU,eAAe,SAAA,oBAAA,CAAkB,CAAA,CAAA,CACnD,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CAEJ,CAAA,CACF,EAGC+zC,EAAAA,KAACgD,GAAA,CACC,OAAQ,CACN,SAAU9B,EAAgB,CAAC,EAAG,EAAG,CAAC,EAAIN,EAAW,CAAC,EAAG,EAAG,CAAC,EAAI,CAAC,EAAG,EAAG,CAAC,EACrE,IAAKM,EAAgB,GAAK,EAAA,EAE5B,UAAU,gBACV,MAAO,CACL,UAAWA,EAAgB,QAAUN,EAAW,QAAU,QAC1D,YAAaM,EAAgB,MAAQ,OACrC,UAAWA,EAAgB,OAAS,MAAA,EAEtC,GAAI,CAAE,UAAW,GAAM,MAAO,EAAA,EAG/B,SAAA,CAAAj1C,EAAAA,IAAC,eAAA,CAAa,UAAW,EAAA,CAAK,EAC9BA,EAAAA,IAAC,mBAAA,CAAiB,SAAU,CAAC,EAAG,GAAI,CAAC,EAAG,UAAW,GAAK,WAAU,EAAA,CAAC,EACnEA,MAAC,oBAAiB,SAAU,CAAC,GAAI,EAAG,EAAE,EAAG,UAAW,GAAK,SAGxD,OAAA,CAAK,SAAU,CAAC,CAAC,KAAK,GAAK,EAAG,EAAG,CAAC,EAAG,SAAU,CAAC,EAAG,KAAO,CAAC,EAC1D,SAAA,CAAAA,EAAAA,IAAC,gBAAA,CAAc,KAAM,CAAC,GAAI,EAAE,EAAG,QAC9B,uBAAA,CAAqB,MAAM,UAAU,YAAW,GAAC,QAAS,EAAA,CAAK,CAAA,EAClE,EAGAA,EAAAA,IAAC,aAAA,CAAW,KAAM,CAAC,EAAG,EAAG,QAAU,OAAQ,EAAG,SAAU,CAAC,EAAG,KAAO,CAAC,CAAA,CAAG,EAGtEw2C,EAAc,IAAKC,GAAU,CAC5B,MAAMO,EAAaH,EAAcJ,CAAK,EAChCQ,EAAYH,EAAaL,CAAK,EAC9BS,EAAapB,IAAoBW,EAAM,GAGvCU,EAAatB,EAAU,gBAAkB,GACzCuB,EAAavB,EAAU,gBAAkB,GAGzCwB,EAAoBF,GACvBC,EAAa,IAAO,KAAQ,KAAK,IAAI,KAAK,IAAA,EAAQ,IAAOX,EAAM,GAAG,WAAW,CAAC,CAAC,EAAI,EAGhFa,EAA0C,CAC9Cb,EAAM,cAAc,CAAC,EAAIY,EACzBZ,EAAM,cAAc,CAAC,EACrBA,EAAM,cAAc,CAAC,EAAIY,CAAA,EAG3B,cACG,QAAA,CAEE,SAAA,CAAAtD,EAAAA,KAAC,OAAA,CACC,SAAUuD,EACV,QAAS,IAAMZ,EAAiBD,CAAK,EACrC,WAAU,GACV,cAAa,GAEb,SAAA,CAAAz2C,EAAAA,IAAC,eAAY,KAAM,CAAC,EAAG,GAAK,CAAC,EAAG,EACdA,EAAAA,IAAC,uBAAA,CAChB,MAAOo3C,EAAa,SAAWJ,EAC/B,UAAW,GACX,UAAW,GAEX,SAAUI,EAAa,SAAYH,GAAa,EAEhD,kBAAmBC,EAAa,GAAOE,EAAa,GAAM,CAAA,CAAA,CAC5D,CAAA,CAAA,EAIHrD,EAAAA,KAAC,OAAA,CAAK,SAAUuD,EACd,SAAA,CAAAt3C,EAAAA,IAAC,eAAY,KAAM,CAAC,KAAM,IAAM,IAAI,EAAG,EACvCA,EAAAA,IAAC,uBAAA,CACC,MAAO,SACP,YAAW,GACX,QAAS,GACT,UAAW,EAAA,CAAA,CACb,EACF,SAGA,OAAA,CAAK,SAAU,CAACy2C,EAAM,cAAc,CAAC,EAAGA,EAAM,cAAc,CAAC,EAAI,GAAKA,EAAM,cAAc,CAAC,CAAC,EAC3F,SAAA,CAAAz2C,EAAAA,IAAC,eAAY,KAAM,CAAC,GAAK,IAAM,EAAG,EAAG,EACpBA,EAAAA,IAAC,uBAAA,CACf,MAAM,UACN,YAAW,GACX,QAAS,GAET,SAAU,SAEV,kBAAmB,EAAA,CAAA,CACrB,EACH,EAGCk3C,GACCnD,EAAAA,KAAC,OAAA,CAAK,SAAU0C,EAAM,cACpB,SAAA,CAAAz2C,EAAAA,IAAC,eAAY,KAAM,CAAC,IAAK,IAAM,GAAG,EAAG,EACrCA,EAAAA,IAAC,uBAAA,CACC,MAAO,QACP,YAAW,GACX,QAAS,GACT,UAAW,EAAA,CAAA,CACb,CAAA,CACF,CAAA,CAAA,EAvDQy2C,EAAM,EAyDlB,CAEJ,CAAC,EAGAz2C,EAAAA,IAACu3C,GAAA,CACC,UAAW,CAACtC,EACZ,WAAY,GACZ,aAAc,GACd,YAAaA,EAAgB,EAAI,EACjC,YAAaA,EAAgB,GAAK,GAClC,cAAe,KAAK,GAAK,GACzB,OAAQ,CAAC,EAAG,EAAG,IAAK,EACpB,cAAe,IACf,cAAe,EAAA,CAAA,CACjB,CAAA,CAAA,EAMDiB,GACCl2C,EAAAA,IAAC,MAAA,CAAI,UAAW,0HACdo2C,IAAuB,WAAa,cAAgB,aACtD,GACE,SAAArC,EAAAA,KAAC,OAAI,UAAW,+GACdqC,IAAuB,WACnB,sCACA,2CACN,GAEE,SAAA,CAAAp2C,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM,CACb,QAAQ,IAAI,sCAAsC,EAClDm2C,EAAwB,EAAK,EACzBG,GACF,aAAaA,CAAY,CAE7B,EACA,UAAU,oKACX,SAAA,GAAA,CAAA,QAIA,MAAA,CAAI,UAAU,gBACZ,SAAAF,IAAuB,WAAa,KAAO,KAC9C,QACC,KAAA,CAAG,UAAU,qCACX,SAAAA,IAAuB,WAAa,sBAAwB,kBAC/D,EACArC,EAAAA,KAAC,KAAE,UAAW,QACZqC,IAAuB,WAAa,eAAiB,iBACvD,GAAI,SAAA,CAAA,cACUP,EAAU,eAAe,OAAKO,IAAuB,WAAa,6CAA+C,aAAA,EAC/H,QACC,IAAA,CAAE,UAAU,wBACV,SAAAA,IAAuB,WAAa,2CAA6C,yCACpF,EACAp2C,EAAAA,IAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,+CAAA,CAE1C,CAAA,CAAA,CACF,CAAA,CACF,EAID61C,EAAU,YAAc,aACvB71C,EAAAA,IAAC,MAAA,CAAI,UAAU,sFACb,SAAA+zC,EAAAA,KAAC,MAAA,CAAI,UAAU,2EACb,SAAA,CAAA/zC,EAAAA,IAAC,MAAA,CAAI,UAAU,gBAAgB,SAAA,KAAE,EACjCA,EAAAA,IAAC,KAAA,CAAG,UAAU,qCAAqC,SAAA,cAAW,EAC9D+zC,EAAAA,KAAC,IAAA,CAAE,UAAU,oBAAoB,SAAA,CAAA,2CACS/zC,EAAAA,IAAC,OAAA,CAAK,UAAU,qCAAsC,WAAU,YAAA,CAAa,CAAA,EACvH,EACA+zC,EAAAA,KAAC,IAAA,CAAE,UAAU,qBAAqB,SAAA,CAAA,qBACb8B,EAAU,kBAAkB,KAAA,EACjD,EACc71C,EAAAA,IAAC,IAAA,CAAE,UAAU,8BAA8B,SAAA,qFAExD,EACD+zC,EAAAA,KAAC,MAAA,CAAI,UAAU,YACG,SAAA,CAAA/zC,EAAAA,IAAC,SAAA,CACd,QAAS+1C,IAAkB,IAAM,OAAO,SAAS,OAAA,GACjD,UAAU,qGACX,SAAA,0BAAA,CAAA,EAGF/1C,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM,OAAO,SAAS,KAAO,IACtC,UAAU,uGACX,SAAA,iBAAA,CAAA,CAED,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,EAGF61C,EAAU,YAAc,aACvB71C,EAAAA,IAAC,MAAA,CAAI,UAAU,sFACb,SAAA+zC,EAAAA,KAAC,MAAA,CAAI,UAAU,+EACb,SAAA,CAAA/zC,EAAAA,IAAC,MAAA,CAAI,UAAU,gBAAgB,SAAA,KAAE,EACjCA,EAAAA,IAAC,KAAA,CAAG,UAAU,qCAAqC,SAAA,kBAAe,EACrDA,EAAAA,IAAC,IAAA,CAAE,UAAU,sBAAsB,SAAA,mEAE/C,EACD+zC,EAAAA,KAAC,IAAA,CAAE,UAAU,qBAAqB,SAAA,CAAA,qBACb8B,EAAU,aAAa,SAAA,EAC5C,EACA71C,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM,OAAO,SAAS,OAAA,EAC/B,UAAU,kGACX,SAAA,YAAA,CAAA,CAED,CAAA,CACF,CAAA,CACF,EAIDA,EAAAA,IAAC,MAAA,CAAI,UAAW,iBACdi1C,EAAgB,kBAChBN,EAAW,kBACX,iBACF,GACE,SAAA30C,EAAAA,IAAC,MAAA,CAAI,UAAW,qEACdi1C,EAAgB,MAAQ,KAC1B,GACE,SAAAlB,EAAAA,KAAC,MAAA,CAAI,UAAW,kCAGd,SAAA,CAAA/zC,EAAAA,IAAC,OAAI,UAAW,wCAEZ,SAAA,cAAA,CAAY,EAChBA,EAAAA,IAAC,OAAI,SAAA,wCAAA,CAAsC,EAC3CA,EAAAA,IAAC,OAAI,SAAA,oDAAA,CAAkD,EACtD,CAACi1C,GACAlB,EAAAA,KAAAyD,EAAAA,SAAA,CACE,SAAA,CAAAx3C,EAAAA,IAAC,OAAI,SAAA,kCAAA,CAAgC,EACrCA,EAAAA,IAAC,OAAI,SAAA,yCAAA,CAAuC,CAAA,CAAA,CAC9C,CAAA,CAAA,CAEJ,EACF,EACF,EAGC61C,EAAU,gBAAkB,IAC3B71C,EAAAA,IAAC,MAAA,CAAI,UAAW,iBACdi1C,EAAgB,eAChBN,EAAW,eACX,cACF,GACE,SAAA30C,EAAAA,IAAC,MAAA,CAAI,UAAW,kDACd61C,EAAU,gBAAkB,GAAK,iBAAmB,mBACtD,IAAIZ,EAAgB,MAAQ,KAAK,GAC/B,SAAAlB,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAW,aACd8B,EAAU,gBAAkB,GAAK,eAAiB,iBACpD,IAAIZ,EAAgB,YAAc,SAAS,GACxC,SAAA,CAAAY,EAAU,gBAAkB,GAAK,KAAO,KAAK,IAAEA,EAAU,eAAe,GAAA,EAC3E,EACA71C,EAAAA,IAAC,MAAA,CAAI,UAAW,6BAGb,SAAA61C,EAAU,gBAAkB,GAAK,YAAc,YAClD,EACA71C,EAAAA,IAAC,MAAA,CAAI,UAAU,2CACb,SAAAA,EAAAA,IAAC,MAAA,CACC,UAAW,gDACT61C,EAAU,gBAAkB,GAAK,aAAe,eAClD,GACA,MAAO,CAAE,MAAO,GAAGA,EAAU,cAAc,GAAA,CAAI,CAAA,CACjD,CACF,CAAA,CAAA,CACF,EACF,CAAA,CACF,CAAA,EAEL,CAEJ,ECvdM4B,GAA4C,CAAC,CACjD,QAAAC,EACA,OAAA/D,EACA,QAAAC,EACA,aAAA+D,EACA,SAAAC,EAEA,QAAAC,CACF,IAAM,CACJ,KAAM,CAACC,EAAgBC,CAAiB,EAAI9G,EAAAA,SAAwB,IAAI,EAClE,CAAC+G,EAAeC,CAAgB,EAAIhH,EAAAA,SAAS,EAAK,EAClD,CAACiH,EAAWC,CAAY,EAAIlH,EAAAA,SAAyB,IAAI,EACzD,CAACmH,EAAiBC,CAAkB,EAAIpH,EAAAA,SAAS,EAAK,EAE5D9gD,GAAM,UAAU,IAAM,CAChBwjD,IACFoE,EAAkB,IAAI,EACtBE,EAAiB,EAAK,EACtBE,EAAa,IAAI,EACjBE,EAAmB,EAAK,EAE5B,EAAG,CAAC1E,EAAQ+D,CAAO,CAAC,EAEpB,MAAMY,EAAqB,SAAY,CACrC,GAAIZ,GAAA,MAAAA,EAAS,UAAYI,IAAmB,MAAQD,GAAWF,EAAc,CAC3EM,EAAiB,EAAI,EACrB,GAAI,CACF,MAAMN,EAAaE,EAASC,CAAc,EAE1C,MAAMS,EAAkBT,IAAmBJ,EAAQ,SAAS,aAC5DS,EAAaI,CAAe,CAC9B,OAAS71D,EAAO,CACd,QAAQ,MAAM,gCAAiCA,CAAK,EACpDy1D,EAAa,EAAK,CACpB,CACF,CACF,EAEMK,EAAmB,IAAM,CAC7B5E,EAAA,CACF,EAEA,GAAI,CAACD,GAAU,CAAC+D,EAAS,OAAO,KAEhC,MAAMe,EAAaf,EAAQ,OAAS,WAC9BgB,EAAkBhB,EAAQ,SAEhC,OACE13C,EAAAA,IAACuyC,IACE,SAAAoB,GACC3zC,EAAAA,IAAC4wC,EAAO,IAAP,CACC,QAAS,CAAE,QAAS,CAAA,EACpB,QAAS,CAAE,QAAS,CAAA,EACpB,KAAM,CAAE,QAAS,CAAA,EACjB,UAAU,uFAEV,SAAAmD,EAAAA,KAACnD,EAAO,IAAP,CACC,QAAS,CAAE,MAAO,GAAK,QAAS,CAAA,EAChC,QAAS,CAAE,MAAO,EAAG,QAAS,CAAA,EAC9B,KAAM,CAAE,MAAO,GAAK,QAAS,CAAA,EAC7B,UAAU,+DAGV,SAAA,CAAAmD,EAAAA,KAAC,MAAA,CAAI,UAAU,iEACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACZ,SAAA,CAAA0E,EACCz4C,EAAAA,IAACmG,IAAS,UAAU,yBAAA,CAA0B,EAE9CnG,EAAAA,IAAC0G,GAAA,CAAU,UAAU,wBAAA,CAAyB,EAEhD1G,EAAAA,IAAC,KAAA,CAAG,UAAU,gCAAiC,WAAQ,KAAA,CAAM,CAAA,EAC/D,EACAA,EAAAA,IAAC,SAAA,CACC,QAASw4C,EACT,UAAU,qDAEV,SAAAx4C,EAAAA,IAAC0B,GAAA,CAAE,UAAU,uBAAA,CAAwB,CAAA,CAAA,CACvC,EACF,EAGAqyC,EAAAA,KAAC,MAAA,CAAI,UAAU,gBAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,gCACb,SAAA,CAAA/zC,MAAC,KAAA,CAAG,UAAU,wCACX,SAAAy4C,EAAa,qBAAuB,cACvC,EACAz4C,EAAAA,IAAC,IAAA,CAAE,UAAU,wCAAyC,WAAQ,OAAA,CAAQ,CAAA,EACxE,EAGA+zC,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAA/zC,MAAC,MAAA,CAAI,UAAU,kEACb,SAAAA,EAAAA,IAAC,QAAK,UAAU,oCACb,SAAA03C,EAAQ,SAAS,QAAQ,IAAK,GAAG,EAAE,cACtC,EACF,EACA13C,EAAAA,IAAC,OAAI,UAAU,sEACb,eAAC,OAAA,CAAK,UAAU,sCACb,SAAA03C,EAAQ,WAAW,OAAO,CAAC,EAAE,cAAgBA,EAAQ,WAAW,MAAM,CAAC,EAC1E,CAAA,CACF,CAAA,EACF,EAGCe,GAAcC,GAAmBd,GAChC7D,EAAAA,KAAC,MAAA,CAAI,UAAU,0CACb,SAAA,CAAAA,EAAAA,KAAC,KAAA,CAAG,UAAU,2DACZ,SAAA,CAAA/zC,EAAAA,IAAC+G,GAAA,CAAO,UAAU,yBAAA,CAA0B,EAAE,gBAAA,EAEhD,EACA/G,EAAAA,IAAC,IAAA,CAAE,UAAU,8BAA+B,WAAgB,SAAS,EACrEA,EAAAA,IAAC,OAAI,UAAU,YACZ,WAAgB,QAAQ,IAAI,CAAC24C,EAAgBx3D,IAC5C6e,EAAAA,IAAC,SAAA,CAEC,QAAS,IAAM,CAACg4C,GAAiBD,EAAkB52D,CAAK,EACxD,UAAW;AAAA,4BACP62D,EACG72D,IAAUu3D,EAAgB,aACzB,kDACCv3D,IAAU22D,EAAiB,4CAA8C,4CAC3EA,IAAmB32D,EAClB,+CACA,qFACN,GACF,SAAU62D,EAET,SAAAW,CAAA,EAbIx3D,CAAA,CAeR,EACH,EACC,CAAC62D,GACAh4C,EAAAA,IAAC,SAAA,CACC,QAASs4C,EACT,SAAUR,IAAmB,KAC7B,UAAU,gDACX,SAAA,eAAA,CAAA,CAED,EAEJ,EAIDE,GAAiBS,GAAcC,GAC9B3E,EAAAA,KAACnD,EAAO,IAAP,CACC,QAAS,CAAE,QAAS,EAAG,EAAG,EAAA,EAC1B,QAAS,CAAE,QAAS,EAAG,EAAG,CAAA,EAC1B,UAAW,4BAA4BsH,EAAY,0CAA4C,qCAAqC,GAEpI,SAAA,CAAAnE,EAAAA,KAAC,KAAA,CAAG,UAAU,gDACX,SAAA,CAAAmE,EACCl4C,EAAAA,IAACqG,IAAY,UAAU,wBAAA,CAAyB,EAEhDrG,EAAAA,IAACiH,GAAA,CAAQ,UAAU,sBAAA,CAAuB,EAE3CixC,EAAY,WAAa,YAAA,EAC5B,EACAl4C,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAiB,WAAgB,YAAY,EAC1DA,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMq4C,EAAmB,CAACD,CAAe,EAClD,UAAU,wCAET,WAAkB,eAAiB,mBAAA,CAAA,CACtC,CAAA,CAAA,EAKH,CAACK,GACA1E,EAAAA,KAAC,MAAA,CAAI,UAAU,yDACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,+BACb,SAAA,CAAA/zC,EAAAA,IAAC8G,GAAA,CAAK,UAAU,wBAAA,CAAyB,EACzC9G,EAAAA,IAAC,OAAA,CAAK,UAAU,+BAA+B,SAAA,iBAAA,CAAe,CAAA,EAChE,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAgB,SAAA,4EAAA,CAE7B,CAAA,CAAA,CACF,CAAA,EAEJ,EAGAA,EAAAA,IAAC,MAAA,CAAI,UAAU,gDACb,SAAAA,EAAAA,IAAC,SAAA,CAAO,QAASw4C,EAAkB,UAAU,sCAAsC,SAAA,OAAA,CAEnF,CAAA,CACF,CAAA,CAAA,CAAA,CACF,CAAA,EAGN,CAEJ,EC7MMI,GAAoC,CAAC,CAAE,OAAAjF,EAAQ,QAAAC,KAC9CD,QAGF,MAAA,CAAI,UAAU,uFACb,SAAAI,EAAAA,KAAC,MAAA,CAAI,UAAU,wEAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,iEACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAA/zC,EAAAA,IAACwG,GAAA,CAAW,UAAU,uBAAA,CAAwB,EAC9CxG,EAAAA,IAAC,KAAA,CAAG,UAAU,gCAAgC,SAAA,oBAAA,CAAkB,CAAA,EAClE,EACAA,EAAAA,IAAC,SAAA,CACC,QAAS4zC,EACT,UAAU,qDAEV,SAAA5zC,EAAAA,IAAC0B,GAAA,CAAE,UAAU,uBAAA,CAAwB,CAAA,CAAA,CACvC,EACF,EAGAqyC,EAAAA,KAAC,MAAA,CAAI,UAAU,gBAEb,SAAA,CAAAA,OAAC,UAAA,CACC,SAAA,CAAAA,EAAAA,KAAC,KAAA,CAAG,UAAU,gEACZ,SAAA,CAAA/zC,EAAAA,IAACmG,GAAA,CAAS,UAAU,wBAAA,CAAyB,EAAE,eAAA,EAEjD,EACA4tC,EAAAA,KAAC,MAAA,CAAI,UAAU,0CACb,SAAA,CAAA/zC,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAgB,SAAA,yNAG7B,EACA+zC,EAAAA,KAAC,KAAA,CAAG,UAAU,+BACZ,SAAA,CAAAA,OAAC,KAAA,CAAG,SAAA,CAAA,KAAE/zC,EAAAA,IAAC,UAAO,SAAA,qBAAA,CAAmB,EAAS,uCAAA,EAAqC,SAC9E,KAAA,CAAG,SAAA,CAAA,KAAEA,EAAAA,IAAC,UAAO,SAAA,WAAA,CAAS,EAAS,qDAAA,EAAmD,SAClF,KAAA,CAAG,SAAA,CAAA,KAAEA,EAAAA,IAAC,UAAO,SAAA,YAAA,CAAU,EAAS,yCAAA,EAAuC,SACvE,KAAA,CAAG,SAAA,CAAA,KAAEA,EAAAA,IAAC,UAAO,SAAA,sBAAA,CAAoB,EAAS,mDAAA,CAAA,CAAiD,CAAA,CAAA,CAC9F,CAAA,CAAA,CACF,CAAA,EACF,SAGC,UAAA,CACC,SAAA,CAAA+zC,EAAAA,KAAC,KAAA,CAAG,UAAU,gEACZ,SAAA,CAAA/zC,EAAAA,IAAC+G,GAAA,CAAO,UAAU,yBAAA,CAA0B,EAAE,iBAAA,EAEhD,EACAgtC,EAAAA,KAAC,MAAA,CAAI,UAAU,0CACb,SAAA,CAAA/zC,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAgB,SAAA,qGAE7B,EACA+zC,EAAAA,KAAC,MAAA,CAAI,UAAU,6CACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAA/zC,EAAAA,IAAC,MAAA,CAAI,UAAU,kCAAA,CAAmC,EAClDA,EAAAA,IAAC,OAAA,CAAK,UAAU,8BAA8B,SAAA,kBAAA,CAAgB,CAAA,EAChE,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,uCAAA,CAAqC,CAAA,EACjF,EACA+zC,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAA/zC,EAAAA,IAAC,MAAA,CAAI,UAAU,mCAAA,CAAoC,EACnDA,EAAAA,IAAC,OAAA,CAAK,UAAU,+BAA+B,SAAA,qBAAA,CAAmB,CAAA,EACpE,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,mCAAA,CAAiC,CAAA,EAC7E,EACA+zC,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAA/zC,EAAAA,IAAC,MAAA,CAAI,UAAU,oCAAA,CAAqC,EACpDA,EAAAA,IAAC,OAAA,CAAK,UAAU,gCAAgC,SAAA,aAAA,CAAW,CAAA,EAC7D,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,8BAAA,CAA4B,CAAA,EACxE,EACA+zC,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAA/zC,EAAAA,IAAC,MAAA,CAAI,UAAU,oCAAA,CAAqC,EACpDA,EAAAA,IAAC,OAAA,CAAK,UAAU,gCAAgC,SAAA,cAAA,CAAY,CAAA,EAC9D,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,oCAAA,CAAkC,CAAA,CAAA,CAC9E,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,SAGC,UAAA,CACC,SAAA,CAAA+zC,EAAAA,KAAC,KAAA,CAAG,UAAU,gEACZ,SAAA,CAAA/zC,EAAAA,IAAC6G,GAAA,CAAO,UAAU,wBAAA,CAAyB,EAAE,aAAA,EAE/C,QACC,MAAA,CAAI,UAAU,0CACb,SAAAktC,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,wEACb,SAAA,CAAA/zC,EAAAA,IAAC,MAAA,CAAI,UAAU,gBAAgB,SAAA,KAAE,EACjCA,EAAAA,IAAC,KAAA,CAAG,UAAU,oCAAoC,SAAA,eAAY,EAC9DA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,8BAAA,CAA4B,CAAA,EACnE,EACA+zC,EAAAA,KAAC,MAAA,CAAI,UAAU,0EACb,SAAA,CAAA/zC,EAAAA,IAAC,MAAA,CAAI,UAAU,gBAAgB,SAAA,KAAE,EACjCA,EAAAA,IAAC,KAAA,CAAG,UAAU,qCAAqC,SAAA,gBAAa,EAChEA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,mCAAA,CAAiC,CAAA,EACxE,EACA+zC,EAAAA,KAAC,MAAA,CAAI,UAAU,oEACb,SAAA,CAAA/zC,EAAAA,IAAC,MAAA,CAAI,UAAU,gBAAgB,SAAA,KAAE,EACjCA,EAAAA,IAAC,KAAA,CAAG,UAAU,kCAAkC,SAAA,aAAU,EAC1DA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,4BAAA,CAA0B,CAAA,CAAA,CACjE,CAAA,CAAA,CACF,CAAA,CACF,CAAA,EACF,SAGC,UAAA,CACC,SAAA,CAAA+zC,EAAAA,KAAC,KAAA,CAAG,UAAU,gEACZ,SAAA,CAAA/zC,EAAAA,IAACoG,GAAA,CAAM,UAAU,uBAAA,CAAwB,EAAE,eAAA,EAE7C,QACC,MAAA,CAAI,UAAU,0CACb,SAAA2tC,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAA/zC,EAAAA,IAAC,KAAA,CAAG,UAAU,mCAAmC,SAAA,uBAAoB,EACrE+zC,EAAAA,KAAC,KAAA,CAAG,UAAU,kCACZ,SAAA,CAAA/zC,EAAAA,IAAC,MAAG,SAAA,kCAAA,CAAgC,EACpCA,EAAAA,IAAC,MAAG,SAAA,mCAAA,CAAiC,EACrCA,EAAAA,IAAC,MAAG,SAAA,kCAAA,CAAgC,EACpCA,EAAAA,IAAC,MAAG,SAAA,qCAAA,CAAmC,CAAA,CAAA,CACzC,CAAA,EACF,SACC,MAAA,CACC,SAAA,CAAAA,EAAAA,IAAC,KAAA,CAAG,UAAU,oCAAoC,SAAA,uBAAoB,EACtE+zC,EAAAA,KAAC,KAAA,CAAG,UAAU,kCACZ,SAAA,CAAA/zC,EAAAA,IAAC,MAAG,SAAA,uCAAA,CAAqC,EACzCA,EAAAA,IAAC,MAAG,SAAA,0CAAA,CAAwC,EAC5CA,EAAAA,IAAC,MAAG,SAAA,mCAAA,CAAiC,EACrCA,EAAAA,IAAC,MAAG,SAAA,yBAAA,CAAuB,CAAA,CAAA,CAC7B,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAAA,EACF,SAGC,UAAA,CACC,SAAA,CAAA+zC,EAAAA,KAAC,KAAA,CAAG,UAAU,gEACZ,SAAA,CAAA/zC,EAAAA,IAAC8G,GAAA,CAAK,UAAU,yBAAA,CAA0B,EAAE,qBAAA,EAE9C,EACAitC,EAAAA,KAAC,MAAA,CAAI,UAAU,0CACb,SAAA,CAAA/zC,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAgB,SAAA,gDAE7B,EACA+zC,EAAAA,KAAC,MAAA,CAAI,UAAU,6CACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAA/zC,EAAAA,IAAC,KAAA,CAAG,UAAU,8BAA8B,SAAA,uBAAoB,EAChE+zC,EAAAA,KAAC,KAAA,CAAG,UAAU,kCACZ,SAAA,CAAA/zC,EAAAA,IAAC,MAAG,SAAA,uBAAA,CAAqB,EACzBA,EAAAA,IAAC,MAAG,SAAA,4BAAA,CAA0B,EAC9BA,EAAAA,IAAC,MAAG,SAAA,+BAAA,CAA6B,CAAA,CAAA,CACnC,CAAA,EACF,EACA+zC,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAA/zC,EAAAA,IAAC,KAAA,CAAG,UAAU,+BAA+B,SAAA,sBAAmB,EAChE+zC,EAAAA,KAAC,KAAA,CAAG,UAAU,kCACZ,SAAA,CAAA/zC,EAAAA,IAAC,MAAG,SAAA,2BAAA,CAAyB,EAC7BA,EAAAA,IAAC,MAAG,SAAA,qBAAA,CAAmB,EACvBA,EAAAA,IAAC,MAAG,SAAA,yBAAA,CAAuB,CAAA,CAAA,CAC7B,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,SAGC,UAAA,CACC,SAAA,CAAA+zC,EAAAA,KAAC,KAAA,CAAG,UAAU,gEACZ,SAAA,CAAA/zC,EAAAA,IAAC+F,GAAA,CAAc,UAAU,yBAAA,CAA0B,EAAE,iBAAA,EAEvD,QACC,MAAA,CAAI,UAAU,0CACb,SAAAguC,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAA/zC,EAAAA,IAAC,MAAA,CAAI,UAAU,sCAAA,CAAuC,SACrD,MAAA,CACC,SAAA,CAAAA,EAAAA,IAAC,KAAA,CAAG,UAAU,6BAA6B,SAAA,sBAAmB,EAC9DA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,sDAAA,CAAoD,CAAA,CAAA,CAC3F,CAAA,EACF,EACA+zC,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAA/zC,EAAAA,IAAC,MAAA,CAAI,UAAU,sCAAA,CAAuC,SACrD,MAAA,CACC,SAAA,CAAAA,EAAAA,IAAC,KAAA,CAAG,UAAU,6BAA6B,SAAA,kBAAe,EAC1DA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,8CAAA,CAA4C,CAAA,CAAA,CACnF,CAAA,EACF,EACA+zC,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAA/zC,EAAAA,IAAC,MAAA,CAAI,UAAU,sCAAA,CAAuC,SACrD,MAAA,CACC,SAAA,CAAAA,EAAAA,IAAC,KAAA,CAAG,UAAU,6BAA6B,SAAA,qBAAkB,EAC7DA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,gDAAA,CAA8C,CAAA,CAAA,CACrF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAAA,EACF,SAGC,UAAA,CACC,SAAA,CAAA+zC,EAAAA,KAAC,KAAA,CAAG,UAAU,gEACZ,SAAA,CAAA/zC,EAAAA,IAACkH,GAAA,CAAI,UAAU,yBAAA,CAA0B,EAAE,eAAA,EAE7C,QACC,MAAA,CAAI,UAAU,0CACb,SAAA6sC,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAA/zC,EAAAA,IAAC,KAAA,CAAG,UAAU,qCAAqC,SAAA,sBAAmB,EACtEA,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,wFAAA,CAEvC,CAAA,EACF,SACC,MAAA,CACC,SAAA,CAAAA,EAAAA,IAAC,KAAA,CAAG,UAAU,mCAAmC,SAAA,oBAAiB,EAClEA,EAAAA,IAAC,MAAA,CAAI,UAAU,yBAAyB,SAAA,0EAAA,CAExC,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAAA,EACF,SAGC,UAAA,CACC,SAAA,CAAA+zC,EAAAA,KAAC,KAAA,CAAG,UAAU,gEACZ,SAAA,CAAA/zC,EAAAA,IAACuG,GAAA,CAAS,UAAU,uBAAA,CAAwB,EAAE,eAAA,EAEhD,QACC,MAAA,CAAI,UAAU,0CACb,SAAAwtC,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAA/zC,EAAAA,IAAC,KAAA,CAAG,UAAU,mCAAmC,SAAA,iBAAc,EAC/D+zC,EAAAA,KAAC,KAAA,CAAG,UAAU,kCACZ,SAAA,CAAAA,OAAC,KAAA,CAAG,SAAA,CAAA,KAAE/zC,EAAAA,IAAC,UAAO,SAAA,QAAA,CAAM,EAAS,kCAAA,EAAgC,SAC5D,KAAA,CAAG,SAAA,CAAA,KAAEA,EAAAA,IAAC,UAAO,SAAA,QAAA,CAAM,EAAS,4BAAA,EAA0B,SACtD,KAAA,CAAG,SAAA,CAAA,KAAEA,EAAAA,IAAC,UAAO,SAAA,SAAA,CAAO,EAAS,2BAAA,CAAA,CAAyB,CAAA,CAAA,CACzD,CAAA,EACF,SACC,MAAA,CACC,SAAA,CAAAA,EAAAA,IAAC,KAAA,CAAG,UAAU,oCAAoC,SAAA,qBAAkB,EACpE+zC,EAAAA,KAAC,KAAA,CAAG,UAAU,kCACZ,SAAA,CAAAA,OAAC,KAAA,CAAG,SAAA,CAAA,KAAE/zC,EAAAA,IAAC,UAAO,SAAA,IAAA,CAAE,EAAS,cAAA,EAAY,SACpC,KAAA,CAAG,SAAA,CAAA,KAAEA,EAAAA,IAAC,UAAO,SAAA,IAAA,CAAE,EAAS,cAAA,EAAY,SACpC,KAAA,CAAG,SAAA,CAAA,KAAEA,EAAAA,IAAC,UAAO,SAAA,MAAA,CAAI,EAAS,eAAA,CAAA,CAAa,CAAA,CAAA,CAC1C,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,QAGC,MAAA,CAAI,UAAU,8CACb,SAAA+zC,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAA/zC,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,6DAErC,EACAA,EAAAA,IAAC,SAAA,CACC,QAAS4zC,EACT,UAAU,qGACX,SAAA,SAAA,CAAA,CAED,CAAA,CACF,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,EAjRkB,KCAhBiF,GAAsC,CAAC,CAAE,OAAAC,EAAQ,WAAAC,EAAY,QAAAnF,KAAc,CAW/E,MAAMoF,EATG,CACL,KAAM,8BACN,KAAMh5C,EAAAA,IAACoG,GAAA,CAAM,UAAU,SAAA,CAAU,EACjC,MAAO,gBACP,QAAS,iBACT,YAAa,oBAAA,EAMjB,OACEpG,EAAAA,IAAC4wC,EAAO,IAAP,CACC,QAAS,CAAE,QAAS,CAAA,EACpB,QAAS,CAAE,QAAS,CAAA,EACpB,KAAM,CAAE,QAAS,CAAA,EACjB,UAAU,uFAEV,SAAAmD,EAAAA,KAACnD,EAAO,IAAP,CACC,QAAS,CAAE,MAAO,GAAK,QAAS,CAAA,EAChC,QAAS,CAAE,MAAO,EAAG,QAAS,CAAA,EAC9B,KAAM,CAAE,MAAO,GAAK,QAAS,CAAA,EAC7B,UAAU,+DAGV,SAAA,CAAAmD,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACZ,SAAA,CAAAiF,EAAS,KACVh5C,EAAAA,IAAC,KAAA,CAAG,UAAU,gCAAgC,SAAA,iBAAA,CAAe,CAAA,EAC/D,EACAA,EAAAA,IAAC,SAAA,CACC,QAAS4zC,EACT,UAAU,mDAEV,SAAA5zC,EAAAA,IAAC0B,GAAA,CAAE,UAAU,SAAA,CAAU,CAAA,CAAA,CACzB,EACF,EAEAqyC,EAAAA,KAAC,MAAA,CAAI,UAAU,wCAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAW,qBAAqBiF,EAAS,OAAO,WAAWA,EAAS,WAAW,GAClF,SAAA,CAAAjF,EAAAA,KAAC,MAAA,CAAI,UAAU,+BACZ,SAAA,CAAAiF,EAAS,KACVh5C,EAAAA,IAAC,KAAA,CAAG,UAAU,mCAAmC,SAAA,WAAA,CAAS,CAAA,EAC5D,EACAA,EAAAA,IAAC,MAAA,CAAI,UAAU,wCAAwC,SAAA,mBAEvD,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAgB,SAAA,YAAA,CAAU,CAAA,EACzC,EAGA+zC,EAAAA,KAAC,MAAA,CAAI,UAAU,6DACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,+BACb,SAAA,CAAA/zC,EAAAA,IAACgH,GAAA,CAAO,UAAU,uBAAA,CAAwB,EAC1ChH,EAAAA,IAAC,KAAA,CAAG,UAAU,mCAAmC,SAAA,eAAA,CAAa,CAAA,EAChE,EACAA,EAAAA,IAAC,MAAA,CAAI,UAAU,wCACZ,WAAO,MACV,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAgB,SAAA,eAAA,CAAa,CAAA,EAC5C,EAGA+zC,EAAAA,KAAC,MAAA,CAAI,UAAU,iEACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,+BACb,SAAA,CAAA/zC,EAAAA,IAACkG,GAAA,CAAU,UAAU,yBAAA,CAA0B,EAC/ClG,EAAAA,IAAC,KAAA,CAAG,UAAU,mCAAmC,SAAA,aAAA,CAAW,CAAA,EAC9D,EACAA,EAAAA,IAAC,MAAA,CAAI,UAAU,0CACZ,WAAO,WACV,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAgB,SAAA,iBAAA,CAAe,CAAA,EAC9C,EAGA+zC,EAAAA,KAAC,MAAA,CAAI,UAAU,2DACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,+BACb,SAAA,CAAA/zC,EAAAA,IAAC6G,GAAA,CAAO,UAAU,sBAAA,CAAuB,EACzC7G,EAAAA,IAAC,KAAA,CAAG,UAAU,mCAAmC,SAAA,gBAAA,CAAc,CAAA,EACjE,EACAA,EAAAA,IAAC,MAAA,CAAI,UAAU,uCACZ,WAAW,mBACd,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAgB,SAAA,0BAAA,CAAwB,CAAA,EACvD,EAGA+zC,EAAAA,KAAC,MAAA,CAAI,UAAU,iEACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,+BACb,SAAA,CAAA/zC,EAAAA,IAACgH,GAAA,CAAO,UAAU,yBAAA,CAA0B,EAC5ChH,EAAAA,IAAC,KAAA,CAAG,UAAU,mCAAmC,SAAA,cAAA,CAAY,CAAA,EAC/D,EACAA,EAAAA,IAAC,MAAA,CAAI,UAAU,0CACZ,WAAW,kBACd,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAgB,SAAA,iBAAA,CAAe,CAAA,EAC9C,EAGA+zC,EAAAA,KAAC,MAAA,CAAI,UAAU,+DACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,+BACb,SAAA,CAAA/zC,EAAAA,IAACkG,GAAA,CAAU,UAAU,wBAAA,CAAyB,EAC9ClG,EAAAA,IAAC,KAAA,CAAG,UAAU,mCAAmC,SAAA,YAAA,CAAU,CAAA,EAC7D,EACA+zC,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACZ,SAAA,CAAA,KAAK,MAAMgF,EAAW,cAAc,EAAE,GAAA,EACzC,EACA/4C,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAgB,SAAA,iBAAA,CAAe,CAAA,CAAA,CAC9C,CAAA,EACF,EAGA+zC,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAAA,EAAAA,KAAC,KAAA,CAAG,UAAU,gEACZ,SAAA,CAAA/zC,EAAAA,IAACoG,GAAA,CAAM,UAAU,uBAAA,CAAwB,EAAE,qBAAA,EAE7C,EACA2tC,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAA/zC,EAAAA,IAAC,MAAA,CAAI,UAAU,uCAAA,CAAwC,EACvDA,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAgB,SAAA,6EAAA,CAA2E,CAAA,EAC1G,EACA+zC,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAA/zC,EAAAA,IAAC,MAAA,CAAI,UAAU,uCAAA,CAAwC,EACvDA,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAgB,SAAA,gDAAA,CAA8C,CAAA,EAC7E,EACA+zC,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAA/zC,EAAAA,IAAC,MAAA,CAAI,UAAU,uCAAA,CAAwC,EACvDA,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAgB,SAAA,4CAAA,CAA0C,CAAA,EACzE,EACA+zC,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAA/zC,EAAAA,IAAC,MAAA,CAAI,UAAU,uCAAA,CAAwC,EACvDA,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAgB,SAAA,qDAAA,CAAmD,CAAA,CAAA,CAClF,CAAA,CAAA,CACF,CAAA,EACF,EAGA+zC,EAAAA,KAAC,MAAA,CAAI,UAAU,uEACb,SAAA,CAAA/zC,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,wDAErC,EACA+zC,EAAAA,KAAC,SAAA,CACC,QAASH,EACT,UAAU,iCAEV,SAAA,CAAA5zC,EAAAA,IAACgH,GAAA,CAAO,UAAU,cAAA,CAAe,EAAE,OAAA,CAAA,CAAA,CAErC,CAAA,CACF,CAAA,CAAA,CAAA,CACF,CAAA,CAGN,ECtIMiyC,GAAgD,CAAC,CACrD,UAAApD,EACA,YAAAqD,EACA,aAAAC,EACA,YAAAC,EACA,QAAAxF,EACA,OAAAD,CACF,IAAM,CACJ,MAAM0F,EAAuBF,EAAa,OAAO/zD,GAAKA,EAAE,UAAU,EAC5Dk0D,EAAoBH,EAAa,OACjCI,EAAkB1D,EAAU,kBAAoBA,EAAU,sBAAyB,IAGnF2D,EAAkB3D,EAAU,cAAc,cAC1C4D,EAAeP,EAAY,OAAS,EACxCA,EAAY,OAAO,CAACQ,EAAKC,IAASD,EAAMC,EAAK,OAAQ,CAAC,EAAIT,EAAY,OAAS,EAG3EU,EAAmB,OAAO,QAAQ/D,EAAU,gBAAgB,EAAE,IAAI,CAAC,CAACgE,EAAUx4B,CAAQ,KAAO,CACjG,SAAAw4B,EACA,SAAAx4B,EACA,YAAa,EAAA,EACb,EAEIy4B,EAAmBD,IACwB,CAC7C,WAAY75C,EAAAA,IAAC6G,GAAA,CAAO,UAAU,SAAA,CAAU,EACxC,YAAa7G,EAAAA,IAACkH,GAAA,CAAI,UAAU,SAAA,CAAU,EACtC,cAAelH,EAAAA,IAAC+G,GAAA,CAAO,UAAU,SAAA,CAAU,EAC3C,eAAgB/G,EAAAA,IAACmG,GAAA,CAAS,UAAU,SAAA,CAAU,EAC9C,UAAanG,EAAAA,IAACkH,GAAA,CAAI,UAAU,SAAA,CAAU,EACtC,WAAclH,EAAAA,IAACiG,GAAA,CAAM,UAAU,SAAA,CAAU,EACzC,iBAAkBjG,EAAAA,IAAC8G,GAAA,CAAK,UAAU,SAAA,CAAU,CAAA,GAEjC+yC,CAAQ,GAAK75C,EAAAA,IAACmG,GAAA,CAAS,UAAU,UAAU,EAGpD4zC,EAAmBF,IACe,CACpC,WAAY,mBACZ,YAAa,sBACb,cAAe,cACf,eAAgB,eAChB,UAAa,oBACb,WAAc,aACd,iBAAkB,gBAAA,GAEPA,CAAQ,GAAKA,EAG5B,OACE75C,EAAAA,IAACuyC,IACE,SAAAoB,GACC3zC,EAAAA,IAAC4wC,EAAO,IAAP,CACC,QAAS,CAAE,QAAS,CAAA,EACpB,QAAS,CAAE,QAAS,CAAA,EACpB,KAAM,CAAE,QAAS,CAAA,EACjB,UAAU,uFAEV,SAAAmD,EAAAA,KAACnD,EAAO,IAAP,CACC,QAAS,CAAE,MAAO,GAAK,QAAS,CAAA,EAChC,QAAS,CAAE,MAAO,EAAG,QAAS,CAAA,EAC9B,KAAM,CAAE,MAAO,GAAK,QAAS,CAAA,EAC7B,UAAU,oJAGV,SAAA,CAAAmD,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAA/zC,EAAAA,IAACgH,GAAA,CAAO,UAAU,yBAAA,CAA0B,SAC3C,MAAA,CACC,SAAA,CAAAhH,EAAAA,IAAC,MAAG,UAAU,gCACX,WAAU,YAAc,YAAc,kBAAoB,cAAA,CAC7D,EACAA,EAAAA,IAAC,KAAE,UAAU,gBACV,WAAU,YAAc,YACrB,wDACA,0BAAA,CACN,CAAA,CAAA,CACF,CAAA,EACF,EACAA,EAAAA,IAAC,SAAA,CACC,QAAS4zC,EACT,UAAU,mDAEV,SAAA5zC,EAAAA,IAAC0B,GAAA,CAAE,UAAU,SAAA,CAAU,CAAA,CAAA,CACzB,EACF,EAEAqyC,EAAAA,KAAC,MAAA,CAAI,UAAU,wCAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,YAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,qEACb,SAAA,CAAAA,EAAAA,KAAC,KAAA,CAAG,UAAU,gEACZ,SAAA,CAAA/zC,EAAAA,IAACkG,GAAA,CAAU,UAAU,SAAA,CAAU,EAAE,qBAAA,EAEnC,EACA6tC,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAA/zC,EAAAA,IAAC,MAAA,CAAI,UAAU,qCAAsC,SAAA61C,EAAU,aAAa,EAC5E71C,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,aAAA,CAAW,CAAA,EACpD,EACA+zC,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAA/zC,EAAAA,IAAC,MAAA,CAAI,UAAU,oCAAqC,SAAA61C,EAAU,eAAe,EAC7E71C,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,iBAAA,CAAe,CAAA,EACxD,EACA+zC,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAA/zC,EAAAA,IAAC,MAAA,CAAI,UAAU,mCAAoC,SAAA61C,EAAU,cAAc,EAC3E71C,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,gBAAA,CAAc,CAAA,EACvD,EACA+zC,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,qCAAsC,SAAA,CAAA,KAAK,MAAMwF,CAAc,EAAE,GAAA,EAAC,EACjFv5C,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,YAAA,CAAU,CAAA,CAAA,CACnD,CAAA,CAAA,CACF,CAAA,EACF,EAGA+zC,EAAAA,KAAC,MAAA,CAAI,UAAU,qEACb,SAAA,CAAAA,EAAAA,KAAC,KAAA,CAAG,UAAU,gEACZ,SAAA,CAAA/zC,EAAAA,IAACmG,GAAA,CAAS,UAAU,SAAA,CAAU,EAAE,mBAAA,EAElC,EACAnG,EAAAA,IAAC,MAAA,CAAI,UAAU,YACZ,WAAiB,IAAI,CAAC,CAAE,SAAA65C,EAAU,SAAAx4B,EAAU,YAAA24B,CAAA,IAC3CjG,EAAAA,KAAC,MAAA,CAAmB,UAAU,oCAC5B,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,gDACZ,SAAA,CAAA+F,EAAgBD,CAAQ,EACzB75C,EAAAA,IAAC,OAAA,CAAM,SAAA+5C,EAAgBF,CAAQ,CAAA,CAAE,CAAA,EACnC,EACA9F,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAA/zC,EAAAA,IAAC,MAAA,CAAI,UAAU,oCACb,SAAAA,EAAAA,IAAC,MAAA,CACC,UAAU,4FACV,MAAO,CAAE,MAAO,GAAIqhB,EAAW24B,EAAe,GAAG,GAAA,CAAI,CAAA,EAEzD,EACAjG,EAAAA,KAAC,OAAA,CAAK,UAAU,uCACb,SAAA,CAAA1yB,EAAS,IAAE24B,CAAA,CAAA,CACd,CAAA,CAAA,CACF,CAAA,CAAA,EAfQH,CAgBV,CACD,CAAA,CACH,CAAA,EACF,EAGA9F,EAAAA,KAAC,MAAA,CAAI,UAAU,qEACb,SAAA,CAAAA,EAAAA,KAAC,KAAA,CAAG,UAAU,gEACZ,SAAA,CAAA/zC,EAAAA,IAACsG,GAAA,CAAM,UAAU,SAAA,CAAU,EAAE,oBAAA,EAE/B,EACAytC,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,uBACb,SAAA,CAAA/zC,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,oBAAiB,EACjD+zC,EAAAA,KAAC,OAAA,CAAK,UAAU,aAAc,SAAA,CAAA,KAAK,MAAMyF,CAAe,EAAE,UAAA,CAAA,CAAQ,CAAA,EACpE,EACAzF,EAAAA,KAAC,MAAA,CAAI,UAAU,uBACb,SAAA,CAAA/zC,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,iBAAc,EAC9C+zC,EAAAA,KAAC,OAAA,CAAK,UAAU,aAAc,SAAA,CAAA,KAAK,MAAM0F,CAAY,EAAE,SAAA,CAAA,CAAO,CAAA,EAChE,EACA1F,EAAAA,KAAC,MAAA,CAAI,UAAU,uBACb,SAAA,CAAA/zC,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,kBAAe,EAC/CA,EAAAA,IAAC,OAAA,CAAK,UAAU,aAAc,WAAU,YAAA,CAAa,CAAA,EACvD,EACA+zC,EAAAA,KAAC,MAAA,CAAI,UAAU,uBACb,SAAA,CAAA/zC,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,mBAAgB,EAChD+zC,EAAAA,KAAC,OAAA,CAAK,UAAU,aAAc,SAAA,CAAA8B,EAAU,eAAe,GAAA,CAAA,CAAC,CAAA,CAAA,CAC1D,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,EAGA9B,EAAAA,KAAC,MAAA,CAAI,UAAU,YAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,qEACb,SAAA,CAAAA,EAAAA,KAAC,KAAA,CAAG,UAAU,gEACZ,SAAA,CAAA/zC,EAAAA,IAACgH,GAAA,CAAO,UAAU,SAAA,CAAU,EAAE,iBACfqyC,EAAqB,OAAO,IAAEC,EAAkB,GAAA,EACjE,QACC,MAAA,CAAI,UAAU,qCACZ,SAAAH,EAAa,IAAKc,GACjBlG,EAAAA,KAACnD,EAAO,IAAP,CAEC,QAAS,CAAE,QAAS,EAAG,EAAG,GAAA,EAC1B,QAAS,CAAE,QAAS,EAAG,EAAG,CAAA,EAC1B,WAAY,CAAE,MAAOqJ,EAAY,WAAa,GAAM,CAAA,EACpD,UAAW,sEACTA,EAAY,WACR,mFACA,0CACN,GAEA,SAAA,CAAAj6C,EAAAA,IAAC,MAAA,CAAI,UAAW,YAAYi6C,EAAY,WAAa,cAAgB,YAAY,GAC9E,SAAAA,EAAY,IAAA,CACf,EACAlG,EAAAA,KAAC,MAAA,CAAI,UAAU,SACb,SAAA,CAAA/zC,EAAAA,IAAC,MAAA,CAAI,UAAW,iBAAiBi6C,EAAY,WAAa,aAAe,eAAe,GACrF,SAAAA,EAAY,IAAA,CACf,EACAj6C,EAAAA,IAAC,MAAA,CAAI,UAAW,WAAWi6C,EAAY,WAAa,gBAAkB,eAAe,GAClF,SAAAA,EAAY,WAAA,CACf,EACCA,EAAY,YACXlG,OAAC,MAAA,CAAI,UAAU,+BAA+B,SAAA,CAAA,IAC1CkG,EAAY,OAAO,SAAA,CAAA,CACvB,CAAA,EAEJ,EACCA,EAAY,YACXj6C,EAAAA,IAACqG,GAAA,CAAY,UAAU,wBAAA,CAAyB,CAAA,CAAA,EA3B7C4zC,EAAY,EAAA,CA8BpB,CAAA,CACH,CAAA,EACF,EAGCpE,EAAU,YAAc,aACvB71C,EAAAA,IAAC4wC,EAAO,IAAP,CACC,QAAS,CAAE,MAAO,GAAK,QAAS,CAAA,EAChC,QAAS,CAAE,MAAO,EAAG,QAAS,CAAA,EAC9B,WAAY,CAAE,MAAO,EAAA,EACrB,UAAU,kGAEV,SAAAmD,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAA/zC,EAAAA,IAAC,MAAA,CAAI,UAAU,gBAAgB,SAAA,KAAE,EACjCA,EAAAA,IAAC,KAAA,CAAG,UAAU,oCAAoC,SAAA,iBAAc,EAChEA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,sIAAA,CAGrC,CAAA,CAAA,CACF,CAAA,CAAA,EAKJ+zC,EAAAA,KAAC,MAAA,CAAI,UAAU,aACb,SAAA,CAAA/zC,EAAAA,IAAC4wC,EAAO,OAAP,CACC,WAAY,CAAE,MAAO,IAAA,EACrB,SAAU,CAAE,MAAO,GAAA,EACnB,QAASwI,EACT,UAAU,wKAET,SAAAvD,EAAU,YAAc,YAAc,aAAe,mBAAA,CAAA,EAExD71C,EAAAA,IAAC4wC,EAAO,OAAP,CACC,WAAY,CAAE,MAAO,IAAA,EACrB,SAAU,CAAE,MAAO,GAAA,EACnB,QAASgD,EACT,UAAU,gGACX,SAAA,OAAA,CAAA,CAED,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CAAA,CACF,CAAA,EAGN,CAEJ,EC5RasG,GAAgD,CAAC,CAC5D,QAAAC,EACA,OAAAC,EACA,WAAAC,CACF,IAAM,CACJ,KAAM,CAAE,cAAApF,CAAA,EAAkBP,GAAA,EAE1B,OACE10C,EAAAA,IAAC,MAAA,CAAI,UAAU,0DACb,SAAA+zC,OAAC,MAAA,CAAI,UAAW,yGACdkB,EAAgB,aAAe,YACjC,GACE,SAAA,CAAAj1C,EAAAA,IAAC4wC,EAAO,OAAP,CACC,WAAY,CAAE,MAAO,GAAA,EACrB,SAAU,CAAE,MAAO,EAAA,EACnB,QAASuJ,EACT,UAAW,2EACTlF,EAAgB,MAAQ,KAC1B,GACA,MAAM,aAEN,SAAAj1C,EAAAA,IAAC4G,GAAA,CAAU,UAAWquC,EAAgB,UAAY,SAAA,CAAW,CAAA,CAAA,EAG/Dj1C,EAAAA,IAAC4wC,EAAO,OAAP,CACC,WAAY,CAAE,MAAO,GAAA,EACrB,SAAU,CAAE,MAAO,EAAA,EACnB,QAASwJ,EACT,UAAW,6EACTnF,EAAgB,MAAQ,KAC1B,GACA,MAAM,YAEN,SAAAj1C,EAAAA,IAACwG,GAAA,CAAW,UAAWyuC,EAAgB,UAAY,SAAA,CAAW,CAAA,CAAA,EAGhEj1C,EAAAA,IAAC4wC,EAAO,OAAP,CACC,WAAY,CAAE,MAAO,GAAA,EACrB,SAAU,CAAE,MAAO,EAAA,EACnB,QAASyJ,EACT,UAAW,+EACTpF,EAAgB,MAAQ,KAC1B,GACA,MAAM,gBAEN,SAAAj1C,EAAAA,IAACoG,GAAA,CAAM,UAAW6uC,EAAgB,UAAY,SAAA,CAAW,CAAA,CAAA,EAG3Dj1C,EAAAA,IAAC4wC,EAAO,OAAP,CACC,WAAY,CAAE,MAAO,GAAA,EACrB,SAAU,CAAE,MAAO,EAAA,EACnB,QAAS,IAAM,OAAO,SAAS,KAAO,IACtC,UAAW,2EACTqE,EAAgB,MAAQ,KAC1B,GACA,MAAM,eAEN,SAAAj1C,EAAAA,IAACyG,GAAA,CAAK,UAAWwuC,EAAgB,UAAY,SAAA,CAAW,CAAA,CAAA,CAC1D,CAAA,CACF,CAAA,CACF,CAEJ,EChEaqF,GAAiD,CAI5D,CACE,GAAI,UACJ,KAAM,kBACN,WAAY,OACZ,SAAU,WACV,SAAU,kFACV,QAAS,CACP,gCACA,0EACA,yCACA,iCAAA,EAEF,aAAc,EACd,YAAa,kLACb,gBAAiB,CAAE,QAAS,GAAI,UAAW,GAAA,EAC3C,OAAQ,CAAE,QAAS,GAAI,UAAW,CAAA,EAClC,aAAc,CAAC,YAAa,qBAAsB,kBAAkB,CAAA,EAItE,CACE,GAAI,UACJ,KAAM,WACN,WAAY,OACZ,SAAU,kBACV,SAAU,2FACV,QAAS,CACP,kCACA,gEACA,iCACA,wBAAA,EAEF,aAAc,EACd,YAAa,mJACb,gBAAiB,CAAE,QAAS,GAAI,UAAW,GAAA,EAC3C,OAAQ,CAAE,QAAS,GAAI,UAAW,CAAA,EAClC,aAAc,CAAC,aAAc,mBAAoB,kBAAkB,CAAA,EAIrE,CACE,GAAI,UACJ,KAAM,kBACN,WAAY,OACZ,SAAU,eACV,SAAU,0DACV,QAAS,CACP,0BACA,oDACA,gCACA,uBAAA,EAEF,aAAc,EACd,YAAa,oJACb,gBAAiB,CAAE,QAAS,GAAI,UAAW,GAAA,EAC3C,OAAQ,CAAE,QAAS,GAAI,UAAW,CAAA,EAClC,aAAc,CAAC,kBAAmB,aAAc,WAAW,CAAA,EAI7D,CACE,GAAI,UACJ,KAAM,aACN,WAAY,OACZ,SAAU,kBACV,SAAU,0FACV,QAAS,CAAC,OAAQ,OAAO,EACzB,aAAc,EACd,YAAa,qKACb,gBAAiB,CAAE,QAAS,GAAI,UAAW,GAAA,EAC3C,OAAQ,CAAE,QAAS,GAAI,UAAW,CAAA,EAClC,aAAc,CAAC,MAAO,qBAAsB,kBAAkB,CAAA,EAIhE,CACE,GAAI,UACJ,KAAM,WACN,WAAY,OACZ,SAAU,mBACV,SAAU,gGACV,QAAS,CACP,cACA,8EACA,sBACA,wBAAA,EAEF,aAAc,EACd,YAAa,wKACb,gBAAiB,CAAE,QAAS,GAAI,UAAW,GAAA,EAC3C,OAAQ,CAAE,QAAS,GAAI,UAAW,CAAA,EAClC,aAAc,CAAC,wBAAyB,MAAO,oBAAoB,CAAA,EAIrE,CACE,GAAI,UACJ,KAAM,kBACN,WAAY,OACZ,SAAU,eACV,SAAU,yEACV,QAAS,CACP,qCACA,iDACA,uBACA,sBAAA,EAEF,aAAc,EACd,YAAa,6KACb,gBAAiB,CAAE,QAAS,GAAI,UAAW,GAAA,EAC3C,OAAQ,CAAE,QAAS,GAAI,UAAW,CAAA,EAClC,aAAc,CAAC,eAAgB,WAAY,YAAY,CAAA,EAIzD,CACE,GAAI,UACJ,KAAM,aACN,WAAY,OACZ,SAAU,cACV,SAAU,uFACV,QAAS,CAAC,OAAQ,OAAO,EACzB,aAAc,EACd,YAAa,6JACb,gBAAiB,CAAE,QAAS,GAAI,UAAW,GAAA,EAC3C,OAAQ,CAAE,QAAS,GAAI,UAAW,CAAA,EAClC,aAAc,CAAC,cAAe,cAAe,gBAAgB,CAAA,EAI/D,CACE,GAAI,UACJ,KAAM,WACN,WAAY,OACZ,SAAU,eACV,SAAU,wEACV,QAAS,CACP,qBACA,4DACA,wBACA,aAAA,EAEF,aAAc,EACd,YAAa,kIACb,gBAAiB,CAAE,QAAS,GAAI,UAAW,GAAA,EAC3C,OAAQ,CAAE,QAAS,GAAI,UAAW,CAAA,EAClC,aAAc,CAAC,oBAAqB,cAAe,iBAAiB,CAAA,EAItE,CACE,GAAI,UACJ,KAAM,kBACN,WAAY,OACZ,SAAU,iBACV,SAAU,oFACV,QAAS,CACP,gCACA,kEACA,gCACA,sBAAA,EAEF,aAAc,EACd,YAAa,0JACb,gBAAiB,CAAE,QAAS,GAAI,UAAW,GAAA,EAC3C,OAAQ,CAAE,QAAS,GAAI,UAAW,CAAA,EAClC,aAAc,CAAC,kBAAmB,mBAAoB,kBAAkB,CAAA,EAI1E,CACE,GAAI,UACJ,KAAM,WACN,WAAY,OACZ,SAAU,uBACV,SAAU,4DACV,QAAS,CACP,mCACA,yEACA,kCACA,kCAAA,EAEF,aAAc,EACd,YAAa,+IACb,gBAAiB,CAAE,QAAS,GAAI,UAAW,GAAA,EAC3C,OAAQ,CAAE,QAAS,GAAI,UAAW,CAAA,EAClC,aAAc,CAAC,mBAAoB,YAAa,oBAAoB,CAAA,EAItE,CACE,GAAI,UACJ,KAAM,aACN,WAAY,OACZ,SAAU,iBACV,SAAU,gGACV,QAAS,CAAC,OAAQ,OAAO,EACzB,aAAc,EACd,YAAa,6IACb,gBAAiB,CAAE,QAAS,GAAI,UAAW,GAAA,EAC3C,OAAQ,CAAE,QAAS,GAAI,UAAW,CAAA,EAClC,aAAc,CAAC,eAAgB,mBAAoB,gBAAgB,CAAA,EAIrE,CACE,GAAI,UACJ,KAAM,kBACN,WAAY,OACZ,SAAU,cACV,SAAU,2CACV,QAAS,CACP,mCACA,4EACA,4BACA,wBAAA,EAEF,aAAc,EACd,YAAa,kJACb,gBAAiB,CAAE,QAAS,GAAI,UAAW,GAAA,EAC3C,OAAQ,CAAE,QAAS,GAAI,UAAW,CAAA,EAClC,aAAc,CAAC,MAAO,mBAAoB,sBAAsB,CAAA,EAIlE,CACE,GAAI,UACJ,KAAM,WACN,WAAY,OACZ,SAAU,eACV,SAAU,+FACV,QAAS,CACP,gCACA,gEACA,iCACA,gCAAA,EAEF,aAAc,EACd,YAAa,gJACb,gBAAiB,CAAE,QAAS,GAAI,UAAW,GAAA,EAC3C,OAAQ,CAAE,QAAS,GAAI,UAAW,CAAA,EAClC,aAAc,CAAC,mBAAoB,iBAAkB,WAAW,CAAA,EAIlE,CACE,GAAI,UACJ,KAAM,aACN,WAAY,OACZ,SAAU,iBACV,SAAU,wGACV,QAAS,CAAC,OAAQ,OAAO,EACzB,aAAc,EACd,YAAa,wJACb,gBAAiB,CAAE,QAAS,GAAI,UAAW,GAAA,EAC3C,OAAQ,CAAE,QAAS,GAAI,UAAW,CAAA,EAClC,aAAc,CAAC,sBAAuB,oBAAqB,cAAc,CAAA,EAI3E,CACE,GAAI,UACJ,KAAM,kBACN,WAAY,OACZ,SAAU,iBACV,SAAU,yFACV,QAAS,CACP,4CACA,4EACA,uBACA,iBAAA,EAEF,aAAc,EACd,YAAa,yIACb,gBAAiB,CAAE,QAAS,GAAI,UAAW,GAAA,EAC3C,OAAQ,CAAE,QAAS,GAAI,UAAW,CAAA,EAClC,aAAc,CAAC,mBAAoB,mBAAoB,mBAAmB,CAAA,EAI5E,CACE,GAAI,UACJ,KAAM,WACN,WAAY,OACZ,SAAU,WACV,SAAU,wFACV,QAAS,CACP,uCACA,iFACA,uBACA,iBAAA,EAEF,aAAc,EACd,YAAa,mIACb,gBAAiB,CAAE,QAAS,GAAI,UAAW,GAAA,EAC3C,OAAQ,CAAE,QAAS,GAAI,UAAW,CAAA,EAClC,aAAc,CAAC,gBAAiB,sBAAuB,kBAAkB,CAAA,EAI3E,CACE,GAAI,UACJ,KAAM,kBACN,WAAY,OACZ,SAAU,WACV,SAAU,0EACV,QAAS,CACP,4BACA,wDACA,iCACA,yBAAA,EAEF,aAAc,EACd,YAAa,qIACb,gBAAiB,CAAE,QAAS,GAAI,UAAW,GAAA,EAC3C,OAAQ,CAAE,QAAS,GAAI,UAAW,CAAA,EAClC,aAAc,CAAC,WAAY,YAAa,gBAAgB,CAAA,EAI1D,CACE,GAAI,UACJ,KAAM,aACN,WAAY,OACZ,SAAU,mBACV,SAAU,wFACV,QAAS,CAAC,OAAQ,OAAO,EACzB,aAAc,EACd,YAAa,oJACb,gBAAiB,CAAE,QAAS,GAAI,UAAW,GAAA,EAC3C,OAAQ,CAAE,QAAS,GAAI,UAAW,CAAA,EAClC,aAAc,CAAC,eAAgB,mBAAoB,qBAAqB,CAAA,EAO1E,CACE,GAAI,aACJ,KAAM,WACN,WAAY,SACZ,SAAU,WACV,SAAU,sEACV,QAAS,CACP,qBACA,mDACA,cACA,uBAAA,EAEF,aAAc,EACd,YAAa,iIACb,gBAAiB,CAAE,QAAS,GAAI,UAAW,GAAA,EAC3C,OAAQ,CAAE,QAAS,GAAI,UAAW,CAAA,EAClC,aAAc,CAAC,kBAAmB,YAAa,SAAS,CAAA,EAI1D,CACE,GAAI,aACJ,KAAM,kBACN,WAAY,SACZ,SAAU,WACV,SAAU,4DACV,QAAS,CACP,qBACA,2EACA,+BACA,sBAAA,EAEF,aAAc,EACd,YAAa,uJACb,gBAAiB,CAAE,QAAS,GAAI,UAAW,GAAA,EAC3C,OAAQ,CAAE,QAAS,GAAI,UAAW,CAAA,EAClC,aAAc,CAAC,wBAAyB,iBAAkB,kBAAkB,CAAA,EAI9E,CACE,GAAI,aACJ,KAAM,aACN,WAAY,SACZ,SAAU,WACV,SAAU,oFACV,QAAS,CAAC,OAAQ,OAAO,EACzB,aAAc,EACd,YAAa,sJACb,gBAAiB,CAAE,QAAS,GAAI,UAAW,GAAA,EAC3C,OAAQ,CAAE,QAAS,GAAI,UAAW,CAAA,EAClC,aAAc,CAAC,cAAe,kBAAmB,iBAAiB,CAAA,EAIpE,CACE,GAAI,aACJ,KAAM,WACN,WAAY,SACZ,SAAU,WACV,SAAU,yEACV,QAAS,CACP,cACA,sDACA,sBACA,gBAAA,EAEF,aAAc,EACd,YAAa,gJACb,gBAAiB,CAAE,QAAS,GAAI,UAAW,GAAA,EAC3C,OAAQ,CAAE,QAAS,GAAI,UAAW,CAAA,EAClC,aAAc,CAAC,qBAAsB,iBAAkB,qBAAqB,CAAA,EAI9E,CACE,GAAI,aACJ,KAAM,kBACN,WAAY,SACZ,SAAU,eACV,SAAU,yDACV,QAAS,CACP,qBACA,6EACA,wBACA,oBAAA,EAEF,aAAc,EACd,YAAa,4JACb,gBAAiB,CAAE,QAAS,GAAI,UAAW,GAAA,EAC3C,OAAQ,CAAE,QAAS,GAAI,UAAW,CAAA,EAClC,aAAc,CAAC,6BAA8B,wBAAyB,mBAAmB,CAAA,EAI3F,CACE,GAAI,aACJ,KAAM,aACN,WAAY,SACZ,SAAU,WACV,SAAU,mFACV,QAAS,CAAC,OAAQ,OAAO,EACzB,aAAc,EACd,YAAa,gIACb,gBAAiB,CAAE,QAAS,GAAI,UAAW,GAAA,EAC3C,OAAQ,CAAE,QAAS,GAAI,UAAW,CAAA,EAClC,aAAc,CAAC,gBAAiB,sBAAuB,mBAAmB,CAAA,EAI5E,CACE,GAAI,aACJ,KAAM,WACN,WAAY,SACZ,SAAU,iBACV,SAAU,mFACV,QAAS,CACP,iCACA,6DACA,gCACA,oBAAA,EAEF,aAAc,EACd,YAAa,wIACb,gBAAiB,CAAE,QAAS,GAAI,UAAW,GAAA,EAC3C,OAAQ,CAAE,QAAS,GAAI,UAAW,CAAA,EAClC,aAAc,CAAC,yBAA0B,kBAAmB,cAAc,CAAA,EAI5E,CACE,GAAI,aACJ,KAAM,kBACN,WAAY,SACZ,SAAU,iBACV,SAAU,0DACV,QAAS,CACP,iCACA,6EACA,uBACA,uBAAA,EAEF,aAAc,EACd,YAAa,2HACb,gBAAiB,CAAE,QAAS,GAAI,UAAW,GAAA,EAC3C,OAAQ,CAAE,QAAS,GAAI,UAAW,CAAA,EAClC,aAAc,CAAC,oBAAqB,eAAgB,kBAAkB,CAAA,EAIxE,CACE,GAAI,aACJ,KAAM,aACN,WAAY,SACZ,SAAU,iBACV,SAAU,sFACV,QAAS,CAAC,OAAQ,OAAO,EACzB,aAAc,EACd,YAAa,oIACb,gBAAiB,CAAE,QAAS,GAAI,UAAW,GAAA,EAC3C,OAAQ,CAAE,QAAS,GAAI,UAAW,CAAA,EAClC,aAAc,CAAC,qBAAsB,qBAAsB,qBAAqB,CAAA,EAIlF,CACE,GAAI,aACJ,KAAM,WACN,WAAY,SACZ,SAAU,WACV,SAAU,yDACV,QAAS,CACP,yBACA,oDACA,uBACA,iBAAA,EAEF,aAAc,EACd,YAAa,+HACb,gBAAiB,CAAE,QAAS,GAAI,UAAW,GAAA,EAC3C,OAAQ,CAAE,QAAS,GAAI,UAAW,CAAA,EAClC,aAAc,CAAC,eAAgB,eAAgB,kBAAkB,CAAA,EAInE,CACE,GAAI,aACJ,KAAM,kBACN,WAAY,SACZ,SAAU,WACV,SAAU,kEACV,QAAS,CACP,kBACA,6EACA,cACA,sBAAA,EAEF,aAAc,EACd,YAAa,4JACb,gBAAiB,CAAE,QAAS,GAAI,UAAW,GAAA,EAC3C,OAAQ,CAAE,QAAS,GAAI,UAAW,CAAA,EAClC,aAAc,CAAC,qBAAsB,cAAe,kBAAkB,CAAA,EAIxE,CACE,GAAI,aACJ,KAAM,aACN,WAAY,SACZ,SAAU,YACV,SAAU,uFACV,QAAS,CAAC,OAAQ,OAAO,EACzB,aAAc,EACd,YAAa,kIACb,gBAAiB,CAAE,QAAS,GAAI,UAAW,GAAA,EAC3C,OAAQ,CAAE,QAAS,GAAI,UAAW,CAAA,EAClC,aAAc,CAAC,iBAAkB,mBAAoB,kBAAkB,CAAA,EAIzE,CACE,GAAI,aACJ,KAAM,WACN,WAAY,SACZ,SAAU,mBACV,SAAU,gFACV,QAAS,CACP,8BACA,sDACA,uBACA,kBAAA,EAEF,aAAc,EACd,YAAa,qIACb,gBAAiB,CAAE,QAAS,GAAI,UAAW,GAAA,EAC3C,OAAQ,CAAE,QAAS,GAAI,UAAW,CAAA,EAClC,aAAc,CAAC,oBAAqB,kBAAmB,sBAAsB,CAAA,EAI/E,CACE,GAAI,aACJ,KAAM,kBACN,WAAY,SACZ,SAAU,aACV,SAAU,4DACV,QAAS,CACP,gCACA,wEACA,sBACA,kBAAA,EAEF,aAAc,EACd,YAAa,oIACb,gBAAiB,CAAE,QAAS,GAAI,UAAW,GAAA,EAC3C,OAAQ,CAAE,QAAS,GAAI,UAAW,CAAA,EAClC,aAAc,CAAC,cAAe,iBAAkB,qBAAqB,CAAA,EAIvE,CACE,GAAI,aACJ,KAAM,aACN,WAAY,SACZ,SAAU,WACV,SAAU,wFACV,QAAS,CAAC,OAAQ,OAAO,EACzB,aAAc,EACd,YAAa,0HACb,gBAAiB,CAAE,QAAS,GAAI,UAAW,GAAA,EAC3C,OAAQ,CAAE,QAAS,GAAI,UAAW,CAAA,EAClC,aAAc,CAAC,oBAAqB,2BAA4B,cAAc,CAAA,EAIhF,CACE,GAAI,aACJ,KAAM,WACN,WAAY,SACZ,SAAU,kBACV,SAAU,4DACV,QAAS,CACP,qBACA,wDACA,cACA,sBAAA,EAEF,aAAc,EACd,YAAa,iHACb,gBAAiB,CAAE,QAAS,GAAI,UAAW,GAAA,EAC3C,OAAQ,CAAE,QAAS,GAAI,UAAW,CAAA,EAClC,aAAc,CAAC,iBAAkB,gBAAiB,aAAa,CAAA,EAIjE,CACE,GAAI,aACJ,KAAM,kBACN,WAAY,SACZ,SAAU,eACV,SAAU,2DACV,QAAS,CACP,2BACA,wDACA,uBACA,kBAAA,EAEF,aAAc,EACd,YAAa,kIACb,gBAAiB,CAAE,QAAS,GAAI,UAAW,GAAA,EAC3C,OAAQ,CAAE,QAAS,GAAI,UAAW,CAAA,EAClC,aAAc,CAAC,gBAAiB,eAAgB,oBAAoB,CAAA,EAItE,CACE,GAAI,aACJ,KAAM,aACN,WAAY,SACZ,SAAU,kBACV,SAAU,0FACV,QAAS,CAAC,OAAQ,OAAO,EACzB,aAAc,EACd,YAAa,oIACb,gBAAiB,CAAE,QAAS,GAAI,UAAW,GAAA,EAC3C,OAAQ,CAAE,QAAS,GAAI,UAAW,CAAA,EAClC,aAAc,CAAC,UAAW,mBAAoB,0BAA0B,CAAA,EAO1E,CACE,GAAI,YACJ,KAAM,kBACN,WAAY,OACZ,SAAU,WACV,SAAU,iDACV,QAAS,CACP,gEACA,qCACA,yBACA,uBAAA,EAEF,aAAc,EACd,YAAa,wJACb,gBAAiB,CAAE,QAAS,EAAG,UAAW,GAAA,EAC1C,OAAQ,CAAE,QAAS,GAAI,UAAW,CAAA,EAClC,aAAc,CAAC,iBAAkB,eAAgB,kBAAkB,CAAA,EAIrE,CACE,GAAI,YACJ,KAAM,aACN,WAAY,OACZ,SAAU,WACV,SAAU,6EACV,QAAS,CAAC,OAAQ,OAAO,EACzB,aAAc,EACd,YAAa,sJACb,gBAAiB,CAAE,QAAS,EAAG,UAAW,GAAA,EAC1C,OAAQ,CAAE,QAAS,GAAI,UAAW,CAAA,EAClC,aAAc,CAAC,aAAc,SAAU,uBAAuB,CAAA,EAIhE,CACE,GAAI,YACJ,KAAM,WACN,WAAY,OACZ,SAAU,WACV,SAAU,kEACV,QAAS,CACP,mCACA,iDACA,2BACA,+BAAA,EAEF,aAAc,EACd,YAAa,sJACb,gBAAiB,CAAE,QAAS,EAAG,UAAW,GAAA,EAC1C,OAAQ,CAAE,QAAS,GAAI,UAAW,CAAA,EAClC,aAAc,CAAC,gBAAiB,uBAAwB,qBAAqB,CAAA,EAI/E,CACE,GAAI,YACJ,KAAM,kBACN,WAAY,OACZ,SAAU,cACV,SAAU,qDACV,QAAS,CACP,gCACA,+CACA,sBACA,iBAAA,EAEF,aAAc,EACd,YAAa,2HACb,gBAAiB,CAAE,QAAS,EAAG,UAAW,GAAA,EAC1C,OAAQ,CAAE,QAAS,GAAI,UAAW,CAAA,EAClC,aAAc,CAAC,aAAc,kBAAmB,eAAe,CAAA,EAIjE,CACE,GAAI,YACJ,KAAM,aACN,WAAY,OACZ,SAAU,WACV,SAAU,mFACV,QAAS,CAAC,OAAQ,OAAO,EACzB,aAAc,EACd,YAAa,gKACb,gBAAiB,CAAE,QAAS,EAAG,UAAW,GAAA,EAC1C,OAAQ,CAAE,QAAS,GAAI,UAAW,CAAA,EAClC,aAAc,CAAC,mBAAoB,2BAA4B,aAAa,CAAA,EAI9E,CACE,GAAI,YACJ,KAAM,WACN,WAAY,OACZ,SAAU,kBACV,SAAU,4EACV,QAAS,CACP,oBACA,yCACA,uBACA,iBAAA,EAEF,aAAc,EACd,YAAa,0IACb,gBAAiB,CAAE,QAAS,EAAG,UAAW,GAAA,EAC1C,OAAQ,CAAE,QAAS,GAAI,UAAW,CAAA,EAClC,aAAc,CAAC,sBAAuB,gBAAiB,YAAY,CAAA,EAIrE,CACE,GAAI,YACJ,KAAM,kBACN,WAAY,OACZ,SAAU,iBACV,SAAU,mEACV,QAAS,CACP,gCACA,uEACA,sBACA,iBAAA,EAEF,aAAc,EACd,YAAa,0HACb,gBAAiB,CAAE,QAAS,EAAG,UAAW,GAAA,EAC1C,OAAQ,CAAE,QAAS,GAAI,UAAW,CAAA,EAClC,aAAc,CAAC,oBAAqB,sBAAuB,qBAAqB,CAAA,EAIlF,CACE,GAAI,YACJ,KAAM,aACN,WAAY,OACZ,SAAU,iBACV,SAAU,6FACV,QAAS,CAAC,OAAQ,OAAO,EACzB,aAAc,EACd,YAAa,iGACb,gBAAiB,CAAE,QAAS,EAAG,UAAW,GAAA,EAC1C,OAAQ,CAAE,QAAS,GAAI,UAAW,CAAA,EAClC,aAAc,CAAC,qBAAsB,uBAAwB,oBAAoB,CAAA,EAInF,CACE,GAAI,YACJ,KAAM,WACN,WAAY,OACZ,SAAU,iBACV,SAAU,yDACV,QAAS,CACP,mBACA,sDACA,sBACA,iBAAA,EAEF,aAAc,EACd,YAAa,2IACb,gBAAiB,CAAE,QAAS,EAAG,UAAW,GAAA,EAC1C,OAAQ,CAAE,QAAS,GAAI,UAAW,CAAA,EAClC,aAAc,CAAC,gBAAiB,sBAAuB,qBAAqB,CAAA,EAI9E,CACE,GAAI,YACJ,KAAM,kBACN,WAAY,OACZ,SAAU,kBACV,SAAU,0EACV,QAAS,CACP,oBACA,mDACA,mBACA,aAAA,EAEF,aAAc,EACd,YAAa,yHACb,gBAAiB,CAAE,QAAS,EAAG,UAAW,GAAA,EAC1C,OAAQ,CAAE,QAAS,GAAI,UAAW,CAAA,EAClC,aAAc,CAAC,gBAAiB,aAAc,qBAAqB,CAAA,EAIrE,CACE,GAAI,YACJ,KAAM,aACN,WAAY,OACZ,SAAU,eACV,SAAU,uFACV,QAAS,CAAC,OAAQ,OAAO,EACzB,aAAc,EACd,YAAa,kJACb,gBAAiB,CAAE,QAAS,EAAG,UAAW,GAAA,EAC1C,OAAQ,CAAE,QAAS,GAAI,UAAW,CAAA,EAClC,aAAc,CAAC,oBAAqB,sBAAuB,oBAAoB,CAAA,EAIjF,CACE,GAAI,YACJ,KAAM,WACN,WAAY,OACZ,SAAU,mBACV,SAAU,gEACV,QAAS,CACP,iCACA,4DACA,wBACA,mBAAA,EAEF,aAAc,EACd,YAAa,2FACb,gBAAiB,CAAE,QAAS,EAAG,UAAW,GAAA,EAC1C,OAAQ,CAAE,QAAS,GAAI,UAAW,CAAA,EAClC,aAAc,CAAC,sBAAuB,uBAAwB,cAAc,CAAA,EAI9E,CACE,GAAI,YACJ,KAAM,kBACN,WAAY,OACZ,SAAU,kBACV,SAAU,0FACV,QAAS,CACP,oBACA,sDACA,mBACA,aAAA,EAEF,aAAc,EACd,YAAa,yIACb,gBAAiB,CAAE,QAAS,EAAG,UAAW,GAAA,EAC1C,OAAQ,CAAE,QAAS,GAAI,UAAW,CAAA,EAClC,aAAc,CAAC,eAAgB,oBAAqB,qBAAqB,CAAA,EAI3E,CACE,GAAI,YACJ,KAAM,aACN,WAAY,OACZ,SAAU,WACV,SAAU,qFACV,QAAS,CAAC,OAAQ,OAAO,EACzB,aAAc,EACd,YAAa,8IACb,gBAAiB,CAAE,QAAS,EAAG,UAAW,GAAA,EAC1C,OAAQ,CAAE,QAAS,GAAI,UAAW,CAAA,EAClC,aAAc,CAAC,wBAAyB,uBAAwB,qBAAqB,CAAA,EAIvF,CACE,GAAI,YACJ,KAAM,WACN,WAAY,OACZ,SAAU,iBACV,SAAU,mEACV,QAAS,CACP,4BACA,sDACA,uBACA,iBAAA,EAEF,aAAc,EACd,YAAa,yGACb,gBAAiB,CAAE,QAAS,EAAG,UAAW,GAAA,EAC1C,OAAQ,CAAE,QAAS,GAAI,UAAW,CAAA,EAClC,aAAc,CAAC,sBAAuB,2BAA4B,eAAe,CAAA,EAInF,CACE,GAAI,YACJ,KAAM,kBACN,WAAY,OACZ,SAAU,iBACV,SAAU,wEACV,QAAS,CACP,oBACA,8DACA,sBACA,kBAAA,EAEF,aAAc,EACd,YAAa,6GACb,gBAAiB,CAAE,QAAS,EAAG,UAAW,GAAA,EAC1C,OAAQ,CAAE,QAAS,GAAI,UAAW,CAAA,EAClC,aAAc,CAAC,wBAAyB,sBAAuB,mBAAmB,CAAA,EAIpF,CACE,GAAI,YACJ,KAAM,aACN,WAAY,OACZ,SAAU,iBACV,SAAU,8EACV,QAAS,CAAC,OAAQ,OAAO,EACzB,aAAc,EACd,YAAa,sHACb,gBAAiB,CAAE,QAAS,EAAG,UAAW,GAAA,EAC1C,OAAQ,CAAE,QAAS,GAAI,UAAW,CAAA,EAClC,aAAc,CAAC,eAAgB,uBAAwB,qBAAqB,CAAA,EAI9E,CACE,GAAI,YACJ,KAAM,WACN,WAAY,OACZ,SAAU,iBACV,SAAU,6DACV,QAAS,CACP,iCACA,sDACA,uBACA,wBAAA,EAEF,aAAc,EACd,YAAa,kHACb,gBAAiB,CAAE,QAAS,EAAG,UAAW,GAAA,EAC1C,OAAQ,CAAE,QAAS,GAAI,UAAW,CAAA,EAClC,aAAc,CAAC,uBAAwB,eAAgB,qBAAqB,CAAA,CAEhF,EC19BMC,GAAiC,CACrC,kBAAmB,IACnB,aAAc,IAGd,mBAAoB,CAClB,cAAe,IACf,gBAAiB,CACf,SAAU,CAAC,EAAG,EAAE,EAChB,QAAS,CAAC,GAAI,EAAE,EAChB,OAAQ,CAAC,GAAI,EAAE,EACf,QAAS,CAAC,GAAI,GAAG,CAAA,EAEnB,kBAAmB,CACjB,KAAM,CAAE,QAAS,EAAG,UAAW,EAAA,EAC/B,OAAQ,CAAE,QAAS,EAAG,UAAW,EAAA,EACjC,KAAM,CAAE,QAAS,EAAG,UAAW,GAAA,CAAI,EAErC,mBAAoB,CAClB,QAAS,CAAC,EAAG,EAAG,EAAG,EAAG,CAAC,EACvB,UAAW,CAAC,EAAG,GAAI,GAAI,GAAI,EAAE,CAAA,CAC/B,EAIF,mBAAoB,CAClB,YAAa,CACX,gBAAiB,EACjB,iBAAkB,CAChB,WAAY,EACZ,YAAa,EACb,cAAe,EACf,eAAgB,EAChB,UAAa,EACb,WAAc,EACd,iBAAkB,EAClB,kBAAmB,EACnB,mBAAoB,EACpB,cAAe,EACf,iBAAkB,EAClB,uBAAwB,EACxB,cAAe,EACf,SAAY,EACZ,mBAAoB,CAAA,EAEtB,sBAAuB,CACrB,KAAM,EACN,OAAQ,EACR,KAAM,CAAA,CACR,EAEF,kBAAmB,CACjB,kBAAmB,WACnB,sBAAuB,WACvB,iBAAkB,SAAA,CACpB,EAIF,oBAAqB,CACnB,sBAAuB,GACvB,kBAAmB,GACnB,qBAAsB,GACtB,yBAA0B,GAC1B,wBAAyB,EAAA,EAI3B,iBAAkB,CAChB,iBAAkB,GAClB,iBAAkB,GAClB,aAAc,GACd,oBAAqB,EACrB,sBAAuB,EAAA,CAE3B,EAGMC,GAAiE,CACrE,CACE,GAAI,gBACJ,KAAM,gBACN,YAAa,8CACb,KAAM,KACN,SAAU,WACV,OAAQ,IACR,UAAW,CACT,KAAM,gBACN,MAAOD,GAAiB,oBAAoB,sBAC5C,YAAa,4CAAA,CACf,EAEF,CACE,GAAI,WACJ,KAAM,WACN,YAAa,0CACb,KAAM,KACN,SAAU,WACV,OAAQ,GACR,UAAW,CACT,KAAM,WACN,MAAOA,GAAiB,oBAAoB,kBAC5C,YAAa,+CAAA,CACf,EAEF,CACE,GAAI,cACJ,KAAM,cACN,YAAa,qCACb,KAAM,KACN,SAAU,WACV,OAAQ,IACR,UAAW,CACT,KAAM,cACN,MAAO,GACP,YAAa,wCAAA,CACf,EAEF,CACE,GAAI,eACJ,KAAM,eACN,YAAa,uCACb,KAAM,IACN,SAAU,WACV,OAAQ,GACR,UAAW,CACT,KAAM,eACN,MAAOA,GAAiB,oBAAoB,qBAC5C,YAAa,0BAAA,CACf,EAEF,CACE,GAAI,qBACJ,KAAM,qBACN,YAAa,6CACb,KAAM,KACN,SAAU,UACV,OAAQ,IACR,UAAW,CACT,KAAM,sBACN,MAAO,EACP,YAAa,uCAAA,CACf,EAEF,CACE,GAAI,mBACJ,KAAM,mBACN,YAAa,6CACb,KAAM,MACN,SAAU,UACV,OAAQ,IACR,UAAW,CACT,KAAM,mBACN,MAAOA,GAAiB,oBAAoB,yBAC5C,YAAa,gCAAA,CACf,EAEF,CACE,GAAI,oBACJ,KAAM,oBACN,YAAa,kCACb,KAAM,MACN,SAAU,WACV,OAAQ,IACR,UAAW,CACT,KAAM,iBACN,MAAO,EACP,YAAa,qCAAA,CACf,EAEF,CACE,GAAI,kBACJ,KAAM,kBACN,YAAa,uCACb,KAAM,KACN,SAAU,WACV,OAAQ,IACR,UAAW,CACT,KAAM,kBACN,MAAOA,GAAiB,oBAAoB,wBAC5C,YAAa,2CAAA,CACf,CAEJ,EAGA,MAAME,EAAqD,CAKzD,aAAc,CAJPC,GAAA,wBAAgC,KAChCA,GAAA,wBAAmC,CAAA,GACnCA,GAAA,oBAAmC,CAAA,GAGxC,KAAK,uBAAA,CACP,CAEQ,wBAA+B,CAErC,KAAK,aAAeJ,GACpB,KAAK,iBAAmB,KAAK,aAAa,OAAS,KAAK,mBAAmBl5C,CAAC,CAAC,CAC/E,CAEQ,mBAAmBu5C,EAA0C,CACnE,MAAO,CACL,GAAIA,EAAS,GACb,KAAM,WACN,WAAYA,EAAS,WACrB,SAAUA,EAAS,SACnB,MAAO,aAAaA,EAAS,SAAS,UAAU,EAAG,EAAE,CAAC,MACtD,QAASA,EAAS,YAClB,SAAAA,CAAA,CAEJ,CAEA,iBAAiBC,EAAyBf,EAA4C,CACpF,OAAO,KAAK,iBAAiB,OAAOnC,GAAW,CAC7C,MAAMmD,EAAW,CAAC,KAAK,aAAa,IAAInD,EAAQ,EAAE,EAC5CoD,EAAoB,CAACF,GAAclD,EAAQ,aAAekD,EAC1DG,EAAkB,CAAClB,GAAYnC,EAAQ,WAAamC,EAC1D,OAAOgB,GAAYC,GAAqBC,CAC1C,CAAC,CACH,CAEA,YAAYC,EAAyB,CACnC,KAAK,aAAa,IAAIA,CAAS,CACjC,CAEA,mBAA6B,CAC3B,OAAO,KAAK,aAAa,MAAQ,KAAK,iBAAiB,MACzD,CAEA,yBAAkC,CAChC,OAAQ,KAAK,aAAa,KAAO,KAAK,iBAAiB,OAAU,GACnE,CAEA,uBAA6C,CAE3C,MAAMC,EAAgB,KAAK,iBAAA,EAC3B,OAAIA,EAAc,SAAW,EAAU,KAGhCA,EAAc,KAAK,MAAM,KAAK,SAAWA,EAAc,MAAM,CAAC,CACvE,CAEA,wBAAwBL,EAAwC,CAC9D,OAAO,KAAK,iBAAiB,OAAOlD,GAAWA,EAAQ,aAAekD,CAAU,CAClF,CAEA,sBAAsBf,EAA2C,CAC/D,OAAO,KAAK,iBAAiB,OAAOnC,GAAWA,EAAQ,WAAamC,CAAQ,CAC9E,CACF,CAEA,MAAMqB,EAAoB,CAQxB,aAAc,CAPNR,GAAA,kBACAA,GAAA,iBACAA,GAAA,cAAkB,CAAA,GAClBA,GAAA,uBACAA,GAAA,yBACAA,GAAA,uBAGN,KAAK,SAAWH,GAChB,KAAK,eAAiB,IAAIE,GAC1B,KAAK,qBAAuB,KAC5B,KAAK,UAAY,KAAK,uBAAA,CACxB,CAGA,gBAA4B,CAC1B,YAAK,OAAS,KAAK,YAAA,EACnB,KAAK,UAAY,KAAK,uBAAA,EACtB,KAAK,UAAU,YAAc,KAAK,OAAO,OACzC,KAAK,UAAU,sBAAwB,KAAK,eAAe,iBAAiB,OAC5E,KAAK,qBAAuB,KACrB,KAAK,SACd,CAGA,cAA0B,CACxB,OAAO,KAAK,SACd,CAGA,WAAqB,CACnB,OAAO,KAAK,MACd,CAGA,iBAAiB5C,EAAsC,CACrD,MAAMpB,EAAQ,KAAK,OAAO,KAAKpxD,GAAKA,EAAE,KAAOwyD,CAAO,EACpD,MAAI,CAACpB,GAASA,EAAM,UACX,MAIT,KAAK,eAAe,YAAYA,EAAM,QAAQ,EAAE,EAChD,KAAK,UAAU,aAAa,IAAIA,EAAM,QAAQ,EAAE,EAChD,KAAK,UAAU,kBAAoB,KAAK,UAAU,aAAa,KAG/D,KAAK,UAAU,gBAAkBoB,EACjCpB,EAAM,aAAe,GAGrB,KAAK,eAAe,gBAAiB,UAAW,EAAG,EAAGA,EAAM,OAAO,EAEnE,QAAQ,IAAI,qBAAqBA,EAAM,QAAQ,KAAK,KAAKA,EAAM,QAAQ,QAAQ,GAAG,EAClF,QAAQ,IAAI,2BAA2B,KAAK,UAAU,iBAAiB,IAAI,KAAK,UAAU,qBAAqB,EAAE,EAE1GA,EAAM,QACf,CAGA,iBAAiBoB,EAAiBC,EAAoC,CACpE,MAAMrB,EAAQ,KAAK,OAAO,KAAKpxD,GAAKA,EAAE,KAAOwyD,CAAO,EACpD,GAAI,CAACpB,GAAS,CAACA,EAAM,QAAQ,SAC3B,MAAM,IAAI,MAAM,oCAAoC,EAGtD,MAAMkE,EAAWlE,EAAM,QAAQ,SACzByB,EAAYJ,IAAmB6C,EAAS,aAE9C,QAAQ,IAAI,mBAAmB7C,CAAc,cAAc6C,EAAS,YAAY,gBAAgBzC,CAAS,EAAE,EAG3G,MAAMiD,EAAkB,KAAK,yBAAyBR,EAAUzC,CAAS,EACnEkD,EAAelD,EAAYyC,EAAS,OAAO,QAAUA,EAAS,OAAO,UAGrEU,EAAe,KAAK,gBACvB,KAAK,MAAQ,KAAK,eAAe,QAAA,GAAa,IAAO,OAGxD,KAAK,yBAAyBnD,EAAWyC,CAAQ,EAG7CzC,GACF,KAAK,UAAU,iBACf,KAAK,UAAU,cAAgBkD,EAC/B,KAAK,UAAU,qBACf,KAAK,UAAU,qBAAuB,IAEtC,KAAK,UAAU,mBACf,KAAK,UAAU,uBACf,KAAK,UAAU,mBAAqB,GAItC3E,EAAM,UAAY,GAClB,KAAK,UAAU,gBAGf,KAAK,UAAU,cAAc,qBACzByB,EACF,KAAK,UAAU,cAAc,sBAE7B,KAAK,UAAU,cAAc,wBAI/B,MAAMoD,EAAe,KAAK,UAAU,eACpC,KAAK,UAAU,eAAiB,KAAK,IAAI,EACvC,KAAK,IAAI,IAAK,KAAK,UAAU,eAAiBH,CAAe,CAAA,EAG/D,QAAQ,IAAI,wBAAwBG,CAAY,OAAO,KAAK,UAAU,cAAc,cAAcH,CAAe,GAAG,EAGhH,KAAK,UAAU,gBAAkB,IACnC,KAAK,UAAU,UAAY,YAC3B,KAAK,UAAU,eAAiB,GAChC,QAAQ,IAAI,qBAAqB,GAInC,MAAMI,EAAyB,CAC7B,QAAA1D,EACA,SAAU8C,EAAS,SACnB,eAAA7C,EACA,cAAe6C,EAAS,aACxB,UAAAzC,EACA,YAAayC,EAAS,YACtB,aAAAS,EACA,gBAAAD,EACA,aAAAE,EACA,WAAYV,EAAS,WACrB,SAAUA,EAAS,SACnB,aAAcA,EAAS,aACvB,eAAgB,CACd,gBAAiBzC,EAAY,EAAI,GACjC,mBAAoBA,EAAY,GAAM,IACtC,qBAAsBA,EAAY,GAAM,GAAA,CAC1C,EAGF,YAAK,UAAU,eAAiBqD,EAGhC,KAAK,eAAe,oBAAqBrD,EAAY,UAAY,UAAWkD,EAAcD,EAAiB1E,EAAM,OAAO,EAGxH,KAAK,qBAAqB8E,CAAU,EAGpC,KAAK,kBAAA,EAEL,QAAQ,IAAI,mBAAmBrD,EAAY,YAAc,aAAa,gBAAgBiD,CAAe,aAAaC,CAAY,EAAE,EAEzHG,CACT,CAGQ,yBAAyBZ,EAA4BzC,EAA4B,CAEvF,MAAMsD,EAAatD,EACjByC,EAAS,gBAAgB,QACzBA,EAAS,gBAAgB,UAGrBc,EAAmBvD,EACvB,KAAK,SAAS,mBAAmB,mBAAmB,QACpD,KAAK,SAAS,mBAAmB,mBAAmB,UAEhDwD,EAAmB,KAAK,IAC5BxD,EAAY,KAAK,UAAU,mBAAqB,KAAK,UAAU,qBAC/DuD,EAAiB,OAAS,CAAA,EAEtBE,EAAmBF,EAAiBC,CAAgB,EAGpDE,EAAmB,KAAK,UAAU,eACxC,IAAIC,EAAsB,EAEtBD,GAAoB,GAEtBC,EAAsB3D,EAAY,IAAM,GAC/B0D,GAAoB,GAE7BC,EAAsB3D,EAAY,IAAM,GAC/B0D,GAAoB,KAE7BC,EAAsB3D,EAAY,GAAM,KAG1C,MAAM4D,EAAc,KAAK,MAAMN,GAAc,EAAIG,EAAmB,IAAOE,CAAmB,EAE9F,eAAQ,IAAI,kCAAkCL,CAAU,iBAAiBG,CAAgB,gBAAgBE,CAAmB,WAAWC,CAAW,EAAE,EAE7IA,CACT,CAGQ,yBAAyBC,EAAqBpB,EAAkC,CAEtF,MAAMqB,EAAe,KAAK,UAAU,eAAiB,KAAK,UAAU,iBAChEA,EAAe,IACjB,KAAK,SAAS,mBAAmB,YAAY,gBAC1C,KAAK,UAAU,eAAiBA,EAAgB,KAIrD,MAAMC,EAAmB,KAAK,UAAU,eAAe,gBACpD,OAAO76C,GAAKA,EAAE,WAAau5C,EAAS,QAAQ,EACzCuB,EAAkBD,EAAiB,OAAO76C,GAAKA,EAAE,SAAS,EAAE,OAC9D66C,EAAiB,OAAS,IAC5B,KAAK,SAAS,mBAAmB,YAAY,iBAAiBtB,EAAS,QAAQ,EAC5EuB,EAAkBD,EAAiB,OAAU,KAIlD,MAAME,EAAqB,KAAK,UAAU,eAAe,gBACtD,OAAO/6C,GAAKA,EAAE,aAAeu5C,EAAS,UAAU,EAC7CyB,EAAoBD,EAAmB,OAAO/6C,GAAKA,EAAE,SAAS,EAAE,OAClE+6C,EAAmB,OAAS,IAC9B,KAAK,SAAS,mBAAmB,YAAY,sBAAsBxB,EAAS,UAAU,EACnFyB,EAAoBD,EAAmB,OAAU,KAItD,KAAK,iBAAA,CACP,CAEQ,kBAAyB,CAC/B,MAAME,EAAkB,KAAK,SAAS,mBAAmB,YAAY,gBAC/DC,EAAoB,KAAK,UAAU,kBAErCD,GAAmB,IAAMC,IAAsB,OAE7CA,IAAsB,OACxB,KAAK,UAAU,kBAAoB,SAC1BA,IAAsB,WAC/B,KAAK,UAAU,kBAAoB,QAE5BD,GAAmB,IAAMC,IAAsB,SAEpDA,IAAsB,OACxB,KAAK,UAAU,kBAAoB,SAC1BA,IAAsB,WAC/B,KAAK,UAAU,kBAAoB,QAGzC,CAGQ,qBAAqBf,EAA8B,CACzD,MAAMgB,EAAmC,CACvC,WAAYhB,EAAW,QACvB,UAAWA,EAAW,UACtB,aAAcA,EAAW,cAAgB,EACzC,gBAAiBA,EAAW,gBAC5B,aAAcA,EAAW,aACzB,cAAe,KACf,WAAYA,EAAW,WACvB,SAAUA,EAAW,QAAA,EAGvB,KAAK,UAAU,eAAe,gBAAgB,KAAKgB,CAAe,EAGlE,MAAMN,EAAmB,KAAK,UAAU,eAAe,gBACpD,OAAO76C,GAAKA,EAAE,WAAam6C,EAAW,QAAQ,EAC3CW,EAAkBD,EAAiB,OAAO76C,GAAKA,EAAE,SAAS,EAAE,OAClE,KAAK,UAAU,eAAe,gBAAgBm6C,EAAW,QAAQ,EAC/DU,EAAiB,OAAS,EAAKC,EAAkBD,EAAiB,OAAU,IAAM,EAGpF,MAAME,EAAqB,KAAK,UAAU,eAAe,gBACtD,OAAO/6C,GAAKA,EAAE,aAAem6C,EAAW,UAAU,EAC/Ca,EAAoBD,EAAmB,OAAO/6C,GAAKA,EAAE,SAAS,EAAE,OACtE,KAAK,UAAU,eAAe,sBAAsBm6C,EAAW,UAAU,EACvEY,EAAmB,OAAS,EAAKC,EAAoBD,EAAmB,OAAU,IAAM,EAG1F,KAAK,sBAAA,CACP,CAEQ,uBAA8B,CACpC,MAAMK,EAAgB,KAAK,UAAU,eAAe,gBAAgB,OACpE,GAAIA,IAAkB,EAAG,OAEzB,MAAMC,EAAkB,KAAK,UAAU,eAAe,gBACnD,OAAOr7C,GAAKA,EAAE,SAAS,EAAE,OAG5B,KAAK,UAAU,gBAAgB,WAAcq7C,EAAkBD,EAAiB,IAGhF,MAAME,EAAiB,KAAK,UAAU,eAAe,gBAClD,MAAM,GAAG,EACNC,EAAgBD,EAAe,OAAOt7C,GAAKA,EAAE,SAAS,EAAE,OACxDw7C,EAAiBF,EAAe,OAAS,EAAKC,EAAgBD,EAAe,OAAU,IAAM,EAEnG,KAAK,UAAU,gBAAgB,aAAeE,EAAiB,KAAK,UAAU,gBAAgB,WAG9F,MAAMC,EAAwB,KAAK,UAAU,eAAe,sBACtDC,EAAiB,OAAO,QAAQD,CAAqB,EACxD,OAAO,CAACz3D,EAAGC,IAAMw3D,EAAsBz3D,EAAE,CAAC,CAAe,EAAIy3D,EAAsBx3D,EAAE,CAAC,CAAe,EAAID,EAAIC,CAAC,EAAE,CAAC,EACpH,KAAK,UAAU,gBAAgB,qBAAuBy3D,EAGtD,MAAMC,EAAkB,KAAK,UAAU,eAAe,gBAChDC,EAAY,OAAO,QAAQD,CAAe,EAC7C,OAAO,CAAC,CAACz1D,EAAG21D,CAAO,IAAMA,GAAW,EAAE,EACtC,IAAI,CAAC,CAACpD,EAAUvyD,CAAC,IAAMuyD,CAA2B,EAC/CqD,EAAa,OAAO,QAAQH,CAAe,EAC9C,OAAO,CAAC,CAACz1D,EAAG21D,CAAO,IAAMA,GAAW,EAAE,EACtC,IAAI,CAAC,CAACpD,EAAUvyD,CAAC,IAAMuyD,CAA2B,EAErD,KAAK,UAAU,gBAAgB,kBAAoBmD,EACnD,KAAK,UAAU,gBAAgB,mBAAqBE,CACtD,CAGA,cAA0B,CACxB,GAAI,KAAK,UAAU,YAAc,YAC/B,OAAO,KAAK,UAId,MAAMjC,EAAgB,KAAK,eAAe,iBAAA,EAC1C,OAAIA,EAAc,SAAW,GAC3B,KAAK,UAAU,UAAY,YACpB,KAAK,YAId,KAAK,OAAS,KAAK,YAAA,EACnB,KAAK,UAAU,UAAY,UAC3B,KAAK,UAAU,eAAiB,KAAK,SAAS,kBAC9C,KAAK,UAAU,cAAgB,EAC/B,KAAK,UAAU,YAAc,KAAK,OAAO,OACzC,KAAK,UAAU,eAAiB,GAChC,KAAK,UAAU,eAGf,KAAK,UAAU,mBAAqB,EACpC,KAAK,UAAU,qBAAuB,EAGtC,KAAK,eAAe,gBAAiB,UAAW,EAAG,EAAGA,EAAc,CAAC,CAAC,EAE/D,KAAK,UACd,CAGA,WAAuB,CACrB,YAAK,OAAS,KAAK,YAAA,EACnB,KAAK,UAAY,KAAK,uBAAA,EACtB,KAAK,UAAU,YAAc,KAAK,OAAO,OACzC,KAAK,UAAU,sBAAwB,KAAK,eAAe,iBAAiB,OAC5E,KAAK,qBAAuB,KACrB,KAAK,SACd,CAGA,mBAAoC,CAClC,MAAMkC,EAAa,KAAK,UAAU,cAAc,YAC1C1D,EAAe0D,EAAa,EAAI,KAAK,UAAU,cAAc,WAAaA,EAAa,EACvF3D,GAAmB,KAAK,IAAA,EAAQ,KAAK,iBAAiB,QAAA,IAAc,IAAO,IAEjF,MAAO,CACL,iBAAkB2D,EAClB,WAAY,KAAK,UAAU,cAAc,WACzC,aAAc,KAAK,MAAM1D,CAAY,EACrC,UAAW,KAAK,UAAU,cAAc,UACxC,mBAAoB,KAAK,UAAU,cAAc,mBACjD,oBAAqB,KAAK,UAAU,cAAc,oBAClD,sBAAuB,KAAK,UAAU,cAAc,sBACpD,iBAAkB,KAAK,UAAU,eACjC,mBAAoB,KAAK,sBAAA,EACzB,iBAAkB,KAAK,UAAU,iBAGjC,kBAAmB,KAAK,UAAU,cAAc,kBAChD,qBAAsB,KAAK,UAAU,cAAc,aAAa,OAAOr0D,GAAKA,EAAE,UAAU,EAGxF,cAAe,KAAK,UAAU,cAAc,cAAgBo0D,EAC5D,eAAgB,KAAK,IAAI,KAAK,UAAU,cAAc,eAAgBA,CAAe,EACrF,qBAAsB2D,EAAa,GAAK,KAAK,UAAU,cAAc,cAAgB3D,GAAmB2D,EAAa,EAGrH,oBAAqB,KAAK,UAAU,kBACpC,eAAgB,KAAK,eAAe,wBAAA,EAGpC,gBAAiB,KAAK,UAAU,gBAChC,sBAAuB,CACrB,mBAAoB,KAAK,4BAAA,EACzB,iBAAkB,KAAK,UAAU,gBAAgB,aACjD,gBAAiB,KAAK,gCAAA,EACtB,qBAAsB,KAAK,8BAAA,CAA8B,CAC3D,CAEJ,CAGQ,wBAAoC,CAC1C,MAAO,CACL,UAAW,UACX,aAAc,EACd,eAAgB,KAAK,SAAS,kBAC9B,cAAe,EACf,YAAa,EACb,eAAgB,EAChB,iBAAkB,EAGlB,kBAAmB,EACnB,sBAAuB,KAAK,eAAe,iBAAiB,OAC5D,iBAAkB,IAGlB,kBAAmB,OACnB,mBAAoB,EACpB,qBAAsB,EAGtB,cAAe,KAAK,oBAAA,EAGpB,YAAa,CAAA,EACb,iBAAkB,KAAK,8BAAA,EAGvB,eAAgB,GAChB,aAAc,EAGd,eAAgB,KAAK,4BAAA,EACrB,gBAAiB,KAAK,6BAAA,CAA6B,CAEvD,CAEQ,qBAA8B,CACpC,MAAO,CACL,GAAI,iBACJ,SAAU,mBACV,MAAO,EACP,WAAY,EACZ,UAAW,EACX,YAAa,EACb,mBAAoB,EACpB,oBAAqB,EACrB,sBAAuB,EACvB,iBAAkB,KAAK,8BAAA,EAGvB,aAAc3C,GAAa,IAAIP,IAAgB,CAC7C,GAAGA,EACH,WAAY,GACZ,WAAY,MAAA,EACZ,EACF,kBAAmB,EAGnB,wBAAyB,KACzB,eAAgB,EAChB,cAAe,EAGf,eAAgB,KAAK,4BAAA,EACrB,gBAAiB,KAAK,6BAAA,CAA6B,CAEvD,CAEQ,+BAAiE,CACvE,MAAO,CACL,WAAY,EACZ,YAAa,EACb,cAAe,EACf,eAAgB,EAChB,UAAa,EACb,WAAc,EACd,iBAAkB,EAClB,kBAAmB,EACnB,mBAAoB,EACpB,cAAe,EACf,iBAAkB,EAClB,uBAAwB,EACxB,cAAe,EACf,SAAY,EACZ,mBAAoB,CAAA,CAExB,CAEQ,6BAA8C,CACpD,MAAO,CACL,gBAAiB,CAAA,EACjB,gBAAiB,KAAK,8BAAA,EACtB,sBAAuB,CAAE,KAAM,EAAG,OAAQ,EAAG,KAAM,CAAA,EACnD,aAAc,CACZ,aAAc,aACd,cAAe,EACf,iBAAkB,GAClB,kBAAmB,CAAA,EACnB,mBAAoB,CAAA,CAAC,EAEvB,gBAAiB,KAAK,6BAAA,CAA6B,CAEvD,CAEQ,8BAAgD,CACtD,MAAO,CACL,WAAY,EACZ,aAAc,EACd,cAAe,EACf,qBAAsB,OACtB,kBAAmB,CAAA,EACnB,mBAAoB,CAAA,CAAC,CAEzB,CAEQ,aAAuB,CAC7B,MAAMtE,EAAkB,CAAA,EACxB,IAAIkC,EAAU,EAGd,MAAMoD,EAAgB,KAAK,eAAe,iBAAA,EACtCA,EAAc,SAAW,IAE3B,KAAK,eAAe,aAAa,MAAA,EACjCA,EAAc,KAAK,GAAG,KAAK,eAAe,gBAAgB,GAI5D,QAASmC,EAAQ,EAAGA,GAAS,GAAIA,IAAS,CACxC,MAAMC,EAAgBD,IAAU,GAAK,EAAI,EAEzC,QAASE,EAAW,EAAGA,GAAYD,EAAeC,IAAY,CAE5D,MAAM5F,EAAU,KAAK,mBAAmBuD,EAAemC,EAAOE,CAAQ,EAGtE,IAAIC,EAAU,EACVF,IAAkB,IAEpBE,GAAWD,EAAW,GAAK,KAI7B,MAAME,EAA0C,CAC9CD,GACC,GAAKH,GAAS,GACfA,EAAQ,IAAM,EAAI,EAAI,GAAA,EAGxBzH,EAAO,KAAK,CACV,GAAI,SAASkC,GAAS,GACtB,KAAM,WACN,QAAAH,EACA,UAAW,GACX,MAAA0F,EACA,SAAAE,EACA,cAAAE,EACA,SAAU9F,EAAQ,SAClB,WAAYA,EAAQ,WACpB,aAAc,EAAA,CACf,CACH,CACF,CAEA,OAAO/B,CACT,CAIQ,mBAAmB8H,EAAkCL,EAAeE,EAAgC,CAE1G,IAAII,EACAN,GAAS,EACXM,EAAmB,OACVN,GAAS,GAClBM,EAAmB,SAEnBA,EAAmB,OAIrB,MAAMC,EAAoBF,EAAiB,OAAO/F,GAChDA,EAAQ,aAAegG,CAAA,EAInBE,EAAcD,EAAkB,OAAS,EAAIA,EAAoBF,EAIjEt8D,GADOi8D,EAAQ,IAAME,GACNM,EAAY,OACjC,OAAOA,EAAYz8D,CAAK,CAC1B,CAEQ,mBAA0B,SAE5B,KAAK,UAAU,mBAAqB,GAAK,KAAK,UAAU,eAAiB,KAAK,SAAS,oBAAoB,uBAC7G,KAAK,kBAAkB,eAAe,EAIpC,KAAK,UAAU,gBAAkB,KAAK,SAAS,oBAAoB,mBACrE,KAAK,kBAAkB,UAAU,GAI/ByT,EAAA,KAAK,UAAU,iBAAf,MAAAA,EAA+B,aAC/BkF,EAAA,KAAK,UAAU,iBAAf,MAAAA,EAA+B,eAC/B,KAAK,UAAU,eAAe,cAAgB,KAAK,SAAS,oBAAoB,sBAClF,KAAK,kBAAkB,cAAc,EAInC,KAAK,UAAU,oBAAsB,GACvC,KAAK,kBAAkB,oBAAoB,EAIzC,KAAK,UAAU,gBAAkB,KAAK,SAAS,oBAAoB,0BACnE,KAAK,UAAU,eAAiB,GAClC,KAAK,kBAAkB,kBAAkB,EAIhB,OAAO,OAAO,KAAK,UAAU,gBAAgB,EAAE,OAAOunB,GAAYA,EAAW,CAAC,EAAE,QACjF,GAAK,KAAK,UAAU,gBAAkB,IAC9D,KAAK,kBAAkB,mBAAmB,EAIxC,KAAK,UAAU,gBAAgB,YAAc,KAAK,SAAS,oBAAoB,yBAC/E,KAAK,UAAU,gBAAkB,IACnC,KAAK,kBAAkB,iBAAiB,CAE5C,CAEQ,kBAAkBw8B,EAA6B,CACrD,MAAM5D,EAAc,KAAK,UAAU,cAAc,aAAa,KAAK70D,GAAKA,EAAE,KAAOy4D,CAAa,EAC1F5D,GAAe,CAACA,EAAY,aAC9BA,EAAY,WAAa,GACzBA,EAAY,eAAiB,KAC7B,KAAK,UAAU,cAAc,oBAC7B,KAAK,UAAU,cAAc,OAASA,EAAY,OAClD,KAAK,UAAU,cAAgBA,EAAY,OAE3C,QAAQ,IAAI,4BAA4BA,EAAY,IAAI,MAAMA,EAAY,WAAW,EAAE,EAE3F,CAEQ,eACNj4D,EACAkD,EACA44D,EACA3C,EACAzD,EACM,CACN,MAAMiC,EAAiB,CACrB,GAAI,QAAQ,KAAK,IAAA,CAAK,GACtB,QAAS,KAAK,UAAU,iBAAmB,GAC3C,OAAA33D,EACA,OAAAkD,EACA,OAAA44D,EACA,gBAAA3C,EACA,cAAe,KACf,QAAAzD,EACA,WAAY,KAAK,UAAU,iBAAA,EAG7B,KAAK,UAAU,YAAY,KAAKiC,CAAI,CACtC,CAEQ,uBAA2C,CACjD,OAAO,OAAO,QAAQ,KAAK,UAAU,gBAAgB,EAClD,OAAO,CAAC,CAACryD,EAAG+5B,CAAQ,IAAMA,GAAY,CAAC,EACvC,IAAI,CAAC,CAACw4B,EAAUvyD,CAAC,IAAMuyD,CAA2B,CACvD,CAEQ,6BAAsC,CAE5C,MAAMv3D,EAAU,KAAK,UAAU,eAAe,gBAC9C,GAAIA,EAAQ,OAAS,GAAI,MAAO,GAEhC,MAAMy7D,EAASz7D,EAAQ,MAAM,GAAG,EAC1B07D,EAAQ17D,EAAQ,MAAM,IAAK,GAAG,EAE9Bs6D,EAAiBmB,EAAO,OAAO38C,GAAKA,EAAE,SAAS,EAAE,OAAS28C,EAAO,OACjEE,EAAgBD,EAAM,OAAO58C,GAAKA,EAAE,SAAS,EAAE,OAAS48C,EAAM,OAEpE,OAAO,KAAK,IAAI,GAAIpB,EAAiBqB,GAAiB,GAAG,CAC3D,CAEQ,iCAA0C,CAChD,MAAMC,EAAY,OAAO,OAAO,KAAK,UAAU,eAAe,eAAe,EAC7E,OAAOA,EAAU,OAAO,CAACxE,EAAKuD,IAAYvD,EAAMuD,EAAS,CAAC,EAAIiB,EAAU,MAC1E,CAEQ,+BAAwC,CAC9C,MAAMC,EAAe,OAAO,OAAO,KAAK,UAAU,eAAe,qBAAqB,EACtF,OAAOA,EAAa,OAAO,CAACzE,EAAK0E,IAAS1E,EAAM0E,EAAM,CAAC,EAAID,EAAa,MAC1E,CAGA,oBAA2B,CACzB,KAAK,mBAAqB,IAC5B,CACF,CAEO,MAAME,GAAsB,IAAInD,GCn8BvC,MAAMoD,WAA0BnuD,GAAM,SAGpC,CACA,YAAY3D,EAAsC,CAChD,MAAMA,CAAK,EACX,KAAK,MAAQ,CAAE,SAAU,EAAA,CAC3B,CAEA,OAAO,yBAAyB9J,EAAc,CAC5C,MAAO,CAAE,SAAU,GAAM,MAAAA,CAAA,CAC3B,CAEA,kBAAkBA,EAAc+J,EAA4B,CAC1D,QAAQ,MAAM,uCAAwC/J,EAAO+J,CAAS,CACxE,CAEA,QAAS,OACP,OAAI,KAAK,MAAM,eAEV,MAAA,CAAI,UAAU,iHACb,SAAAsnD,EAAAA,KAAC,MAAA,CAAI,UAAU,2FACb,SAAA,CAAA/zC,EAAAA,IAAC,MAAA,CAAI,UAAU,gBAAgB,SAAA,KAAE,EACjCA,EAAAA,IAAC,KAAA,CAAG,UAAU,qCAAqC,SAAA,sBAAmB,EACtEA,EAAAA,IAAC,IAAA,CAAE,UAAU,qBAAqB,SAAA,0EAElC,EACAA,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM,OAAO,SAAS,OAAA,EAC/B,UAAU,gGACX,SAAA,aAAA,CAAA,EAGD+zC,EAAAA,KAAC,MAAA,CAAI,UAAU,6BAA6B,SAAA,CAAA,WAClCn/C,EAAA,KAAK,MAAM,QAAX,YAAAA,EAAkB,OAAA,CAAA,CAC5B,CAAA,CAAA,CACF,CAAA,CACF,EAIG,KAAK,MAAM,QACpB,CACF,CAEA,MAAM2pD,GAAqB,IAAM,CAC/B,KAAM,CAAC1I,EAAW2I,CAAY,EAAIvN,EAAAA,SAA2B,IAAI,EAC3D,CAAC0E,EAAQ8I,CAAS,EAAIxN,EAAAA,SAAkB,CAAA,CAAE,EAC1C,CAACyN,EAAgBC,CAAiB,EAAI1N,EAAAA,SAA8B,IAAI,EACxE,CAAC2N,EAAkBC,CAAmB,EAAI5N,EAAAA,SAAS,EAAK,EACxD,CAAC6N,EAAUC,CAAW,EAAI9N,EAAAA,SAAS,EAAK,EACxC,CAACmD,EAAcC,CAAe,EAAIpD,EAAAA,SAAS,EAAK,EAChD,CAAC+N,EAAWC,CAAY,EAAIhO,EAAAA,SAAS,EAAK,EAC1C,CAACiO,EAAoBC,CAAqB,EAAIlO,EAAAA,SAAS,EAAK,EAC5D,CAACmO,EAAeC,CAAgB,EAAIpO,EAAAA,SAAS,EAAK,EAClD,CAAC6E,EAAiBwJ,CAAkB,EAAIrO,EAAAA,SAA6B,MAAS,EAG9E,CAAC2G,EAAU2H,CAAW,EAAItO,EAAAA,SAAS,EAAK,EAGxC,CAACuO,EAA6BC,CAA8B,EAAIxO,EAAAA,SAAS,EAAK,EAC9E,CAACyO,EAAiBC,CAAkB,EAAI1O,EAAAA,SAA6B,IAAI,EAGzE,CAAE,SAAA0D,EAAU,cAAAM,CAAA,EAAkBP,GAAA,EAGpCjtC,EAAAA,UAAU,IAAM,EACS,IAAM,CAC3B,GAAI,CACF,MAAMm4C,EAAevB,GAAoB,eAAA,EACnCwB,GAAYxB,GAAoB,UAAA,EAEtCG,EAAaoB,CAAY,EACzBnB,EAAUoB,EAAS,EAEnB,QAAQ,IAAI,uBAAwB,CAAE,UAAWD,EAAc,OAAQC,GAAU,OAAQ,CAC3F,OAASn9D,EAAO,CACd,QAAQ,MAAM,8BAA+BA,CAAK,CACpD,CACF,GAEA,CACF,EAAG,CAAA,CAAE,EAGL,MAAMg0D,GAAmB3tC,cAAY,MAAO0tC,GAAiB,CAC3D,GAAI,GAACZ,GAAaY,EAAM,WAExB,GAAI,CACF,QAAQ,IAAI,oBAAqBA,EAAM,GAAIA,EAAM,IAAI,EAGrD,MAAMiB,EAAU2G,GAAoB,iBAAiB5H,EAAM,EAAE,EAC7D,GAAI,CAACiB,EAAS,CACZ,QAAQ,IAAI,iCAAkCjB,EAAM,EAAE,EACtD,MACF,CAEAkI,EAAkBjH,CAAO,EACzB4H,EAAmB7I,EAAM,EAAE,EAGvBiB,EAAQ,OAAS,YACnB6H,EAAY,EAAI,EAChBV,EAAoB,EAAI,EAExBR,GAAoB,mBAAA,IAGpBkB,EAAY,EAAK,EACjBV,EAAoB,EAAI,EAG5B,OAASn8D,EAAO,CACd,QAAQ,MAAM,iCAAkCA,CAAK,CACvD,CACF,EAAG,CAACmzD,CAAS,CAAC,EAKRiK,GAAmB/2C,EAAAA,YAAY,MAAO8uC,EAAiBC,IAA2B,CACtF,GAAKjC,EAEL,GAAI,CACF,QAAQ,IAAI,4BAA6B,CAAE,QAAAgC,EAAS,eAAAC,EAAgB,EAGpE,MAAMyD,GAAa8C,GAAoB,iBAAiBxG,EAASC,CAAc,EAGzEiI,EAAmB1B,GAAoB,aAAA,EACvC2B,GAAgB3B,GAAoB,UAAA,EAC1CG,EAAauB,CAAgB,EAC7BtB,EAAUuB,EAAa,EAGvBT,EAAY,EAAK,EAEjB,QAAQ,IAAI,iBAAkBhE,EAAU,EACxC,QAAQ,IAAI,wBAAyBwE,EAAiB,cAAc,EACpE,QAAQ,IAAI,qBAAsBA,EAAiB,aAAa,EAIhE,MAAME,GADsBF,EAAiB,cAAc,aAChB,KAAK36D,IAC9CA,GAAE,YAAcA,GAAE,YAClB,KAAK,MAAQA,GAAE,WAAW,QAAA,EAAY,GAAA,EAGpC66D,KACFN,EAAmBM,EAAc,EACjCR,EAA+B,EAAI,EACnC,WAAW,IAAMA,EAA+B,EAAK,EAAG,GAAI,GAI1DM,EAAiB,YAAc,aACjC,QAAQ,IAAI,qDAAqD,CAIrE,OAASr9D,GAAO,CACd,QAAQ,MAAM,iCAAkCA,EAAK,CACvD,CACF,EAAG,CAACmzD,CAAS,CAAC,EAGRqK,EAA0Bn3C,EAAAA,YAAY,IAAM,CAChD81C,EAAoB,EAAK,EACzBU,EAAY,EAAK,EACjBD,EAAmB,MAAS,EAC5BX,EAAkB,IAAI,CACxB,EAAG,CAAA,CAAE,EAGCwB,GAAkBp3C,EAAAA,YAAY,IAAM,CACxC,GAAI,CACF,MAAM62C,EAAevB,GAAoB,UAAA,EACnCwB,EAAYxB,GAAoB,UAAA,EAEtCG,EAAaoB,CAAY,EACzBnB,EAAUoB,CAAS,EACnBhB,EAAoB,EAAK,EACzBU,EAAY,EAAK,EACjBJ,EAAsB,EAAK,EAC3BG,EAAmB,MAAS,EAC5BX,EAAkB,IAAI,EAEtB,QAAQ,IAAI,4BAA4B,CAC1C,OAASj8D,EAAO,CACd,QAAQ,MAAM,2BAA4BA,CAAK,CACjD,CACF,EAAG,CAAA,CAAE,EAGC09D,EAAkBr3C,EAAAA,YAAY,IAAM,CACxCo2C,EAAsB,EAAK,EAC3BgB,GAAA,CACF,EAAG,CAACA,EAAe,CAAC,EAGdE,GAAoBt3C,EAAAA,YAAY,IAAM,CAC1C,QAAQ,IAAI,wCAAwC,EACpDo3C,GAAA,CACF,EAAG,CAACA,EAAe,CAAC,EAiBpB,MAAI,CAACtK,GAAa,CAACF,EAAO,aAErB,MAAA,CAAI,UAAU,6GACb,SAAA5B,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAA/zC,EAAAA,IAAC,MAAA,CAAI,UAAU,gGAAA,CAAiG,EAChHA,EAAAA,IAAC,MAAA,CAAI,UAAU,sCAAsC,SAAA,2BAAwB,EAC7EA,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,0CAAA,CAAwC,CAAA,CAAA,CACjF,CAAA,CACF,EAKFA,EAAAA,IAACs+C,GAAA,CACC,SAAAvK,EAAAA,KAAC,MAAA,CAAI,UAAU,4EAEb,SAAA,CAAA/zC,EAAAA,IAAC,SAAA,CAAO,UAAU,sEAChB,SAAAA,EAAAA,IAAC,MAAA,CAAI,UAAU,8BACb,SAAA+zC,OAAC,MAAA,CAAI,UAAU,oCAEb,SAAA,CAAAA,EAAAA,KAACnD,EAAO,OAAP,CACC,WAAY,CAAE,MAAO,IAAA,EACrB,SAAU,CAAE,MAAO,GAAA,EACnB,QAAS,IAAM,OAAO,QAAQ,KAAA,EAC9B,UAAW,4EACTqE,EAAgB,UAAY,EAC9B,GAEA,SAAA,CAAAj1C,EAAAA,IAACgG,GAAA,CAAU,UAAWivC,EAAgB,UAAY,UAAW,EAC5D,CAACA,GAAiB,cAAA,CAAA,CAAA,EAIrBlB,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAA/zC,EAAAA,IAAC,MAAG,UAAW,wBACbi1C,EAAgB,UAAY,UAC9B,GAAI,SAAA,eAAA,CAAa,EACjBj1C,EAAAA,IAAC,KAAE,UAAW,iBACZi1C,EAAgB,UAAY,SAC9B,GAAI,SAAA,oCAAA,CAAkC,CAAA,EACxC,SAGC,MAAA,CAAI,UAAW,2BACdA,EAAgB,QAAU,EAC5B,GACE,SAAA,CAAAj1C,EAAAA,IAAC4wC,EAAO,OAAP,CACC,WAAY,CAAE,MAAO,IAAA,EACrB,SAAU,CAAE,MAAO,GAAA,EACnB,QAAS,IAAMqO,EAAa,EAAI,EAChC,UAAW,sDACThK,EAAgB,MAAQ,KAC1B,GACA,MAAM,kBAEN,SAAAj1C,EAAAA,IAACkG,GAAA,CAAU,UAAW+uC,EAAgB,UAAY,SAAA,CAAW,CAAA,CAAA,EAG/Dj1C,EAAAA,IAAC4wC,EAAO,OAAP,CACC,WAAY,CAAE,MAAO,IAAA,EACrB,SAAU,CAAE,MAAO,GAAA,EACnB,QAAS,IAAMmO,EAAY,EAAI,EAC/B,UAAW,oDACT9J,EAAgB,MAAQ,KAC1B,GACA,MAAM,YAEN,SAAAj1C,EAAAA,IAACwG,GAAA,CAAW,UAAWyuC,EAAgB,UAAY,SAAA,CAAW,CAAA,CAAA,EAGhEj1C,EAAAA,IAAC4wC,EAAO,OAAP,CACC,WAAY,CAAE,MAAO,IAAA,EACrB,SAAU,CAAE,MAAO,GAAA,EACnB,QAAS,IAAMyD,EAAgB,EAAI,EACnC,UAAW,qDACTY,EAAgB,MAAQ,KAC1B,GACA,MAAM,gBAEN,SAAAj1C,EAAAA,IAACoG,GAAA,CAAM,UAAW6uC,EAAgB,UAAY,SAAA,CAAW,CAAA,CAAA,CAC3D,CAAA,CACF,CAAA,CAAA,CACF,EACF,EACF,QAGC,MAAA,CAAI,UAAU,kEACb,SAAAlB,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,+DACb,SAAA,CAAA/zC,EAAAA,IAAC,QAAK,SAAA,mBAAA,CAAiB,SACtB,OAAA,CAAM,SAAA,CAAA61C,EAAU,kBAAkB,IAAEA,EAAU,sBAAsB,WAAA,CAAA,CAAS,CAAA,EAChF,EACA71C,EAAAA,IAAC,MAAA,CAAI,UAAU,sCACb,SAAAA,EAAAA,IAAC,MAAA,CACC,UAAU,4FACV,MAAO,CAAE,MAAO,GAAI61C,EAAU,kBAAoBA,EAAU,sBAAyB,GAAG,GAAA,CAAI,CAAA,CAC9F,CACF,CAAA,CAAA,CACF,CAAA,CACF,QAGC,MAAA,CAAI,UAAU,yCACb,SAAA71C,EAAAA,IAAC,OAAI,UAAU,oBACb,SAAA+zC,OAAC,MAAA,CAAI,UAAW,0BACdkB,EAAgB,oBAChBN,EAAW,oBACX,kCACF,GACE,SAAA,CAAAZ,OAAC,MAAA,CACC,SAAA,CAAA/zC,EAAAA,IAAC,MAAA,CAAI,UAAW,6BACdi1C,EAAgB,YAAc,SAChC,GAAK,WAAU,YAAA,CAAa,EAC5Bj1C,EAAAA,IAAC,OAAI,UAAW,wBAEZ,SAAA,OAAA,CAAK,CAAA,EACX,SACC,MAAA,CACC,SAAA,CAAA+zC,OAAC,OAAI,UAAW,4BACdkB,EAAgB,YAAc,SAChC,GAAK,SAAA,CAAAY,EAAU,eAAe,GAAA,EAAC,EAC/B71C,EAAAA,IAAC,OAAI,UAAW,wBAEZ,SAAA,WAAA,CAAS,CAAA,EACf,EACC,CAACi1C,GACAlB,EAAAA,KAAAyD,EAAAA,SAAA,CACE,SAAA,CAAAzD,OAAC,MAAA,CACC,SAAA,CAAA/zC,EAAAA,IAAC,MAAA,CAAI,UAAW,2BACd20C,EAAW,YAAc,SAC3B,GAAK,WAAU,iBAAA,CAAkB,EACjC30C,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,YAAA,CAAU,CAAA,EACnD,SACC,MAAA,CACC,SAAA,CAAAA,EAAAA,IAAC,MAAA,CAAI,UAAW,6BACd20C,EAAW,YAAc,SAC3B,GAAK,SAAAkB,EAAU,cAAc,iBAAA,CAAkB,EAC/C71C,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,cAAA,CAAY,CAAA,CAAA,CACrD,CAAA,CAAA,CACF,CAAA,CAAA,CAEJ,EACF,EACF,EAGA+zC,EAAAA,KAAC,OAAA,CAAK,UAAU,kBAEd,SAAA,CAAA/zC,EAAAA,IAAC01C,GAAA,CACC,OAAAC,EACA,aAAce,GACd,UAAAb,EACA,gBAAAC,EACA,cAAeuK,EAAA,CAAA,EAIjBtM,EAAAA,KAAC,MAAA,CAAI,UAAU,gCACb,SAAA,CAAA/zC,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMq/C,EAAiB,CAACD,CAAa,EAC9C,UAAU,+GACV,MAAM,aAEN,SAAArL,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAA/zC,EAAAA,IAAC,MAAA,CAAI,UAAU,sCAAsC,SAAA,IAAC,EACtDA,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,MAAA,CAAI,CAAA,CAAA,CAC7C,CAAA,CAAA,EAILo/C,SACE,MAAA,CAAI,UAAU,uHACb,SAAArL,EAAAA,KAAC,MAAA,CAAI,UAAU,kCACb,SAAA,CAAA/zC,EAAAA,IAAC,MAAA,CAAI,UAAU,gCAAgC,SAAA,cAAW,EAC1DA,EAAAA,IAAC,OAAI,SAAA,wCAAA,CAAsC,EAC3CA,EAAAA,IAAC,OAAI,SAAA,oDAAA,CAAkD,EACvDA,EAAAA,IAAC,OAAI,SAAA,yCAAA,CAAuC,EAC5CA,EAAAA,IAAC,OAAI,SAAA,yCAAA,CAAuC,EAC5CA,EAAAA,IAAC,OAAI,SAAA,8CAAA,CAA4C,CAAA,CAAA,CACnD,CAAA,CACF,CAAA,CAAA,CAEA,CAAA,EAGF,EAGCw/C,GAA+BE,GAC9B1/C,EAAAA,IAAC4wC,EAAO,IAAP,CACC,QAAS,CAAE,QAAS,EAAG,EAAG,IAAK,MAAO,EAAA,EACtC,QAAS,CAAE,QAAS,EAAG,EAAG,EAAG,MAAO,CAAA,EACpC,KAAM,CAAE,QAAS,EAAG,EAAG,IAAK,MAAO,EAAA,EACnC,UAAU,sJAEV,SAAAmD,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAA/zC,EAAAA,IAAC,MAAA,CAAI,UAAU,WAAY,SAAA0/C,EAAgB,KAAK,SAC/C,MAAA,CACC,SAAA,CAAA1/C,EAAAA,IAAC,MAAA,CAAI,UAAU,uBAAwB,SAAA0/C,EAAgB,KAAK,EAC5D1/C,EAAAA,IAAC,MAAA,CAAI,UAAU,0BAA2B,WAAgB,YAAY,EACtE+zC,EAAAA,KAAC,MAAA,CAAI,UAAU,0BAA0B,SAAA,CAAA,IAAE2L,EAAgB,OAAO,SAAA,CAAA,CAAO,CAAA,CAAA,CAC3E,CAAA,CAAA,CACF,CAAA,CAAA,EAKJ1/C,EAAAA,IAACy3C,GAAA,CACC,QAASiH,EACT,OAAQE,EACR,QAASsB,EACT,aAAcJ,GACd,SAAAlI,EACA,UAAA/B,EACA,QAASC,CAAA,CAAA,EAIVgJ,SACElG,GAAA,CAAS,OAAQkG,EAAU,QAAS,IAAMC,EAAY,EAAK,EAAG,EAIhE3K,SACEV,GAAA,CAAa,OAAQU,EAAc,QAAS,IAAMC,EAAgB,EAAK,EAAG,EAI5E2K,GACCh/C,EAAAA,IAAC64C,GAAA,CACC,OAAQhD,EAAU,cAClB,WAAYwI,GAAoB,kBAAA,EAChC,QAAS,IAAMY,EAAa,EAAK,CAAA,CAAA,EAKpCC,GACCl/C,EAAAA,IAACi5C,GAAA,CACC,UAAApD,EACA,YAAaA,EAAU,YACvB,aAAcA,EAAU,cAAc,aACtC,YAAauK,EACb,QAAS,IAAMjB,EAAsB,EAAK,EAC1C,OAAQD,CAAA,CAAA,EAKXvK,GACC30C,EAAAA,IAACk6C,GAAA,CACC,QAASiG,GACT,OAAQ,IAAMpB,EAAY,EAAI,EAC9B,WAAY,IAAM1K,EAAgB,EAAI,CAAA,CAAA,CACxC,CAAA,CAEJ,CAAA,CACF,CAEJ,ECxfA,SAASiM,IAAM,CACb,cACG7wD,GAAA,CACC,SAAA,CAAAuQ,MAACnR,IAAM,KAAK,IAAI,QAASmR,MAACk0C,KAAS,EAAI,QACtCrlD,GAAA,CAAM,KAAK,QAAQ,QAASmR,EAAAA,IAACu+C,KAAS,CAAA,CAAI,CAAA,EAC7C,CAEJ,CCFA,MAAMgC,GAAc,IAAIvhD,GAAY,CAClC,eAAgB,CACd,QAAS,CACP,MAAO,EACP,qBAAsB,GACtB,UAAW,EAAI,GAAK,GAAA,CACtB,CAEJ,CAAC,EAGD,QAAQ,IAAI,qCAAqC,EACjD,QAAQ,IAAI,uBAAwB,OAAO,SAAS,IAAI,EACxD,QAAQ,IAAI,uBAAyB,YAA4B,EACjE,QAAQ,IAAI,wBAAyD,gBAAsB,EAE3FwhD,GAAS,WAAW,SAAS,eAAe,MAAM,CAAE,EAAE,aACnDrwD,GAAM,WAAN,CACC,eAAC4P,GAAA,CAAoB,OAAQwgD,GAC3B,gBAACnwD,IAAc,SAA0C,iBACvD,SAAA,CAAA4P,EAAAA,IAACsgD,GAAA,EAAI,EACLtgD,EAAAA,IAACygD,GAAA,CACC,SAAS,YACT,aAAc,CACZ,SAAU,IACV,MAAO,CACL,WAAY,UACZ,MAAO,UACP,aAAc,KAAA,EAEhB,QAAS,CACP,UAAW,CACT,QAAS,UACT,UAAW,SAAA,CACb,EAEF,MAAO,CACL,UAAW,CACT,QAAS,UACT,UAAW,SAAA,CACb,CACF,CACF,CAAA,CACF,CAAA,CACF,CAAA,CACF,EACF,CACF","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253]}